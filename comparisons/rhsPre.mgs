"on_load-bobsclub1" {
   // if sequence: if ("tuesdayd") { command "rtfm" = "command-rtfm"; }
   if "tuesdayd" then goto label if_true_115;
   goto label rendezvous_114;
   if_true_115:
   command "rtfm" = "command-rtfm";
   rendezvous_114:
   // if sequence: if (!"storyflag-bobmoss") { entity "Bob Moss" position = ...
   if !"storyflag-bobmoss" then goto label if_true_117;
   goto label rendezvous_116;
   if_true_117:
   entity "Bob Moss" position = geometry "bobsclub-hidingplace";
   entity "Bob Moss" name = " ";
   entity "Bob Moss" on_interact = "null_script";
   entity "Bob Moss" type = "exa";
   rendezvous_116:
   if !"bobsclub-entered" then goto script "show_dialog-bobsclub";
   end_of_script_113:
}

"show_dialog-bobsclub" {
   player_control = false;
   player position -> geometry "bob_path" origin over 500ms;
   wait 800ms;
   show dialog "ch1-bobsclub.mgs-22:1";
   player position -> geometry "bob_path" length over 3500ms;
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-30:1";
   wait 300ms;
   camera -> geometry "strongbad_camera" origin over 1200ms;
   wait 150ms;
   player direction = entity "Strong Bad";
   wait 200ms;
   entity "Guardian Bob" direction = entity "Strong Bad";
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-50:1";
   wait 200ms;
   camera -> player position over 700ms;
   wait 200ms;
   entity "Guardian Bob" direction = "south";
   show dialog "ch1-bobsclub.mgs-77:1";
   copy!("begin-flail")
   show dialog "ch1-bobsclub.mgs-82:1";
   copy!("end-flail")
   player_control = true;
   "bobsclub-entered" = true;
   if !"baker-backstory" then goto script "null_script";
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   show dialog "ch1-bobsclub.mgs-94:1";
   end_of_script_118:
}

"show_dialog-bobmoss-start" {
   copy!("face-player")
   // if sequence: if (self glitched) { copy!("show_dialog-bobmoss-deglitch"...
   if self glitched then goto label if_true_170;
   goto label rendezvous_169;
   if_true_170:
   copy!("show_dialog-bobmoss-deglitch")
   self on_interact = "show_dialog-bobmoss-start";
   rendezvous_169:
   if "storyflag-bobmoss" then goto script "show_dialog-bobmoss-start-s";
   show dialog "ch1-bobsclub.mgs-432:1";
   entity "Bob Moss" on_tick = "spin_self_clockwise";
   show dialog "ch1-bobsclub.mgs-436:1";
   entity "Bob Moss" on_tick = "null_script";
   copy!("face-player")
   show dialog "ch1-bobsclub.mgs-442:1";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   entity "Bob Moss" position = geometry "catwalk-hide";
   "storyflag-bobmoss" = true;
   copy!("calculate-hint-tracking-series")
   // if sequence: if ("hint-tracking-check" == 3) { // if the hint series i...
   if "hint-tracking-check" == 3 then goto label if_true_172;
   goto label rendezvous_171;
   if_true_172:
   copy!("set-hint-none")
   rendezvous_171:
   camera fade in -> #000000 over 500ms;
   player_control = true;
   end_of_script_168:
}

"show_dialog-verthandi-start" {
   copy!("face-player")
   if self glitched then goto script "show_dialog-verthandi-glitched";
   // if sequence: if ("storyflag-verthandi") { show dialog { SELF "Thank yo...
   if "storyflag-verthandi" then goto label if_true_394;
   "unglitch_count" = 0;
   // if sequence: if ("goldfish-unglitched") { "unglitch_count" += 1; }
   if "goldfish-unglitched" then goto label if_true_396;
   goto label rendezvous_395;
   if_true_396:
   "unglitch_count" += 1;
   rendezvous_395:
   // if sequence: if ("timmy-unglitched") { "unglitch_count" += 1; }
   if "timmy-unglitched" then goto label if_true_398;
   goto label rendezvous_397;
   if_true_398:
   "unglitch_count" += 1;
   rendezvous_397:
   // if sequence: if ("fountain-unglitched") { "unglitch_count" += 1; }
   if "fountain-unglitched" then goto label if_true_400;
   goto label rendezvous_399;
   if_true_400:
   "unglitch_count" += 1;
   rendezvous_399:
   // if sequence: if ("lodge_cat-unglitched") { "unglitch_count" += 1; }
   if "lodge_cat-unglitched" then goto label if_true_402;
   goto label rendezvous_401;
   if_true_402:
   "unglitch_count" += 1;
   rendezvous_401:
   // if sequence: if ("billy-unglitched") { "unglitch_count" += 1; }
   if "billy-unglitched" then goto label if_true_404;
   goto label rendezvous_403;
   if_true_404:
   "unglitch_count" += 1;
   rendezvous_403:
   // if sequence: if ("kid-unglitched") { "unglitch_count" += 1; }
   if "kid-unglitched" then goto label if_true_406;
   goto label rendezvous_405;
   if_true_406:
   "unglitch_count" += 1;
   rendezvous_405:
   // if sequence: if ("main_hamster-unglitched") { "unglitch_count" += 1; }
   if "main_hamster-unglitched" then goto label if_true_408;
   goto label rendezvous_407;
   if_true_408:
   "unglitch_count" += 1;
   rendezvous_407:
   "total_glitches" = 7;
   "total_glitches" -= "unglitch_count";
   // if sequence: if ("total_glitches" == 0) { if (!"verthandi-backstory") ...
   if "total_glitches" == 0 then goto label if_true_410;
   if "verthandi-backstory" then goto label if_true_415;
   // auto dialog: "Some time ago, the Big Bad brought chaos..."
   show dialog "ch1-goats.mgs-164:3";
   // if sequence: if (entity "Billy" glitched || entity "Kid" glitched) { s...
   if entity "Billy" glitched then goto label if_true_426;
   if entity "Kid" glitched then goto label if_true_426;
   // auto dialog: "These dear baby goats are back to normal..."
   show dialog "ch1-goats.mgs-175:4";
   "goats-both-unglitched" = true;
   goto label rendezvous_425;
   if_true_426:
   // auto dialog: "These dear baby goats were among his man..."
   show dialog "ch1-goats.mgs-169:4";
   rendezvous_425:
   "verthandi-backstory" = true;
   copy!("set-hint-glitch")
   goto label rendezvous_393;
   if_true_415:
   // if sequence: if ("goats-both-unglitched") { if ("total_glitches" == 1)...
   if "goats-both-unglitched" then goto label if_true_417;
   if entity "Billy" glitched then goto label if_true_424;
   if entity "Kid" glitched then goto label if_true_424;
   // auto dialog: "You've restored the baby goats! Oh, than..."
   show dialog "ch1-goats.mgs-156:4";
   "goats-both-unglitched" = true;
   if_true_424:
   // auto dialog: "Oh, won't you help the baby goats?..."
   show dialog "ch1-goats.mgs-154:4";
   if_true_417:
   // if sequence: if ("total_glitches" == 1) { show dialog { SELF "I hear o...
   if "total_glitches" == 1 then goto label if_true_419;
   // auto dialog: "I can hear the cries of $total_glitches$..."
   show dialog "ch1-goats.mgs-144:5";
   goto label rendezvous_418;
   if_true_419:
   // auto dialog: "I hear one more glitched soul that needs..."
   show dialog "ch1-goats.mgs-142:5";
   rendezvous_418:
   // if sequence: if (!"timmy-unglitched" || !"lodge_cat-unglitched") { sho...
   if !"timmy-unglitched" then goto label if_true_421;
   if !"lodge_cat-unglitched" then goto label if_true_421;
   if !"main_hamster-unglitched" then goto label if_true_422;
   if !"fountain-unglitched" then goto label if_true_422;
   if !"goldfish-unglitched" then goto label if_true_423;
   goto label rendezvous_416;
   if_true_423:
   // auto dialog: "Perhaps... somewhere in your home?..."
   show dialog "ch1-goats.mgs-151:5";
   goto label rendezvous_416;
   if_true_422:
   // auto dialog: "Perhaps... somewhere outdoors?..."
   show dialog "ch1-goats.mgs-149:5";
   goto label rendezvous_416;
   if_true_421:
   // auto dialog: "Perhaps... somewhere in the library?..."
   show dialog "ch1-goats.mgs-147:5";
   rendezvous_416:
   copy!("set-hint-glitch")
   goto label rendezvous_393;
   if_true_410:
   // if sequence: if (!"verthandi-backstory") { show dialog { SELF "Oh! It ...
   if !"verthandi-backstory" then goto label if_true_412;
   // auto dialog: "You've restored everyone! Oh, how wonder..."
   show dialog "ch1-goats.mgs-128:4";
   goto label rendezvous_411;
   if_true_412:
   // auto dialog: "Oh! It appears you've already restored e..."
   show dialog "ch1-goats.mgs-123:4";
   rendezvous_411:
   copy!("calculate-hint-tracking-series")
   // if sequence: if ("hint-tracking-check" == 11) { copy!("set-hint-none")...
   if "hint-tracking-check" == 11 then goto label if_true_414;
   goto label rendezvous_413;
   if_true_414:
   copy!("set-hint-none")
   rendezvous_413:
   "storyflag-verthandi" = true;
   "goats-both-unglitched" = true;
   if_true_394:
   // auto dialog: "Thank you for everything you've done!..."
   show dialog "ch1-goats.mgs-107:2";
   rendezvous_393:
   goto "show_dialog-verthandi-wrapup";
   end_of_script_392:
}

"on_load-map-main" {
   // if sequence: if ("tuesdayd") { command "rtfm" = "command-rtfm"; }
   if "tuesdayd" then goto label if_true_706;
   goto label rendezvous_705;
   if_true_706:
   command "rtfm" = "command-rtfm";
   rendezvous_705:
   // if sequence: if (!"begunthegame") { "begunthegame" = true; hex_control...
   if !"begunthegame" then goto label if_true_708;
   goto label rendezvous_707;
   if_true_708:
   "begunthegame" = true;
   hex_control = false;
   camera fade in -> #000000 over 1ms;
   load map "magehouse";
   rendezvous_707:
   hex_control = true;
   // if sequence: if ("storyflag-bobmoss") { entity "Bob Moss" position = g...
   if "storyflag-bobmoss" then goto label if_true_710;
   goto label rendezvous_709;
   if_true_710:
   entity "Bob Moss" position = geometry "catwalk-hide";
   rendezvous_709:
   // if sequence: if ("storyflag-rake") { copy!("rake-in-lake") entity "Goo...
   if "storyflag-rake" then goto label if_true_712;
   goto label rendezvous_711;
   if_true_712:
   copy!("rake-in-lake")
   entity "Goose" on_interact = "honk-to-make-rake-float";
   rendezvous_711:
   // if sequence: if ("billy-unglitched") { entity "Billy" glitched = false...
   if "billy-unglitched" then goto label if_true_714;
   goto label rendezvous_713;
   if_true_714:
   entity "Billy" glitched = false;
   rendezvous_713:
   // if sequence: if ("kid-unglitched") { entity "Kid" glitched = false; }
   if "kid-unglitched" then goto label if_true_716;
   goto label rendezvous_715;
   if_true_716:
   entity "Kid" glitched = false;
   rendezvous_715:
   // if sequence: if ("fountain-unglitched") { entity "Fountain" glitched =...
   if "fountain-unglitched" then goto label if_true_718;
   goto label rendezvous_717;
   if_true_718:
   entity "Fountain" glitched = false;
   rendezvous_717:
   // if sequence: if ("main_hamster-unglitched") { entity "Hamster" glitche...
   if "main_hamster-unglitched" then goto label if_true_720;
   goto label rendezvous_719;
   if_true_720:
   entity "Hamster" glitched = false;
   rendezvous_719:
   // if sequence: if ("storyflag-shepherd") { copy!("sheep-in-pen") }
   if "storyflag-shepherd" then goto label if_true_722;
   goto label rendezvous_721;
   if_true_722:
   copy!("sheep-in-pen")
   rendezvous_721:
   // if sequence: if ("storyflag-bender") { copy!("bender-happybutt") }
   if "storyflag-bender" then goto label if_true_724;
   goto label rendezvous_723;
   if_true_724:
   copy!("bender-happybutt")
   rendezvous_723:
   if !"walked-to-lodge" then goto script "walk-to-lodge";
   player_control = false;
   // if sequence: if (!"hintman-explanation") { player position -> geometry...
   if !"hintman-explanation" then goto label if_true_726;
   if warp_state == "enter_from-east" then goto label if_true_727;
   if warp_state == "enter_from-west" then goto label if_true_728;
   if warp_state == "exit_from-bobsclub" then goto label if_true_729;
   if warp_state == "exit_from-bakery" then goto label if_true_730;
   if warp_state == "exit_from-lodge" then goto label if_true_731;
   if warp_state == "exit_from-greenhouse" then goto label if_true_732;
   if warp_state == "exit_from-magehouse" then goto label if_true_733;
   if warp_state == "exit_from-oldcouplehouse" then goto label if_true_734;
   if warp_state == "exit_from-family" then goto label if_true_735;
   if warp_state == "exit_from-woprhouse" then goto label if_true_736;
   if warp_state == "exit_from-credits" then goto label if_true_737;
   goto label rendezvous_725;
   if_true_737:
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   player_control = true;
   if !"ch1_finished" then goto script "null_script";
   if !"storyflag-catwork" then goto script "null_script";
   if !"storyflag-shepherd" then goto script "null_script";
   if !"storyflag-bender" then goto script "null_script";
   if !"storyflag-baker" then goto script "null_script";
   if !"storyflag-bobmoss" then goto script "null_script";
   if !"storyflag-bea1" then goto script "null_script";
   if !"storyflag-trekkie" then goto script "null_script";
   if !"storyflag-sportskid" then goto script "null_script";
   if !"storyflag-bea2" then goto script "null_script";
   if !"storyflag-rake" then goto script "null_script";
   if !"storyflag-verthandi" then goto script "null_script";
   if "demobonus-jackob-informed" then goto script "null_script";
   "demobonus" = true;
   // auto dialog: "While you were gone, I saw an odd flash ..."
   show dialog "ch1-map_main.mgs-132:2";
   "demobonus-jackob-informed" = true;
   goto label rendezvous_725;
   if_true_736:
   player position -> geometry "enter_from-woprhouse" length over 200ms;
   goto label rendezvous_725;
   if_true_735:
   player position -> geometry "enter_from-family" length over 200ms;
   goto label rendezvous_725;
   if_true_734:
   player position -> geometry "enter_from-oldcouplehouse" length over 200ms;
   goto label rendezvous_725;
   if_true_733:
   player position -> geometry "enter_from-magehouse" length over 200ms;
   goto label rendezvous_725;
   if_true_732:
   player position -> geometry "enter_from-greenhouse" length over 200ms;
   goto label rendezvous_725;
   if_true_731:
   player position -> geometry "enter_from-lodge" length over 200ms;
   goto label rendezvous_725;
   if_true_730:
   player position -> geometry "enter_from-bakery" length over 200ms;
   goto label rendezvous_725;
   if_true_729:
   player position -> geometry "enter_from-bobsclub" length over 200ms;
   goto label rendezvous_725;
   if_true_728:
   player position -> geometry "enter_from-west" length over 1000ms;
   goto label rendezvous_725;
   if_true_727:
   player position -> geometry "enter_from-east" length over 1000ms;
   goto label rendezvous_725;
   if_true_726:
   player position -> geometry "enter_from-lodge" length over 400ms;
   copy!("hintman-cutscene")
   "hintman-explanation" = true;
   rendezvous_725:
   player_control = true;
   end_of_script_704:
}

"show_dialog-bea-part1" {
   // if sequence: if (!"storyflag-bea1") { // you did NOT beat part1 if (en...
   if !"storyflag-bea1" then goto label if_true_863;
   // if sequence: if (entity "Delmar" type == "old_man") { show dialog { SE...
   if entity "Delmar" type == "old_man" then goto label if_true_873;
   if entity "Delmar" type == "sheep " then goto label if_true_874;
   if entity "Delmar" type == "helga" then goto label if_true_874;
   // auto dialog: "Oh, %Delmar%, you're... uh......."
   show dialog "ch1-oldcouplehouse.mgs-173:3";
   if_true_874:
   // auto dialog: "Oh! That's a nasty trick, %PLAYER%!..."
   show dialog "ch1-oldcouplehouse.mgs-167:3";
   if_true_873:
   // auto dialog: "Thank you, %PLAYER%!..."
   show dialog "ch1-oldcouplehouse.mgs-165:3";
   if_true_863:
   // if sequence: if (entity "Delmar" type == "old_man") { // win condition...
   if entity "Delmar" type == "old_man" then goto label if_true_865;
   // if sequence: if (!"bea1-backstory") { // you did NOT hear the backstor...
   if !"bea1-backstory" then goto label if_true_869;
   // auto dialog: "Oh, %Delmar%... we'll fix you up real so..."
   show dialog "ch1-oldcouplehouse.mgs-158:4";
   goto label rendezvous_868;
   if_true_869:
   // if sequence: if (entity "Delmar" type == "sheep "|| entity "Delmar" ty...
   if entity "Delmar" type == "sheep " then goto label if_true_871;
   if entity "Delmar" type == "helga" then goto label if_true_871;
   copy!("clear-own-tick")
   copy!("slow-stare-at-delmar")
   // auto dialog: "Oh, %Delmar%! You're... oh......."
   show dialog "ch1-oldcouplehouse.mgs-136:5";
   copy!("face-player")
   // auto dialog: "Oh, goodness. Well, this isn't my %Delma..."
   show dialog "ch1-oldcouplehouse.mgs-138:5";
   goto label rendezvous_870;
   if_true_871:
   // auto dialog: "Forty years ago, things were sure differ..."
   show dialog "ch1-oldcouplehouse.mgs-124:5";
   copy!("clear-own-tick")
   copy!("slow-stare-at-delmar")
   // auto dialog: "My husband was a real man! Not a farm an..."
   show dialog "ch1-oldcouplehouse.mgs-130:5";
   copy!("slow-stare-at-player")
   player_control = true;
   rendezvous_870:
   // auto dialog: "That ghastly hacker ruffian hacked him i..."
   show dialog "ch1-oldcouplehouse.mgs-143:4";
   "bea1-backstory" = true;
   rendezvous_868:
   copy!("set_tick-watch-player")
   copy!("set-hint-bea1")
   goto label rendezvous_862;
   if_true_865:
   player_control = false;
   copy!("clear-own-tick")
   copy!("slow-stare-at-delmar")
   player_control = true;
   // auto dialog: "Oh, %Delmar%, it's you! You're a man aga..."
   show dialog "ch1-oldcouplehouse.mgs-109:3";
   self direction = entity "Delmar";
   copy!("calculate-hint-tracking-series")
   // if sequence: if ("hint-tracking-check" == 4) { copy!("set-hint-none") ...
   if "hint-tracking-check" == 4 then goto label if_true_867;
   goto label rendezvous_866;
   if_true_867:
   copy!("set-hint-none")
   rendezvous_866:
   "bea1-backstory" = true;
   "storyflag-bea1" = true;
   rendezvous_862:
   entity "Beatrice" on_interact = "show_dialog-bea-start";
   end_of_script_861:
}

"show_dialog-bea-part2" {
   // if sequence: if (!"storyflag-bea2") { // !part2won if (entity "Delmar"...
   if !"storyflag-bea2" then goto label if_true_877;
   // if sequence: if (entity "Delmar" type == "sheep "|| entity "Delmar" ty...
   if entity "Delmar" type == "sheep " then goto label if_true_889;
   if entity "Delmar" type == "helga" then goto label if_true_889;
   if entity "Delmar" type == "old_man" then goto label if_true_890;
   // auto dialog: "Well, I suppose we could give this a try..."
   show dialog "ch1-oldcouplehouse.mgs-246:3";
   if_true_890:
   // auto dialog: "......."
   show dialog "ch1-oldcouplehouse.mgs-242:3";
   if_true_889:
   // auto dialog: "Peace at last!..."
   show dialog "ch1-oldcouplehouse.mgs-238:3";
   if_true_877:
   // if sequence: if (entity "Delmar" type == "sheep "|| entity "Delmar" ty...
   if entity "Delmar" type == "sheep " then goto label if_true_879;
   if entity "Delmar" type == "helga" then goto label if_true_879;
   // if sequence: if (entity "Delmar" type == "old_man") { if (!"bea2-backs...
   if entity "Delmar" type == "old_man" then goto label if_true_885;
   // auto dialog: "Oh, um......."
   show dialog "ch1-oldcouplehouse.mgs-227:4";
   if_true_885:
   // if sequence: if (!"bea2-backstory") { show dialog { SELF "...." "You k...
   if !"bea2-backstory" then goto label if_true_887;
   // auto dialog: "I'm sure he won't mind being a sheep aga..."
   show dialog "ch1-oldcouplehouse.mgs-221:5";
   goto label rendezvous_884;
   if_true_887:
   // auto dialog: "......."
   show dialog "ch1-oldcouplehouse.mgs-208:5";
   copy!("clear-own-tick")
   copy!("slow-stare-at-delmar")
   // auto dialog: "......."
   show dialog "ch1-oldcouplehouse.mgs-211:5";
   copy!("slow-stare-at-player")
   // auto dialog: "But now I find myself longing for quiet...."
   show dialog "ch1-oldcouplehouse.mgs-213:5";
   rendezvous_884:
   copy!("set_tick-watch-player")
   "bea2-backstory" = true;
   copy!("set-hint-bea2")
   goto label rendezvous_876;
   if_true_879:
   // if sequence: if (!"bea2-backstory") { show dialog { SELF "Oh! And I wa...
   if !"bea2-backstory" then goto label if_true_881;
   // auto dialog: "Thank you, child!..."
   show dialog "ch1-oldcouplehouse.mgs-193:4";
   goto label rendezvous_880;
   if_true_881:
   // auto dialog: "Oh! And I was just thinking how I wanted..."
   show dialog "ch1-oldcouplehouse.mgs-187:4";
   rendezvous_880:
   self direction = entity "Delmar";
   copy!("calculate-hint-tracking-series")
   // if sequence: if ("hint-tracking-check" == 9) { copy!("set-hint-none") ...
   if "hint-tracking-check" == 9 then goto label if_true_883;
   goto label rendezvous_882;
   if_true_883:
   copy!("set-hint-none")
   rendezvous_882:
   "bea2-backstory" = true;
   "storyflag-bea2" = true;
   rendezvous_876:
   entity "Beatrice" on_interact = "show_dialog-bea-start";
   end_of_script_875:
}

"ch2-interact-mainframe" {
   // if sequence: if ("ch2-wait-for-hat-touch") { player direction = entity...
   if "ch2-wait-for-hat-touch" then goto label if_true_1000;
   if "ch2-carrying-mainframeos" then goto label if_true_1001;
   if "ch2-installed-mainframeos" then goto label if_true_1002;
   if !"ch2-toot-done" then goto label if_true_1003;
   goto label rendezvous_999;
   if_true_1003:
   // auto dialog: "What is this hunk of junk?..."
   show dialog "ch2-admin.mgs-67:2";
   // auto return label
   goto label rendezvous_999;
   if_true_1002:
   show dialog "mainframe-working";
   // auto return label
   goto label rendezvous_999;
   if_true_1001:
   copy!("ch2-install-wizard")
   // auto return label
   goto label rendezvous_999;
   if_true_1000:
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   // auto dialog: "Um, how do I get the hex editor to come ..."
   show dialog "ch2-admin.mgs-52:2";
   // auto return label
   rendezvous_999:
   "temp" = false;
   // if sequence: if (entity "Wizard" current_animation == 0) { // WIZARD I...
   if entity "Wizard" current_animation == 0 then goto label if_true_1005;
   goto label rendezvous_1004;
   if_true_1005:
   entity "Wizard" on_tick = "tick-ch2-wizard-ascend-and-watch";
   rendezvous_1004:
   // if sequence: if (!"ch2-installed-heatsink") { if ("ch2-carrying-heatsi...
   if !"ch2-installed-heatsink" then goto label if_true_1009;
   if_true_1009:
   // if sequence: if ("ch2-carrying-heatsink") { show dialog { name "" "(No...
   if "ch2-carrying-heatsink" then goto label if_true_1011;
   goto label rendezvous_1008;
   if_true_1011:
   // auto dialog: "(Now installing... the heat sink!)..."
   show dialog "ch2-admin.mgs-78:3";
   "temp" = true;
   copy!("ch2-install-heatsink")
   rendezvous_1008:
   // if sequence: if (!"ch2-installed-powersupply") { if ("ch2-carrying-pow...
   if !"ch2-installed-powersupply" then goto label if_true_1015;
   if_true_1015:
   // if sequence: if ("ch2-carrying-powersupply") { show dialog { name "" "...
   if "ch2-carrying-powersupply" then goto label if_true_1017;
   goto label rendezvous_1014;
   if_true_1017:
   // auto dialog: "(Now installing... the power supply!)..."
   show dialog "ch2-admin.mgs-88:3";
   "temp" = true;
   copy!("ch2-install-powersupply")
   rendezvous_1014:
   // if sequence: if (!"ch2-installed-monitor") { if ("ch2-carrying-monitor...
   if !"ch2-installed-monitor" then goto label if_true_1021;
   if_true_1021:
   // if sequence: if ("ch2-carrying-monitor") { show dialog { name "" "(Now...
   if "ch2-carrying-monitor" then goto label if_true_1023;
   goto label rendezvous_1020;
   if_true_1023:
   // auto dialog: "(Now installing... the monitor!)..."
   show dialog "ch2-admin.mgs-98:3";
   "temp" = true;
   copy!("ch2-install-monitor")
   rendezvous_1020:
   // if sequence: if (!"ch2-installed-harddrive") { if ("ch2-carrying-hardd...
   if !"ch2-installed-harddrive" then goto label if_true_1027;
   if_true_1027:
   // if sequence: if ("ch2-carrying-harddrive") { show dialog { name "" "(N...
   if "ch2-carrying-harddrive" then goto label if_true_1029;
   goto label rendezvous_1026;
   if_true_1029:
   // auto dialog: "(Now installing... the hard drive!)..."
   show dialog "ch2-admin.mgs-109:3";
   "temp" = true;
   copy!("ch2-install-harddrive")
   rendezvous_1026:
   // if sequence: if (!"ch2-installed-keyboard") { if ("ch2-carrying-keyboa...
   if !"ch2-installed-keyboard" then goto label if_true_1033;
   if_true_1033:
   // if sequence: if ("ch2-carrying-keyboard") { show dialog { name "" "(No...
   if "ch2-carrying-keyboard" then goto label if_true_1035;
   goto label rendezvous_1032;
   if_true_1035:
   // auto dialog: "(Now installing... the keyboard!)..."
   show dialog "ch2-admin.mgs-119:3";
   "temp" = true;
   copy!("ch2-install-keyboard")
   rendezvous_1032:
   // if sequence: if (!"ch2-installed-mouse") { if ("ch2-carrying-mouse") {...
   if !"ch2-installed-mouse" then goto label if_true_1039;
   if_true_1039:
   // if sequence: if ("ch2-carrying-mouse") { show dialog { name "" "(Now i...
   if "ch2-carrying-mouse" then goto label if_true_1041;
   goto label rendezvous_1038;
   if_true_1041:
   // auto dialog: "(Now installing... the mouse!)..."
   show dialog "ch2-admin.mgs-129:3";
   "temp" = true;
   copy!("ch2-install-mouse")
   rendezvous_1038:
   // if sequence: if (!"ch2-installed-ramchips") { if ("ch2-carrying-ramchi...
   if !"ch2-installed-ramchips" then goto label if_true_1045;
   if_true_1045:
   // if sequence: if ("ch2-carrying-ramchips") { show dialog { name "" "(No...
   if "ch2-carrying-ramchips" then goto label if_true_1047;
   goto label rendezvous_1044;
   if_true_1047:
   // auto dialog: "(Now installing... the RAM chips!)..."
   show dialog "ch2-admin.mgs-140:3";
   "temp" = true;
   copy!("ch2-install-ramchips")
   rendezvous_1044:
   // if sequence: if (!"ch2-installed-clock") { if ("ch2-carrying-clock") {...
   if !"ch2-installed-clock" then goto label if_true_1051;
   if_true_1051:
   // if sequence: if ("ch2-carrying-clock") { show dialog { name "" "(Now i...
   if "ch2-carrying-clock" then goto label if_true_1053;
   goto label rendezvous_1050;
   if_true_1053:
   // auto dialog: "(Now installing... the grandfather clock..."
   show dialog "ch2-admin.mgs-150:3";
   "temp" = true;
   copy!("ch2-install-clock")
   rendezvous_1050:
   // if sequence: if (!"ch2-installed-cpu") { if ("ch2-carrying-cpu") { sho...
   if !"ch2-installed-cpu" then goto label if_true_1057;
   if_true_1057:
   // if sequence: if ("ch2-carrying-cpu") { show dialog { name "" "(Now ins...
   if "ch2-carrying-cpu" then goto label if_true_1059;
   goto label rendezvous_1056;
   if_true_1059:
   // auto dialog: "(Now installing... the CPU!)..."
   show dialog "ch2-admin.mgs-160:3";
   "temp" = true;
   copy!("ch2-install-cpu")
   rendezvous_1056:
   // if sequence: if (!"temp") { // no components were installed show dialo...
   if !"temp" then goto label if_true_1061;
   "temp" = false;
   // auto dialog: "That's all for now...."
   show dialog "ch2-admin.mgs-175:2";
   copy!("ch2-count-flags")
   // if sequence: if ("ch2-storyflags-tally" == $goto_round_2) { copy!("ch2...
   if "ch2-storyflags-tally" == 3 then goto label if_true_1063;
   if "ch2-storyflags-tally" == 6 then goto label if_true_1064;
   if "ch2-storyflags-tally" == 9 then goto label if_true_1065;
   goto label rendezvous_1060;
   if_true_1065:
   copy!("ch2-start-round-4")
   goto label rendezvous_1060;
   if_true_1064:
   copy!("ch2-start-round-3")
   goto label rendezvous_1060;
   if_true_1063:
   copy!("ch2-start-round-2")
   if_true_1061:
   // auto dialog: "(You don't have any new components to in..."
   show dialog "ch2-admin.mgs-170:2";
   rendezvous_1060:
   end_of_script_998:
}

"ch2-serial-light-manager-mouse" {
   if !"ch2-mousegame" then goto script "ch2-serial-light-manager";
   end_of_script_1085:
}

"on_load-ch2-bakery" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bakery.mgs-26:1";
   // if sequence: if ( "ch2-storyflag-round" == 3 || "ch2-storyflag-round" ...
   if "ch2-storyflag-round" == 3 then goto label if_true_1125;
   if "ch2-storyflag-round" == 4 then goto label if_true_1125;
   if "ch2-storyflag-round" != 2 then goto label if_true_1129;
   goto label rendezvous_1124;
   if_true_1129:
   entity "Jackob" on_tick = "yeet";
   goto label rendezvous_1124;
   if_true_1125:
   // if sequence: if ("ch2-storyflag-round" == 3) { entity "Jackob" positio...
   if "ch2-storyflag-round" == 3 then goto label if_true_1127;
   if "ch2-storyflag-round" == 4 then goto label if_true_1128;
   goto label rendezvous_1126;
   if_true_1128:
   entity "Jackob" position = geometry "zippy-spot2";
   goto label rendezvous_1126;
   if_true_1127:
   entity "Jackob" position = geometry "zippy-spot1";
   rendezvous_1126:
   entity "Jackob" name = "Aunt Zippy";
   entity "Jackob" on_look = "look-ch2-zippy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zippy";
   entity "Jackob" type = "lightning_boy";
   entity "Jackob" direction = "north";
   rendezvous_1124:
   copy!("ch2-map-init")
   end_of_script_1123:
}

"on_load-ch2-magehouse-birthday" {
   hex_control = true;
   player_control = false;
   // if sequence: if (debug_mode) { serial_control = on; command "skip" = "...
   if debug_mode then goto label if_true_1140;
   serial_control = false;
   goto label rendezvous_1139;
   if_true_1140:
   serial_control = true;
   command "skip" = "cutscene-ch2-birthday-exit";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-birthday.mgs-12:2";
   rendezvous_1139:
   // simple branch on: hex_editor = close
   if "close" then goto label if_1140;
   hex_editor = false;
   goto label rendezvous_1140;
   if_1140:
   hex_editor = true;
   rendezvous_1140:
   player current_animation = 0;
   camera fade out -> #000000 over 0ms;
   player direction = "east";
   camera = geometry "cake-camera-1";
   entity "Stunt Cake" current_animation = 1;
   wait 1000ms;
   camera fade in -> #000000 over 1000ms;
   wait 500ms;
   show dialog "ch2-birthday.mgs-28:1";
   wait 200ms;
   entity "Stunt Cake" animation -> 2 1x;
   entity "Stunt Cake" current_animation = 3;
   camera fade out -> #000000 over 0ms;
   camera = geometry "cake-camera-2";
   camera fade in -> #000000 over 500ms;
   show dialog "ch2-birthday.mgs-40:1";
   camera fade out -> #000000 over 500ms;
   entity "Cake" current_animation = 4;
   show dialog "ch2-birthday.mgs-51:1";
   camera fade in -> #000000 over 1000ms;
   show dialog "ch2-birthday.mgs-57:1";
   wait 180ms;
   player direction = "south";
   wait 400ms;
   show dialog "ch2-birthday.mgs-76:1";
   player direction = "east";
   show dialog "ch2-birthday.mgs-81:1";
   camera fade out -> #000000 over 1200ms;
   wait 200ms;
   goto "cutscene-ch2-birthday-exit";
   end_of_script_1138:
}

"ch2-escort-cutscene" {
   // if sequence: if (debug_mode) { serial_control = on; command "skip" = "...
   if debug_mode then goto label if_true_1147;
   serial_control = false;
   goto label rendezvous_1146;
   if_true_1147:
   serial_control = true;
   command "skip" = "cutscene-ch2-escort-exit";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-birthday.mgs-137:2";
   rendezvous_1146:
   camera fade out -> #000000 over 0ms;
   player_control = false;
   // simple branch on: hex_editor = close
   if "close" then goto label if_1147;
   hex_editor = false;
   goto label rendezvous_1147;
   if_1147:
   hex_editor = true;
   rendezvous_1147:
   entity "Alfonso" position = geometry "birthday-alfonso";
   entity "Bert" position = geometry "birthday-bert";
   entity "Jackob" position = geometry "birthday-jackob";
   entity "Alfonso" direction = "north";
   entity "Bert" direction = "north";
   entity "Jackob" direction = "north";
   camera = geometry "escort-camera";
   camera fade in -> #000000 over 1000ms;
   player direction = "south";
   wait 800ms;
   player position = geometry "walk_from-magehouse";
   player position -> geometry "walk_from-magehouse" length over 400ms;
   wait 1200ms;
   show dialog "ch2-birthday.mgs-160:1";
   wait 150ms;
   player on_tick = "look-left-and-right-fast";
   wait 300ms;
   show dialog "ch2-birthday.mgs-170:1";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-175:1";
   wait 100ms;
   player on_tick = "look-left-and-right-fast";
   wait 200ms;
   show dialog "ch2-birthday.mgs-193:1";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-198:1";
   wait 150ms;
   entity "Alfonso" direction = "south";
   wait 500ms;
   show dialog "ch2-birthday.mgs-206:1";
   entity "Alfonso" direction = player;
   show dialog "ch2-birthday.mgs-212:1";
   entity "Jackob" on_tick = "gossip-right-down";
   entity "Alfonso" on_tick = "gossip-left-and-right-down";
   entity "Bert" on_tick = "gossip-left-down";
   wait 200ms;
   show dialog "ch2-birthday.mgs-219:1";
   wait 500ms;
   entity "Alfonso" on_tick = "null_script";
   entity "Jackob" on_tick = "null_script";
   entity "Bert" on_tick = "null_script";
   wait 100ms;
   entity "Alfonso" direction = "north";
   wait 50ms;
   entity "Bert" direction = "north";
   wait 40ms;
   entity "Jackob" direction = "north";
   show dialog "ch2-birthday.mgs-234:1";
   "ch2-escort-cutscene" = true;
   wait 160ms;
   entity "Jackob" on_tick = "birthday-march-on-own-path";
   wait 180ms;
   entity "Alfonso" on_tick = "birthday-march-on-own-path";
   wait 90ms;
   entity "Bert" on_tick = "birthday-march-on-own-path";
   player on_tick = "birthday-march-on-own-path-player";
   end_of_script_1145:
}

"on_load-ch2-bobsclub-basement" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub-basement.mgs-75:1";
   // if sequence: if (!"ch2-cutseen-bob-party") { camera = geometry "gasp-s...
   if !"ch2-cutseen-bob-party" then goto label if_true_1162;
   entity "Guardian Bob" position = geometry "bob-walk2";
   entity "Guardian Bob" on_tick = "loiter-slow";
   goto label rendezvous_1161;
   if_true_1162:
   camera = geometry "gasp-spot";
   rendezvous_1161:
   copy!("ch2-map-init")
   command "look" + "bob" = "look-ch2-bob";
   // if sequence: if (!"ch2-cutseen-bob-party") { copy!("ch2-cutscene-bob-p...
   if !"ch2-cutseen-bob-party" then goto label if_true_1164;
   goto label rendezvous_1163;
   if_true_1164:
   copy!("ch2-cutscene-bob-party")
   rendezvous_1163:
   end_of_script_1160:
}

"on_load-ch2-bobsclub" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub.mgs-119:1";
   "ch2-rattle-count" = 0;
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "find" + "cc" = "find-cc"; comm...
   if debug_mode then goto label if_true_1236;
   goto label rendezvous_1235;
   if_true_1236:
   command "find" + "cc" = "find-cc";
   command "unfind" + "cc" = "unfind-cc";
   command "want" + "cc" = "want-cc";
   command "unwant" + "cc" = "unwant-cc";
   command "basement" = "basement";
   command "unbasement" = "unbasement";
   command "toot" = "toot";
   command "untoot" = "untoot";
   command "carry" + "cc" = "ch2-pickup-cactuscooler";
   command "uncarry" + "cc" = "ch2-unpickup-cactuscooler";
   command "reset" = "reset";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-bobsclub.mgs-138:2";
   rendezvous_1235:
   // if sequence: if (!"ch2-cutseen-bob-party") { player_control = off; if ...
   if !"ch2-cutseen-bob-party" then goto label if_true_1238;
   // if sequence: if ("ch2-want-cactuscooler") { // If you know you need CC...
   if "ch2-want-cactuscooler" then goto label if_true_1252;
   if_true_1252:
   // if sequence: if ( // You've already collected the CC "ch2-carrying-cac...
   // if sequence: if ("ch1-found-cactuscooler") { show dialog { PLAYER "Oh,...
   if "ch1-found-cactuscooler" then goto label if_true_1256;
   // auto dialog: "Oh, right. They had drinks and stuff at ..."
   show dialog "ch2-bobsclub.mgs-213:5";
   if_true_1256:
   // auto dialog: "Oh, yeah. I found Cactus Cooler in the f..."
   show dialog "ch2-bobsclub.mgs-208:5";
   if_true_1238:
   player_control = false;
   // if sequence: if (warp_state != "warped") { player position -> geometry...
   if warp_state != "warped" then goto label if_true_1240;
   goto label rendezvous_1239;
   if_true_1240:
   player position -> geometry "walk-spot" origin over 400ms;
   rendezvous_1239:
   wait 220ms;
   // if sequence: if (!"ch2-saw-emptybobroom") { player on_tick = "look-lef...
   if !"ch2-saw-emptybobroom" then goto label if_true_1242;
   // auto dialog: "Huh. Still empty... apart from that muff..."
   show dialog "ch2-bobsclub.mgs-172:3";
   goto label rendezvous_1241;
   if_true_1242:
   player on_tick = "look-left-and-right-fast";
   // auto dialog: "Huh? That's weird. Where did everyone go..."
   show dialog "ch2-bobsclub.mgs-166:3";
   "ch2-saw-emptybobroom" = true;
   rendezvous_1241:
   copy!("player-look-down")
   // if sequence: if ("ch2-want-cactuscooler") { // You KNOW you need CC if...
   if "ch2-want-cactuscooler" then goto label if_true_1244;
   // auto dialog: "Maybe I should take a look around...."
   show dialog "ch2-bobsclub.mgs-191:3";
   if_true_1244:
   // if sequence: if ("ch1-found-cactuscooler") { show dialog { PLAYER "At ...
   if "ch1-found-cactuscooler" then goto label if_true_1246;
   // auto dialog: "There might be Cactus Cooler around some..."
   show dialog "ch2-bobsclub.mgs-185:4";
   goto label rendezvous_1243;
   if_true_1246:
   // auto dialog: "At least I can grab some Cactus Cooler w..."
   show dialog "ch2-bobsclub.mgs-180:4";
   rendezvous_1243:
   player_control = true;
   rendezvous_1237:
   end_of_script_1234:
}

"on_load-ch2-castle-1-doorless" {
   "ch2-in-room" = 1;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-122:1";
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   // if sequence: if (warp_state == "raw_game_load-ch2") { copy!("restore_p...
   if warp_state == "raw_game_load-ch2" then goto label if_true_1345;
   if warp_state == "walk_from-north" then goto label if_true_1346;
   if warp_state == "walk_from-south" then goto label if_true_1347;
   goto label rendezvous_1344;
   if_true_1347:
   player position = geometry "walk_from-south";
   goto label rendezvous_1344;
   if_true_1346:
   player position = geometry "walk_from-north";
   goto label rendezvous_1344;
   if_true_1345:
   copy!("restore_player_state")
   rendezvous_1344:
   copy!("ch2-map-init")
   copy!("ch2-player-spawn-click-protection")
   end_of_script_1343:
}

"on_load-ch2-castle-1" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-1-ending";
   "ch2-in-room" = 1;
   "ch2-seen-room-1" = true;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-147:1";
   // if sequence: if ("ch2-cutseen-bert-secret") { entity "Bert" on_tick = ...
   if "ch2-cutseen-bert-secret" then goto label if_true_1350;
   goto label rendezvous_1349;
   if_true_1350:
   entity "Bert" on_tick = "yeet";
   rendezvous_1349:
   // if sequence: if ("ch2-ring-zero-enabled-in-castle") { entity "Wizard" ...
   if "ch2-ring-zero-enabled-in-castle" then goto label if_true_1352;
   goto label rendezvous_1351;
   if_true_1352:
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   rendezvous_1351:
   // if sequence: if ("ch2-has-artifact") { entity "Artifact" on_tick = "ye...
   if "ch2-has-artifact" then goto label if_true_1354;
   goto label rendezvous_1353;
   if_true_1354:
   entity "Artifact" on_tick = "yeet";
   rendezvous_1353:
   // if sequence: if (warp_state == "raw_game_load-ch2") { copy!("restore_p...
   if warp_state == "raw_game_load-ch2" then goto label if_true_1356;
   if warp_state == "walk_from-south" then goto label if_true_1357;
   if warp_state == "ch2-ending" then goto label if_true_1358;
   goto label rendezvous_1355;
   if_true_1358:
   player position = geometry "mainframe-look-spot";
   goto label rendezvous_1355;
   if_true_1357:
   player position = geometry "walk_from-south";
   goto label rendezvous_1355;
   if_true_1356:
   copy!("restore_player_state")
   rendezvous_1355:
   // if sequence: if ("ch2-carrying-mainframeos") { entity "Wizard" current...
   if "ch2-carrying-mainframeos" then goto label if_true_1360;
   goto label rendezvous_1359;
   if_true_1360:
   entity "Wizard" current_animation = 3;
   rendezvous_1359:
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "credits" = "debug-ch2-credits"...
   if debug_mode then goto label if_true_1362;
   goto label rendezvous_1361;
   if_true_1362:
   command "credits" = "debug-ch2-credits";
   command "toot" = "debug-finish-toot";
   command "walk" = "debug-walk";
   command "get" + "monitor" = "ch2-pickup-monitor";
   command "get" + "heatsink" = "ch2-pickup-heatsink";
   command "get" + "cactuscooler" = "ch2-pickup-cactuscooler";
   command "get" + "powersupply" = "ch2-pickup-powersupply";
   command "get" + "keyboard" = "ch2-pickup-keyboard";
   command "get" + "mouse" = "ch2-pickup-mouse";
   command "get" + "harddrive" = "ch2-solder-harddrive";
   command "get" + "plate" = "ch2-pickup-plate";
   command "get" + "needle" = "ch2-pickup-needle";
   command "get" + "ramchips" = "ch2-pickup-ramchips";
   command "get" + "clock" = "ch2-pickup-clock";
   command "get" + "goldfish" = "ch2-pickup-goldfish";
   command "get" + "abacus" = "ch2-pickup-abacus";
   command "get" + "cpu" = "ch2-solder-cpu";
   command "round" + "1" = "debug-get-items-for-round1";
   command "round" + "2" = "debug-get-items-for-round2";
   command "round" + "3" = "debug-get-items-for-round3";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-1.mgs-196:2";
   rendezvous_1361:
   copy!("ch2-player-spawn-click-protection")
   end_of_script_1348:
}

"ch2-artifact-walk" {
   player_control = false;
   wait 70ms;
   entity "XA" on_tick = "ch2-camera-to-artifact";
   wait 500ms;
   entity "Artifact" on_tick = "tick-artifact-open";
   wait 400ms;
   player direction = geometry "artifact-look";
   wait 1700ms;
   // if sequence: if (player intersects geometry "artifact-watchbox") { } e...
   if player intersects geometry "artifact-watchdonut" then goto label if_true_1370;
   player position -> geometry "artifact-watchpoint" origin over 600ms;
   if_true_1370:
   player position -> geometry "artifact-watchpoint" origin over 400ms;
   rendezvous_1368:
   player direction = geometry "artifact-look";
   wait 444ms;
   show dialog "ch2-castle-1.mgs-255:1";
   player position -> geometry "artifact-approach" origin over 400ms;
   player direction = "north";
   wait 1000ms;
   entity "Artifact" animation -> 1 1x;
   entity "Artifact" current_animation = 3;
   wait 550ms;
   player position -> geometry "artifact-approach" length over 350ms;
   wait 170ms;
   player direction = "east";
   wait 700ms;
   player direction = "north";
   wait 80ms;
   player position -> geometry "artifact-get" origin over 200ms;
   wait 600ms;
   entity "Artifact" on_tick = "yeet";
   wait 100ms;
   entity "XA" on_tick = "ch2-camera-from-artifact";
   wait 200ms;
   player position -> geometry "artifact-approach" origin over 600ms;
   wait 300ms;
   player direction = "west";
   camera fade out -> #5AB5F7 over 800ms;
   entity "calc1" animation_frame = 55;
   entity "calc2" animation_frame = 55;
   entity "calc1" position = geometry "calc1-spot";
   entity "calc2" position = geometry "calc2-spot";
   camera = geometry "artifact-approach";
   player position = geometry "hiding-spot";
   camera fade in -> #5AB5F7 over 800ms;
   wait 2800ms;
   camera -> geometry "calc-camera" origin over 900ms;
   wait 200ms;
   show dialog "ch2-castle-1.mgs-293:1";
   camera -> geometry "artifact-approach" origin over 700ms;
   wait 300ms;
   camera fade out -> #5AB5F7 over 800ms;
   player position = geometry "artifact-approach";
   camera = player position;
   entity "calc1" on_tick = "yeet";
   entity "calc2" on_tick = "yeet";
   camera fade in -> #5AB5F7 over 800ms;
   player direction = "south";
   end_of_script_1367:
}

"on_tick-ch2-castle-1-doorless" {
   // if sequence: if (player intersects geometry "south-hitbox") { copy!("o...
   if player intersects geometry "south-hitbox" then goto label if_true_1374;
   goto label rendezvous_1373;
   if_true_1374:
   copy!("on_exit-ch2-castle-1")
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   rendezvous_1373:
   // if sequence: if (player intersects geometry "north-hitbox") { copy!("o...
   if player intersects geometry "north-hitbox" then goto label if_true_1376;
   goto label rendezvous_1375;
   if_true_1376:
   copy!("on_exit-ch2-castle-1")
   warp_state = "walk_from-south";
   copy!("ch2-load-castle-11-special")
   rendezvous_1375:
   end_of_script_1372:
}

"on_tick-ch2-castle-1" {
   // if sequence: if (player intersects geometry "south-hitbox") { copy!("o...
   if player intersects geometry "south-hitbox" then goto label if_true_1379;
   goto label rendezvous_1378;
   if_true_1379:
   copy!("on_exit-ch2-castle-1")
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   rendezvous_1378:
   if "ch2-wait-for-hat-touch" then goto script "on_tick-ch2-castle-1-hexwait1";
   // if sequence: if (dialog closed) { // check for hax button press // (No...
   if dialog closed then goto label if_true_1403;
   if_true_1403:
   // if sequence: if (!"ch2-ring-zero-enabled-in-castle") { if (button HAX ...
   if !"ch2-ring-zero-enabled-in-castle" then goto label if_true_1415;
   if_true_1415:
   // if sequence: if (button HAX pressed) { // You're attempting to use Rin...
   if button HAX pressed then goto label if_true_1421;
   goto label rendezvous_1402;
   if_true_1421:
   // if sequence: if ("ch2-toot-done") { show dialog { PLAYER "Oh, yeah. Ri...
   if "ch2-toot-done" then goto label if_true_1423;
   if "ch2-hax-attempted" then goto label if_true_1424;
   if "ch2-door-attempted" then goto label if_true_1425;
   // auto dialog: "Weird. I can't get Ring Zero to work...."
   show dialog "ch2-castle-1.mgs-362:5";
   goto label rendezvous_1422;
   if_true_1425:
   // auto dialog: "Weird. I can't get Ring Zero to work, ei..."
   show dialog "ch2-castle-1.mgs-356:5";
   goto label rendezvous_1422;
   if_true_1424:
   // auto dialog: "Why doesn't Ring Zero work?..."
   show dialog "ch2-castle-1.mgs-350:5";
   goto label rendezvous_1422;
   if_true_1423:
   // auto dialog: "Oh, yeah. Ring Zero won't work in in the..."
   show dialog "ch2-castle-1.mgs-344:5";
   rendezvous_1422:
   "ch2-hax-attempted" = true;
   rendezvous_1402:
   end_of_script_1377:
}

"on_tick-ch2-castle-1-hexwait1" {
   copy!("on_tick-ch2-castle-1-hexwait-protec")
   if button HAX pressed then goto script "on_tick-ch2-castle-1-hexwait2";
   end_of_script_1426:
}

"on_exit-ch2-castle-1" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   end_of_script_1433:
}

"on_go-castle-1-north" {
   // if sequence: if (!"ch2-toot-done") { goto "on_go_ch2-notyet"; } else {...
   if !"ch2-toot-done" then goto label if_true_1437;
   copy!("on_exit-ch2-castle-1")
   copy!("warping-out-fade-out")
   copy!("ch2-load-castle-11-special")
   goto label rendezvous_1436;
   if_true_1437:
   goto "on_go_ch2-notyet";
   rendezvous_1436:
   end_of_script_1435:
}

"on_go-castle-1-south" {
   // if sequence: if (!"ch2-toot-done") { goto "on_go_ch2-notyet"; } else {...
   if !"ch2-toot-done" then goto label if_true_1440;
   copy!("on_exit-ch2-castle-1")
   copy!("warping-out-fade-out")
   load map "ch2-castle-outside";
   goto label rendezvous_1439;
   if_true_1440:
   goto "on_go_ch2-notyet";
   rendezvous_1439:
   end_of_script_1438:
}

"interact-ch2-wizard" {
   // if sequence: if (self current_animation == 0) { // WIZARD IS DOWN // g...
   if self current_animation == 0 then goto label if_true_1459;
   // if sequence: if (!"ch2-toot-done") { show dialog { SELF "Bye." }; copy...
   if !"ch2-toot-done" then goto label if_true_1461;
   goto label rendezvous_1458;
   if_true_1461:
   // auto dialog: "Bye...."
   show dialog "ch2-castle-1.mgs-525:3";
   copy!("ch2-wizard-descend")
   // auto return label
   if_true_1459:
   copy!("ch2-wizard-ascend")
   rendezvous_1458:
   // if sequence: if (!"ch2-toot-done") {// pre-toot version show dialog { ...
   if !"ch2-toot-done" then goto label if_true_1463;
   if "ch2-wait-for-hat-touch" then goto label if_true_1464;
   if "ch2-lambda-paging" then goto label if_true_1465;
   if "ch2-carrying-mainframeos" then goto label if_true_1466;
   // if sequence: if (!"ch2-wizard-backstory") { show dialog { SELF "Hey." ...
   if !"ch2-wizard-backstory" then goto label if_true_1468;
   // if sequence: if ("interrupt2") { show dialog { SELF "So mysterious-voi...
   if "interrupt2" then goto label if_true_1470;
   // if sequence: if (!"interrupt3") { show dialog { SELF "Hey." PLAYER "Hi...
   if !"interrupt3" then goto label if_true_1472;
   // auto dialog: "Finished it already?..."
   show dialog "ch2-castle-1.mgs-587:5";
   goto label rendezvous_1471;
   if_true_1472:
   // auto dialog: "Hey...."
   show dialog "ch2-castle-1.mgs-577:5";
   "interrupt3" = true;
   rendezvous_1471:
   copy!("ch2-wizard-descend")
   goto label rendezvous_1462;
   if_true_1470:
   // auto dialog: "So mysterious-voice-man wants to put tha..."
   show dialog "ch2-castle-1.mgs-571:4";
   if_true_1468:
   // auto dialog: "Hey...."
   show dialog "ch2-castle-1.mgs-555:3";
   "ch2-wizard-backstory" = true;
   "interrupt2" = true;
   if_true_1466:
   copy!("ch2-install-wizard")
   if_true_1465:
   // auto dialog: "Looks like whats-his-name is paging you...."
   show dialog "ch2-castle-1.mgs-546:2";
   if_true_1464:
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   // auto dialog: "Um, how do I get the hex editor to come ..."
   show dialog "ch2-castle-1.mgs-537:2";
   if_true_1463:
   // auto dialog: "Hi...."
   show dialog "ch2-castle-1.mgs-532:2";
   rendezvous_1462:
   end_of_script_1457:
}

"ch2-install-wizard" {
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-617:1";
   entity "Wizard" on_tick = "null_script";
   copy!("ch2-spin-wizard")
   show dialog "ch2-castle-1.mgs-624:1";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-631:1";
   player_control = false;
   // if sequence: if (player intersects geometry "mainframe-watchbox") { //...
   if player intersects geometry "mainframe-watchdonut" then goto label if_true_1477;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   if_true_1477:
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   rendezvous_1475:
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-645:1";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-650:1";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-657:1";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-661:1";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-665:1";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-676:1";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-680:1";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   copy!("ch2-bootup")
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-689:1";
   goto "ch2-install-wizard-resume2";
   end_of_script_1474:
}

"interact-ch2-xa" {
   // if sequence: if ("ch2-toot-done") { goto "ch2-terminal-setup-check"; }...
   if "ch2-toot-done" then goto label if_true_1501;
   // if sequence: if (!"ch2-has-artifact") { player_control = off; show dia...
   if !"ch2-has-artifact" then goto label if_true_1503;
   // auto dialog: "Let's get the artifact set up. I can hel..."
   show dialog "ch2-castle-1.mgs-1364:3";
   goto label rendezvous_1502;
   if_true_1503:
   player_control = false;
   // auto dialog: "......"
   show dialog "ch2-castle-1.mgs-1288:3";
   copy!("ch2-artifact-walk")
   wait 300ms;
   // auto dialog: "That was easy. I thought there would be ..."
   show dialog "ch2-castle-1.mgs-1318:3";
   player direction = "east";
   // auto dialog: "Wait. What?..."
   show dialog "ch2-castle-1.mgs-1323:3";
   // auto dialog: "Crippled? What happened?..."
   show dialog "ch2-castle-1.mgs-1329:3";
   // auto dialog: "What? Why?!..."
   show dialog "ch2-castle-1.mgs-1334:3";
   // if sequence: if ("ch2-hax-attempted") { show dialog { PLAYER "Yeah, ab...
   if "ch2-hax-attempted" then goto label if_true_1505;
   // auto dialog: "Ring Zero is disabled? Since when?..."
   show dialog "ch2-castle-1.mgs-1351:4";
   goto label rendezvous_1504;
   if_true_1505:
   // auto dialog: "Yeah, about that... why won't Ring Zero ..."
   show dialog "ch2-castle-1.mgs-1347:4";
   rendezvous_1504:
   // auto dialog: "The castle walls are lined with aluminum..."
   show dialog "ch2-castle-1.mgs-1356:3";
   player_control = true;
   "ch2-has-artifact" = true;
   rendezvous_1502:
   // auto dialog: "Er, that is, do you want help?..."
   show dialog "ch2-castle-1.mgs-1368:2";
   goto label rendezvous_1500;
   if_true_1501:
   goto "ch2-terminal-setup-check";
   rendezvous_1500:
   end_of_script_1499:
}

"ch2-terminal-setup-nevermind" {
   // if sequence: if (!"ch2-toot-done") { show dialog { Lambda "Ah, okay! U...
   if !"ch2-toot-done" then goto label if_true_1511;
   "can-interrupt-dialog" = true;
   // auto dialog: "Ah, okay. Carry on!  Also, remember you ..."
   show dialog "ch2-castle-1.mgs-1415:2";
   "can-interrupt-dialog" = false;
   if_true_1511:
   // auto dialog: "Ah, okay! Um, if you change your mind, s..."
   show dialog "ch2-castle-1.mgs-1397:2";
   copy!("register-manual")
   "can-interrupt-dialog" = true;
   serial_control = true;
   // auto dialog: "To finish our conversation, type \"MAN\"..."
   show dialog "ch2-castle-1.mgs-1403:2";
   "can-interrupt-dialog" = false;
   // if sequence: if (serial_dialog closed) { show serial_dialog "spacer"; ...
   if serial_dialog closed then goto label if_true_1513;
   goto label rendezvous_1510;
   if_true_1513:
   show serial_dialog "spacer";
   // auto serial_dialog: "(Type [36mMAN[0m to finish your conver..."
   show serial_dialog "ch2-castle-1.mgs-1409:3";
   rendezvous_1510:
   self on_interact = "ch2-terminal-setup-check";
   end_of_script_1509:
}

"ch2-terminal-message-test-success" {
   // if sequence: if (!"ch2-toot-done") { copy!("register-manual") "can-int...
   if !"ch2-toot-done" then goto label if_true_1524;
   // auto dialog: "Excellent! You're all set!..."
   show dialog "ch2-castle-1.mgs-1541:2";
   if_true_1524:
   copy!("register-manual")
   "can-interrupt-dialog" = true;
   serial_control = true;
   // auto dialog: "Excellent! Let's continue our conversati..."
   show dialog "ch2-castle-1.mgs-1530:2";
   "can-interrupt-dialog" = false;
   // if sequence: if (serial_dialog closed) { show serial_dialog "spacer"; ...
   if serial_dialog closed then goto label if_true_1526;
   goto label rendezvous_1523;
   if_true_1526:
   show serial_dialog "spacer";
   // auto serial_dialog: "(Type [36mMAN[0m to continue your conv..."
   show serial_dialog "ch2-castle-1.mgs-1536:3";
   rendezvous_1523:
   self on_interact = "ch2-terminal-setup-check";
   end_of_script_1522:
}

"on_load-ch2-castle-11-doorless" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-11.mgs-37:1";
   // if sequence: if (warp_state == "walk_from-north") { player position = ...
   if warp_state == "walk_from-north" then goto label if_true_1533;
   if warp_state == "walk_from-south" then goto label if_true_1534;
   if warp_state == "walk_from-west" then goto label if_true_1535;
   goto label rendezvous_1532;
   if_true_1535:
   player position = geometry "walk_from-west";
   goto label rendezvous_1532;
   if_true_1534:
   player position = geometry "walk_from-south";
   goto label rendezvous_1532;
   if_true_1533:
   player position = geometry "walk_from-north";
   rendezvous_1532:
   copy!("ch2-map-init")
   end_of_script_1531:
}

"on_load-ch2-castle-11" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-11") { show serial_dialog { "Discover...
   if !"ch2-seen-room-11" then goto label if_true_1538;
   // auto serial_dialog: "Entering [1mCASTLE HALLWAY FRONT[0m......"
   show serial_dialog "ch2-castle-11.mgs-58:2";
   goto label rendezvous_1537;
   if_true_1538:
   // auto serial_dialog: "Discovered [1m[36mCASTLE HALLWAY FRONT..."
   show serial_dialog "ch2-castle-11.mgs-55:2";
   "ch2-seen-room-11" = true;
   rendezvous_1537:
   // if sequence: if ( "ch2-installed-monitor" || "ch2-carrying-monitor" ) ...
   if "ch2-installed-monitor" then goto label if_true_1540;
   if "ch2-carrying-monitor" then goto label if_true_1540;
   goto label rendezvous_1539;
   if_true_1540:
   copy!("ch2-hide-monitor")
   rendezvous_1539:
   copy!("ch2-map-init")
   // if sequence: if (!"ch2-cutseen-castle11") { copy!("ch2-cutscene-castle...
   if !"ch2-cutseen-castle11" then goto label if_true_1542;
   goto label rendezvous_1541;
   if_true_1542:
   copy!("ch2-cutscene-castle11")
   rendezvous_1541:
   end_of_script_1536:
}

"on_load-ch2-castle-12-doorless" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-12.mgs-59:1";
   // if sequence: if (warp_state == "walk_from-north") { player position = ...
   if warp_state == "walk_from-north" then goto label if_true_2326;
   if warp_state == "walk_from-south" then goto label if_true_2327;
   if warp_state == "walk_from-east" then goto label if_true_2328;
   goto label rendezvous_2325;
   if_true_2328:
   player position = geometry "walk_from-east";
   goto label rendezvous_2325;
   if_true_2327:
   player position = geometry "walk_from-south";
   goto label rendezvous_2325;
   if_true_2326:
   player position = geometry "walk_from-north";
   rendezvous_2325:
   copy!("ch2-map-init")
   end_of_script_2324:
}

"on_load-ch2-castle-12" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-12") { show serial_dialog { "Discover...
   if !"ch2-seen-room-12" then goto label if_true_2331;
   // auto serial_dialog: "Entering [1mCASTLE HALLWAY BACK[0m......"
   show serial_dialog "ch2-castle-12.mgs-80:2";
   goto label rendezvous_2330;
   if_true_2331:
   // auto serial_dialog: "Discovered [1m[36mCASTLE HALLWAY BACK..."
   show serial_dialog "ch2-castle-12.mgs-77:2";
   "ch2-seen-room-12" = true;
   rendezvous_2330:
   // if sequence: if ( "ch2-installed-needle" || "ch2-carrying-needle" ) { ...
   if "ch2-installed-needle" then goto label if_true_2333;
   if "ch2-carrying-needle" then goto label if_true_2333;
   goto label rendezvous_2332;
   if_true_2333:
   copy!("ch2-hide-needle")
   rendezvous_2332:
   copy!("ch2-map-init")
   // if sequence: if (!"ch2-cutseen-castle12") { show dialog { Concierge "W...
   if !"ch2-cutseen-castle12" then goto label if_true_2335;
   goto label rendezvous_2334;
   if_true_2335:
   // auto dialog: "Welcome!..."
   show dialog "ch2-castle-12.mgs-96:2";
   "interrupt" = true;
   "ch2-cutseen-castle12" = true;
   rendezvous_2334:
   end_of_script_2329:
}

"on_load-ch2-castle-13-doorless" {
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-13.mgs-47:1";
   // if sequence: if (warp_state == "walk_from-north") { player position = ...
   if warp_state == "walk_from-north" then goto label if_true_2418;
   if warp_state == "walk_from-south" then goto label if_true_2419;
   goto label rendezvous_2417;
   if_true_2419:
   player position = geometry "walk_from-south";
   goto label rendezvous_2417;
   if_true_2418:
   player position = geometry "walk_from-north";
   rendezvous_2417:
   copy!("ch2-map-init")
   end_of_script_2416:
}

"on_load-ch2-castle-13" {
   // if sequence: if (warp_state == "ch2 ending") { entity "door" on_tick =...
   if warp_state == "ch2 ending" then goto label if_true_2422;
   goto label rendezvous_2421;
   if_true_2422:
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   goto "ch2-castle-13-ending";
   rendezvous_2421:
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-13") { show serial_dialog { "Discover...
   if !"ch2-seen-room-13" then goto label if_true_2424;
   // auto serial_dialog: "Entering [1mCASTLE THRONE ROOM[0m......"
   show serial_dialog "ch2-castle-13.mgs-72:2";
   goto label rendezvous_2423;
   if_true_2424:
   // auto serial_dialog: "Discovered [1m[36mCASTLE THRONE ROOM[..."
   show serial_dialog "ch2-castle-13.mgs-69:2";
   "ch2-seen-room-13" = true;
   rendezvous_2423:
   // if sequence: if (warp_state == "Ch2 King Returns") { entity "door" on_...
   if warp_state == "Ch2 King Returns" then goto label if_true_2426;
   if "ch2-king-rescued" then goto label if_true_2427;
   entity "King Gibson" on_tick = "yeet";
   goto label rendezvous_2425;
   if_true_2427:
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   entity "Aurelius" position = geometry "end-fish";
   entity "Templeton" on_tick = "templeton-catalog-search";
   entity "King Gibson" on_tick = "king-debris-ponder";
   goto label rendezvous_2425;
   if_true_2426:
   entity "door" on_tick = "yeet";
   camera = geometry "camera-spot2";
   rendezvous_2425:
   // if sequence: if ( "ch2-installed-goldfish" || "ch2-carrying-goldfish" ...
   if "ch2-installed-goldfish" then goto label if_true_2429;
   if "ch2-carrying-goldfish" then goto label if_true_2429;
   goto label rendezvous_2428;
   if_true_2429:
   entity "Aurelius" on_tick = "yeet";
   rendezvous_2428:
   copy!("ch2-map-init")
   // if sequence: if (warp_state == "Ch2 King Returns") { "ch2-cutseen-cast...
   if warp_state == "Ch2 King Returns" then goto label if_true_2431;
   // if sequence: if (!"ch2-cutseen-castle13") { copy!("ch2-cutscene-castle...
   if !"ch2-cutseen-castle13" then goto label if_true_2433;
   goto label rendezvous_2430;
   if_true_2433:
   copy!("ch2-cutscene-castle12")
   if_true_2431:
   "ch2-cutseen-castle13" = true;
   copy!("ch2-cutscene-kingreturns")
   rendezvous_2430:
   end_of_script_2420:
}

"ch2-templeton-pace" {
   self position -> geometry "templeton1" origin over 400ms;
   self position -> geometry "templeton2" origin over 400ms;
   if !"ch2-templeton-pace" then goto script "null_script";
   end_of_script_2435:
}

"on_load-ch2-castle-14" {
   if warp_state == "king returns teleport" then goto script "ch2-cutscene-kingreturns-bedroom";
   "ch2-in-room" = 14;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-14") { show serial_dialog { "Discover...
   if !"ch2-seen-room-14" then goto label if_true_2531;
   // auto serial_dialog: "Entering [1mKING GIBSON'S BEDROOM[0m....."
   show serial_dialog "ch2-castle-14.mgs-63:2";
   goto label rendezvous_2530;
   if_true_2531:
   // auto serial_dialog: "Discovered [1m[36mKING GIBSON'S BEDROO..."
   show serial_dialog "ch2-castle-14.mgs-60:2";
   "ch2-seen-room-14" = true;
   rendezvous_2530:
   // if sequence: if ( "ch2-installed-clock" || "ch2-carrying-clock" ) { co...
   if "ch2-installed-clock" then goto label if_true_2533;
   if "ch2-carrying-clock" then goto label if_true_2533;
   goto label rendezvous_2532;
   if_true_2533:
   copy!("ch2-hide-clock")
   rendezvous_2532:
   // if sequence: if ( "ch2-storyflag-round" >= 5 || "ch2-king-rescued" ) {...
   if "ch2-storyflag-round" >= 5 then goto label if_true_2535;
   if "ch2-king-rescued" then goto label if_true_2535;
   goto label rendezvous_2534;
   if_true_2535:
   entity "King Gibson" on_tick = "yeet";
   entity "keypad" on_interact = "null_script";
   rendezvous_2534:
   copy!("ch2-map-init")
   // if sequence: if ("ch2-storyflag-round" < 5) { // check if you do the c...
   if "ch2-storyflag-round" < 5 then goto label if_true_2539;
   if_true_2539:
   // if sequence: if (!"ch2-cutseen-castle14") { player_control = off; wait...
   if !"ch2-cutseen-castle14" then goto label if_true_2541;
   goto label rendezvous_2538;
   if_true_2541:
   player_control = false;
   wait 400ms;
   entity "King Gibson" current_animation = 2;
   // auto dialog: "?..."
   show dialog "ch2-castle-14.mgs-90:3";
   entity "King Gibson" on_tick = "ch2-gibson-scramble";
   entity "King Gibson" current_animation = 3;
   // auto dialog: "!!!..."
   show dialog "ch2-castle-14.mgs-95:3";
   player direction = entity "King Gibson";
   // auto dialog: "Help! Guards!..."
   show dialog "ch2-castle-14.mgs-100:3";
   entity "King Gibson" on_tick = "null_script";
   entity "King Gibson" current_animation = 2;
   wait 400ms;
   // auto dialog: "But no, of course. I'm alone...."
   show dialog "ch2-castle-14.mgs-106:3";
   entity "King Gibson" current_animation = 0;
   wait 1100ms;
   entity "King Gibson" direction = "west";
   wait 350ms;
   // auto dialog: "They locked me in here to rot. Why would..."
   show dialog "ch2-castle-14.mgs-113:3";
   entity "King Gibson" direction = "north";
   // auto dialog: "Well, assassin, do your worst. Get it ov..."
   show dialog "ch2-castle-14.mgs-117:3";
   entity "King Gibson" direction = "south";
   // auto dialog: "Then you've come to mock me...."
   show dialog "ch2-castle-14.mgs-122:3";
   entity "King Gibson" direction = "north";
   // auto dialog: "Hmph. I'm sure Sebastian is halfway thro..."
   show dialog "ch2-castle-14.mgs-130:3";
   entity "King Gibson" direction = "south";
   // auto dialog: "Broken?..."
   show dialog "ch2-castle-14.mgs-136:3";
   entity "King Gibson" direction = "west";
   // auto dialog: "*sigh*..."
   show dialog "ch2-castle-14.mgs-145:3";
   entity "King Gibson" direction = "south";
   // auto dialog: "They really tried to call me?..."
   show dialog "ch2-castle-14.mgs-150:3";
   entity "King Gibson" position -> geometry "walk-spot" origin over 800ms;
   // auto dialog: "If you were able to enter this room, you..."
   show dialog "ch2-castle-14.mgs-158:3";
   entity "King Gibson" on_tick = "face-player";
   "ch2-cutseen-castle14" = true;
   player_control = true;
   rendezvous_2538:
   end_of_script_2529:
}

"on_load-ch2-castle-21-doorless" {
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-21.mgs-86:1";
   // if sequence: if (warp_state == "walk_from-north") { player position = ...
   if warp_state == "walk_from-north" then goto label if_true_2589;
   if warp_state == "walk_from-east" then goto label if_true_2590;
   goto label rendezvous_2588;
   if_true_2590:
   player position = geometry "walk_from-east";
   goto label rendezvous_2588;
   if_true_2589:
   player position = geometry "walk_from-north";
   rendezvous_2588:
   copy!("ch2-map-init")
   end_of_script_2587:
}

"on_load-ch2-castle-21" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-21-ending";
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-21") { show serial_dialog { "Discover...
   if !"ch2-seen-room-21" then goto label if_true_2593;
   // auto serial_dialog: "Entering [1mWORKSHOP[0m......"
   show serial_dialog "ch2-castle-21.mgs-107:2";
   goto label rendezvous_2592;
   if_true_2593:
   // auto serial_dialog: "Discovered [1m[36mWORKSHOP[0m! Room a..."
   show serial_dialog "ch2-castle-21.mgs-104:2";
   "ch2-seen-room-21" = true;
   rendezvous_2592:
   // if sequence: if ( "ch2-installed-abacus" || "ch2-carrying-abacus" ) { ...
   if "ch2-installed-abacus" then goto label if_true_2595;
   if "ch2-carrying-abacus" then goto label if_true_2595;
   goto label rendezvous_2594;
   if_true_2595:
   copy!("ch2-hide-abacus")
   rendezvous_2594:
   copy!("ch2-map-init")
   // if sequence: if (!"ch2-cutseen-castle21") { player_control = off; wait...
   if !"ch2-cutseen-castle21" then goto label if_true_2597;
   goto label rendezvous_2596;
   if_true_2597:
   player_control = false;
   wait 500ms;
   entity "Frankie" direction = player;
   wait 250ms;
   entity "Jean-Paul" direction = player;
   wait 140ms;
   entity "Jean-Paul" strafe = 2;
   entity "Jean-Paul" position -> geometry "birdstep" origin over 150ms;
   entity "Jean-Paul" strafe = 0;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   player direction = entity "Jean-Paul";
   // auto dialog: "Whoa! WHOA! Someone's here!..."
   show dialog "ch2-castle-21.mgs-131:2";
   wait 300ms;
   entity "Jean-Paul" position -> geometry "birdstep2" origin over 240ms;
   wait 100ms;
   player direction = entity "Frankie";
   // auto dialog: "You can move between rooms? How are you ..."
   show dialog "ch2-castle-21.mgs-140:2";
   player direction = entity "Jean-Paul";
   // auto dialog: "You have a portable terminal with you?..."
   show dialog "ch2-castle-21.mgs-145:2";
   wait 100ms;
   entity "Jean-Paul" direction = "north";
   wait 500ms;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   entity "Jean-Paul" direction = "south";
   entity "Frankie" direction = "south";
   player_control = true;
   "ch2-cutseen-castle21" = true;
   rendezvous_2596:
   end_of_script_2591:
}

"on_load-ch2-castle-22-doorless" {
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-22.mgs-36:1";
   // if sequence: if (warp_state == "walk_from-south") { player position = ...
   if warp_state == "walk_from-south" then goto label if_true_2668;
   if warp_state == "walk_from-north" then goto label if_true_2669;
   goto label rendezvous_2667;
   if_true_2669:
   player position = geometry "walk_from-north";
   goto label rendezvous_2667;
   if_true_2668:
   player position = geometry "walk_from-south";
   rendezvous_2667:
   copy!("ch2-map-init")
   end_of_script_2666:
}

"on_load-ch2-castle-22" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-22-ending";
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-22") { show serial_dialog { "Discover...
   if !"ch2-seen-room-22" then goto label if_true_2672;
   // auto serial_dialog: "Entering [1mSERVER ROOM[0m......"
   show serial_dialog "ch2-castle-22.mgs-57:2";
   goto label rendezvous_2671;
   if_true_2672:
   // auto serial_dialog: "Discovered [1m[36mSERVER ROOM[0m! Roo..."
   show serial_dialog "ch2-castle-22.mgs-54:2";
   "ch2-seen-room-22" = true;
   rendezvous_2671:
   // if sequence: if ( "ch2-installed-powersupply" || "ch2-carrying-powersu...
   if "ch2-installed-powersupply" then goto label if_true_2674;
   if "ch2-carrying-powersupply" then goto label if_true_2674;
   goto label rendezvous_2673;
   if_true_2674:
   copy!("ch2-hide-powersupply")
   rendezvous_2673:
   copy!("ch2-map-init")
   end_of_script_2670:
}

"on_load-ch2-castle-23-doorless" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-23.mgs-42:1";
   // if sequence: if (warp_state == "walk_from-south") { player position = ...
   if warp_state == "walk_from-south" then goto label if_true_2707;
   goto label rendezvous_2706;
   if_true_2707:
   player position = geometry "walk_from-south";
   rendezvous_2706:
   copy!("ch2-map-init")
   end_of_script_2705:
}

"on_load-ch2-castle-23" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-23") { show serial_dialog { "Discover...
   if !"ch2-seen-room-23" then goto label if_true_2710;
   // auto serial_dialog: "Entering [1mPOWER PLANT[0m......"
   show serial_dialog "ch2-castle-23.mgs-59:2";
   goto label rendezvous_2709;
   if_true_2710:
   // auto serial_dialog: "Discovered [1m[36mPOWER PLANT[0m! Roo..."
   show serial_dialog "ch2-castle-23.mgs-56:2";
   "ch2-seen-room-23" = true;
   rendezvous_2709:
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "get" + "thing" = "ch2-pickup-c...
   if debug_mode then goto label if_true_2712;
   goto label rendezvous_2711;
   if_true_2712:
   command "get" + "thing" = "ch2-pickup-cactuscooler";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-23.mgs-67:2";
   rendezvous_2711:
   end_of_script_2708:
}

"simon-player-turn-loop-start" {
   if "i" >= "simon-round" then goto script "simon-player-turn-end";
   // if sequence: if ("i" == 0) { "simon-pos-curr" = "simon-pos1" *1; } els...
   if "i" == 0 then goto label if_true_2789;
   if "i" == 1 then goto label if_true_2790;
   if "i" == 2 then goto label if_true_2791;
   if "i" == 3 then goto label if_true_2792;
   if "i" == 4 then goto label if_true_2793;
   if "i" == 5 then goto label if_true_2794;
   if "i" == 6 then goto label if_true_2795;
   goto label rendezvous_2788;
   if_true_2795:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos7" *1
   "simon-pos-curr" = "simon-pos7";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2794:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos6" *1
   "simon-pos-curr" = "simon-pos6";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2793:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos5" *1
   "simon-pos-curr" = "simon-pos5";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2792:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos4" *1
   "simon-pos-curr" = "simon-pos4";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2791:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos3" *1
   "simon-pos-curr" = "simon-pos3";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2790:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos2" *1
   "simon-pos-curr" = "simon-pos2";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   goto label rendezvous_2788;
   if_true_2789:
   // set int (ambiguous lhs): "simon-pos-curr" = "simon-pos1" *1
   "simon-pos-curr" = "simon-pos1";
   // This action was optimized out (setting 'simon-pos-curr' to itself)
   rendezvous_2788:
   goto "simon-player-listen";
   end_of_script_2787:
}

"simon-player-listen" {
   player direction = "south";
   // if sequence: if ("ch2-simon-high") { if ("simon-pos-curr" != 4) { if (...
   if "ch2-simon-high" then goto label if_true_2798;
   // if sequence: if ("simon-pos-curr" != 0) { if (button $button0 pressed)...
   if "simon-pos-curr" != 0 then goto label if_true_2814;
   if_true_2814:
   // if sequence: if (button $button0 pressed) { // show serial_dialog {"PR...
   if button $button0 pressed then goto label if_true_2816;
   goto label rendezvous_2813;
   if_true_2816:
   "simon-player-move" = 0;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   rendezvous_2813:
   // if sequence: if ("simon-pos-curr" != 1) { if (button $button1 pressed)...
   if "simon-pos-curr" != 1 then goto label if_true_2820;
   if_true_2820:
   // if sequence: if (button $button1 pressed) { // show serial_dialog {"PR...
   if button $button1 pressed then goto label if_true_2822;
   if_true_2822:
   "simon-player-move" = 1;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if_true_2798:
   // if sequence: if ("simon-pos-curr" != 4) { if (button $button4 pressed)...
   if "simon-pos-curr" != 4 then goto label if_true_2802;
   if_true_2802:
   // if sequence: if (button $button4 pressed) { // show serial_dialog {"PR...
   if button $button4 pressed then goto label if_true_2804;
   goto label rendezvous_2801;
   if_true_2804:
   "simon-player-move" = 4;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   rendezvous_2801:
   // if sequence: if ("simon-pos-curr" != 5) { if (button $button5 pressed)...
   if "simon-pos-curr" != 5 then goto label if_true_2808;
   if_true_2808:
   // if sequence: if (button $button5 pressed) { // show serial_dialog {"PR...
   if button $button5 pressed then goto label if_true_2810;
   goto label rendezvous_2797;
   if_true_2810:
   "simon-player-move" = 5;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   rendezvous_2797:
   // if sequence: if ("simon-pos-curr" != 2) { if (button $button2 pressed)...
   if "simon-pos-curr" != 2 then goto label if_true_2826;
   if_true_2826:
   // if sequence: if (button $button2 pressed) { // show serial_dialog {"PR...
   if button $button2 pressed then goto label if_true_2828;
   goto label rendezvous_2825;
   if_true_2828:
   "simon-player-move" = 2;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   rendezvous_2825:
   // if sequence: if ("simon-pos-curr" != 3) { if (button $button3 pressed)...
   if "simon-pos-curr" != 3 then goto label if_true_2832;
   if_true_2832:
   // if sequence: if (button $button3 pressed) { // show serial_dialog {"PR...
   if button $button3 pressed then goto label if_true_2834;
   goto label rendezvous_2831;
   if_true_2834:
   "simon-player-move" = 3;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   rendezvous_2831:
   // if sequence: if ("ch2-simon-high") { if ("simon-pos-curr" == 4) { if (...
   if "ch2-simon-high" then goto label if_true_2836;
   // if sequence: if ("simon-pos-curr" == 0) { if (button $button0 pressed)...
   if "simon-pos-curr" == 0 then goto label if_true_2852;
   if_true_2852:
   // if sequence: if (button $button0 pressed) { "simon-player-move" = 0; g...
   if button $button0 pressed then goto label if_true_2854;
   goto label rendezvous_2851;
   if_true_2854:
   "simon-player-move" = 0;
   goto "simon-player-do-move";
   rendezvous_2851:
   // if sequence: if ("simon-pos-curr" == 1) { if (button $button1 pressed)...
   if "simon-pos-curr" == 1 then goto label if_true_2858;
   if_true_2858:
   // if sequence: if (button $button1 pressed) { "simon-player-move" = 1; g...
   if button $button1 pressed then goto label if_true_2860;
   if_true_2860:
   "simon-player-move" = 1;
   goto "simon-player-do-move";
   if_true_2836:
   // if sequence: if ("simon-pos-curr" == 4) { if (button $button4 pressed)...
   if "simon-pos-curr" == 4 then goto label if_true_2840;
   if_true_2840:
   // if sequence: if (button $button4 pressed) { "simon-player-move" = 4; g...
   if button $button4 pressed then goto label if_true_2842;
   goto label rendezvous_2839;
   if_true_2842:
   "simon-player-move" = 4;
   goto "simon-player-do-move";
   rendezvous_2839:
   // if sequence: if ("simon-pos-curr" == 5) { if (button $button5 pressed)...
   if "simon-pos-curr" == 5 then goto label if_true_2846;
   if_true_2846:
   // if sequence: if (button $button5 pressed) { "simon-player-move" = 5; g...
   if button $button5 pressed then goto label if_true_2848;
   goto label rendezvous_2835;
   if_true_2848:
   "simon-player-move" = 5;
   goto "simon-player-do-move";
   rendezvous_2835:
   // if sequence: if ("simon-pos-curr" == 2) { if (button $button2 pressed)...
   if "simon-pos-curr" == 2 then goto label if_true_2864;
   if_true_2864:
   // if sequence: if (button $button2 pressed) { "simon-player-move" = 2; g...
   if button $button2 pressed then goto label if_true_2866;
   goto label rendezvous_2863;
   if_true_2866:
   "simon-player-move" = 2;
   goto "simon-player-do-move";
   rendezvous_2863:
   // if sequence: if ("simon-pos-curr" == 3) { if (button $button3 pressed)...
   if "simon-pos-curr" == 3 then goto label if_true_2870;
   if_true_2870:
   // if sequence: if (button $button3 pressed) { "simon-player-move" = 3; g...
   if button $button3 pressed then goto label if_true_2872;
   goto label rendezvous_2869;
   if_true_2872:
   "simon-player-move" = 3;
   goto "simon-player-do-move";
   rendezvous_2869:
   entity "Simon" on_tick = "simon-player-listen";
   end_of_script_2796:
}

"simon-player-animation-pose_bottom_left-wait" {
   // if sequence: if (button $button0 up) { "simon-player-wait-finished" = ...
   if button $button0 up then goto label if_true_2881;
   goto label rendezvous_2880;
   if_true_2881:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2880:
   end_of_script_2879:
}

"simon-player-animation-pose_bottom_right-wait" {
   // if sequence: if (button $button1 up) { "simon-player-wait-finished" = ...
   if button $button1 up then goto label if_true_2884;
   goto label rendezvous_2883;
   if_true_2884:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2883:
   end_of_script_2882:
}

"simon-player-animation-pose_left-wait" {
   // if sequence: if (button $button2 up) { "simon-player-wait-finished" = ...
   if button $button2 up then goto label if_true_2887;
   goto label rendezvous_2886;
   if_true_2887:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2886:
   end_of_script_2885:
}

"simon-player-animation-pose_right-wait" {
   // if sequence: if (button $button3 up) { "simon-player-wait-finished" = ...
   if button $button3 up then goto label if_true_2890;
   goto label rendezvous_2889;
   if_true_2890:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2889:
   end_of_script_2888:
}

"simon-player-animation-pose_top_left-wait" {
   // if sequence: if (button $button4 up) { "simon-player-wait-finished" = ...
   if button $button4 up then goto label if_true_2893;
   goto label rendezvous_2892;
   if_true_2893:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2892:
   end_of_script_2891:
}

"simon-player-animation-pose_top_right-wait" {
   // if sequence: if (button $button5 up) { "simon-player-wait-finished" = ...
   if button $button5 up then goto label if_true_2896;
   goto label rendezvous_2895;
   if_true_2896:
   "simon-player-wait-finished" = true;
   goto "null_script";
   rendezvous_2895:
   end_of_script_2894:
}

"simon-player-wait" {
   if "simon-player-wait-finished" then goto script "simon-player-wait-finished";
   end_of_script_2905:
}

"simon-player-wait-finished" {
   "simon-player-wait-finished" = false;
   player current_animation = 3;
   light ALL = false;
   "i" += 1;
   if "ch2-simon-move-fail" then goto script "simon-game-lose";
   goto "simon-player-turn-loop-start";
   end_of_script_2906:
}

"simon-player-turn-end" {
   "simon-round" += 1;
   if "simon-round" > 7 then goto script "simon-game-win";
   goto "simon-enemy-turn-start";
   end_of_script_2907:
}

"on_load-ch2-castle-31-doorless" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-31.mgs-65:1";
   entity "Simon" current_animation = 12;
   entity "Sea Moss" direction = "west";
   // if sequence: if (warp_state == "walk_from-north") { player position = ...
   if warp_state == "walk_from-north" then goto label if_true_2941;
   if warp_state == "walk_from-west" then goto label if_true_2942;
   goto label rendezvous_2940;
   if_true_2942:
   player position = geometry "walk_from-west";
   goto label rendezvous_2940;
   if_true_2941:
   player position = geometry "walk_from-north";
   rendezvous_2940:
   copy!("ch2-map-init")
   end_of_script_2939:
}

"on_load-ch2-castle-31" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-31") { show serial_dialog { "Discover...
   if !"ch2-seen-room-31" then goto label if_true_2945;
   // auto serial_dialog: "Entering [1mGRAND HALL[0m......"
   show serial_dialog "ch2-castle-31.mgs-86:2";
   goto label rendezvous_2944;
   if_true_2945:
   // auto serial_dialog: "Discovered [1m[36mGRAND HALL[0m! Room..."
   show serial_dialog "ch2-castle-31.mgs-83:2";
   "ch2-seen-room-31" = true;
   rendezvous_2944:
   // if sequence: if ( "ch2-installed-keyboard" || "ch2-carrying-keyboard" ...
   if "ch2-installed-keyboard" then goto label if_true_2947;
   if "ch2-carrying-keyboard" then goto label if_true_2947;
   goto label rendezvous_2946;
   if_true_2947:
   copy!("ch2-hide-keyboard")
   rendezvous_2946:
   "ch2-simon-heard-high" = false;
   "ch2-simon-heard-low" = false;
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "simon" = "debug-simon"; comman...
   if debug_mode then goto label if_true_2949;
   goto label rendezvous_2948;
   if_true_2949:
   command "simon" = "debug-simon";
   command "simon" + "high" = "debug-simon-high";
   command "simon" + "low" = "debug-simon-low";
   command "simon" + "win" = "debug-simon-win";
   command "simon" + "lose" = "debug-simon-lose";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-31.mgs-108:2";
   rendezvous_2948:
   end_of_script_2943:
}

"interact-ch2-simon" {
   // if sequence: if ("ch2-storyflag-round" < 2) { show dialog { Simon "The...
   if "ch2-storyflag-round" < 2 then goto label if_true_2974;
   if !"ch2-simon-won-before" then goto label if_true_2975;
   if "interrupt" then goto label if_true_2978;
   entity "Simon" current_animation = 12;
   // if sequence: if (!"ch2-simon-repeat-backstory") { show dialog { Simon ...
   if !"ch2-simon-repeat-backstory" then goto label if_true_2980;
   // auto dialog: "Hey, keytar wizard! My soul is thirsting..."
   show dialog "ch2-castle-31.mgs-273:3";
   goto label rendezvous_2979;
   if_true_2980:
   // auto dialog: "Hey hey hey, look who it is! It's the ke..."
   show dialog "ch2-castle-31.mgs-266:3";
   "ch2-simon-repeat-backstory" = true;
   rendezvous_2979:
   // if sequence: if ( "ch2-carrying-keyboard" || "ch2-simon-repeat-brunhil...
   entity "Simon" current_animation = 0;
   // auto dialog: "So, uh, I don't exactly have Rosetta wit..."
   show dialog "ch2-castle-31.mgs-284:3";
   entity "Simon" current_animation = 12;
   // auto dialog: "Not a problem, not a problem! Here, you ..."
   show dialog "ch2-castle-31.mgs-288:3";
   entity "Simon" current_animation = 0;
   // auto dialog: "Only my favorite four or five...."
   show dialog "ch2-castle-31.mgs-293:3";
   "ch2-simon-repeat-brunhilda-backstory" = true;
   rendezvous_2981:
   copy!("simon-game-launcher")
   goto label rendezvous_2973;
   if_true_2978:
   entity "Simon" current_animation = 12;
   // auto dialog: "Ah, man! I'm still sweatin' after that l..."
   show dialog "ch2-castle-31.mgs-257:2";
   copy!("simon-game-launcher")
   goto label rendezvous_2973;
   if_true_2975:
   // if sequence: if (!"ch2-simon-backstory") { show dialog { PLAYER "So, a...
   if !"ch2-simon-backstory" then goto label if_true_2977;
   entity "Simon" current_animation = 12;
   // auto dialog: "Change your mind about a keytar battle? ..."
   show dialog "ch2-castle-31.mgs-249:3";
   goto label rendezvous_2976;
   if_true_2977:
   // auto dialog: "So, about your keyboard -- erm, \"keytar..."
   show dialog "ch2-castle-31.mgs-227:3";
   entity "Simon" current_animation = 13;
   entity "Alvin" on_tick = "camera-angry-shake";
   // auto dialog: "WHOA WHOA WHOA hey, hands off! I'm not j..."
   show dialog "ch2-castle-31.mgs-233:3";
   entity "Alvin" on_tick = "null_script";
   entity "Simon" current_animation = 0;
   // auto dialog: "But hey, you know what? I'll give you th..."
   show dialog "ch2-castle-31.mgs-239:3";
   entity "Simon" current_animation = 12;
   // auto dialog: "I'm bored to death, so how about a keyta..."
   show dialog "ch2-castle-31.mgs-243:3";
   "ch2-simon-backstory" = true;
   rendezvous_2976:
   copy!("simon-game-launcher")
   goto label rendezvous_2973;
   if_true_2974:
   // auto dialog: "There's no audience! I can't play in the..."
   show dialog "ch2-castle-31.mgs-221:2";
   rendezvous_2973:
   end_of_script_2972:
}

"on_load-ch2-castle-32-doorless" {
   "ch2-in-room" = 32;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-32.mgs-85:1";
   // if sequence: if (warp_state == "walk_from-northeast") { player positio...
   if warp_state == "walk_from-northeast" then goto label if_true_3009;
   if warp_state == "walk_from-northwest" then goto label if_true_3010;
   goto label rendezvous_3008;
   if_true_3010:
   player position = geometry "walk_from-northwest";
   goto label rendezvous_3008;
   if_true_3009:
   player position = geometry "walk_from-northeast";
   rendezvous_3008:
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   copy!("ch2-map-init")
   end_of_script_3007:
}

"on_load-ch2-castle-32" {
   "ch2-in-room" = 32;
   entity "Gloria" position = geometry "worry-walk2";
   entity "Gloria" direction = entity "Samson";
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-32") { show serial_dialog { "Discover...
   if !"ch2-seen-room-32" then goto label if_true_3013;
   // auto serial_dialog: "Entering [1mCASTLE KITCHEN[0m......"
   show serial_dialog "ch2-castle-32.mgs-106:2";
   goto label rendezvous_3012;
   if_true_3013:
   // auto serial_dialog: "Discovered [1m[36mCASTLE KITCHEN[0m! ..."
   show serial_dialog "ch2-castle-32.mgs-103:2";
   "ch2-seen-room-32" = true;
   rendezvous_3012:
   // if sequence: if (!"ch2-ramchips-dispensed") { copy!("ch2-hide-ramchips...
   if !"ch2-ramchips-dispensed" then goto label if_true_3015;
   goto label rendezvous_3014;
   if_true_3015:
   copy!("ch2-hide-ramchips")
   rendezvous_3014:
   // if sequence: if (warp_state == "walk_from-northeast") { player positio...
   if warp_state == "walk_from-northeast" then goto label if_true_3017;
   if warp_state == "walk_from-northwest" then goto label if_true_3018;
   goto label rendezvous_3016;
   if_true_3018:
   player position = geometry "walk_from-northwest";
   goto label rendezvous_3016;
   if_true_3017:
   player position = geometry "walk_from-northeast";
   rendezvous_3016:
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "want" + "chips" = "debug-want-...
   if debug_mode then goto label if_true_3020;
   goto label rendezvous_3019;
   if_true_3020:
   command "want" + "chips" = "debug-want-chips";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-32.mgs-126:2";
   rendezvous_3019:
   end_of_script_3011:
}

"on_load-ch2-castle-33" {
   "ch2-in-room" = 33;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-33") { show serial_dialog { "Discover...
   if !"ch2-seen-room-33" then goto label if_true_3090;
   // auto serial_dialog: "Entering [1mHYDROPONICS ROOM[0m......"
   show serial_dialog "ch2-castle-33.mgs-34:2";
   goto label rendezvous_3089;
   if_true_3090:
   // auto serial_dialog: "Discovered [1m[36mHYDROPONICS ROOM[0m..."
   show serial_dialog "ch2-castle-33.mgs-31:2";
   "ch2-seen-room-33" = true;
   rendezvous_3089:
   // if sequence: if ( "ch2-installed-mouse" || "ch2-carrying-mouse" ) { co...
   if "ch2-installed-mouse" then goto label if_true_3092;
   if "ch2-carrying-mouse" then goto label if_true_3092;
   goto label rendezvous_3091;
   if_true_3092:
   copy!("ch2-hide-mouse")
   rendezvous_3091:
   "ch2-mousegame" = false;
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "mousegame" = "ch2-debug-mouseg...
   if debug_mode then goto label if_true_3094;
   goto label rendezvous_3093;
   if_true_3094:
   command "mousegame" = "ch2-debug-mousegame";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-33.mgs-49:2";
   rendezvous_3093:
   // if sequence: if (!"ch2-cutseen-castle33") { player_control = off; if (...
   if !"ch2-cutseen-castle33" then goto label if_true_3098;
   goto label rendezvous_3097;
   if_true_3098:
   player_control = false;
   // if sequence: if (warp_state != "warped") { wait 600ms; show dialog { G...
   if warp_state != "warped" then goto label if_true_3100;
   wait 200ms;
   // auto dialog: "Oh!..."
   show dialog "ch2-castle-33.mgs-67:3";
   player direction = entity "Gregory";
   // auto dialog: "Well, that's a new face, isn't it?..."
   show dialog "ch2-castle-33.mgs-71:3";
   goto label rendezvous_3099;
   if_true_3100:
   wait 600ms;
   // auto dialog: "Oh!..."
   show dialog "ch2-castle-33.mgs-58:3";
   player direction = entity "Gregory";
   // auto dialog: "Well, that's a new face, isn't it?..."
   show dialog "ch2-castle-33.mgs-62:3";
   rendezvous_3099:
   player_control = true;
   "ch2-cutseen-castle33" = true;
   rendezvous_3097:
   end_of_script_3088:
}

"on_tick-ch2-castle-33" {
   // if sequence: if (player intersects geometry "south-hitbox") { if ("ch2...
   if player intersects geometry "south-hitbox" then goto label if_true_3105;
   if_true_3105:
   // if sequence: if ("ch2-mousegame") { player_control = off; player curre...
   if "ch2-mousegame" then goto label if_true_3107;
   warp_state = "walk_from-northwest";
   copy!("ch2-load-castle-32-special")
   goto label rendezvous_3104;
   if_true_3107:
   player_control = false;
   player current_animation = 0;
   // auto dialog: "Wait, I shouldn't leave before giving ba..."
   show dialog "ch2-castle-33.mgs-87:3";
   player position -> geometry "south-hitbox-bounce" origin over 300ms;
   player_control = true;
   rendezvous_3104:
   if "ch2-mousegame" then goto script "ch2-mousegame-tick";
   end_of_script_3101:
}

"ch2-interact-gregory" {
   copy!("face-player")
   // if sequence: if ("ch2-mousegame") { if (!"interrupt") { show dialog { ...
   if "ch2-mousegame" then goto label if_true_3117;
   if_true_3117:
   // if sequence: if (!"interrupt") { show dialog { SELF "That bluetooth pr...
   if !"interrupt" then goto label if_true_3119;
   // auto dialog: "Did you want to take a break?..."
   show dialog "ch2-castle-33.mgs-164:3";
   goto label rendezvous_3116;
   if_true_3119:
   // auto dialog: "That bluetooth proximity detector will t..."
   show dialog "ch2-castle-33.mgs-156:3";
   "interrupt" = true;
   rendezvous_3116:
   // if sequence: if ("ch2-storyflag-round" < 2) { if (!"ch2-gregory-backst...
   if "ch2-storyflag-round" < 2 then goto label if_true_3121;
   // if sequence: if ("ch2-carrying-mouse" || "ch2-installed-mouse") { show...
   if "ch2-carrying-mouse" then goto label if_true_3129;
   if "ch2-installed-mouse" then goto label if_true_3129;
   if !"ch2-mousegame-backstory" then goto label if_true_3130;
   // if sequence: if (!"interrupt") { show dialog { SELF "You still need th...
   if !"interrupt" then goto label if_true_3136;
   goto label rendezvous_3135;
   if_true_3136:
   // auto dialog: "You still need that bluetooth mouse? I'v..."
   show dialog "ch2-castle-33.mgs-297:4";
   rendezvous_3135:
   // auto dialog: "Want to try to catch the mouse?..."
   show dialog "ch2-castle-33.mgs-301:3";
   if_true_3130:
   // auto dialog: "This is kind of random, but I need a mou..."
   show dialog "ch2-castle-33.mgs-235:3";
   // if sequence: if (!"ch2-bluetooth-mouse-rant") { show dialog { SELF "We...
   if !"ch2-bluetooth-mouse-rant" then goto label if_true_3132;
   // auto dialog: "Well, you can have my old bluetooth mous..."
   show dialog "ch2-castle-33.mgs-245:4";
   goto label rendezvous_3131;
   if_true_3132:
   // auto dialog: "Well, you're in luck. I have a spare blu..."
   show dialog "ch2-castle-33.mgs-243:4";
   rendezvous_3131:
   // auto dialog: "Catch it?..."
   show dialog "ch2-castle-33.mgs-247:3";
   entity "Gregory" on_tick = "spin_self_clockwise";
   // auto dialog: "It's loose in this room somewhere, but I..."
   show dialog "ch2-castle-33.mgs-251:3";
   entity "Gregory" on_tick = "face-player";
   copy!("face-player")
   // auto dialog: "It's hiding in one of the hydroponics bi..."
   show dialog "ch2-castle-33.mgs-256:3";
   // if sequence: if (!"ch2-bluetooth-mouse-rant") { show dialog { SELF "We...
   if !"ch2-bluetooth-mouse-rant" then goto label if_true_3134;
   // auto dialog: "Well, it's not fond of cats...."
   show dialog "ch2-castle-33.mgs-263:4";
   goto label rendezvous_3133;
   if_true_3134:
   // auto dialog: "Well, it's not fond of cats. And I'm not..."
   show dialog "ch2-castle-33.mgs-261:4";
   rendezvous_3133:
   // auto dialog: "We ARE talking about a computer mouse, r..."
   show dialog "ch2-castle-33.mgs-265:3";
   player_control = false;
   entity "Gregory" on_tick = "null_script";
   entity "Gregory" direction += 1;
   wait 800ms;
   entity "Gregory" direction -= -1;
   entity "Gregory" on_tick = "face-player";
   // auto dialog: "Here, this is a bluetooth proximity dete..."
   show dialog "ch2-castle-33.mgs-275:3";
   lights_control = true;
   light ALL = false;
   entity "Lights" on_tick = "screen-lights-flash-bits";
   // auto dialog: "Yes, these eight lights in a line, here ..."
   show dialog "ch2-castle-33.mgs-282:3";
   copy!("ch2-map-init-hex")
   entity "Lights" on_tick = "ch2-serial-light-manager";
   // auto dialog: "Well, let me know when you want to have ..."
   show dialog "ch2-castle-33.mgs-289:3";
   player_control = true;
   "interrupt" = true;
   "ch2-mousegame-backstory" = true;
   if_true_3129:
   // auto dialog: "I like my mouse to be physically connect..."
   show dialog "ch2-castle-33.mgs-230:3";
   if_true_3121:
   // if sequence: if (!"ch2-gregory-backstory") { show dialog { SELF "Not s...
   if !"ch2-gregory-backstory" then goto label if_true_3123;
   // if sequence: if ( !"ch2-want-cactuscooler" || "ch2-carrying-cactuscool...
   if !"ch2-want-cactuscooler" then goto label if_true_3127;
   if "ch2-carrying-cactuscooler" then goto label if_true_3127;
   if "ch2-cactuscooler-delivered" then goto label if_true_3127;
   show dialog "ch2-gregory-cactus-help";
   if_true_3127:
   // auto dialog: "I'm slowing down in my old age, but even..."
   show dialog "ch2-castle-33.mgs-215:4";
   "ch2-bluetooth-mouse-rant" = true;
   if_true_3123:
   // auto dialog: "Not sure how you got in, but......"
   show dialog "ch2-castle-33.mgs-173:3";
   player direction = "south";
   // auto dialog: "But why isn't the door to this room crus..."
   show dialog "ch2-castle-33.mgs-179:3";
   player direction = entity "Gregory";
   entity "Gregory" on_tick = "spin_self_clockwise";
   // auto dialog: "This wing was recently redone to install..."
   show dialog "ch2-castle-33.mgs-184:3";
   entity "Gregory" on_tick = "face-player";
   copy!("face-player")
   // auto dialog: "They did some structural reinforcement, ..."
   show dialog "ch2-castle-33.mgs-190:3";
   "ch2-gregory-backstory" = true;
   // if sequence: if ( !"ch2-want-cactuscooler" || "ch2-carrying-cactuscool...
   // auto dialog: "Gotcha. So, um......."
   show dialog "ch2-castle-33.mgs-200:4";
   // auto dialog: "I was looking for this soda called Cactu..."
   show dialog "ch2-gregory-cactus-help";
   rendezvous_3120:
   end_of_script_3113:
}

"on_load-ch2-castle-34" {
   "ch2-in-room" = 34;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-34") { show serial_dialog { "Discover...
   if !"ch2-seen-room-34" then goto label if_true_3476;
   // auto serial_dialog: "Entering the [1mCASTLE PANTRY[0m......"
   show serial_dialog "ch2-castle-34.mgs-65:2";
   goto label rendezvous_3475;
   if_true_3476:
   // auto serial_dialog: "Discovered the [1m[36mCASTLE PANTRY[0..."
   show serial_dialog "ch2-castle-34.mgs-62:2";
   "ch2-seen-room-34" = true;
   rendezvous_3475:
   copy!("ch2-map-init")
   end_of_script_3474:
}

"on_load-ch2-castle-99" {
   "ch2-in-room" = 99;
   show serial_dialog "spacer";
   // if sequence: if (!"ch2-seen-room-99") { show serial_dialog { "Discover...
   if !"ch2-seen-room-99" then goto label if_true_3530;
   // auto serial_dialog: "Entering [1mSECRET LAB[0m......"
   show serial_dialog "ch2-castle-99.mgs-112:2";
   goto label rendezvous_3529;
   if_true_3530:
   // auto serial_dialog: "Discovered [1m[36mSECRET LAB[0m! Room..."
   show serial_dialog "ch2-castle-99.mgs-109:2";
   "ch2-seen-room-99" = true;
   rendezvous_3529:
   camera = geometry "camera";
   // if sequence: if (!"ch2-cutseen-castle99") { entity "Lambda" current_an...
   if !"ch2-cutseen-castle99" then goto label if_true_3532;
   goto label rendezvous_3531;
   if_true_3532:
   entity "Lambda" current_animation = 8;
   rendezvous_3531:
   // if sequence: if ("ch2-carrying-minirake-99") { copy!("ch2-minirake-99-...
   if "ch2-carrying-minirake-99" then goto label if_true_3534;
   goto label rendezvous_3533;
   if_true_3534:
   copy!("ch2-minirake-99-hide")
   rendezvous_3533:
   copy!("ch2-map-init")
   // if sequence: if (!"ch2-cutseen-castle99") { if (debug_mode) { command ...
   if !"ch2-cutseen-castle99" then goto label if_true_3538;
   goto label rendezvous_3537;
   if_true_3538:
   // if sequence: if (debug_mode) { command "skip" = "ch2-skip-99"; show se...
   if debug_mode then goto label if_true_3540;
   goto label rendezvous_3539;
   if_true_3540:
   command "skip" = "ch2-skip-99";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-castle-99.mgs-135:3";
   rendezvous_3539:
   goto "ch2-cutscene-castle99";
   rendezvous_3537:
   end_of_script_3528:
}

"on_load-ch2-castle-outside" {
   player_control = false;
   // if sequence: if (!"ch2-full-escort-cutseen") { // todo: cutscene: lead...
   rendezvous_3572:
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-outside.mgs-29:1";
   // if sequence: if ("ch2-storyflag-round" != 0) { entity "Bert" on_tick =...
   if "ch2-storyflag-round" != 0 then goto label if_true_3575;
   goto label rendezvous_3574;
   if_true_3575:
   entity "Bert" on_tick = "yeet";
   rendezvous_3574:
   // if sequence: if ( "ch2-storyflag-round" == 1 || "ch2-storyflag-round" ...
   if "ch2-storyflag-round" == 1 then goto label if_true_3577;
   if "ch2-storyflag-round" == 2 then goto label if_true_3577;
   if "ch2-storyflag-round" == 3 then goto label if_true_3577;
   if "ch2-storyflag-round" >= 5 then goto label if_true_3577;
   goto label rendezvous_3576;
   if_true_3577:
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   rendezvous_3576:
   copy!("ch2-map-init")
   // if sequence: if (warp_state == "walk_from-north") { player position ->...
   if warp_state == "walk_from-north" then goto label if_true_3579;
   if warp_state == "walk_from-east" then goto label if_true_3580;
   if warp_state == "ch2-ending" then goto label if_true_3581;
   goto label rendezvous_3578;
   if_true_3581:
   goto "ch2-post-credits";
   goto label rendezvous_3578;
   if_true_3580:
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto label rendezvous_3578;
   if_true_3579:
   player position -> geometry "walk_from-north" length over 200ms;
   rendezvous_3578:
   end_of_script_3571:
}

"on_load-ch2-greenhouse" {
   command "look" + "ethernettles" = "look-ch2-ethernettles";
   show serial_dialog "spacer";
   show serial_dialog "ch2-greenhouse.mgs-142:1";
   "ethernettle_id" = entity "EtherNettle1" primary_id;
   "EtherNettle1" = entity "EtherNettle1" primary_id;
   "EtherNettle2" = entity "EtherNettle2" primary_id;
   "EtherNettle3" = entity "EtherNettle3" primary_id;
   "EtherNettle4" = entity "EtherNettle4" primary_id;
   "EtherNettle5" = entity "EtherNettle5" primary_id;
   "EtherNettle6" = entity "EtherNettle6" primary_id;
   "EtherNettle7" = entity "EtherNettle7" primary_id;
   "EtherNettle8" = entity "EtherNettle8" primary_id;
   copy!("ch2-map-init")
   end_of_script_3762:
}

"on_load-ch2-lodge-rtfm" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge-rtfm.mgs-64:1";
   // if sequence: if ("ch2-storyflag-round" != 1) { entity "Bert" on_tick =...
   if "ch2-storyflag-round" != 1 then goto label if_true_3798;
   goto label rendezvous_3797;
   if_true_3798:
   entity "Bert" on_tick = "yeet";
   rendezvous_3797:
   // if sequence: if ("ch2-storyflag-round" != 3) { entity "Jackob" on_tick...
   if "ch2-storyflag-round" != 3 then goto label if_true_3800;
   goto label rendezvous_3799;
   if_true_3800:
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   rendezvous_3799:
   copy!("ch2-map-init")
   end_of_script_3796:
}

"on_load-ch2-lodge" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge.mgs-58:1";
   // if sequence: if ("ch2-storyflag-round" != 1) { entity "Alfonso" on_tic...
   if "ch2-storyflag-round" != 1 then goto label if_true_3816;
   goto label rendezvous_3815;
   if_true_3816:
   entity "Alfonso" on_tick = "yeet";
   rendezvous_3815:
   // if sequence: if ( "ch2-storyflag-round" == 3 || "ch2-storyflag-round" ...
   if "ch2-storyflag-round" == 3 then goto label if_true_3818;
   if "ch2-storyflag-round" == 4 then goto label if_true_3818;
   if "ch2-storyflag-round" != 1 then goto label if_true_3819;
   goto label rendezvous_3817;
   if_true_3819:
   entity "Jackob" on_tick = "yeet";
   goto label rendezvous_3817;
   if_true_3818:
   entity "Jackob" position = geometry "zappy-spot";
   entity "Jackob" name = "Uncle Zappy";
   entity "Jackob" on_look = "look-ch2-zappy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zappy";
   entity "Jackob" type = "lightning_boy2";
   entity "Jackob" direction = "north";
   rendezvous_3817:
   // if sequence: if ( "ch2-installed-manual" || "ch2-carrying-manual" ) { ...
   if "ch2-installed-manual" then goto label if_true_3821;
   if "ch2-carrying-manual" then goto label if_true_3821;
   goto label rendezvous_3820;
   if_true_3821:
   copy!("ch2-hide-manual")
   rendezvous_3820:
   // if sequence: if (warp_state == "walk_from-north") { player_control = o...
   if warp_state == "walk_from-north" then goto label if_true_3823;
   goto label rendezvous_3822;
   if_true_3823:
   player_control = false;
   player position = geometry "walk_from-north";
   rendezvous_3822:
   copy!("ch2-map-init")
   end_of_script_3814:
}

"on_load-ch2-magehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-magehouse.mgs-83:1";
   // if sequence: if ( "ch2-storyflag-round" == 0 ) { entity "Aunt Zippy" p...
   if "ch2-storyflag-round" == 0 then goto label if_true_3871;
   if "ch2-storyflag-round" == 3 then goto label if_true_3872;
   if "ch2-storyflag-round" == 4 then goto label if_true_3872;
   if "ch2-storyflag-round" == 5 then goto label if_true_3873;
   goto label rendezvous_3870;
   if_true_3873:
   entity "Aunt Zippy" position = geometry "alt-spot2";
   entity "Uncle Zappy" position = geometry "alt-spot1";
   goto label rendezvous_3870;
   if_true_3872:
   entity "Aunt Zippy" on_tick = "yeet";
   entity "Uncle Zappy" on_tick = "yeet";
   goto label rendezvous_3870;
   if_true_3871:
   entity "Aunt Zippy" position = geometry "alt-spot1";
   entity "Uncle Zappy" position = geometry "alt-spot3";
   rendezvous_3870:
   copy!("ch2-map-init")
   end_of_script_3869:
}

"on_load-ch2-oldcouplehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-oldcouplehouse.mgs-34:1";
   // if sequence: if (!"ch2-delmar-in-house") { entity "Delmar" on_tick = "...
   if !"ch2-delmar-in-house" then goto label if_true_3896;
   // if sequence: if (!"ch2-delmar-is-man") { entity "Beatrice" on_tick = "...
   if !"ch2-delmar-is-man" then goto label if_true_3898;
   entity "Beatrice" direction = entity "Delmar";
   entity "Delmar" direction = entity "Beatrice";
   entity "Delmar" type = "old_man";
   goto label rendezvous_3895;
   if_true_3898:
   entity "Beatrice" on_tick = "face-player";
   entity "Delmar" on_tick = "face-player";
   if_true_3896:
   entity "Delmar" on_tick = "yeet";
   rendezvous_3895:
   copy!("ch2-map-init")
   end_of_script_3894:
}

"on_tick-ch2-oldcouplehouse" {
   if player intersects geometry "south-hitbox" then goto script "on_walk-ch2-oldcouplehouse-south";
   // if sequence: if ("ch2-cutseen-delmar") { // and just leave him watchin...
   if "ch2-cutseen-delmar" then goto label if_true_3903;
   if_true_3903:
   // if sequence: if (entity "Delmar" type != "old_man") { entity "Delmar" ...
   if entity "Delmar" type != "old_man" then goto label if_true_3905;
   goto label rendezvous_3902;
   if_true_3905:
   entity "Delmar" on_tick = "face-player";
   "interrupt" = true;
   rendezvous_3902:
   end_of_script_3899:
}

"ch2-check-if-sheep" {
   if "ch2-delmar-is-man" then goto script "null_script";
   // if sequence: if (entity "Delmar" type == "old_man") { "ch2-delmar-is-m...
   if entity "Delmar" type == "old_man" then goto label if_true_3908;
   goto label rendezvous_3907;
   if_true_3908:
   "ch2-delmar-is-man" = true;
   if !"ch2-cutseen-delmar" then goto script "ch2-cutscene-delmar-reconnect";
   rendezvous_3907:
   end_of_script_3906:
}

"interact-ch2-delmar" {
   copy!("face-player")
   // if sequence: if ("interrupt") { if (entity "Delmar" type == "sheep "||...
   if "interrupt" then goto label if_true_3914;
   if entity "Delmar" type == "old_man" then goto label if_true_3917;
   // auto dialog: "......."
   show dialog "ch2-oldcouplehouse.mgs-137:2";
   if_true_3917:
   // auto dialog: "Thanks a lot, lad. I'll try to be a litt..."
   show dialog "ch2-oldcouplehouse.mgs-134:2";
   self direction = entity "Beatrice";
   if_true_3914:
   // if sequence: if (entity "Delmar" type == "sheep "|| entity "Delmar" ty...
   if entity "Delmar" type == "sheep " then goto label if_true_3916;
   if entity "Delmar" type == "helga" then goto label if_true_3916;
   // auto dialog: "I've got my eye on you, sonny......."
   show dialog "ch2-oldcouplehouse.mgs-131:3";
   goto label rendezvous_3913;
   if_true_3916:
   // auto dialog: "......."
   show dialog "ch2-oldcouplehouse.mgs-129:3";
   rendezvous_3913:
   end_of_script_3912:
}

"on_load-ch2-smithfamily" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-smithfamily.mgs-34:1";
   copy!("ch2-map-init")
   end_of_script_4358:
}

"on_load-ch2-town" {
   if warp_state == "cutscene-escort" then goto script "ch2-escort-cutscene";
   show serial_dialog "spacer";
   show serial_dialog "ch2-town.mgs-31:1";
   entity "Bert" on_tick = "yeet";
   // if sequence: if ("ch2-storyflag-round" < 5) { entity "Jackob" on_tick ...
   if "ch2-storyflag-round" < 5 then goto label if_true_4375;
   if_true_4375:
   entity "Jackob" on_tick = "yeet";
   // if sequence: if ("ch2-storyflag-round" == 2) { copy!("ch2-setup-alfons...
   if "ch2-storyflag-round" == 2 then goto label if_true_4377;
   entity "Alfonso" on_tick = "yeet";
   goto label rendezvous_4374;
   if_true_4377:
   copy!("ch2-setup-alfonso-verthandi")
   rendezvous_4374:
   // if sequence: if ( "ch2-storyflag-round" == 1 || "ch2-storyflag-round" ...
   if "ch2-storyflag-round" == 1 then goto label if_true_4379;
   if "ch2-storyflag-round" == 2 then goto label if_true_4379;
   if "ch2-storyflag-round" == 3 then goto label if_true_4380;
   if "ch2-storyflag-round" == 4 then goto label if_true_4380;
   goto label rendezvous_4378;
   if_true_4380:
   entity "Shepherd" position = geometry "shepherd1";
   goto label rendezvous_4378;
   if_true_4379:
   entity "Shepherd" position = geometry "shepherd2";
   entity "Shepherd" direction = "east";
   entity "Shepherd" on_tick = "null_script";
   rendezvous_4378:
   // if sequence: if ("ch2-storyflag-round" == 0) { entity "Verthandi" posi...
   if "ch2-storyflag-round" == 0 then goto label if_true_4382;
   if "ch2-storyflag-round" == 3 then goto label if_true_4383;
   if "ch2-storyflag-round" == 4 then goto label if_true_4383;
   goto label rendezvous_4381;
   if_true_4383:
   entity "Verthandi" position = geometry "verthandi2";
   entity "Verthandi" direction = "north";
   goto label rendezvous_4381;
   if_true_4382:
   entity "Verthandi" position = geometry "verthandi1";
   entity "Verthandi" direction = "west";
   rendezvous_4381:
   // if sequence: if ( "ch2-storyflag-round" == 1 || "ch2-storyflag-round" ...
   if "ch2-storyflag-round" == 1 then goto label if_true_4385;
   if "ch2-storyflag-round" == 2 then goto label if_true_4385;
   if "ch2-storyflag-round" == 3 then goto label if_true_4386;
   if "ch2-storyflag-round" == 4 then goto label if_true_4386;
   goto label rendezvous_4384;
   if_true_4386:
   entity "Marta" position = geometry "marta2";
   entity "Marta" direction = "south";
   goto label rendezvous_4384;
   if_true_4385:
   entity "Marta" position = geometry "marta1";
   entity "Marta" direction = "west";
   rendezvous_4384:
   // if sequence: if ("ch2-delmar-in-house") { entity "Delmar" on_tick = "y...
   if "ch2-delmar-in-house" then goto label if_true_4388;
   goto label rendezvous_4387;
   if_true_4388:
   entity "Delmar" on_tick = "yeet";
   rendezvous_4387:
   player_control = false;
   // if sequence: if (warp_state == "raw_game_load-ch2") { copy!("restore_p...
   if warp_state == "raw_game_load-ch2" then goto label if_true_4390;
   if warp_state == "exit_from-credits" then goto label if_true_4391;
   if warp_state == "walk_from-east" then goto label if_true_4392;
   if warp_state == "walk_from-west" then goto label if_true_4393;
   if warp_state == "walk_from-bobsclub" then goto label if_true_4394;
   if warp_state == "walk_from-bakery" then goto label if_true_4395;
   if warp_state == "walk_from-lodge" then goto label if_true_4396;
   if warp_state == "walk_from-greenhouse" then goto label if_true_4397;
   if warp_state == "walk_from-magehouse" then goto label if_true_4398;
   if warp_state == "walk_from-oldcouplehouse" then goto label if_true_4399;
   if warp_state == "walk_from-smithfamily" then goto label if_true_4400;
   if warp_state == "walk_from-woprhouse" then goto label if_true_4401;
   if warp_state == "walk_from-bobsclub" then goto label if_true_4402;
   goto label rendezvous_4389;
   if_true_4402:
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto label rendezvous_4389;
   if_true_4401:
   player position -> geometry "walk_from-woprhouse" length over 200ms;
   goto label rendezvous_4389;
   if_true_4400:
   player position -> geometry "walk_from-smithfamily" length over 200ms;
   goto label rendezvous_4389;
   if_true_4399:
   player position -> geometry "walk_from-oldcouplehouse" length over 200ms;
   goto label rendezvous_4389;
   if_true_4398:
   player position -> geometry "walk_from-magehouse" length over 200ms;
   goto label rendezvous_4389;
   if_true_4397:
   player position -> geometry "walk_from-greenhouse" length over 200ms;
   goto label rendezvous_4389;
   if_true_4396:
   player position -> geometry "walk_from-lodge" length over 200ms;
   goto label rendezvous_4389;
   if_true_4395:
   player position -> geometry "walk_from-bakery" length over 200ms;
   goto label rendezvous_4389;
   if_true_4394:
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto label rendezvous_4389;
   if_true_4393:
   player path = "walk_from-west";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto label rendezvous_4389;
   if_true_4392:
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto label rendezvous_4389;
   if_true_4391:
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   goto label rendezvous_4389;
   if_true_4390:
   copy!("restore_player_state")
   rendezvous_4389:
   copy!("ch2-map-init")
   // if sequence: if (debug_mode) { command "cutbug" = "cutbug"; command "c...
   if debug_mode then goto label if_true_4404;
   goto label rendezvous_4403;
   if_true_4404:
   command "cutbug" = "cutbug";
   command "cutbug" + "auto" = "cutbug-auto";
   // auto serial_dialog: " ..."
   show serial_dialog "ch2-town.mgs-125:2";
   rendezvous_4403:
   copy!("ch2-player-spawn-click-protection")
   end_of_script_4371:
}

"interact-ch2-jackob-end" {
   if "ch2-storyflag-round" < 5 then goto script "null_script";
   copy!("face-player")
   show dialog "ch2-town.mgs-431:1";
   // if sequence: if (!"ch1_finished") { if (!"ch1_unfinished_backstory") {...
   if !"ch1_finished" then goto label if_true_4465;
   if_true_4465:
   // if sequence: if (!"ch1_unfinished_backstory") { show dialog { SELF "Bu...
   if !"ch1_unfinished_backstory" then goto label if_true_4467;
   goto label rendezvous_4464;
   if_true_4467:
   // auto dialog: "But you know, it seems like you still ha..."
   show dialog "ch2-town.mgs-436:3";
   "ch1_unfinished_backstory" = true;
   rendezvous_4464:
   show dialog "ch2-town.mgs-445:1";
   end_of_script_4461:
}

"interact-ch2-alfonso-end" {
   if "ch2-storyflag-round" < 5 then goto script "null_script";
   copy!("face-player")
   show dialog "ch2-town.mgs-458:1";
   end_of_script_4468:
}

"register-colors" {
   command "colors" = "command-colors";
   command "colors + bg" = "command-colors-bg";
   command "colors + bold" = "command-colors-bold";
   command "colors + dim" = "command-colors-dim";
   end_of_script_4501:
}

"register-commentary" {
   command "commentary" = "command-commentary-solo";
   command "commentary + on" = "command-commentary-on";
   command "commentary + off" = "command-commentary-off";
   end_of_script_4506:
}

"register-inventory" {
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   end_of_script_4519:
}

"command-inventory" {
   "ch2-count-inventory" = 0;
   // if sequence: if (!"only-count-inventory") { show serial_dialog "spacer...
   if !"only-count-inventory" then goto label if_true_4525;
   goto label rendezvous_4524;
   if_true_4525:
   show serial_dialog "spacer";
   // auto serial_dialog: "[36mINVENTORY:[0m..."
   show serial_dialog "command-inventory.mgs-36:2";
   rendezvous_4524:
   // if sequence: if ("ch2-carrying-cactuscooler") { if (!"only-count-inven...
   if "ch2-carrying-cactuscooler" then goto label if_true_4529;
   goto label rendezvous_4528;
   if_true_4529:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " can...
   if !"only-count-inventory" then goto label if_true_4531;
   goto label rendezvous_4530;
   if_true_4531:
   // auto serial_dialog: "    can of Cactus Cooler..."
   show serial_dialog "command-inventory.mgs-43:3";
   rendezvous_4530:
   "ch2-count-inventory" += 1;
   rendezvous_4528:
   // if sequence: if ("ch2-carrying-heatsink") { if (!"only-count-inventory...
   if "ch2-carrying-heatsink" then goto label if_true_4535;
   goto label rendezvous_4534;
   if_true_4535:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " hea...
   if !"only-count-inventory" then goto label if_true_4537;
   goto label rendezvous_4536;
   if_true_4537:
   // auto serial_dialog: "    heat sink..."
   show serial_dialog "command-inventory.mgs-49:3";
   rendezvous_4536:
   "ch2-count-inventory" += 1;
   rendezvous_4534:
   // if sequence: if ("ch2-carrying-powersupply") { if (!"only-count-invent...
   if "ch2-carrying-powersupply" then goto label if_true_4541;
   goto label rendezvous_4540;
   if_true_4541:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " pow...
   if !"only-count-inventory" then goto label if_true_4543;
   goto label rendezvous_4542;
   if_true_4543:
   // auto serial_dialog: "    power supply..."
   show serial_dialog "command-inventory.mgs-55:3";
   rendezvous_4542:
   "ch2-count-inventory" += 1;
   rendezvous_4540:
   // if sequence: if ("ch2-carrying-monitor") { if (!"only-count-inventory"...
   if "ch2-carrying-monitor" then goto label if_true_4547;
   goto label rendezvous_4546;
   if_true_4547:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " mon...
   if !"only-count-inventory" then goto label if_true_4549;
   goto label rendezvous_4548;
   if_true_4549:
   // auto serial_dialog: "    monitor..."
   show serial_dialog "command-inventory.mgs-61:3";
   rendezvous_4548:
   "ch2-count-inventory" += 1;
   rendezvous_4546:
   // if sequence: if ("ch2-carrying-harddrive") { if (!"only-count-inventor...
   if "ch2-carrying-harddrive" then goto label if_true_4553;
   goto label rendezvous_4552;
   if_true_4553:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " har...
   if !"only-count-inventory" then goto label if_true_4555;
   goto label rendezvous_4554;
   if_true_4555:
   // auto serial_dialog: "    hard drive..."
   show serial_dialog "command-inventory.mgs-68:3";
   rendezvous_4554:
   "ch2-count-inventory" += 1;
   rendezvous_4552:
   // if sequence: if ("ch2-carrying-plate") { if (!"only-count-inventory") ...
   if "ch2-carrying-plate" then goto label if_true_4559;
   goto label rendezvous_4558;
   if_true_4559:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " din...
   if !"only-count-inventory" then goto label if_true_4561;
   goto label rendezvous_4560;
   if_true_4561:
   // auto serial_dialog: "    dinner plate..."
   show serial_dialog "command-inventory.mgs-74:3";
   rendezvous_4560:
   "ch2-count-inventory" += 1;
   rendezvous_4558:
   // if sequence: if ("ch2-carrying-needle") { if (!"only-count-inventory")...
   if "ch2-carrying-needle" then goto label if_true_4565;
   goto label rendezvous_4564;
   if_true_4565:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " pho...
   if !"only-count-inventory" then goto label if_true_4567;
   goto label rendezvous_4566;
   if_true_4567:
   // auto serial_dialog: "    phonograph needle..."
   show serial_dialog "command-inventory.mgs-80:3";
   rendezvous_4566:
   "ch2-count-inventory" += 1;
   rendezvous_4564:
   // if sequence: if ("ch2-carrying-keyboard") { if (!"only-count-inventory...
   if "ch2-carrying-keyboard" then goto label if_true_4571;
   goto label rendezvous_4570;
   if_true_4571:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " key...
   if !"only-count-inventory" then goto label if_true_4573;
   goto label rendezvous_4572;
   if_true_4573:
   // auto serial_dialog: "    keyboard..."
   show serial_dialog "command-inventory.mgs-86:3";
   rendezvous_4572:
   "ch2-count-inventory" += 1;
   rendezvous_4570:
   // if sequence: if ("ch2-carrying-mouse") { if (!"only-count-inventory") ...
   if "ch2-carrying-mouse" then goto label if_true_4577;
   goto label rendezvous_4576;
   if_true_4577:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " mou...
   if !"only-count-inventory" then goto label if_true_4579;
   goto label rendezvous_4578;
   if_true_4579:
   // auto serial_dialog: "    mouse..."
   show serial_dialog "command-inventory.mgs-92:3";
   rendezvous_4578:
   "ch2-count-inventory" += 1;
   rendezvous_4576:
   // if sequence: if ("ch2-carrying-ramchips") { if (!"only-count-inventory...
   if "ch2-carrying-ramchips" then goto label if_true_4583;
   goto label rendezvous_4582;
   if_true_4583:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " ram...
   if !"only-count-inventory" then goto label if_true_4585;
   goto label rendezvous_4584;
   if_true_4585:
   // auto serial_dialog: "    ramchips..."
   show serial_dialog "command-inventory.mgs-99:3";
   rendezvous_4584:
   "ch2-count-inventory" += 1;
   rendezvous_4582:
   // if sequence: if ("ch2-carrying-clock") { if (!"only-count-inventory") ...
   if "ch2-carrying-clock" then goto label if_true_4589;
   goto label rendezvous_4588;
   if_true_4589:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " clo...
   if !"only-count-inventory" then goto label if_true_4591;
   goto label rendezvous_4590;
   if_true_4591:
   // auto serial_dialog: "    clock..."
   show serial_dialog "command-inventory.mgs-105:3";
   rendezvous_4590:
   "ch2-count-inventory" += 1;
   rendezvous_4588:
   // if sequence: if ("ch2-carrying-cpu") { if (!"only-count-inventory") { ...
   if "ch2-carrying-cpu" then goto label if_true_4595;
   goto label rendezvous_4594;
   if_true_4595:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " cpu...
   if !"only-count-inventory" then goto label if_true_4597;
   goto label rendezvous_4596;
   if_true_4597:
   // auto serial_dialog: "    cpu..."
   show serial_dialog "command-inventory.mgs-111:3";
   rendezvous_4596:
   "ch2-count-inventory" += 1;
   rendezvous_4594:
   // if sequence: if ("ch2-carrying-goldfish") { if (!"only-count-inventory...
   if "ch2-carrying-goldfish" then goto label if_true_4601;
   goto label rendezvous_4600;
   if_true_4601:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " gol...
   if !"only-count-inventory" then goto label if_true_4603;
   goto label rendezvous_4602;
   if_true_4603:
   // auto serial_dialog: "    goldfish..."
   show serial_dialog "command-inventory.mgs-117:3";
   rendezvous_4602:
   "ch2-count-inventory" += 1;
   rendezvous_4600:
   // if sequence: if ("ch2-carrying-manual") { if (!"only-count-inventory")...
   if "ch2-carrying-manual" then goto label if_true_4607;
   goto label rendezvous_4606;
   if_true_4607:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " cal...
   if !"only-count-inventory" then goto label if_true_4609;
   goto label rendezvous_4608;
   if_true_4609:
   // auto serial_dialog: "    calculator manual..."
   show serial_dialog "command-inventory.mgs-123:3";
   rendezvous_4608:
   "ch2-count-inventory" += 1;
   rendezvous_4606:
   // if sequence: if ("ch2-carrying-abacus") { if (!"only-count-inventory")...
   if "ch2-carrying-abacus" then goto label if_true_4613;
   goto label rendezvous_4612;
   if_true_4613:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " aba...
   if !"only-count-inventory" then goto label if_true_4615;
   goto label rendezvous_4614;
   if_true_4615:
   // auto serial_dialog: "    abacus..."
   show serial_dialog "command-inventory.mgs-129:3";
   rendezvous_4614:
   "ch2-count-inventory" += 1;
   rendezvous_4612:
   // if sequence: if ("ch2-carrying-mainframeos") { if (!"only-count-invent...
   if "ch2-carrying-mainframeos" then goto label if_true_4619;
   goto label rendezvous_4618;
   if_true_4619:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " mai...
   if !"only-count-inventory" then goto label if_true_4621;
   goto label rendezvous_4620;
   if_true_4621:
   // auto serial_dialog: "    mainframe OS CD..."
   show serial_dialog "command-inventory.mgs-136:3";
   rendezvous_4620:
   "ch2-count-inventory" += 1;
   rendezvous_4618:
   // if sequence: if ("ch2-carrying-minirake-99") { if (!"only-count-invent...
   if "ch2-carrying-minirake-99" then goto label if_true_4625;
   goto label rendezvous_4624;
   if_true_4625:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " min...
   if !"only-count-inventory" then goto label if_true_4627;
   goto label rendezvous_4626;
   if_true_4627:
   // auto serial_dialog: "    mini rake..."
   show serial_dialog "command-inventory.mgs-143:3";
   rendezvous_4626:
   "ch2-count-inventory" += 1;
   rendezvous_4624:
   // if sequence: if ("ch2-count-inventory" == 0) { if (!"only-count-invent...
   if "ch2-count-inventory" == 0 then goto label if_true_4631;
   if_true_4631:
   // if sequence: if (!"only-count-inventory") { show serial_dialog { " (no...
   if !"only-count-inventory" then goto label if_true_4633;
   goto label rendezvous_4630;
   if_true_4633:
   // auto serial_dialog: "    (nothing)..."
   show serial_dialog "command-inventory.mgs-150:3";
   rendezvous_4630:
   "only-count-inventory" = false;
   // set int (ambiguous lhs): "ch2-counted-inventory" = ch2-count-inventory
   "ch2-counted-inventory" = "ch2";
   "ch2-counted-inventory" -= "count";
   "ch2-counted-inventory" -= "inventory";
   // This action was optimized out (setting 'ch2-counted-inventory' to itse...
   "ch2-count-inventory" = 0;
   end_of_script_4523:
}

"register-manual" {
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   end_of_script_4634:
}

"command-man-normal" {
   // if sequence: if ("ch2-cutseen-bert-secret") { if (!"ch2-lambda-bert-ba...
   if "ch2-cutseen-bert-secret" then goto label if_true_4653;
   if_true_4653:
   // if sequence: if (!"ch2-lambda-bert-backstory") { goto "ch2-bert-secret...
   if !"ch2-lambda-bert-backstory" then goto label if_true_4655;
   if !"ch2-parts-round-2-backstory" then goto label if_true_4656;
   goto label rendezvous_4652;
   if_true_4656:
   goto "ch2-lambda-round-2-parts1";
   goto label rendezvous_4652;
   if_true_4655:
   goto "ch2-bert-secret-lambda-intro";
   rendezvous_4652:
   // if sequence: if ("ch2-cutseen-bert-message") { if (!"ch2-parts-round-3...
   if "ch2-cutseen-bert-message" then goto label if_true_4658;
   goto label rendezvous_4657;
   if_true_4658:
   if !"ch2-parts-round-3-backstory" then goto script "ch2-bert-message-lambda-intro";
   rendezvous_4657:
   // if sequence: if ("ch2-cutseen-last-parts-done") { if (!"ch2-parts-roun...
   if "ch2-cutseen-last-parts-done" then goto label if_true_4660;
   goto label rendezvous_4659;
   if_true_4660:
   if !"ch2-parts-round-4-backstory" then goto script "ch2-lambda-round-4";
   rendezvous_4659:
   if "ch2-toot-done" then goto script "command-man-normal-convo";
   goto "ch2-toot-check";
   end_of_script_4648:
}

"command-parts-keyboard" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-keyboard") { show serial_dialog { "<m>...
   if "ch2-installed-keyboard" then goto label if_true_4927;
   if "ch2-carrying-keyboard" then goto label if_true_4928;
   copy!("ch2-describe-keyboard")
   goto label rendezvous_4926;
   if_true_4928:
   // auto serial_dialog: "[35mLAMBDA[0m: I've checked up on that..."
   show serial_dialog "command-parts.mgs-329:2";
   goto label rendezvous_4926;
   if_true_4927:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got a keyboard p..."
   show serial_dialog "command-parts.mgs-327:2";
   rendezvous_4926:
   show serial_dialog "command-parts.mgs-333:1";
   show serial_dialog "lambda-over";
   end_of_script_4925:
}

"command-parts-mouse" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-mouse") { show serial_dialog { "<m>LAM...
   if "ch2-installed-mouse" then goto label if_true_4931;
   if "ch2-carrying-mouse" then goto label if_true_4932;
   copy!("ch2-describe-mouse")
   goto label rendezvous_4930;
   if_true_4932:
   // auto serial_dialog: "[35mLAMBDA[0m: Installing the mouse is..."
   show serial_dialog "command-parts.mgs-344:2";
   goto label rendezvous_4930;
   if_true_4931:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got your mouse d..."
   show serial_dialog "command-parts.mgs-342:2";
   rendezvous_4930:
   show serial_dialog "command-parts.mgs-348:1";
   show serial_dialog "lambda-over";
   end_of_script_4929:
}

"command-parts-harddrive" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-harddrive") { show serial_dialog { "<m...
   if "ch2-installed-harddrive" then goto label if_true_4935;
   if "ch2-carrying-harddrive" then goto label if_true_4936;
   copy!("ch2-describe-harddrive")
   // auto serial_dialog: "    Use one of the solder stations in th..."
   show serial_dialog "command-parts.mgs-362:2";
   goto label rendezvous_4934;
   if_true_4936:
   // auto serial_dialog: "[35mLAMBDA[0m: The hard drive will nee..."
   show serial_dialog "command-parts.mgs-359:2";
   goto label rendezvous_4934;
   if_true_4935:
   // auto serial_dialog: "[35mLAMBDA[0m: The hard drive is alrea..."
   show serial_dialog "command-parts.mgs-357:2";
   rendezvous_4934:
   show serial_dialog "command-parts.mgs-366:1";
   show serial_dialog "lambda-over";
   end_of_script_4933:
}

"command-parts-plate" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-plate") { show serial_dialog { "<m>LAM...
   if "ch2-installed-plate" then goto label if_true_4939;
   if "ch2-carrying-plate" then goto label if_true_4940;
   copy!("ch2-describe-plate")
   if_true_4940:
   // if sequence: if (!"ch2-carrying-needle") { show serial_dialog { "<m>LA...
   if !"ch2-carrying-needle" then goto label if_true_4942;
   // auto serial_dialog: "[35mLAMBDA[0m: Now that you have both ..."
   show serial_dialog "command-parts.mgs-380:3";
   goto label rendezvous_4938;
   if_true_4942:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got a good [35m..."
   show serial_dialog "command-parts.mgs-378:3";
   if_true_4939:
   // auto serial_dialog: "[35mLAMBDA[0m: You've already... um, \..."
   show serial_dialog "command-parts.mgs-375:2";
   rendezvous_4938:
   show serial_dialog "command-parts.mgs-385:1";
   show serial_dialog "lambda-over";
   end_of_script_4937:
}

"command-parts-needle" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-needle") { show serial_dialog { "<m>LA...
   if "ch2-installed-needle" then goto label if_true_4945;
   if "ch2-carrying-needle" then goto label if_true_4946;
   copy!("ch2-describe-needle")
   if_true_4946:
   // if sequence: if (!"ch2-carrying-plate") { show serial_dialog { "<m>LAM...
   if !"ch2-carrying-plate" then goto label if_true_4948;
   // auto serial_dialog: "[35mLAMBDA[0m: Now that you have both ..."
   show serial_dialog "command-parts.mgs-399:3";
   goto label rendezvous_4944;
   if_true_4948:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got a [35mneedl..."
   show serial_dialog "command-parts.mgs-397:3";
   if_true_4945:
   // auto serial_dialog: "[35mLAMBDA[0m: You've already... um, \..."
   show serial_dialog "command-parts.mgs-394:2";
   rendezvous_4944:
   show serial_dialog "command-parts.mgs-404:1";
   show serial_dialog "lambda-over";
   end_of_script_4943:
}

"command-parts-ramchips" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-ramchips") { show serial_dialog { "<m>...
   if "ch2-installed-ramchips" then goto label if_true_4951;
   if "ch2-carrying-ramchips" then goto label if_true_4952;
   copy!("ch2-describe-ramchips")
   goto label rendezvous_4950;
   if_true_4952:
   // auto serial_dialog: "[35mLAMBDA[0m: To install RAM... \"chi..."
   show serial_dialog "command-parts.mgs-415:2";
   goto label rendezvous_4950;
   if_true_4951:
   // auto serial_dialog: "[35mLAMBDA[0m: The RAM is in place, ni..."
   show serial_dialog "command-parts.mgs-413:2";
   rendezvous_4950:
   show serial_dialog "command-parts.mgs-419:1";
   show serial_dialog "lambda-over";
   end_of_script_4949:
}

"command-parts-clock" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-clock") { show serial_dialog { "<m>LAM...
   if "ch2-installed-clock" then goto label if_true_4955;
   if "ch2-carrying-clock" then goto label if_true_4956;
   copy!("ch2-describe-clock")
   goto label rendezvous_4954;
   if_true_4956:
   // auto serial_dialog: "[35mLAMBDA[0m: So the system clock is ..."
   show serial_dialog "command-parts.mgs-433:2";
   goto label rendezvous_4954;
   if_true_4955:
   // auto serial_dialog: "[35mLAMBDA[0m: The clock's installed a..."
   show serial_dialog "command-parts.mgs-431:2";
   rendezvous_4954:
   show serial_dialog "command-parts.mgs-437:1";
   show serial_dialog "lambda-over";
   end_of_script_4953:
}

"command-parts-cpu" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-cpu") { show serial_dialog { "<m>LAMBD...
   if "ch2-installed-cpu" then goto label if_true_4959;
   if "ch2-carrying-cpu" then goto label if_true_4960;
   copy!("ch2-describe-cpu")
   goto label rendezvous_4958;
   if_true_4960:
   // auto serial_dialog: "[35mLAMBDA[0m: Line up the CPU with th..."
   show serial_dialog "command-parts.mgs-448:2";
   goto label rendezvous_4958;
   if_true_4959:
   // auto serial_dialog: "[35mLAMBDA[0m: Your CPU is in place al..."
   show serial_dialog "command-parts.mgs-446:2";
   rendezvous_4958:
   show serial_dialog "command-parts.mgs-452:1";
   show serial_dialog "lambda-over";
   end_of_script_4957:
}

"command-parts-goldfish" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-goldfish") { show serial_dialog { "<m>...
   if "ch2-installed-goldfish" then goto label if_true_4963;
   if "ch2-carrying-goldfish" then goto label if_true_4964;
   copy!("ch2-describe-goldfish")
   if_true_4964:
   // if sequence: if (!"ch2-carrying-abacus") { show serial_dialog { "<m>LA...
   if !"ch2-carrying-abacus" then goto label if_true_4966;
   // auto serial_dialog: "[35mLAMBDA[0m: Now that you have both ..."
   show serial_dialog "command-parts.mgs-466:3";
   goto label rendezvous_4962;
   if_true_4966:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got the goldfish..."
   show serial_dialog "command-parts.mgs-464:3";
   if_true_4963:
   // auto serial_dialog: "[35mLAMBDA[0m: You've already... um, \..."
   show serial_dialog "command-parts.mgs-461:2";
   rendezvous_4962:
   show serial_dialog "command-parts.mgs-471:1";
   show serial_dialog "lambda-over";
   end_of_script_4961:
}

"command-parts-abacus" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   // if sequence: if ("ch2-installed-abacus") { show serial_dialog { "<m>LA...
   if "ch2-installed-abacus" then goto label if_true_4969;
   if "ch2-carrying-abacus" then goto label if_true_4970;
   copy!("ch2-describe-abacus")
   if_true_4970:
   // if sequence: if (!"ch2-carrying-goldfish") { show serial_dialog { "<m>...
   if !"ch2-carrying-goldfish" then goto label if_true_4972;
   // auto serial_dialog: "[35mLAMBDA[0m: Now that you have both ..."
   show serial_dialog "command-parts.mgs-485:3";
   goto label rendezvous_4968;
   if_true_4972:
   // auto serial_dialog: "[35mLAMBDA[0m: You've got an abacus al..."
   show serial_dialog "command-parts.mgs-483:3";
   if_true_4969:
   // auto serial_dialog: "[35mLAMBDA[0m: You've already got the ..."
   show serial_dialog "command-parts.mgs-480:2";
   rendezvous_4968:
   show serial_dialog "command-parts.mgs-490:1";
   show serial_dialog "lambda-over";
   end_of_script_4967:
}

"warp-common" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   // if sequence: if (!"ch2-ring-zero-enabled-in-castle") { if (!debug_mode...
   if !"ch2-ring-zero-enabled-in-castle" then goto label if_true_5003;
   if_true_5003:
   // if sequence: if (!debug_mode) { if ("ch2-in-room" == 0) { goto "warp-c...
   if !debug_mode then goto label if_true_5005;
   goto label rendezvous_5002;
   if_true_5005:
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   rendezvous_5002:
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   copy!("warping-out-fade-out")
   end_of_script_4999:
}

"warp-ch2-castle-exterior" {
   copy!("warp-common")
   load map "ch2-castle-outside";
   end_of_script_5006:
}

"warp-ch2-1" {
   copy!("warp-common")
   copy!("ch2-load-castle-1-special")
   end_of_script_5007:
}

"warp-ch2-11" {
   copy!("warp-common")
   copy!("ch2-load-castle-11-special")
   end_of_script_5008:
}

"warp-ch2-12" {
   copy!("warp-common")
   copy!("ch2-load-castle-12-special")
   end_of_script_5009:
}

"warp-ch2-13" {
   copy!("warp-common")
   copy!("ch2-load-castle-13-special")
   end_of_script_5010:
}

"warp-ch2-14" {
   copy!("warp-common")
   copy!("ch2-load-castle-14-special")
   end_of_script_5011:
}

"warp-ch2-21" {
   copy!("warp-common")
   copy!("ch2-load-castle-21-special")
   end_of_script_5012:
}

"warp-ch2-22" {
   copy!("warp-common")
   copy!("ch2-load-castle-22-special")
   end_of_script_5013:
}

"warp-ch2-23" {
   copy!("warp-common")
   copy!("ch2-load-castle-23-special")
   end_of_script_5014:
}

"warp-ch2-31" {
   copy!("warp-common")
   copy!("ch2-load-castle-31-special")
   end_of_script_5015:
}

"warp-ch2-32" {
   copy!("warp-common")
   copy!("ch2-load-castle-32-special")
   end_of_script_5016:
}

"warp-ch2-33" {
   copy!("warp-common")
   load map "ch2-castle-33";
   end_of_script_5017:
}

"warp-ch2-34" {
   copy!("warp-common")
   load map "ch2-castle-34";
   end_of_script_5018:
}

"warp-ch2-99" {
   copy!("warp-common")
   load map "ch2-castle-99";
   end_of_script_5019:
}

"warp-ch2-town-destination-check" {
   // if sequence: if (!"ch2-ring-zero-enabled-in-castle") { if (!debug_mode...
   if !"ch2-ring-zero-enabled-in-castle" then goto label if_true_5022;
   goto label rendezvous_5021;
   if_true_5022:
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   rendezvous_5021:
   end_of_script_5020:
}

"warp-ch2-town" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-town";
   end_of_script_5024:
}

"warp-ch2-bakery" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-bakery";
   end_of_script_5025:
}

"warp-ch2-greenhouse" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-greenhouse";
   end_of_script_5026:
}

"warp-ch2-wopr" {
   // if sequence: if ( "wopr-backdoor-found" || debug_mode ) { copy!("warp-...
   if "wopr-backdoor-found" then goto label if_true_5029;
   if debug_mode then goto label if_true_5029;
   goto "warp-fail";
   goto label rendezvous_5028;
   if_true_5029:
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "woprhouse";
   rendezvous_5028:
   end_of_script_5027:
}

"warp-ch2-library" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-lodge";
   end_of_script_5030:
}

"warp-ch2-rtfmroom" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-lodge-rtfm";
   end_of_script_5031:
}

"warp-ch2-magehouse" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-magehouse";
   end_of_script_5032:
}

"warp-ch2-bobsclub" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-bobsclub";
   end_of_script_5033:
}

"warp-ch2-bobsclub-basement" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-bobsclub-basement";
   end_of_script_5034:
}

"warp-ch2-oldcouplehouse" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-oldcouplehouse";
   end_of_script_5035:
}

"warp-ch2-smithfamily" {
   copy!("warp-ch2-town-destination-check")
   copy!("warp-common")
   load map "ch2-smithfamily";
   end_of_script_5036:
}

"on_load-main_menu" {
   "current-chapter" = 0;
   copy!("register-colors")
   // if sequence: if (debug_mode) { command debug = "debug"; command hub = ...
   if debug_mode then goto label if_true_5138;
   goto label rendezvous_5137;
   if_true_5138:
   command "debug" = "debug";
   command "hub" = "debug-hub";
   command "honk" = "system_bell";
   command "bob" = "debug-bob";
   command "bob2" = "debug-bob2";
   command "bob3" = "debug-bob3";
   command "simon" = "debug-menu-simon";
   command "king" = "debug-king";
   command "ch2" = "menu-chapter_select-2";
   command "rtfm" = "command-rtfm";
   command "buffer" + "test" = "debug-buffertest";
   command "boot" = "ch2-bootup";
   command "post" = "debug-post";
   command "skip" + "1" = "debug-jump-to-round1";
   command "skip" + "2" = "debug-jump-to-round2";
   command "skip" + "3" = "debug-jump-to-round3";
   command "skip" + "4" = "debug-jump-to-round4";
   copy!("register-warp")
   copy!("register-storyflag")
   rendezvous_5137:
   end_of_script_5136:
}

"debug-post" {
   "ch2-wizard-backstory" = true;
   copy!("debug-set-flags-to-round4")
   "ch2-seen-room-99" = true;
   "ch2-map-mainframeos" = false;
   "ch2-carrying-mainframeos" = true;
   "ch2-cutseen-castle99" = true;
   "ch2-carrying-mainframeos" = false;
   copy!("ch2-install-mainframeos")
   "ch2-ring-zero-enabled-in-castle" = true;
   "ch2-storyflag-round" = 5;
   "credits-from-menu" = false;
   warp_state = "ch2-ending";
   load map "ch2-castle-outside";
   end_of_script_5139:
}

"debug-menu-simon" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   copy!("debug-finish-toot")
   "ch2-storyflag-round" = 2;
   copy!("warp-ch2-31")
   end_of_script_5140:
}

"system_bell" {
   show serial_dialog "main-menu.mgs-75:1";
   end_of_script_5142:
}

"main_menu" {
   player on_tick = "null_script";
   show dialog "main-menu.mgs-159:1";
   end_of_script_5153:
}

"menu-credits-choice" {
   show dialog "main-menu.mgs-173:1";
   end_of_script_5154:
}

"menu-bling-mode" {
   show dialog "main-menu.mgs-196:1";
   end_of_script_5157:
}

"menu-bling-dc801-showcase" {
   show dialog "main-menu.mgs-208:1";
   end_of_script_5158:
}

"menu-play_game" {
   show dialog "main-menu.mgs-223:1";
   end_of_script_5159:
}

"menu-erase_save" {
   show dialog "main-menu.mgs-235:1";
   end_of_script_5160:
}

"menu-load_game" {
   show dialog "main-menu.mgs-264:1";
   end_of_script_5164:
}

"menu-new_game" {
   show dialog "main-menu.mgs-296:1";
   end_of_script_5168:
}

"menu-player-name-q" {
   show dialog "main-menu.mgs-328:1";
   end_of_script_5172:
}

"menu-player-name-confirm" {
   show dialog "main-menu.mgs-355:1";
   end_of_script_5176:
}

"menu-player-name-random" {
   // rand macro: rand!( player name = [ "Chara", "Buster", "Tidus", "Frisk"...
   "__TEMP_0" ?= 20;
   if "__TEMP_0" == 0 then goto label if_RNG_5178;
   if "__TEMP_0" == 1 then goto label if_RNG_5179;
   if "__TEMP_0" == 2 then goto label if_RNG_5180;
   if "__TEMP_0" == 3 then goto label if_RNG_5181;
   if "__TEMP_0" == 4 then goto label if_RNG_5182;
   if "__TEMP_0" == 5 then goto label if_RNG_5183;
   if "__TEMP_0" == 6 then goto label if_RNG_5184;
   if "__TEMP_0" == 7 then goto label if_RNG_5185;
   if "__TEMP_0" == 8 then goto label if_RNG_5186;
   if "__TEMP_0" == 9 then goto label if_RNG_5187;
   if "__TEMP_0" == 10 then goto label if_RNG_5188;
   if "__TEMP_0" == 11 then goto label if_RNG_5189;
   if "__TEMP_0" == 12 then goto label if_RNG_5190;
   if "__TEMP_0" == 13 then goto label if_RNG_5191;
   if "__TEMP_0" == 14 then goto label if_RNG_5192;
   if "__TEMP_0" == 15 then goto label if_RNG_5193;
   if "__TEMP_0" == 16 then goto label if_RNG_5194;
   if "__TEMP_0" == 17 then goto label if_RNG_5195;
   if "__TEMP_0" == 18 then goto label if_RNG_5196;
   if "__TEMP_0" == 19 then goto label if_RNG_5197;
   if_RNG_5197:
   player name = "Bub";
   goto label rendezvous_5177;
   if_RNG_5196:
   player name = "XDDCC";
   goto label rendezvous_5177;
   if_RNG_5195:
   player name = "VeeVee";
   goto label rendezvous_5177;
   if_RNG_5194:
   player name = "Tom Honks";
   goto label rendezvous_5177;
   if_RNG_5193:
   player name = "Spy";
   goto label rendezvous_5177;
   if_RNG_5192:
   player name = "Steamed Hams";
   goto label rendezvous_5177;
   if_RNG_5191:
   player name = "Roxas";
   goto label rendezvous_5177;
   if_RNG_5190:
   player name = "Squall";
   goto label rendezvous_5177;
   if_RNG_5189:
   player name = "Cecil";
   goto label rendezvous_5177;
   if_RNG_5188:
   player name = "Zidane";
   goto label rendezvous_5177;
   if_RNG_5187:
   player name = "Kremit";
   goto label rendezvous_5177;
   if_RNG_5186:
   player name = "Terra";
   goto label rendezvous_5177;
   if_RNG_5185:
   player name = "Crono";
   goto label rendezvous_5177;
   if_RNG_5184:
   player name = "Ash";
   goto label rendezvous_5177;
   if_RNG_5183:
   player name = "Cloud";
   goto label rendezvous_5177;
   if_RNG_5182:
   player name = "Farnsworth";
   goto label rendezvous_5177;
   if_RNG_5181:
   player name = "Frisk";
   goto label rendezvous_5177;
   if_RNG_5180:
   player name = "Tidus";
   goto label rendezvous_5177;
   if_RNG_5179:
   player name = "Buster";
   goto label rendezvous_5177;
   if_RNG_5178:
   player name = "Chara";
   rendezvous_5177:
   show dialog "main-menu.mgs-391:1";
   end_of_script_5177:
}

"menu-chapter_select-q" {
   copy!("ch1-count-flags")
   copy!("ch2-count-flags")
   show dialog "main-menu.mgs-418:1";
   end_of_script_5200:
}

"menu-chapter_select-2-check" {
   // if sequence: if ("ch1_finished" || "warned_ch1_incomplete") { // passt...
   if "ch1_finished" then goto label if_true_5204;
   if "warned_ch1_incomplete" then goto label if_true_5204;
   "warned_ch1_incomplete" = true;
   // auto dialog: "Chapter 1 is unfinished!..."
   show dialog "main-menu.mgs-439:2";
   goto label rendezvous_5203;
   if_true_5204:
   goto "menu-chapter_select-2";
   rendezvous_5203:
   end_of_script_5202:
}

"menu-save_game" {
   show dialog "main-menu.mgs-465:1";
   end_of_script_5210:
}

"on_load-woprhouse" {
   // if sequence: if ("tuesdayd") { command "rtfm" = "command-rtfm"; }
   if "tuesdayd" then goto label if_true_5233;
   goto label rendezvous_5232;
   if_true_5233:
   command "rtfm" = "command-rtfm";
   rendezvous_5232:
   // if sequence: if ("current-chapter" == 2) { // entrance text show seria...
   if "current-chapter" == 2 then goto label if_true_5235;
   goto label rendezvous_5234;
   if_true_5235:
   show serial_dialog "spacer";
   // auto serial_dialog: "Entering [1mWOPR ROOM[0m......"
   show serial_dialog "woprhouse.mgs-9:2";
   copy!("ch2-map-init")
   rendezvous_5234:
   // if sequence: if (!"wopr-backdoor-found") { player_control = off; "wopr...
   if !"wopr-backdoor-found" then goto label if_true_5239;
   goto label rendezvous_5238;
   if_true_5239:
   player_control = false;
   "wopr-backdoor-found" = true;
   // if sequence: if (warp_state != "warped") { player position -> geometry...
   if warp_state != "warped" then goto label if_true_5241;
   goto label rendezvous_5240;
   if_true_5241:
   player position -> geometry "walk_from-north" length over 600ms;
   rendezvous_5240:
   wait 400ms;
   // auto dialog: "Whoa! It looks like I found some kind of..."
   show dialog "woprhouse.mgs-19:2";
   player_control = true;
   rendezvous_5238:
   end_of_script_5231:
}