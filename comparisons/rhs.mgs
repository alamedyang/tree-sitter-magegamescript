"bling-goto-branches" {
   "bling-rotate-state-calc-done" = false;
   if "bling-rotate-state" == 0 then goto index 3;
   goto index 4;
   goto "start_bling-dc801-2";
   if "bling-rotate-state" == 1 then goto index 6;
   goto index 7;
   goto "start_bling-dc801";
   if "bling-rotate-state" == 2 then goto index 9;
   goto index 10;
   goto "start_bling-digi-mage2";
   if "bling-rotate-state" == 3 then goto index 12;
   goto index 13;
   goto "start_bling-digi-mage";
   if "bling-rotate-state" == 4 then goto index 15;
   goto index 16;
   goto "start_bling-zero";
   if "bling-rotate-state" == 5 then goto index 18;
   goto index 19;
   goto "start_bling-serial";
   goto "bling-goto-menu";
}

"bling-detect-mode" {
   wait 150ms;
   if warp_state == "bling-rotate-manual" then goto index 7;
   if warp_state == "bling-rotate-auto" then goto index 4;
   goto index 8;
   entity "Timer" on_tick = "loop-bling_timer";
   goto "loop-bling-listen-any";
   goto index 8;
   goto "loop-bling-listen-manualrotate";
   if "bling-hax-button-only" then goto index 11;
   goto "loop-bling-listen-any";
   goto index 12;
   goto "loop-bling-listen-hax";
}

"loop-bling-listen-any" {
   if button ANY pressed then goto index 2;
   goto index 3;
   goto "bling-goto-menu";
}

"loop-bling-listen-hax" {
   if button HAX pressed then goto index 2;
   goto index 3;
   goto "bling-goto-menu";
}

"bling-rotate-state-increment" {
   "bling-rotate-state" += 1;
   "temp" = 5;
   "temp" += 1;
   if "bling-rotate-state" == "temp" then goto index 5;
   goto index 6;
   "bling-rotate-state" = 0;
   "bling-rotate-state-calc-done" = true;
   self on_tick = "null_script";
}

"bling-rotate-state-decrement" {
   "bling-rotate-state" -= 1;
   if "bling-rotate-state" == 65535 then goto index 3;
   goto index 4;
   "bling-rotate-state" = 5;
   "bling-rotate-state-calc-done" = true;
   self on_tick = "null_script";
}

"loop-bling_timer-wait" {
   if "bling-rotate-state-calc-done" then goto index 2;
   goto index 3;
   goto "bling-goto-branches";
}

"loop-bling-listen-manualrotate" {
   if button LJOY_LEFT pressed then goto index 2;
   goto index 3;
   goto "bling-manual-rotate-left";
   if button RJOY_LEFT pressed then goto index 5;
   goto index 6;
   goto "bling-manual-rotate-left";
   if button LJOY_RIGHT pressed then goto index 8;
   goto index 9;
   goto "bling-manual-rotate-right";
   if button RJOY_RIGHT pressed then goto index 11;
   goto index 12;
   goto "bling-manual-rotate-right";
   if button HAX pressed then goto index 14;
   goto index 15;
   goto "bling-goto-menu";
}

"show_dialog-bender-start" {
   if self glitched then goto index 67;
   entity "Bob Austin" on_tick = "null_script";
   entity "Bender" on_tick = "null_script";
   self direction = player;
   if "storyflag-bender" then goto index 57;
   if entity "Bender" type == "bender" then goto index 34;
   if "bender-backstory" then goto index 21;
   if entity "Bender" type == "bender_sadbutt" then goto index 9;
   show dialog "ch1-bender.mgs-XX";
   show dialog "ch1-bender.mgs-XX";
   player_control = false;
   wait 300ms;
   self animation -> 3 1x;
   player_control = true;
   show dialog "ch1-bender.mgs-XX";
   if player type == "bender_sadbutt" then goto index 19;
   if player type == "bender" then goto index 19;
   show dialog "ch1-bender.mgs-XX";
   goto index 20;
   show dialog "ch1-bender.mgs-XX";
   show dialog "ch1-bender.mgs-XX";
   if entity "Bender" type == "bender_sadbutt" then goto index 24;
   show dialog "ch1-bender.mgs-XX";
   goto index 29;
   player_control = false;
   wait 300ms;
   self animation -> 3 1x;
   player_control = true;
   show dialog "ch1-bender.mgs-XX";
   "bender-backstory" = true;
   "hint-tracking" = 51;
   entity "Bender" on_tick = "face-player";
   entity "Bob Austin" on_tick = "handler-bender-timer";
   goto index 68;
   if !"bender-backstory" then goto index 42;
   show dialog "ch1-bender.mgs-XX";
   player_control = false;
   wait 300ms;
   self animation -> 3 1x;
   player_control = true;
   show dialog "ch1-bender.mgs-XX";
   goto index 48;
   show dialog "ch1-bender.mgs-XX";
   player_control = false;
   wait 300ms;
   self animation -> 3 1x;
   player_control = true;
   show dialog "ch1-bender.mgs-XX";
   "bender-backstory" = true;
   "storyflag-bender" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 5 then goto index 54;
   goto index 55;
   "hint-tracking" = 0;
   entity "Bob Austin" on_tick = "null_script";
   entity "Bender" on_tick = "on_tick-bender-loiter";
   if entity "Bender" type == "bender" then goto index 60;
   show dialog "ch1-bender.mgs-XX";
   goto index 65;
   player_control = false;
   wait 300ms;
   self animation -> 3 1x;
   player_control = true;
   show dialog "ch1-bender.mgs-XX";
   entity "Bob Austin" on_tick = "null_script";
   entity "Bender" on_tick = "on_tick-bender-loiter";
   show dialog "ch1-bender.mgs-XX";
}

"on_load-bobsclub1" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if !"storyflag-bobmoss" then goto index 5;
   goto index 9;
   entity "Bob Moss" position = geometry "bobsclub-hidingplace";
   entity "Bob Moss" name = " ";
   entity "Bob Moss" on_interact = "null_script";
   entity "Bob Moss" type = "exa";
   if !"bobsclub-entered" then goto index 11;
   goto index 12;
   goto "show_dialog-bobsclub";
}

"show_dialog-bobsclub" {
   player_control = false;
   player position -> geometry "bob_path" origin over 500ms;
   wait 800ms;
   show dialog "ch1-bobsclub.mgs-XX";
   player position -> geometry "bob_path" length over 3500ms;
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-XX";
   wait 300ms;
   camera -> geometry "strongbad_camera" origin over 1200ms;
   wait 150ms;
   player direction = entity "Strong Bad";
   wait 200ms;
   entity "Guardian Bob" direction = entity "Strong Bad";
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-XX";
   wait 200ms;
   camera -> player position over 700ms;
   wait 200ms;
   entity "Guardian Bob" direction = "south";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Strong Bad" animation -> 3 1x;
   entity "Strong Bad" current_animation = 5;
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Strong Bad" animation -> 4 1x;
   player_control = true;
   "bobsclub-entered" = true;
   if !"baker-backstory" then goto index 30;
   goto index 31;
   goto "null_script";
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   show dialog "ch1-bobsclub.mgs-XX";
}

"on_tick-bakery" {
   if player intersects geometry "door-bakery-exit" then goto index 2;
   goto index 3;
   goto "leave-bakery";
}

"on_tick-bobsclub" {
   if player intersects geometry "door-bobsclub-exit" then goto index 2;
   goto index 3;
   goto "leave-bobsclub";
}

"show_dialog-baker-start" {
   player on_tick = "watch-baker";
   if self glitched then goto index 17;
   if "bobsclub-entered" then goto index 8;
   if !"baker-backstory" then goto index 6;
   show dialog "ch1-bobsclub.mgs-XX";
   goto index 7;
   show dialog "ch1-bobsclub.mgs-XX";
   "hint-tracking" = 21;
   if !"storyflag-baker" then goto index 10;
   show dialog "ch1-bobsclub.mgs-XX";
   show dialog "ch1-bobsclub.mgs-XX";
   "storyflag-baker" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 2 then goto index 16;
   goto index 18;
   "hint-tracking" = 0;
   show dialog "ch1-bobsclub.mgs-XX";
   player on_tick = "null_script";
   self on_interact = "show_dialog-baker-start";
}

"show_dialog-bobrock-start" {
   self direction = player;
   if self glitched then goto index 41;
   if !entity "Bob Austin" intersects geometry "bobzone" then goto index 33;
   if !"bobrock-backstory" then goto index 27;
   show dialog "ch1-bobsclub.mgs-XX";
   if player name != "Bob" then goto index 21;
   if !"bobsclub-entered" then goto index 10;
   show dialog "show_dialog-bobrock-start-AGAIN";
   show dialog "ch1-bobsclub.mgs-XX";
   goto index 11;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   entity "Bob Austin" position -> geometry "%ENTITY_PATH%" origin over 400ms;
   entity "Bob Austin" direction = geometry "door-bobsclub-entrance";
   wait 1000ms;
   entity "Bob Austin" direction = "south";
   show dialog "ch1-bobsclub.mgs-XX";
   player position -> geometry "predoor-bobsclub" origin over 500ms;
   player position -> geometry "door-bobsclub-entrance" origin over 500ms;
   player_control = true;
   load map "bobsclub";
   if !"bobsclub-entered" then goto index 25;
   show dialog "show_dialog-bobrock-start-AGAIN";
   show dialog "ch1-bobsclub.mgs-XX";
   goto index 42;
   show dialog "ch1-bobsclub.mgs-XX";
   "hint-tracking" = 21;
   show dialog "ch1-bobsclub.mgs-XX";
   if "baker-backstory" then goto index 30;
   goto index 31;
   show dialog "ch1-bobsclub.mgs-XX";
   "bobrock-backstory" = true;
   "hint-tracking" = 21;
   player_control = false;
   self direction = player;
   show dialog "ch1-bobsclub.mgs-XX";
   camera fade out -> #000000 over 500ms;
   entity "Bob Austin" position = geometry "bob_point";
   entity "Bob Austin" direction = "south";
   camera fade in -> #000000 over 500ms;
   player_control = true;
   show dialog "ch1-bobsclub.mgs-XX";
}

"show_dialog-bobsclub-bob" {
   self direction = player;
   if self glitched then goto index 13;
   show dialog "ch1-bobsclub.mgs-XX";
   if !"storyflag-bobmoss" then goto index 5;
   goto index 14;
   player_control = false;
   wait 120ms;
   player_control = true;
   entity "Guardian Bob" on_tick = "look-left-and-right-fast";
   show dialog "ch1-bobsclub.mgs-XX";
   "hint-tracking" = 32;
   entity "Guardian Bob" on_tick = "null_script";
   entity "Guardian Bob" direction = "south";
   show dialog "ch1-bobsclub.mgs-XX";
}

"show_dialog-bobsclub-strongbob" {
   if self glitched then goto index 7;
   self direction = player;
   if !"strong_bad-backstory" then goto index 5;
   show dialog "ch1-bobsclub.mgs-XX";
   goto index 8;
   show dialog "ch1-bobsclub.mgs-XX";
   "strong_bad-backstory" = true;
   show dialog "ch1-bobsclub.mgs-XX";
}

"show_dialog-bobmoss-start" {
   self direction = player;
   if self glitched then goto index 3;
   goto index 12;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   self glitched = false;
   camera fade in -> #000000 over 500ms;
   player_control = true;
   show dialog "ch1-bobsclub.mgs-XX";
   self direction = "south";
   self on_interact = "show_dialog-bobmoss-start";
   if "storyflag-bobmoss" then goto index 14;
   goto index 15;
   goto "show_dialog-bobmoss-start-s";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Bob Moss" on_tick = "spin_self_clockwise";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Bob Moss" on_tick = "null_script";
   self direction = player;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   entity "Bob Moss" position = geometry "catwalk-hide";
   "storyflag-bobmoss" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 3 then goto index 29;
   goto index 30;
   "hint-tracking" = 0;
   camera fade in -> #000000 over 500ms;
   player_control = true;
}

"show_dialog-bobmoss-start-s" {
   self direction = player;
   if self glitched then goto index 3;
   goto index 12;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   self glitched = false;
   camera fade in -> #000000 over 500ms;
   player_control = true;
   show dialog "ch1-bobsclub.mgs-XX";
   self direction = "south";
   self on_interact = "show_dialog-bobmoss-start-s";
   show dialog "ch1-bobsclub.mgs-XX";
   self direction = "south";
}

"show_dialog-bert-start" {
   if self glitched then goto index 2;
   goto index 4;
   show dialog "ch1-elders.mgs-XX";
   // auto return label
   self direction = player;
   show dialog "ch1-elders.mgs-XX";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if !"storyflag-shepherd" then goto index 49;
   if !"storyflag-baker" then goto index 46;
   if !"storyflag-bobmoss" then goto index 44;
   if !"storyflag-bea1" then goto index 41;
   if !"storyflag-bender" then goto index 38;
   if !"storyflag-catwork" then goto index 35;
   if !"storyflag-trekkie" then goto index 32;
   if !"storyflag-sportskid" then goto index 29;
   if !"storyflag-bea2" then goto index 26;
   if !"storyflag-rake" then goto index 23;
   if !"storyflag-verthandi" then goto index 20;
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 11 then goto index 22;
   "hint-tracking" = 110;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 10 then goto index 25;
   "hint-tracking" = 100;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 9 then goto index 28;
   "hint-tracking" = 90;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 8 then goto index 31;
   "hint-tracking" = 80;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 7 then goto index 34;
   "hint-tracking" = 70;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 6 then goto index 37;
   "hint-tracking" = 60;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 5 then goto index 40;
   "hint-tracking" = 50;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 4 then goto index 43;
   "hint-tracking" = 40;
   show dialog "ch1-elders.mgs-XX";
   "hint-tracking" = 30;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 2 then goto index 48;
   "hint-tracking" = 20;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking-check" != 1 then goto index 52;
   goto index 53;
   "hint-tracking" = 10;
}

"show_dialog-jackob-start" {
   if self glitched then goto index 77;
   self direction = player;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking" == 10 then goto index 75;
   if "hint-tracking" == 11 then goto index 72;
   if "hint-tracking" == 12 then goto index 72;
   if "hint-tracking" == 20 then goto index 70;
   if "hint-tracking" == 21 then goto index 68;
   if "hint-tracking" == 30 then goto index 66;
   if "hint-tracking" == 32 then goto index 64;
   if "hint-tracking" == 40 then goto index 62;
   if "hint-tracking" == 41 then goto index 60;
   if "hint-tracking" == 50 then goto index 58;
   if "hint-tracking" == 51 then goto index 56;
   if "hint-tracking" == 60 then goto index 54;
   if "hint-tracking" == 61 then goto index 52;
   if "hint-tracking" == 62 then goto index 52;
   if "hint-tracking" == 70 then goto index 50;
   if "hint-tracking" == 71 then goto index 48;
   if "hint-tracking" == 80 then goto index 46;
   if "hint-tracking" == 81 then goto index 44;
   if "hint-tracking" == 90 then goto index 42;
   if "hint-tracking" == 91 then goto index 40;
   if "hint-tracking" == 100 then goto index 38;
   if "hint-tracking" == 101 then goto index 36;
   if "hint-tracking" == 110 then goto index 34;
   if "hint-tracking" == 111 then goto index 32;
   if "hint-tracking" == 201 then goto index 30;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   goto "show_dialog-jackob-hint-hackbook ";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   show dialog "dialog-jackob-hint-shepherd2";
   goto index 78;
   show dialog "ch1-elders.mgs-XX";
   show dialog "dialog-jackob-hint-shepherd2";
   show dialog "ch1-elders.mgs-XX";
}

"show_dialog-jackob-hint-hackbook" {
   if "hackbook-endstory" then goto index 20;
   show dialog "ch1-elders.mgs-XX";
   player_control = false;
   wait 600ms;
   self direction += 1;
   wait 1200ms;
   self direction -= -2;
   wait 600ms;
   show dialog "ch1-elders.mgs-XX";
   wait 400ms;
   self direction = player;
   wait 400ms;
   player_control = true;
   show dialog "ch1-elders.mgs-XX";
   if "ch1_finished" then goto index 17;
   show dialog "ch1-elders.mgs-XX";
   goto index 18;
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
   "hackbook-endstory" = true;
   show dialog "ch1-elders.mgs-XX";
   if "hint-tracking" == 201 then goto index 23;
   goto index 24;
   "hint-tracking" = 0;
   self on_interact = "show_dialog-jackob-start";
}

"show_dialog-alfonso-start" {
   if self glitched then goto index 57;
   if "ch1_finished" then goto index 56;
   "ch1-storyflags-tally" = 0;
   if "storyflag-catwork" then goto index 5;
   goto index 6;
   "ch1-storyflags-tally" += 1;
   if "storyflag-shepherd" then goto index 8;
   goto index 9;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bender" then goto index 11;
   goto index 12;
   "ch1-storyflags-tally" += 1;
   if "storyflag-baker" then goto index 14;
   goto index 15;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bobmoss" then goto index 17;
   goto index 18;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea1" then goto index 20;
   goto index 21;
   "ch1-storyflags-tally" += 1;
   if "storyflag-trekkie" then goto index 23;
   goto index 24;
   "ch1-storyflags-tally" += 1;
   if "storyflag-sportskid" then goto index 26;
   goto index 27;
   "ch1-storyflags-tally" += 1;
   if "storyflag-verthandi" then goto index 29;
   goto index 30;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea2" then goto index 32;
   goto index 33;
   "ch1-storyflags-tally" += 1;
   if "storyflag-rake" then goto index 35;
   goto index 36;
   "ch1-storyflags-tally" += 1;
   show dialog "ch1-elders.mgs-XX";
   if "ch1-storyflags-tally" == 0 then goto index 55;
   if "ch1-storyflags-tally" == 1 then goto index 53;
   if "ch1-storyflags-tally" <= 4 then goto index 51;
   if "ch1-storyflags-tally" <= 8 then goto index 49;
   if "ch1-storyflags-tally" <= 10 then goto index 47;
   if "ch1-storyflags-tally" == 11 then goto index 44;
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   goto "demoend-cutscene";
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   goto index 58;
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
}

"on_tick-credits" {
   hex_control = false;
   player_control = true;
   player direction = "south";
   camera = entity "cameraman" position;
   entity "cameraman" position = geometry "credits_camera";
   camera fade in -> #000000 over 400ms;
   wait 1200ms;
   entity "Goat" current_animation = 1;
   entity "cameraman" position -> geometry "credits_camera" length over 60000ms;
   wait 600ms;
   entity "Cat" animation -> 2 1x;
   wait 300ms;
   camera fade out -> #000000 over 1200ms;
   warp_state = "exit_from-credits";
   hex_control = true;
   if "credits-from-menu" then goto index 17;
   goto index 18;
   load map "main_menu";
   load map "main";
}

"on_tick-family" {
   if player intersects geometry "door-family" then goto index 2;
   goto index 3;
   goto "leave-family";
}

"kid-ballwatch" {
   if entity "Kid" type == "blitzball" then goto index 2;
   goto index 3;
   goto "kid-now-ball";
}

"kid-now-ball" {
   "storyflag-sportskid" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 8 then goto index 5;
   goto index 6;
   "hint-tracking" = 0;
   goto "null_script";
}

"on_load-family" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if "storyflag-sportskid" then goto index 5;
   goto index 6;
   entity "Kid" type = "blitzball";
}

"show_dialog-kid" {
   player on_tick = "watch-kid";
   if self glitched then goto index 8;
   if entity "Kid" type == "blitzball" then goto index 6;
   show dialog "ch1-family.mgs-XX";
   "hint-tracking" = 81;
   goto index 9;
   show dialog "dialog-kid-ball";
   goto index 9;
   show dialog "ch1-family.mgs-XX";
   player on_tick = "null_script";
   self on_interact = "show_dialog-kid";
}

"show_dialog-smith" {
   if self glitched then goto index 9;
   entity "Smith" direction = player;
   if "smith-backstory" then goto index 6;
   show dialog "ch1-family.mgs-XX";
   "smith-backstory" = true;
   goto index 7;
   show dialog "ch1-family.mgs-XX";
   entity "Smith" direction = "east";
   goto index 10;
   show dialog "ch1-family.mgs-XX";
   self on_interact = "show_dialog-smith";
}

"billy-glitchwatch" {
   if !entity "Billy" glitched then goto index 2;
   goto index 3;
   goto "billy_now_unglitched";
}

"kid-glitchwatch" {
   if !entity "Kid" glitched then goto index 2;
   goto index 3;
   goto "kid_now_unglitched";
}

"check_if_player_is_goat_high" {
   if player intersects geometry "high" then goto index 2;
   goto index 3;
   goto "move_goats_to_low";
}

"check_if_player_is_goat_low" {
   if player intersects geometry "low" then goto index 2;
   goto index 3;
   goto "move_goats_to_high";
}

"show_dialog-verthandi-glitched" {
   if "glitch-lesson" then goto index 2;
   goto index 3;
   goto "show_dialog-verthandi-glitched-q";
   show dialog "ch1-goats.mgs-XX";
   goto "show_dialog-verthandi-glitched-lesson";
}

"show_dialog-verthandi-start" {
   self direction = player;
   if self glitched then goto index 3;
   goto index 4;
   goto "show_dialog-verthandi-glitched";
   if "storyflag-verthandi" then goto index 75;
   "unglitch_count" = 0;
   if "goldfish-unglitched" then goto index 8;
   goto index 9;
   "unglitch_count" += 1;
   if "timmy-unglitched" then goto index 11;
   goto index 12;
   "unglitch_count" += 1;
   if "fountain-unglitched" then goto index 14;
   goto index 15;
   "unglitch_count" += 1;
   if "lodge_cat-unglitched" then goto index 17;
   goto index 18;
   "unglitch_count" += 1;
   if "billy-unglitched" then goto index 20;
   goto index 21;
   "unglitch_count" += 1;
   if "kid-unglitched" then goto index 23;
   goto index 24;
   "unglitch_count" += 1;
   if "main_hamster-unglitched" then goto index 26;
   goto index 27;
   "unglitch_count" += 1;
   "total_glitches" = 7;
   "total_glitches" -= "unglitch_count";
   if "total_glitches" == 0 then goto index 64;
   if "verthandi-backstory" then goto index 41;
   show dialog "ch1-goats.mgs-XX";
   if entity "Billy" glitched then goto index 37;
   if entity "Kid" glitched then goto index 37;
   show dialog "ch1-goats.mgs-XX";
   "goats-both-unglitched" = true;
   goto index 38;
   show dialog "ch1-goats.mgs-XX";
   "verthandi-backstory" = true;
   "hint-tracking" = 111;
   goto index 76;
   if "goats-both-unglitched" then goto index 47;
   if entity "Billy" glitched then goto index 46;
   if entity "Kid" glitched then goto index 46;
   show dialog "ch1-goats.mgs-XX";
   "goats-both-unglitched" = true;
   show dialog "ch1-goats.mgs-XX";
   if "total_glitches" == 1 then goto index 50;
   show dialog "ch1-goats.mgs-XX";
   goto index 51;
   show dialog "ch1-goats.mgs-XX";
   if !"timmy-unglitched" then goto index 61;
   if !"lodge_cat-unglitched" then goto index 61;
   if !"main_hamster-unglitched" then goto index 59;
   if !"fountain-unglitched" then goto index 59;
   if !"goldfish-unglitched" then goto index 57;
   goto index 62;
   show dialog "ch1-goats.mgs-XX";
   goto index 62;
   show dialog "ch1-goats.mgs-XX";
   goto index 62;
   show dialog "ch1-goats.mgs-XX";
   "hint-tracking" = 111;
   goto index 76;
   if !"verthandi-backstory" then goto index 67;
   show dialog "ch1-goats.mgs-XX";
   goto index 68;
   show dialog "ch1-goats.mgs-XX";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 11 then goto index 72;
   goto index 73;
   "hint-tracking" = 0;
   "storyflag-verthandi" = true;
   "goats-both-unglitched" = true;
   show dialog "ch1-goats.mgs-XX";
   goto "show_dialog-verthandi-wrapup";
}

"show_dialog-goat" {
   if self glitched then goto index 3;
   show dialog "ch1-goats.mgs-XX";
   goto index 4;
   show dialog "ch1-goats.mgs-XX";
   if !"goats-both-unglitched" then goto index 6;
   goto index 7;
   "hint-tracking" = 111;
   self on_interact = "show_dialog-goat";
}

"on_tick-goose-mission" {
   if !entity "Rake" intersects geometry "lake" then goto index 2;
   goto index 3;
   goto "on_tick-goose-mission-rake-out-of-lake";
   entity "Goose" direction = "south";
   entity "Goose" current_animation = 0;
   "storyflag-rake" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 10 then goto index 10;
   goto index 11;
   "hint-tracking" = 0;
   goto "null_script";
}

"on_tick-goose-mission-rake-out-of-lake" {
   if entity "Rake" intersects geometry "rake-point" then goto index 2;
   goto index 3;
   goto "goose-misison-rake-on-rake-point";
   entity "Goose" direction = "south";
   entity "Goose" animation -> 2 3x;
   entity "Goose" position -> geometry "goose_midpoint" origin over 600ms;
   entity "Goose" position -> geometry "goose_lakepoint" origin over 600ms;
   entity "Goose" direction = "south";
   goto "on_tick-goose-mission";
}

"goose-misison-rake-on-rake-point" {
   if !entity "Rake" intersects geometry "rake-point" then goto index 2;
   goto index 3;
   goto "on_tick-goose-mission-rake-out-of-lake";
   entity "Goose" direction = "south";
   entity "Goose" animation -> 2 3x;
   entity "Goose" position -> geometry "goose_rakepoint" origin over 1200ms;
   entity "Goose" direction = entity "Rake";
   if !entity "Rake" intersects geometry "rake-point" then goto index 9;
   goto index 10;
   goto "on_tick-goose-mission-rake-out-of-lake";
   entity "Goose" animation -> 2 3x;
   entity "Goose" position -> geometry "goose_lakepoint" origin over 1200ms;
   entity "Goose" direction = "south";
   if !entity "Rake" intersects geometry "rake-point" then goto index 15;
   goto index 16;
   goto "on_tick-goose-mission-rake-out-of-lake";
   goto "on_tick-goose-mission";
}

"goose-bounds-watch" {
   if !entity "Goose" intersects geometry "bounds" then goto index 2;
   goto index 3;
   goto "rescue-goose";
}

"show_dialog-goose-mad" {
   show dialog "ch1-goose.mgs-XX";
   if !"storyflag-rake" then goto index 3;
   goto index 4;
   "hint-tracking" = 101;
   self on_interact = "show_dialog-goose-mad";
}

"on_load-greenhouse" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if "storyflag-trekkie" then goto index 5;
   goto index 14;
   entity "EtherNettle1" secondary_id = 3;
   entity "EtherNettle2" secondary_id = 2;
   entity "EtherNettle3" secondary_id = 7;
   entity "EtherNettle4" secondary_id = 0;
   entity "EtherNettle5" secondary_id = 1;
   entity "EtherNettle6" secondary_id = 6;
   entity "EtherNettle7" secondary_id = 5;
   entity "EtherNettle8" secondary_id = 4;
   entity "Modem" current_animation = 4;
}

"on_tick-greenhouse" {
   if player intersects geometry "door-greenhouse" then goto index 2;
   goto index 3;
   goto "leave-greenhouse";
   if !entity "EtherNettle1" intersects geometry "EtherNettle1Origin" then goto index 5;
   goto index 6;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle2" intersects geometry "EtherNettle2Origin" then goto index 8;
   goto index 9;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle3" intersects geometry "EtherNettle3Origin" then goto index 11;
   goto index 12;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle4" intersects geometry "EtherNettle4Origin" then goto index 14;
   goto index 15;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle5" intersects geometry "EtherNettle5Origin" then goto index 17;
   goto index 18;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle6" intersects geometry "EtherNettle6Origin" then goto index 20;
   goto index 21;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle7" intersects geometry "EtherNettle7Origin" then goto index 23;
   goto index 24;
   goto "show_dialog-no_uproot_ethernettle";
   if !entity "EtherNettle8" intersects geometry "EtherNettle8Origin" then goto index 26;
   goto index 27;
   goto "show_dialog-no_uproot_ethernettle";
}

"show_dialog-trekkie-start" {
   self on_tick = "null_script";
   self direction = player;
   if self glitched then goto index 86;
   if "storyflag-trekkie" then goto index 83;
   if entity "EtherNettle1" secondary_id != 3 then goto index 57;
   if entity "EtherNettle2" secondary_id != 2 then goto index 57;
   if entity "EtherNettle3" secondary_id != 7 then goto index 57;
   if entity "EtherNettle4" secondary_id != 0 then goto index 57;
   if entity "EtherNettle5" secondary_id != 1 then goto index 57;
   if entity "EtherNettle6" secondary_id != 6 then goto index 57;
   if entity "EtherNettle7" secondary_id != 5 then goto index 57;
   if entity "EtherNettle8" secondary_id != 4 then goto index 57;
   self direction = entity "Modem";
   player direction = entity "Modem";
   player_control = false;
   wait 200ms;
   camera -> entity "Modem" position over 1400ms;
   wait 200ms;
   self direction = geometry "Computer";
   wait 1500ms;
   self direction = entity "Modem";
   wait 1200ms;
   entity "Modem" current_animation = 1;
   wait 1400ms;
   show dialog "ch1-greenhouse.mgs-XX";
   wait 800ms;
   self direction = player;
   player direction = self;
   wait 500ms;
   player direction = entity "Modem";
   self direction = entity "Modem";
   wait 1500ms;
   entity "Modem" current_animation = 2;
   wait 1400ms;
   entity "Modem" current_animation = 3;
   wait 1700ms;
   entity "Modem" current_animation = 4;
   wait 900ms;
   camera -> player position over 1400ms;
   wait 400ms;
   player direction = self;
   wait 150ms;
   self direction = geometry "Computer";
   wait 750ms;
   self direction = entity "Modem";
   wait 600ms;
   self direction = geometry "Computer";
   wait 800ms;
   self direction = player;
   show dialog "ch1-greenhouse.mgs-XX";
   self direction = geometry "Computer";
   "storyflag-trekkie" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   player_control = true;
   if "hint-tracking-check" == 7 then goto index 56;
   "hint-tracking" = 0;
   if "trekkie-backstory" then goto index 79;
   show dialog "ch1-greenhouse.mgs-XX";
   player_control = false;
   wait 200ms;
   self direction = entity "Modem";
   wait 900ms;
   self direction = geometry "Computer";
   wait 900ms;
   self direction = player;
   wait 200ms;
   show dialog "ch1-greenhouse.mgs-XX";
   wait 100ms;
   self direction = entity "Modem";
   wait 400ms;
   show dialog "ch1-greenhouse.mgs-XX";
   self direction = player;
   show dialog "ch1-greenhouse.mgs-XX";
   "hint-tracking" = 71;
   "trekkie-backstory" = true;
   self on_tick = "face-player";
   player_control = true;
   goto index 87;
   self direction = player;
   show dialog "ch1-greenhouse.mgs-XX";
   "hint-tracking" = 71;
   self on_tick = "face-player";
   self direction = player;
   show dialog "ch1-greenhouse.mgs-XX";
   self direction = geometry "Computer";
   show dialog "ch1-greenhouse.mgs-XX";
   self on_interact = "show_dialog-trekkie-start";
}

"show_dialog-ethernettle-start" {
   if self secondary_id == 3 then goto index 23;
   if self secondary_id == 2 then goto index 21;
   if self secondary_id == 7 then goto index 19;
   if self secondary_id == 0 then goto index 17;
   if self secondary_id == 1 then goto index 15;
   if self secondary_id == 6 then goto index 13;
   if self secondary_id == 5 then goto index 11;
   if self secondary_id == 4 then goto index 9;
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   goto index 24;
   show dialog "ch1-greenhouse.mgs-XX";
   self on_interact = "show_dialog-ethernettle-start";
}

"on_load-lodge" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if !"tuesday-walkedup" then goto index 5;
   goto index 7;
   entity "Aunt Zippy" animation_frame = 3;
   goto "cutscene-tuesday";
   if "hide-lodge-crowd-mini" then goto index 9;
   goto index 29;
   entity "Bookcase" current_animation = 3;
   entity "Bookcase" position = geometry "lodge-hidingplace";
   "artifact-broom-touched" = true;
   "artifact-wand-touched" = true;
   "artifact-book-touched" = true;
   "artifact-glasses-touched" = true;
   "artifact-bracelet-touched" = true;
   entity "Alfonso" position = geometry "elder-point";
   entity "Marta" position = geometry "marta-broom-watch-spot";
   entity "Broom" position = geometry "lodge-hidingplace";
   entity "Bracelet" position = geometry "lodge-hidingplace";
   entity "Marta" type = "marta_broom";
   entity "Broom" on_interact = "null_script";
   entity "Glasses" on_interact = "null_script";
   entity "Wand" on_interact = "null_script";
   entity "Book" on_interact = "null_script";
   entity "Bracelet" on_interact = "null_script";
   entity "Jackob" position = geometry "lodge-hidingplace";
   entity "Alfonso" position = geometry "lodge-hidingplace";
   entity "Bert" position = geometry "lodge-hidingplace";
   if "hide-lodge-crowd" then goto index 31;
   goto index 64;
   entity "Bookcase" current_animation = 3;
   entity "Bookcase" position = geometry "lodge-hidingplace";
   "artifact-broom-touched" = true;
   "artifact-wand-touched" = true;
   "artifact-book-touched" = true;
   "artifact-glasses-touched" = true;
   "artifact-bracelet-touched" = true;
   entity "Alfonso" position = geometry "elder-point";
   entity "Marta" position = geometry "marta-broom-watch-spot";
   entity "Broom" position = geometry "lodge-hidingplace";
   entity "Bracelet" position = geometry "lodge-hidingplace";
   entity "Marta" type = "marta_broom";
   entity "Broom" on_interact = "null_script";
   entity "Glasses" on_interact = "null_script";
   entity "Wand" on_interact = "null_script";
   entity "Book" on_interact = "null_script";
   entity "Bracelet" on_interact = "null_script";
   entity "Jackob" position = geometry "lodge-hidingplace";
   entity "Alfonso" position = geometry "lodge-hidingplace";
   entity "Bert" position = geometry "lodge-hidingplace";
   entity "Cleo" position = geometry "lodge-hidingplace";
   entity "Shepherd" position = geometry "lodge-hidingplace";
   entity "Beatrice" position = geometry "lodge-hidingplace";
   entity "Baker" position = geometry "lodge-hidingplace";
   entity "Trekkie" position = geometry "lodge-hidingplace";
   entity "Marta" position = geometry "lodge-hidingplace";
   entity "Max Swagger" position = geometry "lodge-hidingplace";
   entity "Smith" position = geometry "lodge-hidingplace";
   entity "Verthandi" position = geometry "lodge-hidingplace";
   entity "Uncle Zappy" position = geometry "lodge-hidingplace";
   entity "Aunt Zippy" position = geometry "lodge-hidingplace";
   entity "Goose  " position = geometry "lodge-hidingplace";
   entity "Goose " position = geometry "lodge-hidingplace";
   if "lodge_cat-unglitched" then goto index 66;
   goto index 67;
   entity "Cat" glitched = false;
   if "timmy-unglitched" then goto index 69;
   goto index 70;
   entity "Timmy" glitched = false;
   if warp_state == "exit_from-secretroom" then goto index 72;
   goto index 75;
   player_control = false;
   player position -> geometry "enter_from-secretroom" length over 200ms;
   player_control = true;
   if "demobonus-timmy-yell" then goto index 78;
   if !"demobonus" then goto index 78;
   goto index 79;
   goto "null_script";
   player_control = false;
   wait 200ms;
   player_control = true;
   show dialog "ch1-lodge.mgs-XX";
   "demobonus-timmy-yell" = true;
   goto "null_script";
}

"on_tick-lodge" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   goto "on_tick-tuesdayd";
   if player intersects geometry "door-lodge" then goto index 5;
   goto index 6;
   goto "show_dialog-lodge-cantleaveyet";
}

"on_tick-tuesdayd" {
   if player intersects geometry "door-lodge" then goto index 2;
   goto index 3;
   goto "leave-lodge";
}

"on_tick-lodge-goose" {
   if "ring-acquired" then goto index 2;
   goto index 3;
   goto "on_tick-lodge-goose-ring-acquired";
}

"on_tick-lodge-goose-ring-acquired" {
   if player intersects geometry "door-secretdoor" then goto index 2;
   goto index 3;
   goto "enter-secretroom";
}

"lodge_cat-glitchwatch" {
   if !self glitched then goto index 2;
   goto index 3;
   goto "lodge_cat_now_unglitched";
}

"timmy-glitchwatch" {
   if !self glitched then goto index 2;
   goto index 3;
   goto "timmy_now_unglitched";
}

"show_dialog-zippy-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-zappy-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-verthandi-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-smith-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-max-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-marta-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 7;
   if "artifact-broom-touched" then goto index 5;
   show dialog "ch1-lodge.mgs-XX";
   goto index 8;
   show dialog "ch1-lodge.mgs-XX";
   goto index 8;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-trekkie-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-shepherd-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-cleo-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-beatrice-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"show_dialog-baker-prechoose" {
   self direction = player;
   if "ring-acquired" then goto index 4;
   show dialog "ch1-lodge.mgs-XX";
   goto index 5;
   show dialog "ch1-lodge.mgs-XX";
}

"artifacts-eval" {
   if !"artifact-bracelet-touched" then goto index 25;
   if !"artifact-broom-touched" then goto index 25;
   if !"artifact-glasses-touched" then goto index 25;
   if !"artifact-wand-touched" then goto index 25;
   if !"artifact-book-touched" then goto index 25;
   show dialog "ch1-lodge.mgs-XX";
   player on_tick = "look-left-and-right-fast";
   player_control = false;
   wait 900ms;
   player on_tick = "null_script";
   entity "Cleo" on_tick = "gossip-down-player";
   entity "Baker" on_tick = "gossip-up-player";
   entity "Beatrice" on_tick = "null_script";
   entity "Beatrice" direction = player;
   entity "Shepherd" on_tick = "gossip-left-player";
   entity "Trekkie" on_tick = "gossip-right-player";
   entity "Marta" on_tick = "gossip-left-player";
   entity "Max Swagger" on_tick = "gossip-right-player";
   entity "Smith" on_tick = "gossip-left-player";
   entity "Verthandi" on_tick = "gossip-up-player";
   entity "Aunt Zippy" on_tick = "gossip-down-player";
   entity "Uncle Zappy" on_tick = "null_script";
   entity "Uncle Zappy" direction = player;
   goto "player-ringzero-landing";
   goto index 26;
   show dialog "ch1-lodge.mgs-XX";
   self on_interact = "artifacts-eval";
}

"player-ringzero-landing" {
   wait 200ms;
   if player intersects geometry "ringzero-walk-6-donut" then goto index 79;
   if player intersects geometry "ringzero-walk-6" then goto index 76;
   if player intersects geometry "ringzero-walk-1159" then goto index 71;
   if player intersects geometry "ringzero-walk-1130" then goto index 66;
   if player intersects geometry "ringzero-walk-11" then goto index 61;
   if player intersects geometry "ringzero-walk-10" then goto index 57;
   if player intersects geometry "ringzero-walk-9" then goto index 53;
   if player intersects geometry "ringzero-walk-8" then goto index 50;
   if player intersects geometry "ringzero-walk-7" then goto index 47;
   if player intersects geometry "ringzero-walk-5" then goto index 44;
   if player intersects geometry "ringzero-walk-4" then goto index 41;
   if player intersects geometry "ringzero-walk-3" then goto index 37;
   if player intersects geometry "ringzero-walk-2" then goto index 33;
   if player intersects geometry "ringzero-walk-1" then goto index 28;
   if player intersects geometry "ringzero-walk-1230" then goto index 23;
   if player intersects geometry "ringzero-walk-1201" then goto index 18;
   goto index 81;
   player position -> geometry "ringzero-landing-1" origin over 600ms;
   player position -> geometry "ringzero-landing-4" origin over 400ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-1" origin over 300ms;
   player position -> geometry "ringzero-landing-4" origin over 400ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-1" origin over 100ms;
   player position -> geometry "ringzero-landing-4" origin over 400ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-4" origin over 400ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-4" origin over 200ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 500ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 250ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 250ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 500ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-8" origin over 200ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-8" origin over 400ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-10" origin over 100ms;
   player position -> geometry "ringzero-landing-8" origin over 600ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-10" origin over 300ms;
   player position -> geometry "ringzero-landing-8" origin over 600ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-10" origin over 600ms;
   player position -> geometry "ringzero-landing-8" origin over 600ms;
   player position -> geometry "ringzero-landing-6" origin over 800ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 300ms;
   goto "cutscene-artifacts-eval-good";
   goto index 81;
   player position -> geometry "ringzero-landing-6" origin over 200ms;
   goto "cutscene-artifacts-eval-good";
   goto "cutscene-artifacts-eval-good";
}

"show_dialog-lodge_cat" {
   self direction = player;
   if self glitched then goto index 13;
   if "storyflag-catwork" then goto index 12;
   if !"white-cat" then goto index 12;
   player_control = false;
   entity "Cat" animation -> 3 1x;
   entity "Cat" current_animation = 4;
   wait 700ms;
   player type = "pipscat";
   wait 400ms;
   entity "Cat" animation -> 5 1x;
   player_control = true;
   show dialog "ch1-lodge.mgs-XX";
   show dialog "ch1-lodge.mgs-XX";
   if !"lodge_cat-unglitched" then goto index 16;
   goto index 17;
   "hint-tracking" = 111;
}

"show_dialog-timmy-start" {
   self direction = player;
   if self glitched then goto index 10;
   if !"demobonus" then goto index 6;
   if !"demobonus-sportsbook-read" then goto index 5;
   show dialog "ch1-lodge.mgs-XX";
   show dialog "ch1-lodge.mgs-XX";
   if "timmy-endstory" then goto index 9;
   show dialog "ch1-lodge.mgs-XX";
   "timmy-endstory" = true;
   show dialog "ch1-lodge.mgs-XX";
   show dialog "ch1-lodge.mgs-XX";
   self direction = "west";
   if !"timmy-unglitched" then goto index 14;
   goto index 15;
   "hint-tracking" = 111;
   self direction = "west";
}

"show_dialog-sportsbook" {
   show dialog "dialog-sportsbook";
   if "demobonus" then goto index 3;
   goto index 6;
   show dialog "ch1-lodge.mgs-XX";
   "demobonus-sportsbook-read" = true;
   hex_clipboard = true;
}

"on_load-magehouse" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   "debug-mode" = true;
   if "goldfish-unglitched" then goto index 6;
   goto index 7;
   entity "Mr. Tickles" glitched = false;
   if !"goodmorning" then goto index 9;
   goto index 14;
   player position = geometry "wakeup_spot";
   player direction = "south";
   hex_control = false;
   hex_clipboard = false;
   camera fade in -> #000000 over 500ms;
}

"on_tick-magehouse" {
   if player intersects geometry "door-magehouse" then goto index 2;
   goto index 3;
   goto "leave-magehouse";
   if !"goodmorning" then goto index 5;
   goto index 6;
   goto "bedroom-door-watch";
}

"bedroom-door-watch" {
   if player intersects geometry "bedroom-door" then goto index 2;
   goto index 3;
   goto "goodmorning-cutscene";
}

"goldfish-glitchwatch" {
   if !self glitched then goto index 2;
   goto index 3;
   goto "goldfish_now_unglitched";
}

"show_dialog-zappy-start" {
   if self glitched then goto index 4;
   self direction = player;
   show dialog "ch1-magehouse.mgs-XX";
   goto index 5;
   show dialog "ch1-magehouse.mgs-XX";
}

"show_dialog-zippy-start" {
   if self glitched then goto index 4;
   self direction = player;
   show dialog "ch1-magehouse.mgs-XX";
   goto index 5;
   show dialog "ch1-magehouse.mgs-XX";
}

"show_dialog-goldfish" {
   show dialog "ch1-magehouse.mgs-XX";
   if !entity "Mr. Tickles" glitched then goto index 7;
   show dialog "ch1-magehouse.mgs-XX";
   if !"goldfish-unglitched" then goto index 4;
   if "ring-acquired" then goto index 6;
   goto index 8;
   "hint-tracking" = 111;
   show dialog "ch1-magehouse.mgs-XX";
}

"on_load-map-main" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if !"begunthegame" then goto index 5;
   goto index 9;
   "begunthegame" = true;
   hex_control = false;
   camera fade in -> #000000 over 1ms;
   load map "magehouse";
   hex_control = true;
   if "storyflag-bobmoss" then goto index 12;
   goto index 13;
   entity "Bob Moss" position = geometry "catwalk-hide";
   if "storyflag-rake" then goto index 15;
   goto index 17;
   entity "Rake" position = geometry "rake-lake-point";
   entity "Goose" on_interact = "honk-to-make-rake-float";
   if "billy-unglitched" then goto index 19;
   goto index 20;
   entity "Billy" glitched = false;
   if "kid-unglitched" then goto index 22;
   goto index 23;
   entity "Kid" glitched = false;
   if "fountain-unglitched" then goto index 25;
   goto index 26;
   entity "Fountain" glitched = false;
   if "main_hamster-unglitched" then goto index 28;
   goto index 29;
   entity "Hamster" glitched = false;
   if "storyflag-shepherd" then goto index 31;
   goto index 35;
   entity "Baa" position = geometry "baa_point";
   entity "Ram" position = geometry "ram_point";
   entity "Ewe" position = geometry "ewe_point";
   entity "Helga" position = geometry "helga_point";
   if "storyflag-bender" then goto index 37;
   goto index 38;
   entity "Bender" type = "bender";
   if !"walked-to-lodge" then goto index 40;
   goto index 41;
   goto "walk-to-lodge";
   player_control = false;
   if !"hintman-explanation" then goto index 121;
   if warp_state == "enter_from-east" then goto index 119;
   if warp_state == "enter_from-west" then goto index 117;
   if warp_state == "exit_from-bobsclub" then goto index 115;
   if warp_state == "exit_from-bakery" then goto index 113;
   if warp_state == "exit_from-lodge" then goto index 111;
   if warp_state == "exit_from-greenhouse" then goto index 109;
   if warp_state == "exit_from-magehouse" then goto index 107;
   if warp_state == "exit_from-oldcouplehouse" then goto index 105;
   if warp_state == "exit_from-family" then goto index 103;
   if warp_state == "exit_from-woprhouse" then goto index 101;
   if warp_state == "exit_from-credits" then goto index 55;
   goto index 144;
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   player_control = true;
   if !"ch1_finished" then goto index 60;
   goto index 61;
   goto "null_script";
   if !"storyflag-catwork" then goto index 63;
   goto index 64;
   goto "null_script";
   if !"storyflag-shepherd" then goto index 66;
   goto index 67;
   goto "null_script";
   if !"storyflag-bender" then goto index 69;
   goto index 70;
   goto "null_script";
   if !"storyflag-baker" then goto index 72;
   goto index 73;
   goto "null_script";
   if !"storyflag-bobmoss" then goto index 75;
   goto index 76;
   goto "null_script";
   if !"storyflag-bea1" then goto index 78;
   goto index 79;
   goto "null_script";
   if !"storyflag-trekkie" then goto index 81;
   goto index 82;
   goto "null_script";
   if !"storyflag-sportskid" then goto index 84;
   goto index 85;
   goto "null_script";
   if !"storyflag-bea2" then goto index 87;
   goto index 88;
   goto "null_script";
   if !"storyflag-rake" then goto index 90;
   goto index 91;
   goto "null_script";
   if !"storyflag-verthandi" then goto index 93;
   goto index 94;
   goto "null_script";
   if "demobonus-jackob-informed" then goto index 96;
   goto index 97;
   goto "null_script";
   "demobonus" = true;
   show dialog "ch1-map_main.mgs-XX";
   "demobonus-jackob-informed" = true;
   goto index 144;
   player position -> geometry "enter_from-woprhouse" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-family" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-oldcouplehouse" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-magehouse" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-greenhouse" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-lodge" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-bakery" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-bobsclub" length over 200ms;
   goto index 144;
   player position -> geometry "enter_from-west" length over 1000ms;
   goto index 144;
   player position -> geometry "enter_from-east" length over 1000ms;
   goto index 144;
   player position -> geometry "enter_from-lodge" length over 400ms;
   wait 300ms;
   entity "Alfonso" position -> geometry "alfonso-talkspot" origin over 600ms;
   entity "Alfonso" direction = player;
   wait 400ms;
   player direction = entity "Alfonso";
   show dialog "ch1-elders.mgs-XX";
   wait 100ms;
   entity "Jackob" position -> geometry "hintman-walktalk" length over 900ms;
   wait 200ms;
   player direction = entity "Jackob";
   show dialog "ch1-elders.mgs-XX";
   wait 100ms;
   entity "Bert" position -> geometry "bert-talkspot" origin over 600ms;
   player direction = entity "Bert";
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
   entity "Jackob" on_tick = "return-to-watchspot-jackob";
   wait 200ms;
   entity "Alfonso" on_tick = "return-to-watchspot-alfonso";
   wait 150ms;
   entity "Bert" on_tick = "return-to-watchspot-bert";
   "hintman-explanation" = true;
   player_control = true;
}

"fountain-glitchwatch" {
   if !self glitched then goto index 2;
   goto index 3;
   goto "fountain_now_unglitched";
}

"hamster-glitchwatch" {
   if !self glitched then goto index 2;
   goto index 3;
   goto "hamster_now_unglitched";
}

"cat-watch" {
   if !entity "Cat" intersects geometry "cat-watch-box" then goto index 2;
   goto index 3;
   goto "cat-rescue-protocol";
}

"cleo-watch" {
   if !entity "Cleo" intersects geometry "cleo-watch-box" then goto index 2;
   goto index 3;
   goto "cleo-rescue-protocol";
}

"on_tick-main" {
   if player intersects geometry "door-bakery-entrance" then goto index 2;
   goto index 3;
   goto "load_map-bakery";
   if player intersects geometry "door-family-entrance" then goto index 5;
   goto index 6;
   goto "load_map-family";
   if player intersects geometry "door-greenhouse-entrance" then goto index 8;
   goto index 9;
   goto "load_map-greenhouse";
   if player intersects geometry "door-magehouse-entrance" then goto index 11;
   goto index 12;
   goto "load_map-magehouse";
   if player intersects geometry "door-lodge-entrance" then goto index 14;
   goto index 15;
   goto "load_map-lodge";
   if player intersects geometry "door-oldcouplehouse-entrance" then goto index 17;
   goto index 18;
   goto "load_map-oldcouplehouse";
   if player intersects geometry "door-woprhouse-entrance" then goto index 20;
   goto index 21;
   goto "load_map-woprhouse";
   if player intersects geometry "door_to-town-east" then goto index 23;
   goto index 24;
   goto "wrap_from-west";
   if player intersects geometry "door_to-town-west" then goto index 26;
   goto index 27;
   goto "wrap_from-east";
}

"fountain-interact" {
   if !self glitched then goto index 3;
   show dialog "ch1-map_main.mgs-XX";
   goto index 4;
   show dialog "ch1-map_main.mgs-XX";
   self on_interact = "fountain-interact";
}

"show_dialog-cleo1" {
   if self glitched then goto index 5;
   entity "Cleo" direction = entity "Cat";
   entity "Cat" direction = entity "Cleo";
   show dialog "ch1-map_main.mgs-XX";
   goto index 6;
   show dialog "ch1-map_main.mgs-XX";
   entity "Cleo" on_interact = "show_dialog-cleo2";
}

"show_dialog-cleo2" {
   if self glitched then goto index 5;
   entity "Cleo" direction = entity "Cat";
   entity "Cat" direction = entity "Cleo";
   show dialog "ch1-map_main.mgs-XX";
   goto index 6;
   show dialog "ch1-map_main.mgs-XX";
   entity "Cleo" on_interact = "show_dialog-cleo1";
}

"show_dialog-cat" {
   if self glitched then goto index 39;
   if "hint-tracking" == 61 then goto index 18;
   if "hint-tracking" == 62 then goto index 18;
   show dialog "ch1-map_main.mgs-XX";
   player_control = false;
   wait 200ms;
   player_control = false;
   wait 200ms;
   entity "Cleo" direction = player;
   entity "Cat" direction = player;
   wait 0ms;
   player_control = true;
   show dialog "ch1-map_main.mgs-XX";
   entity "Cleo" direction = entity "Cat";
   entity "Cat" direction = entity "Cleo";
   wait 0ms;
   player_control = true;
   goto index 40;
   show dialog "ch1-map_main.mgs-XX";
   player_control = false;
   wait 200ms;
   player_control = false;
   wait 200ms;
   entity "Cleo" direction = player;
   entity "Cat" direction = player;
   wait 0ms;
   player_control = true;
   show dialog "ch1-map_main.mgs-XX";
   if player type == "pipscat" then goto index 31;
   show dialog "ch1-map_main.mgs-XX";
   goto index 32;
   show dialog "ch1-map_main.mgs-XX";
   entity "Cleo" direction = entity "Cat";
   entity "Cat" direction = entity "Cleo";
   wait 0ms;
   player_control = true;
   "hint-tracking" = 62;
   "white-cat" = true;
   goto index 40;
   show dialog "ch1-map_main.mgs-XX";
   self on_interact = "show_dialog-cat";
}

"show_dialog-hamster-start" {
   self direction = player;
   if self glitched then goto index 7;
   if "hamster-endstory" then goto index 5;
   show dialog "ch1-map_main.mgs-XX";
   "hamster-endstory" = true;
   show dialog "ch1-map_main.mgs-XX";
   self animation -> 2 2x;
   show dialog "ch1-map_main.mgs-XX";
   if !"main_hamster-unglitched" then goto index 10;
   goto index 11;
   "hint-tracking" = 111;
   self on_interact = "show_dialog-hamster-start";
}

"show_dialog-marta-start" {
   entity "Marta" direction = player;
   if self glitched then goto index 11;
   if entity "Marta" type != "marta_broom" then goto index 9;
   if !"marta-backstory" then goto index 6;
   show dialog "ch1-map_main.mgs-XX";
   goto index 12;
   show dialog "ch1-map_main.mgs-XX";
   "marta-backstory" = true;
   goto index 12;
   show dialog "ch1-map_main.mgs-XX";
   goto index 12;
   show dialog "ch1-map_main.mgs-XX";
   self on_interact = "show_dialog-marta-start";
}

"felix-loiter" {
   if "storyflag-catwork" then goto index 2;
   goto index 3;
   goto "hiding-cat";
   self direction = "south";
   wait 2000ms;
   self direction = "east";
   wait 800ms;
   self direction = "west";
   wait 1200ms;
}

"deut-loiter" {
   if "storyflag-catwork" then goto index 2;
   goto index 3;
   goto "hiding-cat";
   self direction = "west";
   wait 900ms;
   self direction = "east";
   wait 900ms;
   self direction = "south";
   wait 2400ms;
}

"bmurray-loiter" {
   if "storyflag-catwork" then goto index 2;
   goto index 3;
   goto "hiding-cat";
   self direction = "south";
   wait 1800ms;
   self direction = "north";
   wait 900ms;
   self direction = "east";
   wait 1000ms;
}

"maru-loiter" {
   if "storyflag-catwork" then goto index 2;
   goto index 3;
   goto "hiding-cat";
   self direction = "west";
   wait 1400ms;
   self direction = "south";
   wait 1800ms;
   self direction = "north";
   wait 400ms;
   self direction = "east";
   wait 400ms;
}

"on_tick-max-neutral" {
   if "storyflag-catwork" then goto index 2;
   goto index 3;
   goto "null_script";
   if player type == "pipscat" then goto index 5;
   goto index 6;
   goto "on_tick-max-catwatch";
   entity "Felix" on_tick = "felix-loiter";
   entity "Maru" on_tick = "maru-loiter";
   entity "B. Murray" on_tick = "bmurray-loiter";
   entity "Deuteronomy" on_tick = "deut-loiter";
}

"on_tick-max-catwatch" {
   if player type != "pipscat" then goto index 2;
   goto index 3;
   goto "on_tick-max-neutral";
   entity "Felix" on_tick = "face-player";
   entity "Maru" on_tick = "face-player";
   entity "B. Murray" on_tick = "face-player";
   entity "Deuteronomy" on_tick = "face-player";
   if player current_animation == 2 then goto index 9;
   goto index 10;
   goto "on_tick-max-thumbwatch";
}

"on_tick-max-thumbwatch" {
   if player intersects geometry "catwatch-zone" then goto index 2;
   goto index 3;
   goto "send-cats-to-work";
   wait 2000ms;
}

"send-cats-to-work" {
   player_control = false;
   wait 1300ms;
   if !entity "Felix" intersects geometry "felix-spot" then goto index 4;
   goto index 5;
   goto "show_dialog-max-crewmissing";
   if !entity "Deuteronomy" intersects geometry "deut-spot" then goto index 7;
   goto index 8;
   goto "show_dialog-max-crewmissing";
   if !entity "Maru" intersects geometry "maru-spot" then goto index 10;
   goto index 11;
   goto "show_dialog-max-crewmissing";
   if !entity "B. Murray" intersects geometry "bmurray-spot" then goto index 13;
   goto index 14;
   goto "show_dialog-max-crewmissing";
   entity "Max Swagger" direction = player;
   entity "Max Swagger" animation -> 3 1x;
   entity "Max Swagger" current_animation = 4;
   wait 500ms;
   show dialog "ch1-max.mgs-XX";
   wait 300ms;
   entity "Felix" on_tick = "cat-walking-to-work";
   wait 400ms;
   entity "Deuteronomy" on_tick = "cat-walking-to-work";
   wait 400ms;
   entity "Maru" on_tick = "cat-walking-to-work";
   wait 400ms;
   entity "B. Murray" on_tick = "cat-walking-to-work";
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   player_control = true;
   "storyflag-catwork" = true;
   entity "Max Swagger" animation -> 5 1x;
   entity "Max Swagger" current_animation = 0;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 6 then goto index 37;
   goto index 38;
   "hint-tracking" = 0;
   goto "null_script";
}

"show_dialog-felix" {
   if self glitched then goto index 6;
   "hint-tracking" = 61;
   if player type == "pipscat" then goto index 5;
   show dialog "ch1-max.mgs-XX";
   goto index 7;
   show dialog "ch1-max.mgs-XX";
   show dialog "ch1-max.mgs-XX";
}

"show_dialog-deut" {
   if self glitched then goto index 6;
   "hint-tracking" = 61;
   if player type == "pipscat" then goto index 5;
   show dialog "ch1-max.mgs-XX";
   goto index 7;
   show dialog "ch1-max.mgs-XX";
   show dialog "ch1-max.mgs-XX";
}

"show_dialog-maru" {
   if self glitched then goto index 6;
   if player type == "pipscat" then goto index 4;
   show dialog "ch1-max.mgs-XX";
   goto index 7;
   show dialog "ch1-max.mgs-XX";
   goto index 7;
   show dialog "ch1-max.mgs-XX";
}

"show_dialog-bmurray" {
   if self glitched then goto index 6;
   "hint-tracking" = 61;
   if player type == "pipscat" then goto index 5;
   show dialog "ch1-max.mgs-XX";
   goto index 7;
   show dialog "ch1-max.mgs-XX";
   show dialog "ch1-max.mgs-XX";
}

"show_dialog-max-start" {
   if self glitched then goto index 47;
   if "storyflag-catwork" then goto index 44;
   if player type == "pipscat" then goto index 39;
   if "max-backstory" then goto index 35;
   player_control = false;
   wait 200ms;
   self direction = player;
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   wait 200ms;
   entity "Max Swagger" direction = entity "Felix";
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   wait 200ms;
   self direction = player;
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   wait 200ms;
   camera -> geometry "camera-felix" origin over 800ms;
   wait 200ms;
   show dialog "ch1-max.mgs-XX";
   wait 200ms;
   camera -> player position over 800ms;
   wait 200ms;
   entity "Max Swagger" direction = entity "Felix";
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   wait 200ms;
   self direction = player;
   wait 400ms;
   show dialog "ch1-max.mgs-XX";
   "max-backstory" = true;
   "hint-tracking" = 61;
   player_control = true;
   goto index 48;
   self direction = player;
   show dialog "ch1-max.mgs-XX";
   "hint-tracking" = 61;
   goto index 48;
   self direction = player;
   show dialog "ch1-max.mgs-XX";
   "hint-tracking" = 61;
   "max-backstory" = true;
   goto index 48;
   self direction = player;
   show dialog "ch1-max.mgs-XX";
   goto index 48;
   show dialog "ch1-max.mgs-XX";
}

"on_tick-oldcouplehouse" {
   if player intersects geometry "door-oldcouplehouse" then goto index 2;
   goto index 3;
   goto "leave-oldcouplehouse";
}

"leave-oldcouplehouse" {
   warp_state = "exit_from-oldcouplehouse";
   if "storyflag-bea1" then goto index 3;
   goto index 4;
   "bea-sequel-branch" = true;
   load map "main";
}

"on_load-oldcouplehouse" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if "bea-sequel-branch" then goto index 4;
   if !"storyflag-bea2" then goto index 6;
   goto index 9;
   entity "Delmar" type = "old_man";
   entity "Delmar" current_animation = 3;
   entity "Delmar" on_tick = "on_tick-delmar-blab-nonman-watch";
}

"show_dialog-delmar" {
   if self glitched then goto index 12;
   if entity "Delmar" type != "old_man" then goto index 10;
   if "bea-sequel-branch" then goto index 8;
   if "storyflag-bea1" then goto index 6;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 13;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 13;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 13;
   show dialog "dialog-dsheep";
   goto index 13;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   entity "Delmar" on_interact = "show_dialog-delmar";
}

"show_dialog-bea-start" {
   if self glitched then goto index 7;
   self on_tick = "null_script";
   self direction = player;
   if !"bea-sequel-branch" then goto index 6;
   goto "show_dialog-bea-part2";
   goto index 8;
   goto "show_dialog-bea-part1";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   entity "Beatrice" on_interact = "show_dialog-bea-start";
}

"show_dialog-bea-part1" {
   if !"storyflag-bea1" then goto index 7;
   if entity "Delmar" type == "old_man" then goto index 6;
   if entity "Delmar" type == "sheep " then goto index 5;
   if entity "Delmar" type == "helga" then goto index 5;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if entity "Delmar" type == "old_man" then goto index 42;
   if !"bea1-backstory" then goto index 11;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 39;
   if entity "Delmar" type == "sheep " then goto index 23;
   if entity "Delmar" type == "helga" then goto index 23;
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = player;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 37;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   player_control = false;
   wait 100ms;
   self direction = player;
   wait 500ms;
   player_control = true;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   "bea1-backstory" = true;
   self on_tick = "face-player";
   "hint-tracking" = 41;
   goto index 59;
   player_control = false;
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = entity "Delmar";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 4 then goto index 56;
   goto index 57;
   "hint-tracking" = 0;
   "bea1-backstory" = true;
   "storyflag-bea1" = true;
   entity "Beatrice" on_interact = "show_dialog-bea-start";
}

"show_dialog-bea-part2" {
   if !"storyflag-bea2" then goto index 7;
   if entity "Delmar" type == "sheep " then goto index 6;
   if entity "Delmar" type == "helga" then goto index 6;
   if entity "Delmar" type == "old_man" then goto index 5;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if entity "Delmar" type == "sheep " then goto index 32;
   if entity "Delmar" type == "helga" then goto index 32;
   if entity "Delmar" type == "old_man" then goto index 11;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if !"bea2-backstory" then goto index 14;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 28;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   player_control = false;
   wait 100ms;
   self direction = player;
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "face-player";
   "bea2-backstory" = true;
   "hint-tracking" = 91;
   goto index 44;
   if !"bea2-backstory" then goto index 35;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 36;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = entity "Delmar";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 9 then goto index 41;
   goto index 42;
   "hint-tracking" = 0;
   "bea2-backstory" = true;
   "storyflag-bea2" = true;
   entity "Beatrice" on_interact = "show_dialog-bea-start";
}

"on_tick-delmar-blab-nonman-watch" {
   if entity "Delmar" type != "old_man" then goto index 2;
   goto index 3;
   goto "delmar-unblab";
}

"on_tick-delmar-blab-man-watch" {
   if entity "Delmar" type == "old_man" then goto index 2;
   goto index 3;
   goto "delmar-blab";
}

"on_tick-secretroom" {
   if player intersects geometry "door-secretdoor-exit" then goto index 2;
   goto index 3;
   goto "leave-secretroom";
}

"on_load-secretroom" {
   if "tuesdayd" then goto index 3;
   goto "secretroom-cutscene";
   goto index 7;
   entity "Jackob" position = geometry "secretroom-hidingplace";
   entity "Alfonso" position = geometry "secretroom-hidingplace";
   entity "Bert" position = geometry "secretroom-hidingplace";
   command "rtfm" = "command-rtfm";
}

"show_dialog-hackbook" {
   if self glitched then goto index 14;
   show dialog "ch1-secretroom.mgs-XX";
   if "current-chapter" == 1 then goto index 4;
   goto index 15;
   if !"hackbook-backstory" then goto index 9;
   show dialog "ch1-secretroom.mgs-XX";
   if !"hackbook-endstory" then goto index 8;
   goto index 13;
   show dialog "dialog-hackbook-creepy-hint";
   show dialog "ch1-secretroom.mgs-XX";
   player direction = "south";
   show dialog "ch1-secretroom.mgs-XX";
   "hackbook-backstory" = true;
   "hint-tracking" = 201;
   show dialog "ch1-secretroom.mgs-XX";
}

"show_dialog-shepherd-start" {
   self direction = player;
   if self glitched then goto index 52;
   if "storyflag-shepherd" then goto index 51;
   if !entity "Baa" intersects geometry "sheep-pen
		|| entity Ram is not inside geometry sheep-pen
		|| entity Ewe is not inside geometry sheep-pen
		|| entity Helga is not inside geometry sheep-pen
	" then goto index 15;
   if "shepherd-backstory" then goto index 8;
   show dialog "ch1-shepherd.mgs-XX";
   "shepherd-backstory" = true;
   goto index 9;
   show dialog "ch1-shepherd.mgs-XX";
   "storyflag-shepherd" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 1 then goto index 14;
   goto index 53;
   "hint-tracking" = 0;
   if "shepherd-backstory" then goto index 43;
   self direction = player;
   show dialog "ch1-shepherd.mgs-XX";
   self direction = player;
   player_control = false;
   wait 200ms;
   self direction += 1;
   wait 500ms;
   self direction -= -2;
   wait 500ms;
   self direction += 1;
   wait 200ms;
   self direction = player;
   player_control = true;
   show dialog "ch1-shepherd.mgs-XX";
   self direction = player;
   player_control = false;
   wait 200ms;
   self direction += 1;
   wait 500ms;
   self direction -= -2;
   wait 500ms;
   self direction += 1;
   wait 200ms;
   self direction = player;
   player_control = true;
   show dialog "ch1-shepherd.mgs-XX";
   "hint-tracking" = 11;
   if entity "Baa" intersects geometry "sheep-pen
				|| entity Ram is inside geometry sheep-pen
				|| entity Ewe is inside geometry sheep-pen
				|| entity Helga is inside geometry sheep-pen
			" then goto index 47;
   show dialog "ch1-shepherd.mgs-XX";
   "hint-tracking" = 11;
   goto index 50;
   self direction = player;
   show dialog "ch1-shepherd.mgs-XX";
   "hint-tracking" = 12;
   "shepherd-backstory" = true;
   show dialog "ch1-shepherd.mgs-XX";
   show dialog "ch1-shepherd.mgs-XX";
}

"ch2-interact-mainframe" {
   if "ch2-wait-for-hat-touch" then goto index 106;
   if "ch2-carrying-mainframeos" then goto index 11;
   if "ch2-installed-mainframeos" then goto index 8;
   if !"ch2-toot-done" then goto index 5;
   goto index 110;
   show dialog "ch2-admin.mgs-XX";
   // auto return label
   goto index 110;
   show dialog "mainframe-working";
   // auto return label
   goto index 110;
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_tick = "null_script";
   player_control = false;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   player_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   if player intersects geometry "mainframe-watchdonut" then goto index 32;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   wait 1050ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 120ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 750ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 200ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 150ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 230ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3000ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 400ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 170ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 2300ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3800ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   serial_control = true;
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-XX";
   goto "ch2-install-wizard-resume2";
   // auto return label
   goto index 110;
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   show dialog "ch2-admin.mgs-XX";
   // auto return label
   "temp" = false;
   if entity "Wizard" current_animation == 0 then goto index 113;
   goto index 114;
   entity "Wizard" on_tick = "tick-ch2-wizard-ascend-and-watch";
   if !"ch2-installed-heatsink" then goto index 115;
   if "ch2-carrying-heatsink" then goto index 117;
   goto index 122;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   if !"ch2-installed-powersupply" then goto index 123;
   if "ch2-carrying-powersupply" then goto index 125;
   goto index 130;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   if !"ch2-installed-monitor" then goto index 131;
   if "ch2-carrying-monitor" then goto index 133;
   goto index 138;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   if !"ch2-installed-harddrive" then goto index 139;
   if "ch2-carrying-harddrive" then goto index 141;
   goto index 146;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   if !"ch2-installed-keyboard" then goto index 147;
   if "ch2-carrying-keyboard" then goto index 149;
   goto index 154;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   if !"ch2-installed-mouse" then goto index 155;
   if "ch2-carrying-mouse" then goto index 157;
   goto index 162;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   if !"ch2-installed-ramchips" then goto index 163;
   if "ch2-carrying-ramchips" then goto index 165;
   goto index 171;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-ramchips" = false;
   "ch2-installed-ramchips" = true;
   delete command "look" + "ram chips";
   delete command "look" + "ram";
   if !"ch2-installed-clock" then goto index 172;
   if "ch2-carrying-clock" then goto index 174;
   goto index 179;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-clock" = false;
   "ch2-installed-clock" = true;
   delete command "look" + "clock";
   if !"ch2-installed-cpu" then goto index 180;
   if "ch2-carrying-cpu" then goto index 182;
   goto index 187;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-cpu" = false;
   "ch2-installed-cpu" = true;
   delete command "look" + "cpu";
   if !"temp" then goto index 294;
   "temp" = false;
   show dialog "ch2-admin.mgs-XX";
   "ch2-storyflags-tally" = 0;
   if "ch2-installed-heatsink" then goto index 193;
   goto index 194;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-powersupply" then goto index 196;
   goto index 197;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-monitor" then goto index 199;
   goto index 200;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-harddrive" then goto index 202;
   goto index 203;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-keyboard" then goto index 205;
   goto index 206;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mouse" then goto index 208;
   goto index 209;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-ramchips" then goto index 211;
   goto index 212;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-clock" then goto index 214;
   goto index 215;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-cpu" then goto index 217;
   goto index 218;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mainframeos" then goto index 220;
   goto index 221;
   "ch2-storyflags-tally" += 1;
   if "ch2-storyflags-tally" == 3 then goto index 251;
   if "ch2-storyflags-tally" == 6 then goto index 235;
   if "ch2-storyflags-tally" == 9 then goto index 225;
   goto index 295;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-cutseen-last-parts-done" = true;
   "ch2-lambda-paging" = true;
   "ch2-storyflag-round" = 4;
   wait 700ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   goto index 295;
   player_control = false;
   wait 800ms;
   player direction = entity "Wizard";
   show dialog "ch2-admin.mgs-XX";
   wait 200ms;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-cutseen-bert-message" = true;
   "ch2-lambda-paging" = true;
   "ch2-storyflag-round" = 3;
   wait 700ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   player_control = true;
   goto index 295;
   player current_animation = 0;
   player_control = false;
   wait 800ms;
   entity "Bert" position = geometry "bert-spot";
   entity "Bert" direction = "north";
   show dialog "ch2-castle-1-bert.mgs-XX";
   wait 100ms;
   player on_tick = "watch-bert";
   wait 400ms;
   entity "Wizard" on_tick = "tick-ch2-wizard-ascend-and-watch-with-check";
   entity "Bert" position -> geometry "bert-spot" length over 1200ms;
   wait 100ms;
   entity "Bert" direction = player;
   wait 900ms;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" on_tick = "spin_self_clockwise";
   wait 400ms;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" on_tick = "null_script";
   entity "Bert" direction = player;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" direction = "east";
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" direction = "south";
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" position -> geometry "walk_from-south" origin over 800ms;
   wait 80ms;
   entity "Bert" on_tick = "yeet";
   player on_tick = "null_script";
   player_control = true;
   "interrupt" = true;
   player_control = false;
   wait 200ms;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-lambda-paging" = true;
   "ch2-cutseen-bert-secret" = true;
   "ch2-storyflag-round" = 2;
   wait 900ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   player_control = true;
   show dialog "ch2-admin.mgs-XX";
}

"ch2-serial-light-manager" {
   if serial_dialog open then goto index 15;
   if "ch2-lambda-paging" then goto index 7;
   if "ch2-mousegame" then goto index 5;
   light LED_USB = false;
   goto index 16;
   goto "ch2-serial-light-manager-mouse";
   goto index 16;
   if "ch2-lambda-paging-pulsar" then goto index 11;
   "ch2-lambda-paging-pulsar" = true;
   light LED_USB = true;
   goto index 13;
   "ch2-lambda-paging-pulsar" = false;
   light LED_USB = false;
   wait 200ms;
   goto index 16;
   light LED_USB = true;
}

"ch2-serial-light-manager-mouse" {
   if !"ch2-mousegame" then goto index 2;
   goto index 3;
   goto "ch2-serial-light-manager";
}

"on_load-ch2-bakery" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bakery.mgs-XX";
   if "ch2-storyflag-round" == 3 then goto index 8;
   if "ch2-storyflag-round" == 4 then goto index 8;
   if "ch2-storyflag-round" != 2 then goto index 6;
   goto index 20;
   entity "Jackob" on_tick = "yeet";
   goto index 20;
   if "ch2-storyflag-round" == 3 then goto index 13;
   if "ch2-storyflag-round" == 4 then goto index 11;
   goto index 14;
   entity "Jackob" position = geometry "zippy-spot2";
   goto index 14;
   entity "Jackob" position = geometry "zippy-spot1";
   entity "Jackob" name = "Aunt Zippy";
   entity "Jackob" on_look = "look-ch2-zippy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zippy";
   entity "Jackob" type = "lightning_boy";
   entity "Jackob" direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 33;
   if "ch2-in-room" == 0 then goto index 33;
   if debug_mode then goto index 33;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 37;
   goto index 38;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 64;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 65;
   serial_control = false;
   if "ch2-has-map" then goto index 67;
   goto index 69;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 139;
   if "ch2-warp-granted" then goto index 72;
   goto index 213;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 213;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 214;
   if "ch2-storyflag-round" < 5 then goto index 216;
   goto index 246;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 248;
   goto index 249;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 251;
   goto index 252;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 254;
   goto index 255;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 257;
   goto index 258;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 260;
   goto index 261;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 263;
   goto index 264;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 266;
   goto index 267;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 269;
   goto index 270;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 272;
   goto index 273;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 275;
   goto index 277;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 279;
   goto index 280;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 282;
   goto index 283;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 285;
   goto index 286;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 288;
   goto index 289;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 291;
   goto index 292;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 294;
   goto index 295;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 301;
   if "debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 305;
   if !"debug-curr-state" then goto index 303;
   goto index 304;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 307;
   goto index 315;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 318;
   goto index 386;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 320;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 380;
   if "goosefact" == 1 then goto index 378;
   if "goosefact" == 2 then goto index 376;
   if "goosefact" == 3 then goto index 374;
   if "goosefact" == 4 then goto index 372;
   if "goosefact" == 5 then goto index 370;
   if "goosefact" == 6 then goto index 368;
   if "goosefact" == 7 then goto index 366;
   if "goosefact" == 8 then goto index 364;
   if "goosefact" == 9 then goto index 362;
   if "goosefact" == 10 then goto index 360;
   if "goosefact" == 11 then goto index 358;
   if "goosefact" == 12 then goto index 356;
   if "goosefact" == 13 then goto index 354;
   if "goosefact" == 14 then goto index 352;
   if "goosefact" == 15 then goto index 350;
   if "goosefact" == 16 then goto index 348;
   if "goosefact" == 17 then goto index 346;
   if "goosefact" == 18 then goto index 344;
   if "goosefact" == 19 then goto index 342;
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 385;
   goto index 386;
   "goosefact" = 0;
}

"on_tick-ch2-bakery" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-bakery";
   load map "ch2-town";
   map on_tick = "on_tick-ch2-bakery";
}

"interact-ch2-baker" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   if "ch2-storyflag-round" >= 5 then goto index 19;
   show dialog "ch2-bakery.mgs-XX";
   goto index 20;
   show dialog "ch2-bakery.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 33;
   if "tempvar" == 1 then goto index 31;
   if "tempvar" == 2 then goto index 29;
   if "tempvar" == 3 then goto index 27;
   goto index 34;
   self direction = "west";
   goto index 34;
   self direction = "south";
   goto index 34;
   self direction = "east";
   goto index 34;
   self direction = "north";
}

"on_load-ch2-magehouse-birthday" {
   hex_control = true;
   player_control = false;
   if debug_mode then goto index 5;
   serial_control = false;
   goto index 8;
   serial_control = true;
   command "skip" = "cutscene-ch2-birthday-exit";
   show serial_dialog "ch2-birthday.mgs-XX";
   if "close" then goto label if_1310;
   hex_editor = false;
   goto index 12;
   hex_editor = true;
   player current_animation = 0;
   camera fade out -> #000000 over 0ms;
   player direction = "east";
   camera = geometry "cake-camera-1";
   entity "Stunt Cake" current_animation = 1;
   wait 1000ms;
   camera fade in -> #000000 over 1000ms;
   wait 500ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 200ms;
   entity "Stunt Cake" animation -> 2 1x;
   entity "Stunt Cake" current_animation = 3;
   camera fade out -> #000000 over 0ms;
   camera = geometry "cake-camera-2";
   camera fade in -> #000000 over 500ms;
   show dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 500ms;
   entity "Cake" current_animation = 4;
   show dialog "ch2-birthday.mgs-XX";
   camera fade in -> #000000 over 1000ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 180ms;
   player direction = "south";
   wait 400ms;
   show dialog "ch2-birthday.mgs-XX";
   player direction = "east";
   show dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 1200ms;
   wait 200ms;
   goto "cutscene-ch2-birthday-exit";
}

"ch2-escort-cutscene" {
   if debug_mode then goto index 3;
   serial_control = false;
   goto index 6;
   serial_control = true;
   command "skip" = "cutscene-ch2-escort-exit";
   show serial_dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 0ms;
   player_control = false;
   if "close" then goto label if_1317;
   hex_editor = false;
   goto index 12;
   hex_editor = true;
   entity "Alfonso" position = geometry "birthday-alfonso";
   entity "Bert" position = geometry "birthday-bert";
   entity "Jackob" position = geometry "birthday-jackob";
   entity "Alfonso" direction = "north";
   entity "Bert" direction = "north";
   entity "Jackob" direction = "north";
   camera = geometry "escort-camera";
   camera fade in -> #000000 over 1000ms;
   player direction = "south";
   wait 800ms;
   player position = geometry "walk_from-magehouse";
   player position -> geometry "walk_from-magehouse" length over 400ms;
   wait 1200ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 150ms;
   player on_tick = "look-left-and-right-fast";
   wait 300ms;
   show dialog "ch2-birthday.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-XX";
   wait 100ms;
   player on_tick = "look-left-and-right-fast";
   wait 200ms;
   show dialog "ch2-birthday.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-XX";
   wait 150ms;
   entity "Alfonso" direction = "south";
   wait 500ms;
   show dialog "ch2-birthday.mgs-XX";
   entity "Alfonso" direction = player;
   show dialog "ch2-birthday.mgs-XX";
   entity "Jackob" on_tick = "gossip-right-down";
   entity "Alfonso" on_tick = "gossip-left-and-right-down";
   entity "Bert" on_tick = "gossip-left-down";
   wait 200ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 500ms;
   entity "Alfonso" on_tick = "null_script";
   entity "Jackob" on_tick = "null_script";
   entity "Bert" on_tick = "null_script";
   wait 100ms;
   entity "Alfonso" direction = "north";
   wait 50ms;
   entity "Bert" direction = "north";
   wait 40ms;
   entity "Jackob" direction = "north";
   show dialog "ch2-birthday.mgs-XX";
   "ch2-escort-cutscene" = true;
   wait 160ms;
   entity "Jackob" on_tick = "birthday-march-on-own-path";
   wait 180ms;
   entity "Alfonso" on_tick = "birthday-march-on-own-path";
   wait 90ms;
   entity "Bert" on_tick = "birthday-march-on-own-path";
   player on_tick = "birthday-march-on-own-path-player";
}

"on_load-ch2-bobsclub-basement" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub-basement.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 6;
   entity "Guardian Bob" position = geometry "bob-walk2";
   entity "Guardian Bob" on_tick = "loiter-slow";
   goto index 7;
   camera = geometry "gasp-spot";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
   command "look" + "bob" = "look-ch2-bob";
   if !"ch2-cutseen-bob-party" then goto index 376;
   goto index 436;
   player_control = false;
   wait 1500ms;
   player on_tick = "look-left-and-right-fast";
   wait 700ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player on_tick = "null_script";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" position -> geometry "bob-walk" length over 1200ms;
   wait 800ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   if player name == "Bob" then goto index 390;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 391;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" on_tick = "spin_self_clockwise";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" on_tick = "null_script";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 100ms;
   player strafe = 2;
   player position -> geometry "gasp-spot" origin over 200ms;
   player strafe = 0;
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = "south";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player direction = "south";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 100ms;
   player on_tick = "spin_self_clockwise";
   wait 240ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = "south";
   player on_tick = "null_script";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 80ms;
   entity "Guardian Bob" direction = "north";
   wait 400ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   if "ch2-want-cactuscooler" then goto index 427;
   goto index 430;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   "ch2-cutseen-bob-party" = true;
   wait 150ms;
   entity "Guardian Bob" position -> geometry "bob-walk2" origin over 800ms;
   entity "Guardian Bob" on_tick = "loiter-slow";
   camera = player position;
   player_control = true;
}

"tick-linger-1" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 4000ms;
   goto index 8;
   wait 3000ms;
   goto index 8;
   wait 2000ms;
   self position -> geometry "linger-spot-1b" origin over 500ms;
   self direction = "east";
   wait 15000ms;
   self position -> geometry "linger-spot-1a" origin over 500ms;
   self direction = "east";
   wait 4000ms;
}

"tick-linger-2" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 14000ms;
   goto index 8;
   wait 9000ms;
   goto index 8;
   wait 3000ms;
   wait 3000ms;
   self position -> geometry "linger-spot-2b" origin over 1000ms;
   self direction = "south";
   wait 12000ms;
   self direction = "east";
   wait 10000ms;
   self direction = "south";
   wait 4000ms;
   self position -> geometry "linger-spot-2a" origin over 1000ms;
   self direction = "south";
   wait 20000ms;
}

"tick-linger-3" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 4000ms;
   goto index 8;
   wait 3000ms;
   goto index 8;
   wait 2000ms;
   wait 5000ms;
   self position -> geometry "linger-spot-3b" origin over 750ms;
   self direction = "east";
   wait 32000ms;
   self position -> geometry "linger-spot-3a" origin over 750ms;
   self direction = "east";
   wait 4000ms;
}

"tick-linger-4" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 14000ms;
   goto index 8;
   wait 9000ms;
   goto index 8;
   wait 3000ms;
   self position -> geometry "linger-spot-4b" origin over 1000ms;
   self direction = "north";
   wait 15000ms;
   self direction = "west";
   wait 12000ms;
   self position -> geometry "linger-spot-4a" origin over 1000ms;
   self direction = "north";
   wait 12000ms;
}

"interact-ch2-guardianbob" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 30;
   if "tempvar" == 1 then goto index 28;
   if "tempvar" == 2 then goto index 26;
   if "tempvar" == 3 then goto index 24;
   goto index 31;
   self direction = "west";
   goto index 31;
   self direction = "south";
   goto index 31;
   self direction = "east";
   goto index 31;
   self direction = "north";
}

"interact-ch2-marathonbob" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   "bobtalkrand" ?= 10;
   if "bobtalkrand" == 1 then goto index 44;
   if "bobtalkrand" == 2 then goto index 42;
   if "bobtalkrand" == 3 then goto index 40;
   if "bobtalkrand" == 4 then goto index 38;
   if "bobtalkrand" == 5 then goto index 36;
   if "bobtalkrand" == 6 then goto index 34;
   if "bobtalkrand" == 7 then goto index 32;
   if "bobtalkrand" == 8 then goto index 30;
   if "bobtalkrand" == 9 then goto index 28;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 45;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 58;
   if "tempvar" == 1 then goto index 56;
   if "tempvar" == 2 then goto index 54;
   if "tempvar" == 3 then goto index 52;
   goto index 59;
   self direction = "west";
   goto index 59;
   self direction = "south";
   goto index 59;
   self direction = "east";
   goto index 59;
   self direction = "north";
   "bobtalkrand" = 0;
}

"interact-ch2-icechest" {
   if "ch2-carrying-cactuscooler" then goto index 14;
   if "ch2-cactuscooler-delivered" then goto index 13;
   if !"ch2-want-cactuscooler" then goto index 5;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 6;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-cactuscooler-bobaustin" = false;
   "ch2-map-heatsink" = true;
   "ch2-carrying-cactuscooler" = true;
   command "look" + "cactus cooler" = "look-cactuscooler";
   "interrupt" = true;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   if !"interrupt" then goto index 18;
   if !"ch2-want-cactuscooler" then goto index 18;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 19;
   show dialog "ch2-bobsclub-basement.mgs-XX";
}

"look-ch2-bobglasses" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 5;
   show serial_dialog "ch2-bobsclub.mgs-XX";
   goto index 6;
   show serial_dialog "ch2-bobsclub.mgs-XX";
}

"on_load-ch2-bobsclub" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub.mgs-XX";
   "ch2-rattle-count" = 0;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 16;
   if "ch2-in-room" == 0 then goto index 16;
   if debug_mode then goto index 16;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 20;
   goto index 21;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 47;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 48;
   serial_control = false;
   if "ch2-has-map" then goto index 50;
   goto index 52;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 122;
   if "ch2-warp-granted" then goto index 55;
   goto index 196;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 196;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 197;
   if "ch2-storyflag-round" < 5 then goto index 199;
   goto index 229;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 231;
   goto index 232;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 234;
   goto index 235;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 237;
   goto index 238;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 240;
   goto index 241;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 243;
   goto index 244;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 246;
   goto index 247;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 249;
   goto index 250;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 252;
   goto index 253;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 255;
   goto index 256;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 258;
   goto index 260;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 262;
   goto index 263;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 265;
   goto index 266;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 268;
   goto index 269;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 271;
   goto index 272;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 274;
   goto index 275;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 277;
   goto index 278;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 284;
   if "debug-curr-state" then goto index 281;
   goto index 282;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 288;
   if !"debug-curr-state" then goto index 286;
   goto index 287;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 290;
   goto index 298;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 301;
   goto index 369;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 303;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 363;
   if "goosefact" == 1 then goto index 361;
   if "goosefact" == 2 then goto index 359;
   if "goosefact" == 3 then goto index 357;
   if "goosefact" == 4 then goto index 355;
   if "goosefact" == 5 then goto index 353;
   if "goosefact" == 6 then goto index 351;
   if "goosefact" == 7 then goto index 349;
   if "goosefact" == 8 then goto index 347;
   if "goosefact" == 9 then goto index 345;
   if "goosefact" == 10 then goto index 343;
   if "goosefact" == 11 then goto index 341;
   if "goosefact" == 12 then goto index 339;
   if "goosefact" == 13 then goto index 337;
   if "goosefact" == 14 then goto index 335;
   if "goosefact" == 15 then goto index 333;
   if "goosefact" == 16 then goto index 331;
   if "goosefact" == 17 then goto index 329;
   if "goosefact" == 18 then goto index 327;
   if "goosefact" == 19 then goto index 325;
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 368;
   goto index 369;
   "goosefact" = 0;
   if debug_mode then goto index 371;
   goto index 383;
   command "find" + "cc" = "find-cc";
   command "unfind" + "cc" = "unfind-cc";
   command "want" + "cc" = "want-cc";
   command "unwant" + "cc" = "unwant-cc";
   command "basement" = "basement";
   command "unbasement" = "unbasement";
   command "toot" = "toot";
   command "untoot" = "untoot";
   command "carry" + "cc" = "ch2-pickup-cactuscooler";
   command "uncarry" + "cc" = "ch2-unpickup-cactuscooler";
   command "reset" = "reset";
   show serial_dialog "ch2-bobsclub.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 388;
   if "ch2-want-cactuscooler" then goto index 385;
   if "ch1-found-cactuscooler" then goto index 387;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   player_control = false;
   if warp_state != "warped" then goto index 391;
   goto index 392;
   player position -> geometry "walk-spot" origin over 400ms;
   wait 220ms;
   if !"ch2-saw-emptybobroom" then goto index 396;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 399;
   player on_tick = "look-left-and-right-fast";
   show dialog "ch2-bobsclub.mgs-XX";
   "ch2-saw-emptybobroom" = true;
   player on_tick = "null_script";
   player direction = "south";
   if "ch2-want-cactuscooler" then goto index 403;
   show dialog "ch2-bobsclub.mgs-XX";
   if "ch1-found-cactuscooler" then goto index 406;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 407;
   show dialog "ch2-bobsclub.mgs-XX";
   player_control = true;
}

"on_tick-ch2-bobsclub" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-bobsclub";
   load map "ch2-town";
   map on_tick = "on_tick-ch2-bobsclub";
}

"interact-ch2-bobbox" {
   if !"ch2-cutseen-bob-party" then goto index 3;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 4;
   show dialog "ch2-bobsclub.mgs-XX";
}

"interact-ch2-bobbarstool" {
   if !"ch2-cutseen-bob-party" then goto index 3;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 4;
   show dialog "ch2-bobsclub.mgs-XX";
}

"interact-ch2-bobcountertop" {
   if !"ch2-cutseen-bob-party" then goto index 2;
   goto index 3;
   show dialog "ch2-bobsclub.mgs-XX";
}

"interact-ch2-bobcupboard" {
   if !"ch2-touched-bobcupboard" then goto index 3;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 5;
   show dialog "ch2-bobsclub.mgs-XX";
   "ch2-touched-bobcupboard" = true;
   if !"ch2-cutseen-bob-party" then goto index 6;
   player on_tick = "look-left-and-right-fast";
   if "ch2-rattle-count" == 0 then goto index 33;
   if "ch2-rattle-count" == 1 then goto index 30;
   if "ch2-rattle-count" == 2 then goto index 25;
   if "ch2-rattle-count" == 3 then goto index 20;
   if "ch2-rattle-count" == 4 then goto index 16;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 37;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 37;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 37;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 37;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 37;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   "ch2-rattle-count" += 1;
   if !"ch2-toot-done" then goto index 42;
   goto index 43;
   "ch2-rattle-count" %= 3;
}

"interact-ch2-bobglasses" {
   show dialog "ch2-bobsclub.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 2;
   player on_tick = "look-left-and-right-fast";
   if "ch2-rattle-count" == 0 then goto index 29;
   if "ch2-rattle-count" == 1 then goto index 26;
   if "ch2-rattle-count" == 2 then goto index 21;
   if "ch2-rattle-count" == 3 then goto index 16;
   if "ch2-rattle-count" == 4 then goto index 12;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 33;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 33;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 33;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 33;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 33;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   "ch2-rattle-count" += 1;
   if !"ch2-toot-done" then goto index 38;
   goto index 39;
   "ch2-rattle-count" %= 3;
}

"interact-ch2-bobfridge" {
   if "ch2-carrying-cactuscooler" then goto index 6;
   if "ch2-cactuscooler-delivered" then goto index 6;
   if !"ch1-found-cactuscooler" then goto index 5;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 7;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 8;
   player on_tick = "look-left-and-right-fast";
   if "ch2-rattle-count" == 0 then goto index 35;
   if "ch2-rattle-count" == 1 then goto index 32;
   if "ch2-rattle-count" == 2 then goto index 27;
   if "ch2-rattle-count" == 3 then goto index 22;
   if "ch2-rattle-count" == 4 then goto index 18;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 39;
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 39;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 39;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 39;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 39;
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-bobsclub.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   "ch2-rattle-count" += 1;
   if !"ch2-toot-done" then goto index 44;
   goto index 45;
   "ch2-rattle-count" %= 3;
}

"ch2-bert-secret-lambda-intro" {
   show serial_dialog "spacer";
   if "interrupt" then goto index 4;
   show serial_dialog "ch2-castle-1-bert.mgs-XX";
   goto index 5;
   show serial_dialog "ch2-castle-1-bert.mgs-XX";
   show serial_dialog "ch2-castle-1-bert.mgs-XX";
   if !"ch2-cameras-explanation" then goto index 8;
   goto index 10;
   show serial_dialog "ch2-castle-1-bert.mgs-XX";
   "ch2-cameras-explanation" = true;
   show serial_dialog "ch2-castle-1-bert.mgs-XX";
}

"look-ch2-castle-1" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-storyflag-round" < 5 then goto index 5;
   show serial_dialog "ch2-castle-1.mgs-XX";
   goto index 6;
   show serial_dialog "ch2-castle-1.mgs-XX";
}

"look-ch2-mainframe" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   "temp" = false;
   show serial_dialog "ch2-castle-1.mgs-XX";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-heatsink" then goto index 7;
   goto index 8;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-powersupply" then goto index 10;
   goto index 11;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-harddrive" then goto index 13;
   goto index 14;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-ramchips" then goto index 16;
   goto index 17;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-clock" then goto index 19;
   goto index 20;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-cpu" then goto index 22;
   goto index 23;
   show serial_dialog "ch2-castle-1.mgs-XX";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-monitor" then goto index 27;
   if "ch2-installed-keyboard" then goto index 27;
   if "ch2-installed-mouse" then goto index 27;
   if "ch2-installed-monitor" then goto index 29;
   goto index 30;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-keyboard" then goto index 32;
   goto index 33;
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-installed-mouse" then goto index 35;
   goto index 36;
   show serial_dialog "ch2-castle-1.mgs-XX";
   show serial_dialog "ch2-castle-1.mgs-XX";
}

"look-ch2-wizard" {
   show serial_dialog "spacer";
   if entity "Wizard" current_animation == 0 then goto index 4;
   show serial_dialog "ch2-castle-1.mgs-XX";
   goto index 6;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
}

"on_load-ch2-castle-1-doorless" {
   "ch2-in-room" = 1;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   if warp_state == "raw_game_load-ch2" then goto index 13;
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   goto index 27;
   player position = geometry "walk_from-south";
   goto index 27;
   player position = geometry "walk_from-north";
   goto index 27;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 26;
   if "playersave-dir" == 1 then goto index 24;
   if "playersave-dir" == 2 then goto index 22;
   if "playersave-dir" == 3 then goto index 20;
   goto index 27;
   player direction = "west";
   goto index 27;
   player direction = "south";
   goto index 27;
   player direction = "east";
   goto index 27;
   player direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 40;
   if "ch2-in-room" == 0 then goto index 40;
   if debug_mode then goto index 40;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 44;
   goto index 45;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 71;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 72;
   serial_control = false;
   if "ch2-has-map" then goto index 74;
   goto index 76;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 146;
   if "ch2-warp-granted" then goto index 79;
   goto index 220;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 220;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 221;
   if "ch2-storyflag-round" < 5 then goto index 223;
   goto index 253;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 255;
   goto index 256;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 258;
   goto index 259;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 261;
   goto index 262;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 264;
   goto index 265;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 267;
   goto index 268;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 270;
   goto index 271;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 273;
   goto index 274;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 276;
   goto index 277;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 279;
   goto index 280;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 282;
   goto index 284;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 286;
   goto index 287;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 289;
   goto index 290;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 292;
   goto index 293;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 295;
   goto index 296;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 298;
   goto index 299;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 301;
   goto index 302;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 308;
   if "debug-curr-state" then goto index 305;
   goto index 306;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 312;
   if !"debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 314;
   goto index 322;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 325;
   goto index 393;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 327;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 387;
   if "goosefact" == 1 then goto index 385;
   if "goosefact" == 2 then goto index 383;
   if "goosefact" == 3 then goto index 381;
   if "goosefact" == 4 then goto index 379;
   if "goosefact" == 5 then goto index 377;
   if "goosefact" == 6 then goto index 375;
   if "goosefact" == 7 then goto index 373;
   if "goosefact" == 8 then goto index 371;
   if "goosefact" == 9 then goto index 369;
   if "goosefact" == 10 then goto index 367;
   if "goosefact" == 11 then goto index 365;
   if "goosefact" == 12 then goto index 363;
   if "goosefact" == 13 then goto index 361;
   if "goosefact" == 14 then goto index 359;
   if "goosefact" == 15 then goto index 357;
   if "goosefact" == 16 then goto index 355;
   if "goosefact" == 17 then goto index 353;
   if "goosefact" == 18 then goto index 351;
   if "goosefact" == 19 then goto index 349;
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 392;
   goto index 393;
   "goosefact" = 0;
   if warp_state == "raw_game_load-ch2" then goto index 395;
   goto index 398;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"on_load-ch2-castle-1" {
   if warp_state == "ch2 ending" then goto index 2;
   goto index 3;
   goto "ch2-castle-1-ending";
   "ch2-in-room" = 1;
   "ch2-seen-room-1" = true;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-cutseen-bert-secret" then goto index 9;
   goto index 10;
   entity "Bert" on_tick = "yeet";
   if "ch2-ring-zero-enabled-in-castle" then goto index 12;
   goto index 14;
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   if "ch2-has-artifact" then goto index 16;
   goto index 17;
   entity "Artifact" on_tick = "yeet";
   if warp_state == "raw_game_load-ch2" then goto index 25;
   if warp_state == "walk_from-south" then goto index 23;
   if warp_state == "ch2-ending" then goto index 21;
   goto index 39;
   player position = geometry "mainframe-look-spot";
   goto index 39;
   player position = geometry "walk_from-south";
   goto index 39;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 38;
   if "playersave-dir" == 1 then goto index 36;
   if "playersave-dir" == 2 then goto index 34;
   if "playersave-dir" == 3 then goto index 32;
   goto index 39;
   player direction = "west";
   goto index 39;
   player direction = "south";
   goto index 39;
   player direction = "east";
   goto index 39;
   player direction = "north";
   if "ch2-carrying-mainframeos" then goto index 41;
   goto index 42;
   entity "Wizard" current_animation = 3;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 55;
   if "ch2-in-room" == 0 then goto index 55;
   if debug_mode then goto index 55;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 59;
   goto index 60;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 86;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 87;
   serial_control = false;
   if "ch2-has-map" then goto index 89;
   goto index 91;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 161;
   if "ch2-warp-granted" then goto index 94;
   goto index 235;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 235;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 236;
   if "ch2-storyflag-round" < 5 then goto index 238;
   goto index 268;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 270;
   goto index 271;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 273;
   goto index 274;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 276;
   goto index 277;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 279;
   goto index 280;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 282;
   goto index 283;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 285;
   goto index 286;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 288;
   goto index 289;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 291;
   goto index 292;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 294;
   goto index 295;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 297;
   goto index 299;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 301;
   goto index 302;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 304;
   goto index 305;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 307;
   goto index 308;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 310;
   goto index 311;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 313;
   goto index 314;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 316;
   goto index 317;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 323;
   if "debug-curr-state" then goto index 320;
   goto index 321;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 327;
   if !"debug-curr-state" then goto index 325;
   goto index 326;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 329;
   goto index 337;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 340;
   goto index 408;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 342;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 402;
   if "goosefact" == 1 then goto index 400;
   if "goosefact" == 2 then goto index 398;
   if "goosefact" == 3 then goto index 396;
   if "goosefact" == 4 then goto index 394;
   if "goosefact" == 5 then goto index 392;
   if "goosefact" == 6 then goto index 390;
   if "goosefact" == 7 then goto index 388;
   if "goosefact" == 8 then goto index 386;
   if "goosefact" == 9 then goto index 384;
   if "goosefact" == 10 then goto index 382;
   if "goosefact" == 11 then goto index 380;
   if "goosefact" == 12 then goto index 378;
   if "goosefact" == 13 then goto index 376;
   if "goosefact" == 14 then goto index 374;
   if "goosefact" == 15 then goto index 372;
   if "goosefact" == 16 then goto index 370;
   if "goosefact" == 17 then goto index 368;
   if "goosefact" == 18 then goto index 366;
   if "goosefact" == 19 then goto index 364;
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 403;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 407;
   goto index 408;
   "goosefact" = 0;
   if debug_mode then goto index 410;
   goto index 431;
   command "credits" = "debug-ch2-credits";
   command "toot" = "debug-finish-toot";
   command "walk" = "debug-walk";
   command "get" + "monitor" = "ch2-pickup-monitor";
   command "get" + "heatsink" = "ch2-pickup-heatsink";
   command "get" + "cactuscooler" = "ch2-pickup-cactuscooler";
   command "get" + "powersupply" = "ch2-pickup-powersupply";
   command "get" + "keyboard" = "ch2-pickup-keyboard";
   command "get" + "mouse" = "ch2-pickup-mouse";
   command "get" + "harddrive" = "ch2-solder-harddrive";
   command "get" + "plate" = "ch2-pickup-plate";
   command "get" + "needle" = "ch2-pickup-needle";
   command "get" + "ramchips" = "ch2-pickup-ramchips";
   command "get" + "clock" = "ch2-pickup-clock";
   command "get" + "goldfish" = "ch2-pickup-goldfish";
   command "get" + "abacus" = "ch2-pickup-abacus";
   command "get" + "cpu" = "ch2-solder-cpu";
   command "round" + "1" = "debug-get-items-for-round1";
   command "round" + "2" = "debug-get-items-for-round2";
   command "round" + "3" = "debug-get-items-for-round3";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if warp_state == "raw_game_load-ch2" then goto index 433;
   goto index 436;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"ch2-artifact-walk" {
   player_control = false;
   wait 70ms;
   entity "XA" on_tick = "ch2-camera-to-artifact";
   wait 500ms;
   entity "Artifact" on_tick = "tick-artifact-open";
   wait 400ms;
   player direction = geometry "artifact-look";
   wait 1700ms;
   if player intersects geometry "artifact-watchdonut" then goto index 10;
   player position -> geometry "artifact-watchpoint" origin over 600ms;
   player position -> geometry "artifact-watchpoint" origin over 400ms;
   player direction = geometry "artifact-look";
   wait 444ms;
   show dialog "ch2-castle-1.mgs-XX";
   player position -> geometry "artifact-approach" origin over 400ms;
   player direction = "north";
   wait 1000ms;
   entity "Artifact" animation -> 1 1x;
   entity "Artifact" current_animation = 3;
   wait 550ms;
   player position -> geometry "artifact-approach" length over 350ms;
   wait 170ms;
   player direction = "east";
   wait 700ms;
   player direction = "north";
   wait 80ms;
   player position -> geometry "artifact-get" origin over 200ms;
   wait 600ms;
   entity "Artifact" on_tick = "yeet";
   wait 100ms;
   entity "XA" on_tick = "ch2-camera-from-artifact";
   wait 200ms;
   player position -> geometry "artifact-approach" origin over 600ms;
   wait 300ms;
   player direction = "west";
   camera fade out -> #5AB5F7 over 800ms;
   entity "calc1" animation_frame = 55;
   entity "calc2" animation_frame = 55;
   entity "calc1" position = geometry "calc1-spot";
   entity "calc2" position = geometry "calc2-spot";
   camera = geometry "artifact-approach";
   player position = geometry "hiding-spot";
   camera fade in -> #5AB5F7 over 800ms;
   wait 2800ms;
   camera -> geometry "calc-camera" origin over 900ms;
   wait 200ms;
   show dialog "ch2-castle-1.mgs-XX";
   camera -> geometry "artifact-approach" origin over 700ms;
   wait 300ms;
   camera fade out -> #5AB5F7 over 800ms;
   player position = geometry "artifact-approach";
   camera = player position;
   entity "calc1" on_tick = "yeet";
   entity "calc2" on_tick = "yeet";
   camera fade in -> #5AB5F7 over 800ms;
   player direction = "south";
}

"on_tick-ch2-castle-1-doorless" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 8;
   if "ch2-wait-for-hat-touch" then goto index 4;
   goto index 5;
   goto "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   if player intersects geometry "north-hitbox" then goto index 10;
   goto index 19;
   if "ch2-wait-for-hat-touch" then goto index 12;
   goto index 13;
   goto "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-11";
   goto index 19;
   load map "ch2-castle-11-doorless";
}

"on_tick-ch2-castle-1" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 8;
   if "ch2-wait-for-hat-touch" then goto index 4;
   goto index 5;
   goto "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   if "ch2-wait-for-hat-touch" then goto index 10;
   goto index 11;
   goto "on_tick-ch2-castle-1-hexwait1";
   if dialog closed then goto index 12;
   if !"ch2-ring-zero-enabled-in-castle" then goto index 13;
   if button HAX pressed then goto index 15;
   goto index 26;
   if "ch2-toot-done" then goto index 24;
   if "ch2-hax-attempted" then goto index 22;
   if "ch2-door-attempted" then goto index 20;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 25;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 25;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 25;
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-hax-attempted" = true;
}

"on_tick-ch2-castle-1-hexwait1" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 6;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   player position -> geometry "walk_from-south" origin over 200ms;
   player_control = true;
   if button HAX pressed then goto index 8;
   goto index 9;
   goto "on_tick-ch2-castle-1-hexwait2";
}

"on_tick-ch2-castle-1-hexwait2" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 6;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   player position -> geometry "walk_from-south" origin over 200ms;
   player_control = true;
   if button HAX pressed then goto index 8;
   goto index 11;
   "ch2-wait-for-hat-touch" = false;
   player on_tick = "ch2-install-wizard-resume";
   goto "on_tick-ch2-castle-1";
}

"on_go-castle-1-north" {
   if !"ch2-toot-done" then goto index 15;
   if "ch2-wait-for-hat-touch" then goto index 3;
   goto index 4;
   goto "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 13;
   load map "ch2-castle-11";
   goto index 14;
   load map "ch2-castle-11-doorless";
   goto index 16;
   goto "on_go_ch2-notyet";
}

"on_go-castle-1-south" {
   if !"ch2-toot-done" then goto index 12;
   if "ch2-wait-for-hat-touch" then goto index 3;
   goto index 4;
   goto "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-outside";
   goto index 13;
   goto "on_go_ch2-notyet";
}

"ch2-attempt-door-check" {
   if "ch2-toot-done" then goto index 20;
   if !"ch2-door-attempted" then goto index 14;
   if "ch2-pretoot-door-attempts" == 0 then goto index 11;
   if "ch2-pretoot-door-attempts" == 1 then goto index 9;
   if "ch2-pretoot-door-attempts" == 2 then goto index 7;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 12;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 12;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 12;
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-pretoot-door-attempts" += 1;
   goto index 21;
   if "ch2-hax-attempted" then goto index 17;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 18;
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-door-attempted" = true;
   goto index 21;
   show dialog "ch2-castle-1.mgs-XX";
}

"tick-ch2-wizard-ascend-and-watch-with-check" {
   if entity "Wizard" current_animation == 0 then goto index 3;
   entity "Wizard" current_animation = 3;
   goto index 4;
   goto "tick-ch2-wizard-ascend-and-watch";
   entity "Wizard" on_tick = "face-player";
}

"interact-ch2-wizard" {
   if self current_animation == 0 then goto index 9;
   if !"ch2-toot-done" then goto index 3;
   goto index 13;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   entity "Wizard" animation -> 4 1x;
   entity "Wizard" current_animation = 0;
   player_control = true;
   // auto return label
   player_control = false;
   entity "Wizard" animation -> 5 1x;
   entity "Wizard" current_animation = 3;
   player_control = true;
   if !"ch2-toot-done" then goto index 130;
   if "ch2-wait-for-hat-touch" then goto index 127;
   if "ch2-lambda-paging" then goto index 126;
   if "ch2-carrying-mainframeos" then goto index 33;
   if !"ch2-wizard-backstory" then goto index 30;
   if "interrupt2" then goto index 29;
   if !"interrupt3" then goto index 22;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 24;
   show dialog "ch2-castle-1.mgs-XX";
   "interrupt3" = true;
   player_control = false;
   entity "Wizard" animation -> 4 1x;
   entity "Wizard" current_animation = 0;
   player_control = true;
   goto index 131;
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-wizard-backstory" = true;
   "interrupt2" = true;
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_tick = "null_script";
   player_control = false;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   player_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   if player intersects geometry "mainframe-watchdonut" then goto index 54;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   wait 1050ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 120ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 750ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 200ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 150ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 230ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3000ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 400ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 170ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 2300ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3800ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   serial_control = true;
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-XX";
   goto "ch2-install-wizard-resume2";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
}

"ch2-install-wizard2" {
   entity "Wizard" on_tick = "face-player";
   wait 300ms;
   camera fade out -> #FFDD00 over 600ms;
   wait 100ms;
   camera fade in -> #FFDD00 over 600ms;
   wait 400ms;
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-ring-zero-enabled-in-castle" = true;
   player_control = true;
   if !debug_mode then goto index 11;
   goto index 13;
   hex_control = true;
   lights_control = false;
   "ch2-wait-for-hat-touch" = true;
   "ch2-carrying-mainframeos" = false;
   "ch2-installed-mainframeos" = true;
   delete command "look" + "mainframeos";
}

"ch2-castle-13-ending" {
   player_control = false;
   serial_control = false;
   camera = geometry "camera-spot3";
   camera fade in -> #000000 over 500ms;
   wait 800ms;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Sebastian" on_tick = "sebastian-to-three";
   wait 200ms;
   wait 100ms;
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 13;
   load map "ch2-castle-1";
   goto index 14;
   load map "ch2-castle-1-doorless";
}

"interact-ch2-xa" {
   if "ch2-toot-done" then goto index 77;
   if !"ch2-has-artifact" then goto index 4;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 75;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   wait 70ms;
   entity "XA" on_tick = "ch2-camera-to-artifact";
   wait 500ms;
   entity "Artifact" on_tick = "tick-artifact-open";
   wait 400ms;
   player direction = geometry "artifact-look";
   wait 1700ms;
   if player intersects geometry "artifact-watchdonut" then goto index 16;
   player position -> geometry "artifact-watchpoint" origin over 600ms;
   player position -> geometry "artifact-watchpoint" origin over 400ms;
   player direction = geometry "artifact-look";
   wait 444ms;
   show dialog "ch2-castle-1.mgs-XX";
   player position -> geometry "artifact-approach" origin over 400ms;
   player direction = "north";
   wait 1000ms;
   entity "Artifact" animation -> 1 1x;
   entity "Artifact" current_animation = 3;
   wait 550ms;
   player position -> geometry "artifact-approach" length over 350ms;
   wait 170ms;
   player direction = "east";
   wait 700ms;
   player direction = "north";
   wait 80ms;
   player position -> geometry "artifact-get" origin over 200ms;
   wait 600ms;
   entity "Artifact" on_tick = "yeet";
   wait 100ms;
   entity "XA" on_tick = "ch2-camera-from-artifact";
   wait 200ms;
   player position -> geometry "artifact-approach" origin over 600ms;
   wait 300ms;
   player direction = "west";
   camera fade out -> #5AB5F7 over 800ms;
   entity "calc1" animation_frame = 55;
   entity "calc2" animation_frame = 55;
   entity "calc1" position = geometry "calc1-spot";
   entity "calc2" position = geometry "calc2-spot";
   camera = geometry "artifact-approach";
   player position = geometry "hiding-spot";
   camera fade in -> #5AB5F7 over 800ms;
   wait 2800ms;
   camera -> geometry "calc-camera" origin over 900ms;
   wait 200ms;
   show dialog "ch2-castle-1.mgs-XX";
   camera -> geometry "artifact-approach" origin over 700ms;
   wait 300ms;
   camera fade out -> #5AB5F7 over 800ms;
   player position = geometry "artifact-approach";
   camera = player position;
   entity "calc1" on_tick = "yeet";
   entity "calc2" on_tick = "yeet";
   camera fade in -> #5AB5F7 over 800ms;
   player direction = "south";
   wait 300ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
   if "ch2-hax-attempted" then goto index 71;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 72;
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = true;
   "ch2-has-artifact" = true;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 78;
   goto "ch2-terminal-setup-check";
}

"ch2-terminal-setup-check" {
   if "ch2-wait-for-hat-touch" then goto index 3;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 4;
   show dialog "ch2-castle-1.mgs-XX";
}

"ch2-terminal-setup-nevermind" {
   if !"ch2-toot-done" then goto index 4;
   "can-interrupt-dialog" = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   show dialog "ch2-castle-1.mgs-XX";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   "can-interrupt-dialog" = true;
   serial_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   if serial_dialog closed then goto index 18;
   goto index 20;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   self on_interact = "ch2-terminal-setup-check";
}

"ch2-terminal-message-test-success" {
   if !"ch2-toot-done" then goto index 2;
   show dialog "ch2-castle-1.mgs-XX";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   "can-interrupt-dialog" = true;
   serial_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   if serial_dialog closed then goto index 15;
   goto index 17;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   self on_interact = "ch2-terminal-setup-check";
}

"look-ch2-castle-11" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-11.mgs-XX";
   if "ch2-storyflag-round" < 5 then goto index 5;
   show serial_dialog "ch2-castle-11.mgs-XX";
   goto index 6;
   show serial_dialog "ch2-castle-11.mgs-XX";
}

"on_load-ch2-castle-11-doorless" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-11.mgs-XX";
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   if warp_state == "walk_from-west" then goto index 7;
   goto index 12;
   player position = geometry "walk_from-west";
   goto index 12;
   player position = geometry "walk_from-south";
   goto index 12;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_load-ch2-castle-11" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   if !"ch2-seen-room-11" then goto index 5;
   show serial_dialog "ch2-castle-11.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-11.mgs-XX";
   "ch2-seen-room-11" = true;
   if "ch2-installed-monitor" then goto index 10;
   if "ch2-carrying-monitor" then goto index 10;
   goto index 12;
   entity "Monitor" position = geometry "hiding-spot";
   entity "Monitor" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
   if !"ch2-cutseen-castle11" then goto index 380;
   goto index 427;
   player_control = false;
   wait 500ms;
   entity "Kuro" on_tick = "null_script";
   if !"ch2-blockage" then goto index 385;
   goto index 387;
   "ch2-blockage" = true;
   show dialog "ch2-castle-11.mgs-XX";
   show dialog "ch2-castle-11.mgs-XX";
   player on_tick = "watch-kuro";
   entity "Kuro" position -> geometry "kuro-walk" origin over 300ms;
   entity "Kuro" position -> geometry "kuro-spot" origin over 300ms;
   entity "Kuro" position -> geometry "kuro-walk" origin over 300ms;
   entity "Kuro" direction = "south";
   wait 400ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" position -> geometry "kuro-spot" origin over 250ms;
   entity "Kuro" position -> geometry "kuro-walk" origin over 250ms;
   entity "Kuro" direction = "south";
   wait 140ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "ch2-walk-to-monitor";
   player on_tick = "null_script";
   player position -> geometry "warp-spot" length over 1900ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "null_script";
   entity "Kuro" direction = "south";
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "kuro-hop";
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "face-player";
   player_control = true;
   player on_tick = "null_script";
   "ch2-cutseen-castle11" = true;
}

"on_tick-ch2-castle-11-doorless" {
   if player intersects geometry "south-hitbox" then goto index 18;
   if player intersects geometry "north-hitbox" then goto index 11;
   if player intersects geometry "west-hitbox" then goto index 4;
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-east";
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-21";
   goto index 10;
   load map "ch2-castle-21-doorless";
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 16;
   load map "ch2-castle-12";
   goto index 17;
   load map "ch2-castle-12-doorless";
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 23;
   load map "ch2-castle-1";
   goto index 24;
   load map "ch2-castle-1-doorless";
}

"on_go-castle-11-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-12";
   goto index 10;
   load map "ch2-castle-12-doorless";
}

"on_go-castle-11-west" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-21";
   goto index 10;
   load map "ch2-castle-21-doorless";
}

"on_go-castle-11-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-1";
   goto index 10;
   load map "ch2-castle-1-doorless";
}

"ch2-ws-guess-album" {
   "ch2-ws-turn-value" = 1;
   if "ch2-ws-album" then goto index 5;
   "ch2-ws-album" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-analog" {
   "ch2-ws-turn-value" = 2;
   if "ch2-ws-analog" then goto index 5;
   "ch2-ws-analog" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-audio" {
   "ch2-ws-turn-value" = 3;
   if "ch2-ws-audio" then goto index 5;
   "ch2-ws-audio" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-aux" {
   "ch2-ws-turn-value" = 4;
   if "ch2-ws-aux" then goto index 5;
   "ch2-ws-aux" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-bass" {
   "ch2-ws-turn-value" = 5;
   if "ch2-ws-bass" then goto index 5;
   "ch2-ws-bass" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-beat" {
   "ch2-ws-turn-value" = 6;
   if "ch2-ws-beat" then goto index 5;
   "ch2-ws-beat" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-bpm" {
   "ch2-ws-turn-value" = 7;
   if "ch2-ws-bpm" then goto index 5;
   "ch2-ws-bpm" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-broadcast" {
   "ch2-ws-turn-value" = 8;
   if "ch2-ws-broadcast" then goto index 5;
   "ch2-ws-broadcast" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-cassette" {
   "ch2-ws-turn-value" = 9;
   if "ch2-ws-cassette" then goto index 5;
   "ch2-ws-cassette" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-chiptune" {
   "ch2-ws-turn-value" = 10;
   if "ch2-ws-chiptune" then goto index 5;
   "ch2-ws-chiptune" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-codec" {
   "ch2-ws-turn-value" = 11;
   if "ch2-ws-codec" then goto index 5;
   "ch2-ws-codec" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-compact" {
   "ch2-ws-turn-value" = 12;
   if "ch2-ws-compact" then goto index 5;
   "ch2-ws-compact" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-frequency" {
   "ch2-ws-turn-value" = 13;
   if "ch2-ws-frequency" then goto index 5;
   "ch2-ws-frequency" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-headphones" {
   "ch2-ws-turn-value" = 14;
   if "ch2-ws-headphones" then goto index 5;
   "ch2-ws-headphones" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-hifi" {
   "ch2-ws-turn-value" = 15;
   if "ch2-ws-hifi" then goto index 5;
   "ch2-ws-hifi" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-laser" {
   "ch2-ws-turn-value" = 16;
   if "ch2-ws-laser" then goto index 5;
   "ch2-ws-laser" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-lofi" {
   "ch2-ws-turn-value" = 17;
   if "ch2-ws-lofi" then goto index 5;
   "ch2-ws-lofi" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-media" {
   "ch2-ws-turn-value" = 18;
   if "ch2-ws-media" then goto index 5;
   "ch2-ws-media" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-microphone" {
   "ch2-ws-turn-value" = 19;
   if "ch2-ws-microphone" then goto index 5;
   "ch2-ws-microphone" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-midi" {
   "ch2-ws-turn-value" = 20;
   if "ch2-ws-midi" then goto index 5;
   "ch2-ws-midi" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-mixing" {
   "ch2-ws-turn-value" = 21;
   if "ch2-ws-mixing" then goto index 5;
   "ch2-ws-mixing" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-music" {
   "ch2-ws-turn-value" = 22;
   if "ch2-ws-music" then goto index 5;
   "ch2-ws-music" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-phonograph" {
   "ch2-ws-turn-value" = 23;
   if "ch2-ws-phonograph" then goto index 5;
   "ch2-ws-phonograph" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-radio" {
   "ch2-ws-turn-value" = 24;
   if "ch2-ws-radio" then goto index 5;
   "ch2-ws-radio" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-recording" {
   "ch2-ws-turn-value" = 25;
   if "ch2-ws-recording" then goto index 5;
   "ch2-ws-recording" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-rhythm" {
   "ch2-ws-turn-value" = 26;
   if "ch2-ws-rhythm" then goto index 5;
   "ch2-ws-rhythm" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-sequencer" {
   "ch2-ws-turn-value" = 27;
   if "ch2-ws-sequencer" then goto index 5;
   "ch2-ws-sequencer" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-song" {
   "ch2-ws-turn-value" = 28;
   if "ch2-ws-song" then goto index 5;
   "ch2-ws-song" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-soundtrack" {
   "ch2-ws-turn-value" = 29;
   if "ch2-ws-soundtrack" then goto index 5;
   "ch2-ws-soundtrack" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-speakers" {
   "ch2-ws-turn-value" = 30;
   if "ch2-ws-speakers" then goto index 5;
   "ch2-ws-speakers" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-stereo" {
   "ch2-ws-turn-value" = 31;
   if "ch2-ws-stereo" then goto index 5;
   "ch2-ws-stereo" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-stream" {
   "ch2-ws-turn-value" = 32;
   if "ch2-ws-stream" then goto index 5;
   "ch2-ws-stream" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-subwoofer" {
   "ch2-ws-turn-value" = 33;
   if "ch2-ws-subwoofer" then goto index 5;
   "ch2-ws-subwoofer" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-surround" {
   "ch2-ws-turn-value" = 34;
   if "ch2-ws-surround" then goto index 5;
   "ch2-ws-surround" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-synthesizer" {
   "ch2-ws-turn-value" = 35;
   if "ch2-ws-synthesizer" then goto index 5;
   "ch2-ws-synthesizer" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-tape" {
   "ch2-ws-turn-value" = 36;
   if "ch2-ws-tape" then goto index 5;
   "ch2-ws-tape" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-treble" {
   "ch2-ws-turn-value" = 37;
   if "ch2-ws-treble" then goto index 5;
   "ch2-ws-treble" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-vinyl" {
   "ch2-ws-turn-value" = 38;
   if "ch2-ws-vinyl" then goto index 5;
   "ch2-ws-vinyl" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-vocoder" {
   "ch2-ws-turn-value" = 39;
   if "ch2-ws-vocoder" then goto index 5;
   "ch2-ws-vocoder" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-volume" {
   "ch2-ws-turn-value" = 40;
   if "ch2-ws-volume" then goto index 5;
   "ch2-ws-volume" = true;
   "ch2-ws-turn-status" = 3;
   goto index 6;
   "ch2-ws-turn-status" = 2;
   goto "ch2-ws-doturn";
}

"look-ch2-castle-12" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-12.mgs-XX";
   if "ch2-storyflag-round" < 5 then goto index 5;
   show serial_dialog "ch2-castle-12.mgs-XX";
   goto index 6;
   show serial_dialog "ch2-castle-12.mgs-XX";
}

"on_load-ch2-castle-12-doorless" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-12.mgs-XX";
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   if warp_state == "walk_from-east" then goto index 7;
   goto index 12;
   player position = geometry "walk_from-east";
   goto index 12;
   player position = geometry "walk_from-south";
   goto index 12;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_load-ch2-castle-12" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   if !"ch2-seen-room-12" then goto index 5;
   show serial_dialog "ch2-castle-12.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-12.mgs-XX";
   "ch2-seen-room-12" = true;
   if "ch2-installed-needle" then goto index 10;
   if "ch2-carrying-needle" then goto index 10;
   goto index 11;
   entity "phonograph" secondary_id = 0;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
   if !"ch2-cutseen-castle12" then goto index 379;
   goto index 382;
   show dialog "ch2-castle-12.mgs-XX";
   "interrupt" = true;
   "ch2-cutseen-castle12" = true;
}

"on_tick-ch2-castle-12-doorless" {
   if player intersects geometry "south-hitbox" then goto index 18;
   if player intersects geometry "north-hitbox" then goto index 11;
   if player intersects geometry "east-hitbox" then goto index 4;
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-west";
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-31";
   goto index 10;
   load map "ch2-castle-31-doorless";
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 16;
   load map "ch2-castle-13";
   goto index 17;
   load map "ch2-castle-13-doorless";
   goto index 24;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 23;
   load map "ch2-castle-11";
   goto index 24;
   load map "ch2-castle-11-doorless";
}

"on_go-castle-12-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-13";
   goto index 10;
   load map "ch2-castle-13-doorless";
}

"on_go-castle-12-east" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-31";
   goto index 10;
   load map "ch2-castle-31-doorless";
}

"on_go-castle-12-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-11";
   goto index 10;
   load map "ch2-castle-11-doorless";
}

"ch2-interact-guestbook" {
   "interrupt" = false;
   if !"ch2-guestbook-signed" then goto index 4;
   show dialog "ch2-castle-12.mgs-XX";
   goto index 9;
   if !"interrupt3" then goto index 6;
   goto index 8;
   show dialog "ch2-castle-12.mgs-XX";
   "interrupt3" = true;
   show dialog "ch2-castle-12.mgs-XX";
}

"interact-ch2-concierge" {
   if !"ch2-concierge-backstory" then goto index 21;
   if "ch2-storyflag-round" < 2 then goto index 15;
   if "ch2-needle-permission" then goto index 15;
   if "ch2-ws-won" then goto index 9;
   if !"ch2-ws-backstory" then goto index 6;
   show dialog "ch2-castle-12.mgs-XX";
   show dialog "ch2-stereo-fix-proposal";
   "ch2-ws-backstory" = true;
   "ch2-needle-firstlook" = true;
   show serial_dialog "spacer";
   show dialog "ch2-castle-12.mgs-XX";
   show dialog "ch2-needle-prompt";
   "interrupt2" = true;
   "ch2-needle-permission" = true;
   entity "stereo" on_interact = "ch2-stereo-interact";
   if !"ch2-needle-permission" then goto index 20;
   if "ch2-carrying-needle" then goto index 19;
   if "ch2-installed-needle" then goto index 19;
   show dialog "ch2-needle-prompt";
   show dialog "ch2-trying-times";
   show dialog "ch2-trying-times";
   if "interrupt" then goto index 24;
   show dialog "ch2-castle-12.mgs-XX";
   goto index 25;
   show dialog "ch2-castle-12.mgs-XX";
   show dialog "ch2-castle-12.mgs-XX";
   "ch2-concierge-backstory" = true;
   if "ch2-storyflag-round" >= 2 then goto index 29;
   goto index 33;
   show dialog "ch2-stereo-fix-proposal";
   "ch2-ws-backstory" = true;
   "ch2-needle-firstlook" = true;
   "ch2-ws-backstory" = true;
}

"ch2-touch-needle" {
   "interrupt" = false;
   if "ch2-carrying-needle" then goto index 4;
   if "ch2-installed-needle" then goto index 4;
   goto index 6;
   show dialog "ch2-castle-12.mgs-XX";
   // auto return label
   if !"interrupt2" then goto index 7;
   if !"ch2-needle-firstlook" then goto index 10;
   show dialog "ch2-castle-12.mgs-XX";
   goto index 12;
   show dialog "ch2-castle-12.mgs-XX";
   "ch2-needle-firstlook" = true;
   if "ch2-storyflag-round" >= 2 then goto index 13;
   if "ch2-needle-permission" then goto index 18;
   if !"ch2-ws-backstory" then goto index 17;
   show dialog "ch2-castle-12.mgs-XX";
   goto index 19;
   show dialog "ch2-castle-12.mgs-XX";
   show dialog "ch2-castle-12.mgs-XX";
}

"ch2-touch-needle-yes" {
   show dialog "ch2-castle-12.mgs-XX";
   entity "phonograph" secondary_id = 0;
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 6;
   goto index 7;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "interrupt2" = false;
   self on_interact = "ch2-touch-needle";
}

"ch2-ws-doturn" {
   show serial_dialog "spacer";
   "ch2-ws-flags-tally" = 0;
   if "ch2-ws-album" then goto index 4;
   goto index 5;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-analog" then goto index 7;
   goto index 8;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-audio" then goto index 10;
   goto index 11;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-aux" then goto index 13;
   goto index 14;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-bass" then goto index 16;
   goto index 17;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-beat" then goto index 19;
   goto index 20;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-bpm" then goto index 22;
   goto index 23;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-broadcast" then goto index 25;
   goto index 26;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-cassette" then goto index 28;
   goto index 29;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-chiptune" then goto index 31;
   goto index 32;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-codec" then goto index 34;
   goto index 35;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-compact" then goto index 37;
   goto index 38;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-frequency" then goto index 40;
   goto index 41;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-headphones" then goto index 43;
   goto index 44;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-hifi" then goto index 46;
   goto index 47;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-laser" then goto index 49;
   goto index 50;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-lofi" then goto index 52;
   goto index 53;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-media" then goto index 55;
   goto index 56;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-microphone" then goto index 58;
   goto index 59;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-midi" then goto index 61;
   goto index 62;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-mixing" then goto index 64;
   goto index 65;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-music" then goto index 67;
   goto index 68;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-phonograph" then goto index 70;
   goto index 71;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-radio" then goto index 73;
   goto index 74;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-recording" then goto index 76;
   goto index 77;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-rhythm" then goto index 79;
   goto index 80;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-sequencer" then goto index 82;
   goto index 83;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-song" then goto index 85;
   goto index 86;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-soundtrack" then goto index 88;
   goto index 89;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-speakers" then goto index 91;
   goto index 92;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-stereo" then goto index 94;
   goto index 95;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-stream" then goto index 97;
   goto index 98;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-subwoofer" then goto index 100;
   goto index 101;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-surround" then goto index 103;
   goto index 104;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-synthesizer" then goto index 106;
   goto index 107;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-tape" then goto index 109;
   goto index 110;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-treble" then goto index 112;
   goto index 113;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-vinyl" then goto index 115;
   goto index 116;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-vocoder" then goto index 118;
   goto index 119;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-volume" then goto index 121;
   goto index 122;
   "ch2-ws-flags-tally" += 1;
   show serial_dialog "ch2-castle-12.mgs-XX";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-tape" then goto index 127;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 128;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 131;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 132;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vinyl" then goto index 136;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 137;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-media" then goto index 141;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 142;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-aux" then goto index 147;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 148;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-synthesizer" then goto index 152;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 153;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-tape" then goto index 158;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 159;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 162;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 163;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-music" then goto index 167;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 168;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-chiptune" then goto index 172;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 173;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-media" then goto index 177;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 178;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-bpm" then goto index 183;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 184;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-soundtrack" then goto index 188;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 189;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-tape" then goto index 194;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 195;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 198;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 199;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-music" then goto index 203;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 204;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-aux" then goto index 208;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 209;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-media" then goto index 213;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 214;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-radio" then goto index 218;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 219;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 223;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 224;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-bass" then goto index 228;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 229;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-phonograph" then goto index 233;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 234;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-tape" then goto index 239;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 240;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 243;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 244;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-music" then goto index 248;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 249;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-aux" then goto index 253;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 254;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-media" then goto index 258;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 259;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-radio" then goto index 263;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 264;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 268;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 269;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-beat" then goto index 274;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 275;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 279;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 280;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 286;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 287;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-laser" then goto index 291;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 292;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-music" then goto index 296;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 297;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-aux" then goto index 301;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 302;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-media" then goto index 306;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 307;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-radio" then goto index 311;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 312;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 316;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 317;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-hifi" then goto index 322;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 323;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-headphones" then goto index 327;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 328;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 334;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 335;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-laser" then goto index 339;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 340;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-music" then goto index 344;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 345;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-compact" then goto index 349;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 350;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-radio" then goto index 353;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 354;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 358;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 359;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-codec" then goto index 363;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-lofi" then goto index 369;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-subwoofer" then goto index 374;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-vocoder" then goto index 380;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 384;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 385;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-laser" then goto index 390;
   if "ch2-ws-sequencer" then goto index 390;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 391;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-sequencer" then goto index 394;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 395;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-radio" then goto index 399;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 400;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 403;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 404;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-codec" then goto index 408;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 409;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-midi" then goto index 414;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 415;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-sequencer" then goto index 419;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 420;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 427;
   if "ch2-ws-vocoder" then goto index 427;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 428;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-laser" then goto index 432;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 433;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 437;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 438;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-mixing" then goto index 442;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 443;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-codec" then goto index 447;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 448;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-song" then goto index 453;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 454;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 458;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 459;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 465;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 466;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 469;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 470;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-laser" then goto index 474;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 475;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-song" then goto index 479;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 480;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 483;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 484;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stream" then goto index 488;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 489;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-codec" then goto index 493;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 494;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-tape" then goto index 499;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 500;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-frequency" then goto index 504;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 505;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-microphone" then goto index 511;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 512;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 516;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 517;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-song" then goto index 521;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 522;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 526;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 527;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-codec" then goto index 531;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 532;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-audio" then goto index 535;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 536;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-album" then goto index 540;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 541;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-broadcast" then goto index 545;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 546;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 552;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 553;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-song" then goto index 557;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 558;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 562;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 563;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-midi" then goto index 567;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 568;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stereo" then goto index 572;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 573;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-album" then goto index 576;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 577;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-audio" then goto index 582;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 583;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-surround" then goto index 587;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 588;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-recording" then goto index 593;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 594;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 598;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 599;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-song" then goto index 602;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 603;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-headphones" then goto index 607;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 608;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-headphones" then goto index 612;
   if "ch2-ws-cassette" then goto index 612;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 613;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-headphones" then goto index 616;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 617;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stereo" then goto index 620;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 621;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-lofi" then goto index 624;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 625;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-album" then goto index 628;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 629;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-bpm" then goto index 634;
   if "ch2-ws-beat" then goto index 634;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 635;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-codec" then goto index 639;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 640;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-speakers" then goto index 644;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 645;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 651;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 652;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 656;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 657;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-rhythm" then goto index 660;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 661;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 665;
   if "ch2-ws-rhythm" then goto index 665;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 666;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-rhythm" then goto index 669;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 670;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stereo" then goto index 674;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 675;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-lofi" then goto index 679;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 680;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-album" then goto index 683;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 684;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-bpm" then goto index 688;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 689;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-beat" then goto index 692;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 693;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-laser" then goto index 697;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 698;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-chiptune" then goto index 702;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 703;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 709;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 710;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-synthesizer" then goto index 714;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 715;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 719;
   if "ch2-ws-synthesizer" then goto index 719;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 720;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-synthesizer" then goto index 723;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 724;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stereo" then goto index 728;
   if "ch2-ws-synthesizer" then goto index 728;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 729;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-lofi" then goto index 733;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 734;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-album" then goto index 737;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 738;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-bpm" then goto index 741;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 742;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-beat" then goto index 746;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 747;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-media" then goto index 751;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 752;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 756;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 757;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 763;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 764;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-cassette" then goto index 768;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 769;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-frequency" then goto index 772;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 773;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-frequency" then goto index 777;
   if "ch2-ws-stereo" then goto index 777;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 778;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-frequency" then goto index 781;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 782;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-lofi" then goto index 785;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 786;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-album" then goto index 789;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 790;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-beat" then goto index 794;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 795;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-music" then goto index 799;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 800;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-vocoder" then goto index 804;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 805;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-surround" then goto index 811;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 812;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-surround" then goto index 816;
   if "ch2-ws-recording" then goto index 816;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 817;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-surround" then goto index 820;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 821;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-broadcast" then goto index 825;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 826;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-broadcast" then goto index 830;
   if "ch2-ws-stereo" then goto index 830;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 831;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-broadcast" then goto index 834;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 835;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-hifi" then goto index 838;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 839;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-radio" then goto index 844;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 845;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-compact" then goto index 849;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 850;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-soundtrack" then goto index 856;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 857;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-soundtrack" then goto index 861;
   if "ch2-ws-recording" then goto index 861;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 862;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-soundtrack" then goto index 865;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 866;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-treble" then goto index 870;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 871;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-treble" then goto index 875;
   if "ch2-ws-bass" then goto index 875;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 876;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-treble" then goto index 879;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 880;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-hifi" then goto index 884;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 885;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-vinyl" then goto index 890;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 891;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-volume" then goto index 895;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 896;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   if "ch2-ws-volume" then goto index 901;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 902;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 905;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 906;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-analog" then goto index 910;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 911;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-bass" then goto index 915;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 916;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-hifi" then goto index 920;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 921;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-analog" then goto index 926;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 927;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-treble" then goto index 931;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 932;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 938;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 939;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-speakers" then goto index 942;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 943;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-bass" then goto index 947;
   if "ch2-ws-speakers" then goto index 947;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 948;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-hifi" then goto index 952;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 953;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-mixing" then goto index 958;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 959;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stream" then goto index 963;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 964;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-ws-rowstart";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-phonograph" then goto index 970;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 971;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-recording" then goto index 975;
   if "ch2-ws-phonograph" then goto index 975;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 976;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-phonograph" then goto index 979;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 980;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-subwoofer" then goto index 985;
   if "ch2-ws-bass" then goto index 985;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 986;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-subwoofer" then goto index 989;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 990;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-col";
   if "ch2-ws-rhythm" then goto index 995;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 996;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-stereo" then goto index 1000;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 1001;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "newline";
   if "ch2-ws-turn-status" == 5 then goto index 1249;
   if "ch2-ws-turn-status" == 4 then goto index 1248;
   if "ch2-ws-turn-value" == 41 then goto index 1247;
   if "ch2-ws-turn-value" == 42 then goto index 1246;
   if "ch2-ws-turn-value" == 43 then goto index 1245;
   if "ch2-ws-turn-value" == 44 then goto index 1244;
   if "ch2-ws-turn-value" == 45 then goto index 1243;
   if "ch2-ws-turn-value" == 46 then goto index 1242;
   if "ch2-ws-turn-value" == 47 then goto index 1241;
   if "ch2-ws-turn-value" == 48 then goto index 1240;
   if "ch2-ws-turn-value" == 49 then goto index 1239;
   if "ch2-ws-turn-value" == 50 then goto index 1238;
   if "ch2-ws-turn-value" == 51 then goto index 1237;
   if "ch2-ws-turn-value" == 52 then goto index 1236;
   if "ch2-ws-turn-value" == 53 then goto index 1235;
   if "ch2-ws-turn-value" == 54 then goto index 1234;
   if "ch2-ws-turn-value" == 55 then goto index 1233;
   if "ch2-ws-turn-value" == 56 then goto index 1232;
   if "ch2-ws-turn-value" == 57 then goto index 1231;
   if "ch2-ws-turn-value" == 58 then goto index 1230;
   if "ch2-ws-turn-value" == 59 then goto index 1229;
   if "ch2-ws-turn-value" == 60 then goto index 1228;
   if "ch2-ws-turn-value" == 61 then goto index 1227;
   if "ch2-ws-turn-value" == 62 then goto index 1226;
   if "ch2-ws-turn-value" == 63 then goto index 1225;
   if "ch2-ws-turn-value" == 64 then goto index 1224;
   if "ch2-ws-turn-value" == 65 then goto index 1223;
   if "ch2-ws-turn-value" == 66 then goto index 1222;
   if "ch2-ws-turn-value" == 67 then goto index 1221;
   if "ch2-ws-turn-value" == 68 then goto index 1220;
   if "ch2-ws-turn-value" == 69 then goto index 1219;
   if "ch2-ws-turn-value" == 70 then goto index 1218;
   if "ch2-ws-turn-value" == 71 then goto index 1217;
   if "ch2-ws-turn-value" == 72 then goto index 1216;
   if "ch2-ws-turn-value" == 73 then goto index 1215;
   if "ch2-ws-turn-value" == 74 then goto index 1214;
   if "ch2-ws-turn-value" == 75 then goto index 1213;
   if "ch2-ws-turn-value" == 76 then goto index 1212;
   if "ch2-ws-turn-value" == 77 then goto index 1211;
   if "ch2-ws-turn-value" == 78 then goto index 1210;
   if "ch2-ws-turn-value" == 79 then goto index 1209;
   if "ch2-ws-turn-value" == 1 then goto index 1205;
   if "ch2-ws-turn-value" == 2 then goto index 1202;
   if "ch2-ws-turn-value" == 3 then goto index 1199;
   if "ch2-ws-turn-value" == 4 then goto index 1196;
   if "ch2-ws-turn-value" == 5 then goto index 1193;
   if "ch2-ws-turn-value" == 6 then goto index 1190;
   if "ch2-ws-turn-value" == 7 then goto index 1187;
   if "ch2-ws-turn-value" == 8 then goto index 1184;
   if "ch2-ws-turn-value" == 9 then goto index 1181;
   if "ch2-ws-turn-value" == 10 then goto index 1178;
   if "ch2-ws-turn-value" == 11 then goto index 1175;
   if "ch2-ws-turn-value" == 12 then goto index 1172;
   if "ch2-ws-turn-value" == 13 then goto index 1169;
   if "ch2-ws-turn-value" == 14 then goto index 1166;
   if "ch2-ws-turn-value" == 15 then goto index 1163;
   if "ch2-ws-turn-value" == 16 then goto index 1160;
   if "ch2-ws-turn-value" == 17 then goto index 1157;
   if "ch2-ws-turn-value" == 18 then goto index 1154;
   if "ch2-ws-turn-value" == 19 then goto index 1151;
   if "ch2-ws-turn-value" == 20 then goto index 1148;
   if "ch2-ws-turn-value" == 21 then goto index 1145;
   if "ch2-ws-turn-value" == 22 then goto index 1142;
   if "ch2-ws-turn-value" == 23 then goto index 1139;
   if "ch2-ws-turn-value" == 24 then goto index 1136;
   if "ch2-ws-turn-value" == 25 then goto index 1133;
   if "ch2-ws-turn-value" == 26 then goto index 1130;
   if "ch2-ws-turn-value" == 27 then goto index 1127;
   if "ch2-ws-turn-value" == 28 then goto index 1124;
   if "ch2-ws-turn-value" == 29 then goto index 1121;
   if "ch2-ws-turn-value" == 30 then goto index 1118;
   if "ch2-ws-turn-value" == 31 then goto index 1115;
   if "ch2-ws-turn-value" == 32 then goto index 1112;
   if "ch2-ws-turn-value" == 33 then goto index 1109;
   if "ch2-ws-turn-value" == 34 then goto index 1106;
   if "ch2-ws-turn-value" == 35 then goto index 1103;
   if "ch2-ws-turn-value" == 36 then goto index 1100;
   if "ch2-ws-turn-value" == 37 then goto index 1097;
   if "ch2-ws-turn-value" == 38 then goto index 1094;
   if "ch2-ws-turn-value" == 39 then goto index 1091;
   if "ch2-ws-turn-value" == 40 then goto index 1088;
   if "ch2-ws-flags-tally" == 40 then goto index 1087;
   if "ch2-ws-won" then goto index 1086;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1090;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1093;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1096;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1099;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1102;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1105;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1108;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1111;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1114;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1117;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1120;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1123;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1126;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1129;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1132;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1135;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1138;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1141;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1144;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1147;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1150;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1153;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1156;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1159;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1162;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1165;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1168;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1171;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1174;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1177;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1180;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1183;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1186;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1189;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1192;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1195;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1198;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1201;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1204;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   if "ch2-ws-turn-status" == 2 then goto index 1208;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   goto index 1250;
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-castle-12-ws.mgs-XX";
   show serial_dialog "ch2-ws-input";
   "ch2-ws-turn-value" = 0;
   "ch2-ws-turn-status" = 4;
   goto "ch2-ws-doturn";
}

"ch2-ws-guess-quit" {
   "ch2-ws-turn-value" = 0;
   "ch2-ws-turn-status" = 0;
   "ch2-ws-flags-tally" = 0;
   if "ch2-ws-album" then goto index 5;
   goto index 6;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-analog" then goto index 8;
   goto index 9;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-audio" then goto index 11;
   goto index 12;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-aux" then goto index 14;
   goto index 15;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-bass" then goto index 17;
   goto index 18;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-beat" then goto index 20;
   goto index 21;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-bpm" then goto index 23;
   goto index 24;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-broadcast" then goto index 26;
   goto index 27;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-cassette" then goto index 29;
   goto index 30;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-chiptune" then goto index 32;
   goto index 33;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-codec" then goto index 35;
   goto index 36;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-compact" then goto index 38;
   goto index 39;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-frequency" then goto index 41;
   goto index 42;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-headphones" then goto index 44;
   goto index 45;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-hifi" then goto index 47;
   goto index 48;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-laser" then goto index 50;
   goto index 51;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-lofi" then goto index 53;
   goto index 54;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-media" then goto index 56;
   goto index 57;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-microphone" then goto index 59;
   goto index 60;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-midi" then goto index 62;
   goto index 63;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-mixing" then goto index 65;
   goto index 66;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-music" then goto index 68;
   goto index 69;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-phonograph" then goto index 71;
   goto index 72;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-radio" then goto index 74;
   goto index 75;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-recording" then goto index 77;
   goto index 78;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-rhythm" then goto index 80;
   goto index 81;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-sequencer" then goto index 83;
   goto index 84;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-song" then goto index 86;
   goto index 87;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-soundtrack" then goto index 89;
   goto index 90;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-speakers" then goto index 92;
   goto index 93;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-stereo" then goto index 95;
   goto index 96;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-stream" then goto index 98;
   goto index 99;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-subwoofer" then goto index 101;
   goto index 102;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-surround" then goto index 104;
   goto index 105;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-synthesizer" then goto index 107;
   goto index 108;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-tape" then goto index 110;
   goto index 111;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-treble" then goto index 113;
   goto index 114;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-vinyl" then goto index 116;
   goto index 117;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-vocoder" then goto index 119;
   goto index 120;
   "ch2-ws-flags-tally" += 1;
   if "ch2-ws-volume" then goto index 122;
   goto index 123;
   "ch2-ws-flags-tally" += 1;
   show serial_dialog "spacer";
   if "ch2-ws-flags-tally" == 0 then goto index 136;
   if "ch2-ws-flags-tally" < 20 then goto index 130;
   if "ch2-ws-won" then goto index 129;
   "ch2-ws-won" = true;
   show serial_dialog "ch2-castle-12.mgs-XX";
   show serial_dialog "ch2-castle-12.mgs-XX";
   "diff" = 20;
   "diff" -= "ch2-ws-flags-tally";
   if "diff" == 1 then goto index 135;
   show serial_dialog "ch2-castle-12.mgs-XX";
   goto index 137;
   show serial_dialog "ch2-castle-12.mgs-XX";
   show serial_dialog "ch2-castle-12.mgs-XX";
   entity "stereo" on_interact = "ch2-stereo-interact";
}

"ch2-stereo-interact" {
   "interrupt" = false;
   if !"ch2-ws-backstory" then goto index 9;
   if !"ch2-stereo-backstory" then goto index 6;
   show dialog "ch2-castle-12.mgs-XX";
   goto "ch2-ws-doturn";
   goto index 10;
   show dialog "ch2-castle-12.mgs-XX";
   goto "ch2-stereo-intro1";
   goto index 10;
   show dialog "ch2-castle-12.mgs-XX";
}

"on_load-ch2-castle-13-doorless" {
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-13.mgs-XX";
   if warp_state == "walk_from-north" then goto index 8;
   if warp_state == "walk_from-south" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-south";
   goto index 9;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-13" {
   if warp_state == "ch2 ending" then goto index 2;
   goto index 7;
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   goto "ch2-castle-13-ending";
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   if !"ch2-seen-room-13" then goto index 12;
   show serial_dialog "ch2-castle-13.mgs-XX";
   goto index 14;
   show serial_dialog "ch2-castle-13.mgs-XX";
   "ch2-seen-room-13" = true;
   if warp_state == "Ch2 King Returns" then goto index 26;
   if "ch2-king-rescued" then goto index 18;
   entity "King Gibson" on_tick = "yeet";
   goto index 28;
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   entity "Aurelius" position = geometry "end-fish";
   entity "Templeton" on_tick = "templeton-catalog-search";
   entity "King Gibson" on_tick = "king-debris-ponder";
   goto index 28;
   entity "door" on_tick = "yeet";
   camera = geometry "camera-spot2";
   if "ch2-installed-goldfish" then goto index 31;
   if "ch2-carrying-goldfish" then goto index 31;
   goto index 32;
   entity "Aurelius" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 45;
   if "ch2-in-room" == 0 then goto index 45;
   if debug_mode then goto index 45;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 49;
   goto index 50;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 76;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 77;
   serial_control = false;
   if "ch2-has-map" then goto index 79;
   goto index 81;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 151;
   if "ch2-warp-granted" then goto index 84;
   goto index 225;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 225;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 226;
   if "ch2-storyflag-round" < 5 then goto index 228;
   goto index 258;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 260;
   goto index 261;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 263;
   goto index 264;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 266;
   goto index 267;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 269;
   goto index 270;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 272;
   goto index 273;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 275;
   goto index 276;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 278;
   goto index 279;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 281;
   goto index 282;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 284;
   goto index 285;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 287;
   goto index 289;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 291;
   goto index 292;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 294;
   goto index 295;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 297;
   goto index 298;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 300;
   goto index 301;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 303;
   goto index 304;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 306;
   goto index 307;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 313;
   if "debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 317;
   if !"debug-curr-state" then goto index 315;
   goto index 316;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 319;
   goto index 327;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 330;
   goto index 398;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 332;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 392;
   if "goosefact" == 1 then goto index 390;
   if "goosefact" == 2 then goto index 388;
   if "goosefact" == 3 then goto index 386;
   if "goosefact" == 4 then goto index 384;
   if "goosefact" == 5 then goto index 382;
   if "goosefact" == 6 then goto index 380;
   if "goosefact" == 7 then goto index 378;
   if "goosefact" == 8 then goto index 376;
   if "goosefact" == 9 then goto index 374;
   if "goosefact" == 10 then goto index 372;
   if "goosefact" == 11 then goto index 370;
   if "goosefact" == 12 then goto index 368;
   if "goosefact" == 13 then goto index 366;
   if "goosefact" == 14 then goto index 364;
   if "goosefact" == 15 then goto index 362;
   if "goosefact" == 16 then goto index 360;
   if "goosefact" == 17 then goto index 358;
   if "goosefact" == 18 then goto index 356;
   if "goosefact" == 19 then goto index 354;
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 397;
   goto index 398;
   "goosefact" = 0;
   if warp_state == "Ch2 King Returns" then goto index 467;
   if !"ch2-cutseen-castle13" then goto index 401;
   goto index 551;
   if debug_mode then goto index 403;
   goto index 405;
   command "skip" = "ch2-skip-13";
   show serial_dialog "ch2-castle-13.mgs-XX";
   player_control = false;
   wait 300ms;
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   camera = geometry "camera-spot";
   player position = geometry "mage-walk";
   camera fade in -> #000000 over 600ms;
   entity "Templeton" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-sebastian-paceonce";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-templeton-pace" = true;
   entity "Templeton" on_tick = "ch2-templeton-pace";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-templeton-pace" = false;
   entity "Templeton" direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-sebastian-stomp";
   wait 200ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "lizard1" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" direction = "south";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   camera = player position;
   player on_tick = "ch2-mage-approach";
   camera fade in -> #000000 over 600ms;
   entity "Sebastian" on_tick = "ch2-sebastian-approach";
   wait 2600ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-lizard-lurch";
   wait 150ms;
   player strafe = 2;
   player position -> geometry "mage-backup" origin over 200ms;
   player strafe = 0;
   player direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-lizard-withdraw";
   player direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   if !"ch2-seen-room-21" then goto index 463;
   if !"ch2-seen-room-22" then goto index 463;
   if !"ch2-seen-room-23" then goto index 463;
   if !"ch2-seen-room-31" then goto index 463;
   if !"ch2-seen-room-32" then goto index 463;
   if !"ch2-seen-room-33" then goto index 463;
   if !"ch2-seen-room-34" then goto index 463;
   if !"ch2-seen-room-11" then goto index 463;
   if !"ch2-seen-room-12" then goto index 463;
   show dialog "ch2-castle-13.mgs-XX";
   goto index 464;
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-cutseen-castle13" = true;
   player_control = true;
   "ch2-cutseen-castle13" = true;
   camera fade out -> #000000 over 1ms;
   player_control = false;
   player direction = entity "King Gibson";
   entity "Templeton" direction = entity "King Gibson";
   entity "Sebastian" direction = entity "King Gibson";
   entity "King Gibson" on_tick = "walk-over-1500";
   wait 200ms;
   player on_tick = "walk-over-1500";
   camera fade in -> #000000 over 600ms;
   entity "Templeton" direction = entity "King Gibson";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" direction = entity "King Gibson";
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction += 1;
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Sebastian";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Sebastian";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   player position = geometry "end-player";
   entity "King Gibson" position = geometry "end-king";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton";
   entity "Aurelius" position = geometry "end-fish";
   player direction = entity "King Gibson";
   camera = geometry "camera-spot3";
   camera fade in -> #000000 over 600ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "end-sebastian2" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "end-sebastian" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" position -> geometry "end-templeton1" origin over 200ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" on_tick = "templeton-catalog-search";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" on_tick = "king-walk-to-debris";
   show dialog "ch2-castle-13.mgs-XX";
   "captured_animation2" = entity "King Gibson" current_animation;
   entity "King Gibson" current_animation = 0;
   pause entity "King Gibson" on_tick;
   if entity "King Gibson" direction == "north" then goto index 529;
   if entity "King Gibson" direction == "east" then goto index 527;
   if entity "King Gibson" direction == "south" then goto index 525;
   if entity "King Gibson" direction == "west" then goto index 523;
   goto index 530;
   "tempvar2" = 3;
   goto index 530;
   "tempvar2" = 2;
   goto index 530;
   "tempvar2" = 1;
   goto index 530;
   "tempvar2" = 0;
   entity "King Gibson" direction = player;
   entity "King Gibson" direction = player;
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" current_animation = "captured_animation2";
   unpause entity "King Gibson" on_tick;
   if "tempvar2" == 0 then goto index 546;
   if "tempvar2" == 1 then goto index 544;
   if "tempvar2" == 2 then goto index 542;
   if "tempvar2" == 3 then goto index 540;
   goto index 547;
   entity "King Gibson" direction = "west";
   goto index 547;
   entity "King Gibson" direction = "south";
   goto index 547;
   entity "King Gibson" direction = "east";
   goto index 547;
   entity "King Gibson" direction = "north";
   warp_state = "nothing lol";
   "ch2-king-rescued" = true;
   camera -> player position over 700ms;
   player_control = true;
}

"ch2-templeton-pace" {
   self position -> geometry "templeton1" origin over 400ms;
   self position -> geometry "templeton2" origin over 400ms;
   if !"ch2-templeton-pace" then goto index 4;
   goto index 5;
   goto "null_script";
}

"on_tick-ch2-castle-13-doorless" {
   if player intersects geometry "south-hitbox" then goto index 11;
   if player intersects geometry "north-hitbox" then goto index 3;
   goto index 17;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 9;
   if "ch2-king-rescued" then goto index 9;
   load map "ch2-castle-14";
   goto index 10;
   load map "ch2-castle-14-doorless";
   goto index 17;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 16;
   load map "ch2-castle-12";
   goto index 17;
   load map "ch2-castle-12-doorless";
}

"on_tick-ch2-castle-13" {
   if "ch2-king-rescued" then goto index 1;
   if player intersects geometry "north-hitbox" then goto index 3;
   goto index 9;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 8;
   if "ch2-king-rescued" then goto index 8;
   load map "ch2-castle-14";
   goto index 9;
   load map "ch2-castle-14-doorless";
}

"on_go-castle-13-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 10;
   if "ch2-king-rescued" then goto index 10;
   load map "ch2-castle-14";
   goto index 11;
   load map "ch2-castle-14-doorless";
}

"on_go-castle-13-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-12";
   goto index 10;
   load map "ch2-castle-12-doorless";
}

"ch2-touch-goldfish" {
   if !"ch2-cutseen-castle14" then goto index 91;
   if !"ch2-king-rescued" then goto index 79;
   show dialog "ch2-castle-13.mgs-XX";
   if "ch2-storyflag-round" >= 3 then goto index 5;
   goto index 92;
   show dialog "ch2-castle-13.mgs-XX";
   "captured_animation2" = entity "King Gibson" current_animation;
   entity "King Gibson" current_animation = 0;
   pause entity "King Gibson" on_tick;
   if entity "King Gibson" direction == "north" then goto index 20;
   if entity "King Gibson" direction == "east" then goto index 18;
   if entity "King Gibson" direction == "south" then goto index 16;
   if entity "King Gibson" direction == "west" then goto index 14;
   goto index 21;
   "tempvar2" = 3;
   goto index 21;
   "tempvar2" = 2;
   goto index 21;
   "tempvar2" = 1;
   goto index 21;
   "tempvar2" = 0;
   entity "King Gibson" direction = player;
   "captured_animation3" = entity "Templeton" current_animation;
   entity "Templeton" current_animation = 0;
   pause entity "Templeton" on_tick;
   if entity "Templeton" direction == "north" then goto index 36;
   if entity "Templeton" direction == "east" then goto index 34;
   if entity "Templeton" direction == "south" then goto index 32;
   if entity "Templeton" direction == "west" then goto index 30;
   goto index 37;
   "tempvar3" = 3;
   goto index 37;
   "tempvar3" = 2;
   goto index 37;
   "tempvar3" = 1;
   goto index 37;
   "tempvar3" = 0;
   entity "Templeton" direction = player;
   entity "King Gibson" current_animation = 2;
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" current_animation = 0;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Aurelius" position = geometry "hiding-spot";
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 47;
   goto index 48;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" current_animation = "captured_animation2";
   unpause entity "King Gibson" on_tick;
   if "tempvar2" == 0 then goto index 63;
   if "tempvar2" == 1 then goto index 61;
   if "tempvar2" == 2 then goto index 59;
   if "tempvar2" == 3 then goto index 57;
   goto index 64;
   entity "King Gibson" direction = "west";
   goto index 64;
   entity "King Gibson" direction = "south";
   goto index 64;
   entity "King Gibson" direction = "east";
   goto index 64;
   entity "King Gibson" direction = "north";
   entity "Templeton" current_animation = "captured_animation3";
   unpause entity "Templeton" on_tick;
   if "tempvar3" == 0 then goto index 77;
   if "tempvar3" == 1 then goto index 75;
   if "tempvar3" == 2 then goto index 73;
   if "tempvar3" == 3 then goto index 71;
   goto index 78;
   entity "Templeton" direction = "west";
   goto index 78;
   entity "Templeton" direction = "south";
   goto index 78;
   entity "Templeton" direction = "east";
   goto index 78;
   entity "Templeton" direction = "north";
   entity "Aurelius" on_tick = "yeet";
   if !"ch2-king-report" then goto index 81;
   goto index 86;
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Templeton";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   if "ch2-king-report" then goto index 89;
   goto index 90;
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-king-report" = true;
   show dialog "ch2-castle-13.mgs-XX";
}

"interact-ch2-sebastian" {
   self direction = player;
   if !"ch2-cutseen-castle14" then goto index 22;
   if !"ch2-king-rescued" then goto index 9;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" on_tick = "null_script";
   entity "Templeton" direction = entity "Sebastian";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" on_tick = "templeton-catalog-search";
   goto index 23;
   if !"ch2-king-report" then goto index 11;
   goto index 16;
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Templeton";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   if "ch2-king-report" then goto index 19;
   goto index 20;
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-king-report" = true;
   goto index 23;
   show dialog "ch2-castle-13.mgs-XX";
}

"interact-ch2-templeton" {
   self direction = player;
   if !"ch2-cutseen-castle14" then goto index 49;
   if !"ch2-king-rescued" then goto index 36;
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 17;
   if self direction == "east" then goto index 15;
   if self direction == "south" then goto index 13;
   if self direction == "west" then goto index 11;
   goto index 18;
   "tempvar" = 3;
   goto index 18;
   "tempvar" = 2;
   goto index 18;
   "tempvar" = 1;
   goto index 18;
   "tempvar" = 0;
   self direction = player;
   show dialog "ch2-castle-13.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 33;
   if "tempvar" == 1 then goto index 31;
   if "tempvar" == 2 then goto index 29;
   if "tempvar" == 3 then goto index 27;
   goto index 34;
   self direction = "west";
   goto index 34;
   self direction = "south";
   goto index 34;
   self direction = "east";
   goto index 34;
   self direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   goto index 50;
   if !"ch2-king-report" then goto index 38;
   goto index 43;
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Templeton";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   if "ch2-king-report" then goto index 46;
   goto index 47;
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-king-report" = true;
   goto index 50;
   show dialog "ch2-castle-13.mgs-XX";
}

"templeton-catalog-search" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 4000ms;
   goto index 8;
   wait 3000ms;
   goto index 8;
   wait 2000ms;
   entity "Templeton" position -> geometry "end-templeton2" origin over 200ms;
   "rand" ?= 3;
   if "rand" == 2 then goto index 16;
   if "rand" == 1 then goto index 14;
   wait 4000ms;
   goto index 17;
   wait 3000ms;
   goto index 17;
   wait 2000ms;
   entity "Templeton" position -> geometry "end-templeton1" origin over 200ms;
   "rand" ?= 3;
   if "rand" == 2 then goto index 25;
   if "rand" == 1 then goto index 23;
   wait 4000ms;
   goto index 26;
   wait 3000ms;
   goto index 26;
   wait 2000ms;
}

"king-debris-ponder" {
   "rand" ?= 3;
   if "rand" == 2 then goto index 7;
   if "rand" == 1 then goto index 5;
   wait 4000ms;
   goto index 8;
   wait 3000ms;
   goto index 8;
   wait 2000ms;
   self position -> geometry "king-examine2" origin over 700ms;
   self direction = "south";
   "rand" ?= 3;
   if "rand" == 2 then goto index 17;
   if "rand" == 1 then goto index 15;
   wait 14000ms;
   goto index 18;
   wait 9000ms;
   goto index 18;
   wait 3000ms;
   wait 400ms;
   self position -> geometry "king-examine1" origin over 700ms;
   self direction = "south";
   "rand" ?= 3;
   if "rand" == 2 then goto index 28;
   if "rand" == 1 then goto index 26;
   wait 14000ms;
   goto index 29;
   wait 9000ms;
   goto index 29;
   wait 3000ms;
}

"interact-ch2-gibson-throneroom" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   if "ch2-storyflag-round" < 3 then goto index 25;
   if !"ch2-clock-permission" then goto index 23;
   if "ch2-installed-goldfish" then goto index 22;
   if "ch2-carrying-goldfish" then goto index 22;
   show dialog "ch2-castle-13.mgs-XX";
   goto index 26;
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-clock-permission" = true;
   show dialog "ch2-castle-13.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 39;
   if "tempvar" == 1 then goto index 37;
   if "tempvar" == 2 then goto index 35;
   if "tempvar" == 3 then goto index 33;
   goto index 40;
   self direction = "west";
   goto index 40;
   self direction = "south";
   goto index 40;
   self direction = "east";
   goto index 40;
   self direction = "north";
}

"ch2-gibson-scramble" {
   "ch2-gibson-x" = entity "King Gibson" x;
   if "ch2-gibson-pos-odd" then goto index 5;
   "ch2-gibson-x" -= 1;
   "ch2-gibson-pos-odd" = true;
   goto index 7;
   "ch2-gibson-x" += 1;
   "ch2-gibson-pos-odd" = false;
   entity "King Gibson" x = "ch2-gibson-x";
   wait 50ms;
}

"on_load-ch2-castle-14" {
   if warp_state == "king returns teleport" then goto index 2;
   goto index 3;
   goto "ch2-cutscene-kingreturns-bedroom";
   "ch2-in-room" = 14;
   show serial_dialog "spacer";
   if !"ch2-seen-room-14" then goto index 8;
   show serial_dialog "ch2-castle-14.mgs-XX";
   goto index 10;
   show serial_dialog "ch2-castle-14.mgs-XX";
   "ch2-seen-room-14" = true;
   if "ch2-installed-clock" then goto index 13;
   if "ch2-carrying-clock" then goto index 13;
   goto index 15;
   entity "Clock" position = geometry "hiding-spot";
   entity "Clock" name = " ";
   if "ch2-storyflag-round" >= 5 then goto index 18;
   if "ch2-king-rescued" then goto index 18;
   goto index 20;
   entity "King Gibson" on_tick = "yeet";
   entity "keypad" on_interact = "null_script";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 33;
   if "ch2-in-room" == 0 then goto index 33;
   if debug_mode then goto index 33;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 37;
   goto index 38;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 64;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 65;
   serial_control = false;
   if "ch2-has-map" then goto index 67;
   goto index 69;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 139;
   if "ch2-warp-granted" then goto index 72;
   goto index 213;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 213;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 214;
   if "ch2-storyflag-round" < 5 then goto index 216;
   goto index 246;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 248;
   goto index 249;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 251;
   goto index 252;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 254;
   goto index 255;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 257;
   goto index 258;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 260;
   goto index 261;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 263;
   goto index 264;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 266;
   goto index 267;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 269;
   goto index 270;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 272;
   goto index 273;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 275;
   goto index 277;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 279;
   goto index 280;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 282;
   goto index 283;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 285;
   goto index 286;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 288;
   goto index 289;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 291;
   goto index 292;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 294;
   goto index 295;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 301;
   if "debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 305;
   if !"debug-curr-state" then goto index 303;
   goto index 304;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 307;
   goto index 315;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 318;
   goto index 386;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 320;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 380;
   if "goosefact" == 1 then goto index 378;
   if "goosefact" == 2 then goto index 376;
   if "goosefact" == 3 then goto index 374;
   if "goosefact" == 4 then goto index 372;
   if "goosefact" == 5 then goto index 370;
   if "goosefact" == 6 then goto index 368;
   if "goosefact" == 7 then goto index 366;
   if "goosefact" == 8 then goto index 364;
   if "goosefact" == 9 then goto index 362;
   if "goosefact" == 10 then goto index 360;
   if "goosefact" == 11 then goto index 358;
   if "goosefact" == 12 then goto index 356;
   if "goosefact" == 13 then goto index 354;
   if "goosefact" == 14 then goto index 352;
   if "goosefact" == 15 then goto index 350;
   if "goosefact" == 16 then goto index 348;
   if "goosefact" == 17 then goto index 346;
   if "goosefact" == 18 then goto index 344;
   if "goosefact" == 19 then goto index 342;
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 385;
   goto index 386;
   "goosefact" = 0;
   if "ch2-storyflag-round" < 5 then goto index 387;
   if !"ch2-cutseen-castle14" then goto index 389;
   goto index 424;
   player_control = false;
   wait 400ms;
   entity "King Gibson" current_animation = 2;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "ch2-gibson-scramble";
   entity "King Gibson" current_animation = 3;
   show dialog "ch2-castle-14.mgs-XX";
   player direction = entity "King Gibson";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "null_script";
   entity "King Gibson" current_animation = 2;
   wait 400ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" current_animation = 0;
   wait 1100ms;
   entity "King Gibson" direction = "west";
   wait 350ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "north";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "north";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "west";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" position -> geometry "walk-spot" origin over 800ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "face-player";
   "ch2-cutseen-castle14" = true;
   player_control = true;
}

"on_tick-ch2-castle-14" {
   if "ch2-storyflag-round" >= 5 then goto index 2;
   if "ch2-king-rescued" then goto index 2;
   if player intersects geometry "south-hitbox" then goto index 4;
   goto index 9;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-13";
   goto index 9;
   load map "ch2-castle-13-doorless";
}

"on_go-castle-14-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-13";
   goto index 10;
   load map "ch2-castle-13-doorless";
}

"ch2-touch-clock" {
   if "ch2-storyflag-round" < 3 then goto index 6;
   if !"ch2-king-rescued" then goto index 5;
   if !"ch2-clock-permission" then goto index 4;
   show dialog "ch2-castle-14.mgs-XX";
   show dialog "ch2-castle-14.mgs-XX";
   show dialog "ch2-castle-14.mgs-XX";
   if !"ch2-clock-firstlook" then goto index 9;
   show dialog "ch2-castle-14.mgs-XX";
   goto index 11;
   show dialog "ch2-castle-14.mgs-XX";
   "ch2-clock-firstlook" = true;
}

"interact-ch2-gibson-bedroom" {
   if !"ch2-keypad-backstory" then goto index 7;
   if !"ch2-architect-backstory" then goto index 4;
   show dialog "ch2-castle-14.mgs-XX";
   goto index 8;
   show dialog "ch2-castle-14.mgs-XX";
   "ch2-architect-backstory" = true;
   goto index 8;
   show dialog "ch2-castle-14.mgs-XX";
}

"interact-ch2-keypad" {
   if !"ch2-king-rescued" then goto index 2;
   goto index 8;
   if !"interrupt" then goto index 4;
   goto index 7;
   show dialog "ch2-castle-14.mgs-XX";
   "interrupt" = true;
   "ch2-keypad-backstory" = true;
   goto "interact-ch2-keypad-prompt";
}

"interact-ch2-keypad-good-pass" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-14.mgs-XX";
   self on_interact = "interact-ch2-keypad-prompt";
   "playersave-x" = player x;
   "playersave-y" = player y;
   "playersave-room" = "ch2-in-room";
   if player direction == "north" then goto index 17;
   if player direction == "east" then goto index 15;
   if player direction == "south" then goto index 13;
   if player direction == "west" then goto index 11;
   goto index 18;
   "playersave-dir" = 3;
   goto index 18;
   "playersave-dir" = 2;
   goto index 18;
   "playersave-dir" = 1;
   goto index 18;
   "playersave-dir" = 0;
   "kingpos-x" = entity "King Gibson" x;
   "kingpos-y" = entity "King Gibson" y;
   warp_state = "king returns teleport";
   load map "ch2-castle-14-doorless";
}

"ch2-cutscene-kingreturns-bedroom" {
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 13;
   if "playersave-dir" == 1 then goto index 11;
   if "playersave-dir" == 2 then goto index 9;
   if "playersave-dir" == 3 then goto index 7;
   goto index 14;
   player direction = "west";
   goto index 14;
   player direction = "south";
   goto index 14;
   player direction = "east";
   goto index 14;
   player direction = "north";
   entity "King Gibson" x = "kingpos-x";
   entity "King Gibson" y = "kingpos-y";
   player_control = false;
   wait 600ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "ch2-king-leaves";
   wait 400ms;
   camera fade out -> #000000 over 600ms;
   warp_state = "Ch2 King Returns";
   load map "ch2-castle-13";
}

"on_load-ch2-castle-21-doorless" {
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-21.mgs-XX";
   if warp_state == "walk_from-north" then goto index 8;
   if warp_state == "walk_from-east" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-east";
   goto index 9;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-21" {
   if warp_state == "ch2 ending" then goto index 2;
   goto index 3;
   goto "ch2-castle-21-ending";
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   if !"ch2-seen-room-21" then goto index 8;
   show serial_dialog "ch2-castle-21.mgs-XX";
   goto index 10;
   show serial_dialog "ch2-castle-21.mgs-XX";
   "ch2-seen-room-21" = true;
   if "ch2-installed-abacus" then goto index 13;
   if "ch2-carrying-abacus" then goto index 13;
   goto index 15;
   entity "abacus" position = geometry "hiding-spot";
   entity "abacus" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 28;
   if "ch2-in-room" == 0 then goto index 28;
   if debug_mode then goto index 28;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 32;
   goto index 33;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 59;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 60;
   serial_control = false;
   if "ch2-has-map" then goto index 62;
   goto index 64;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 134;
   if "ch2-warp-granted" then goto index 67;
   goto index 208;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 208;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 209;
   if "ch2-storyflag-round" < 5 then goto index 211;
   goto index 241;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 243;
   goto index 244;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 246;
   goto index 247;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 249;
   goto index 250;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 252;
   goto index 253;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 255;
   goto index 256;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 258;
   goto index 259;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 261;
   goto index 262;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 264;
   goto index 265;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 267;
   goto index 268;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 270;
   goto index 272;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 274;
   goto index 275;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 277;
   goto index 278;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 280;
   goto index 281;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 283;
   goto index 284;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 286;
   goto index 287;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 289;
   goto index 290;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 296;
   if "debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 300;
   if !"debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 302;
   goto index 310;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 313;
   goto index 381;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 315;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 375;
   if "goosefact" == 1 then goto index 373;
   if "goosefact" == 2 then goto index 371;
   if "goosefact" == 3 then goto index 369;
   if "goosefact" == 4 then goto index 367;
   if "goosefact" == 5 then goto index 365;
   if "goosefact" == 6 then goto index 363;
   if "goosefact" == 7 then goto index 361;
   if "goosefact" == 8 then goto index 359;
   if "goosefact" == 9 then goto index 357;
   if "goosefact" == 10 then goto index 355;
   if "goosefact" == 11 then goto index 353;
   if "goosefact" == 12 then goto index 351;
   if "goosefact" == 13 then goto index 349;
   if "goosefact" == 14 then goto index 347;
   if "goosefact" == 15 then goto index 345;
   if "goosefact" == 16 then goto index 343;
   if "goosefact" == 17 then goto index 341;
   if "goosefact" == 18 then goto index 339;
   if "goosefact" == 19 then goto index 337;
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 380;
   goto index 381;
   "goosefact" = 0;
   if !"ch2-cutseen-castle21" then goto index 383;
   goto index 412;
   player_control = false;
   wait 500ms;
   entity "Frankie" direction = player;
   wait 250ms;
   entity "Jean-Paul" direction = player;
   wait 140ms;
   entity "Jean-Paul" strafe = 2;
   entity "Jean-Paul" position -> geometry "birdstep" origin over 150ms;
   entity "Jean-Paul" strafe = 0;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   wait 300ms;
   entity "Jean-Paul" position -> geometry "birdstep2" origin over 240ms;
   wait 100ms;
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   wait 100ms;
   entity "Jean-Paul" direction = "north";
   wait 500ms;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   entity "Jean-Paul" direction = "south";
   entity "Frankie" direction = "south";
   player_control = true;
   "ch2-cutseen-castle21" = true;
}

"on_tick-ch2-castle-21-doorless" {
   if player intersects geometry "north-hitbox" then goto index 10;
   if player intersects geometry "east-hitbox" then goto index 3;
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-west";
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-11";
   goto index 9;
   load map "ch2-castle-11-doorless";
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-22";
   goto index 16;
   load map "ch2-castle-22-doorless";
}

"on_go-castle-21-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-22";
   goto index 10;
   load map "ch2-castle-22-doorless";
}

"on_go-castle-21-east" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-11";
   goto index 10;
   load map "ch2-castle-11-doorless";
}

"ch2-touch-abacus" {
   if "ch2-storyflag-round" < 3 then goto index 2;
   goto index 10;
   entity "Frankie" direction = player;
   if !"ch2-abacus-firstlook" then goto index 5;
   goto index 7;
   show dialog "ch2-castle-21.mgs-XX";
   "ch2-abacus-firstlook" = true;
   show dialog "ch2-castle-21.mgs-XX";
   entity "Frankie" direction = "south";
   // auto return label
   if "ch2-abacus-permission" then goto index 12;
   goto index 13;
   show dialog "ch2-castle-21.mgs-XX";
   if !"ch2-abacus-backstory" then goto index 16;
   show dialog "ch2-castle-21.mgs-XX";
   goto index 25;
   show dialog "ch2-castle-21.mgs-XX";
   entity "Frankie" direction = player;
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   "ch2-abacus-backstory" = true;
   "ch2-want-manual" = true;
   "ch2-map-abacus" = false;
   "ch2-map-manual" = true;
   entity "Frankie" direction = "south";
}

"ch2-touch-abacus-yes" {
   show dialog "ch2-castle-21.mgs-XX";
   entity "abacus" position = geometry "hiding-spot";
   entity "abacus" name = " ";
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 7;
   goto index 8;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
   self on_interact = "null_script";
}

"interact-ch2-jeanpaul" {
   self direction = player;
   if "ch2-storyflag-round" < 3 then goto index 21;
   if "ch2-carrying-ramchips" then goto index 19;
   if "ch2-installed-ramchips" then goto index 19;
   if !"ch2-want-ramchips" then goto index 16;
   if "interrupt" then goto index 14;
   entity "Jean-Paul" direction = player;
   entity "Frankie" direction = player;
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   goto index 22;
   show dialog "ch2-castle-21.mgs-XX";
   goto index 22;
   "CALLBACK" = 1;
   goto "interact-ch2-room21-split";
   goto index 22;
   show dialog "ch2-castle-21.mgs-XX";
   goto index 22;
   show dialog "ch2-castle-21.mgs-XX";
   self direction = "south";
}

"interact-ch2-frankie" {
   self direction = player;
   if "ch2-storyflag-round" < 3 then goto index 3;
   goto index 6;
   show dialog "ch2-castle-21.mgs-XX";
   entity "Frankie" direction = "south";
   // auto return label
   if "ch2-carrying-manual" then goto index 8;
   goto index 14;
   show dialog "ch2-castle-21.mgs-XX";
   "ch2-carrying-manual" = false;
   "ch2-installed-manual" = true;
   "ch2-abacus-permission" = true;
   entity "Frankie" direction = "south";
   // auto return label
   if "ch2-abacus-backstory" then goto index 15;
   if !"ch2-abacus-permission" then goto index 17;
   goto index 21;
   entity "Frankie" direction = player;
   show dialog "ch2-castle-21.mgs-XX";
   entity "Frankie" direction = "south";
   // auto return label
   if "ch2-carrying-ramchips" then goto index 24;
   if "ch2-installed-ramchips" then goto index 24;
   goto index 27;
   show dialog "ch2-castle-21.mgs-XX";
   entity "Frankie" direction = "south";
   // auto return label
   if !"ch2-want-ramchips" then goto index 39;
   if "interrupt" then goto index 37;
   entity "Jean-Paul" direction = player;
   entity "Frankie" direction = player;
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   goto index 41;
   show dialog "ch2-castle-21.mgs-XX";
   goto index 41;
   "CALLBACK" = 2;
   goto "interact-ch2-room21-split";
   entity "Frankie" direction = "south";
}

"interact-ch2-room21-split" {
   entity "Frankie" direction = player;
   entity "Jean-Paul" direction = player;
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   if !"ch2-lambda-deletion-backstory" then goto index 7;
   goto index 10;
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   if "ch2-seamoss-backstory" then goto index 30;
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   goto index 35;
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   "ch2-want-ramchips" = true;
   "ch2-map-ramchips" = false;
   "ch2-map-seamoss" = true;
   "interrupt" = true;
   entity "Jean-Paul" direction = "south";
   entity "Frankie" direction = "south";
   if "CALLBACK" == 1 then goto index 53;
   if "CALLBACK" == 2 then goto index 49;
   show serial_dialog "ch2-castle-21.mgs-XX";
   goto index 56;
   "CALLBACK" = 0;
   self on_interact = "interact-ch2-frankie";
   // auto return label
   goto index 56;
   "CALLBACK" = 0;
   self on_interact = "interact-ch2-jeanpaul";
   // auto return label
}

"interact-ch2-goose" {
   if "ch2-installed-minirake-99" then goto index 8;
   if !"ch2-carrying-minirake-99" then goto index 6;
   show dialog "ch2-castle-21.mgs-XX";
   "ch2-carrying-minirake-99" = false;
   "ch2-installed-minirake-99" = true;
   goto index 9;
   show dialog "ch2-castle-21.mgs-XX";
   goto index 9;
   show dialog "ch2-castle-21.mgs-XX";
}

"on_load-ch2-castle-22-doorless" {
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-22.mgs-XX";
   if warp_state == "walk_from-south" then goto index 8;
   if warp_state == "walk_from-north" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-north";
   goto index 9;
   player position = geometry "walk_from-south";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-22" {
   if warp_state == "ch2 ending" then goto index 2;
   goto index 3;
   goto "ch2-castle-22-ending";
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   if !"ch2-seen-room-22" then goto index 8;
   show serial_dialog "ch2-castle-22.mgs-XX";
   goto index 10;
   show serial_dialog "ch2-castle-22.mgs-XX";
   "ch2-seen-room-22" = true;
   if "ch2-installed-powersupply" then goto index 13;
   if "ch2-carrying-powersupply" then goto index 13;
   goto index 15;
   entity "Power Supply" position = geometry "hiding-spot";
   entity "Power Supply" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 28;
   if "ch2-in-room" == 0 then goto index 28;
   if debug_mode then goto index 28;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 32;
   goto index 33;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 59;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 60;
   serial_control = false;
   if "ch2-has-map" then goto index 62;
   goto index 64;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 134;
   if "ch2-warp-granted" then goto index 67;
   goto index 208;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 208;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 209;
   if "ch2-storyflag-round" < 5 then goto index 211;
   goto index 241;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 243;
   goto index 244;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 246;
   goto index 247;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 249;
   goto index 250;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 252;
   goto index 253;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 255;
   goto index 256;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 258;
   goto index 259;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 261;
   goto index 262;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 264;
   goto index 265;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 267;
   goto index 268;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 270;
   goto index 272;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 274;
   goto index 275;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 277;
   goto index 278;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 280;
   goto index 281;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 283;
   goto index 284;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 286;
   goto index 287;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 289;
   goto index 290;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 296;
   if "debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 300;
   if !"debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 302;
   goto index 310;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 313;
   goto index 381;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 315;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 375;
   if "goosefact" == 1 then goto index 373;
   if "goosefact" == 2 then goto index 371;
   if "goosefact" == 3 then goto index 369;
   if "goosefact" == 4 then goto index 367;
   if "goosefact" == 5 then goto index 365;
   if "goosefact" == 6 then goto index 363;
   if "goosefact" == 7 then goto index 361;
   if "goosefact" == 8 then goto index 359;
   if "goosefact" == 9 then goto index 357;
   if "goosefact" == 10 then goto index 355;
   if "goosefact" == 11 then goto index 353;
   if "goosefact" == 12 then goto index 351;
   if "goosefact" == 13 then goto index 349;
   if "goosefact" == 14 then goto index 347;
   if "goosefact" == 15 then goto index 345;
   if "goosefact" == 16 then goto index 343;
   if "goosefact" == 17 then goto index 341;
   if "goosefact" == 18 then goto index 339;
   if "goosefact" == 19 then goto index 337;
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 380;
   goto index 381;
   "goosefact" = 0;
}

"on_tick-ch2-castle-22-doorless" {
   if player intersects geometry "south-hitbox" then goto index 10;
   if player intersects geometry "north-hitbox" then goto index 3;
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-23";
   goto index 9;
   load map "ch2-castle-23-doorless";
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-21";
   goto index 16;
   load map "ch2-castle-21-doorless";
}

"on_go-castle-22-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-23";
   goto index 10;
   load map "ch2-castle-23-doorless";
}

"on_go-castle-22-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-21";
   goto index 10;
   load map "ch2-castle-21-doorless";
}

"interact-ch2-scuzzy" {
   player_control = false;
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 15;
   if self direction == "east" then goto index 13;
   if self direction == "south" then goto index 11;
   if self direction == "west" then goto index 9;
   goto index 16;
   "tempvar" = 3;
   goto index 16;
   "tempvar" = 2;
   goto index 16;
   "tempvar" = 1;
   goto index 16;
   "tempvar" = 0;
   self direction = player;
   if !"ch2-scuzzy-backstory" then goto index 52;
   show dialog "ch2-castle-22.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 32;
   if "tempvar" == 1 then goto index 30;
   if "tempvar" == 2 then goto index 28;
   if "tempvar" == 3 then goto index 26;
   goto index 33;
   self direction = "west";
   goto index 33;
   self direction = "south";
   goto index 33;
   self direction = "east";
   goto index 33;
   self direction = "north";
   wait 500ms;
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 48;
   if self direction == "east" then goto index 46;
   if self direction == "south" then goto index 44;
   if self direction == "west" then goto index 42;
   goto index 49;
   "tempvar" = 3;
   goto index 49;
   "tempvar" = 2;
   goto index 49;
   "tempvar" = 1;
   goto index 49;
   "tempvar" = 0;
   self direction = player;
   show dialog "ch2-castle-22.mgs-XX";
   goto index 54;
   show dialog "ch2-castle-22.mgs-XX";
   "ch2-scuzzy-backstory" = true;
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 67;
   if "tempvar" == 1 then goto index 65;
   if "tempvar" == 2 then goto index 63;
   if "tempvar" == 3 then goto index 61;
   goto index 68;
   self direction = "west";
   goto index 68;
   self direction = "south";
   goto index 68;
   self direction = "east";
   goto index 68;
   self direction = "north";
   player_control = true;
}

"interact-ch2-ckwatt" {
   self direction = player;
   if !"ch2-ckwatt-backstory" then goto index 4;
   show dialog "ch2-castle-22.mgs-XX";
   goto index 7;
   show dialog "ch2-castle-22.mgs-XX";
   "ch2-ckwatt-backstory" = true;
   "ch2-powersupply-permission" = true;
   self direction = "south";
}

"ch2-touch-powersupply" {
   if !"ch2-powersupply-permission" then goto index 2;
   goto index 4;
   show dialog "ch2-castle-22.mgs-XX";
   // auto return label
   if !"interrupt" then goto index 6;
   goto index 8;
   show dialog "ch2-castle-22.mgs-XX";
   "interrupt" = true;
   if "ch2-powersupply-permission" then goto index 10;
   goto index 11;
   show dialog "ch2-castle-22.mgs-XX";
}

"on_load-ch2-castle-23-doorless" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-23.mgs-XX";
   if warp_state == "walk_from-south" then goto index 5;
   goto index 6;
   player position = geometry "walk_from-south";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 19;
   if "ch2-in-room" == 0 then goto index 19;
   if debug_mode then goto index 19;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 23;
   goto index 24;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 50;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 51;
   serial_control = false;
   if "ch2-has-map" then goto index 53;
   goto index 55;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 125;
   if "ch2-warp-granted" then goto index 58;
   goto index 199;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 199;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 200;
   if "ch2-storyflag-round" < 5 then goto index 202;
   goto index 232;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 234;
   goto index 235;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 237;
   goto index 238;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 240;
   goto index 241;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 243;
   goto index 244;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 246;
   goto index 247;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 249;
   goto index 250;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 252;
   goto index 253;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 255;
   goto index 256;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 258;
   goto index 259;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 261;
   goto index 263;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 265;
   goto index 266;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 268;
   goto index 269;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 271;
   goto index 272;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 274;
   goto index 275;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 277;
   goto index 278;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 280;
   goto index 281;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 287;
   if "debug-curr-state" then goto index 284;
   goto index 285;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 291;
   if !"debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 293;
   goto index 301;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 304;
   goto index 372;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 306;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 366;
   if "goosefact" == 1 then goto index 364;
   if "goosefact" == 2 then goto index 362;
   if "goosefact" == 3 then goto index 360;
   if "goosefact" == 4 then goto index 358;
   if "goosefact" == 5 then goto index 356;
   if "goosefact" == 6 then goto index 354;
   if "goosefact" == 7 then goto index 352;
   if "goosefact" == 8 then goto index 350;
   if "goosefact" == 9 then goto index 348;
   if "goosefact" == 10 then goto index 346;
   if "goosefact" == 11 then goto index 344;
   if "goosefact" == 12 then goto index 342;
   if "goosefact" == 13 then goto index 340;
   if "goosefact" == 14 then goto index 338;
   if "goosefact" == 15 then goto index 336;
   if "goosefact" == 16 then goto index 334;
   if "goosefact" == 17 then goto index 332;
   if "goosefact" == 18 then goto index 330;
   if "goosefact" == 19 then goto index 328;
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 371;
   goto index 372;
   "goosefact" = 0;
}

"on_load-ch2-castle-23" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   if !"ch2-seen-room-23" then goto index 5;
   show serial_dialog "ch2-castle-23.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-23.mgs-XX";
   "ch2-seen-room-23" = true;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
   if debug_mode then goto index 375;
   goto index 377;
   command "get" + "thing" = "ch2-pickup-cactuscooler";
   show serial_dialog "ch2-castle-23.mgs-XX";
}

"on_tick-ch2-castle-23-doorless" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 8;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 7;
   load map "ch2-castle-22";
   goto index 8;
   load map "ch2-castle-22-doorless";
}

"ch2-powerplant-supervise" {
   self direction = "north";
   "rand" ?= 3;
   if "rand" == 2 then goto index 8;
   if "rand" == 1 then goto index 6;
   wait 4000ms;
   goto index 9;
   wait 3000ms;
   goto index 9;
   wait 2000ms;
   self position -> geometry "walk2" origin over 600ms;
   self direction = "north";
   "rand" ?= 3;
   if "rand" == 2 then goto index 18;
   if "rand" == 1 then goto index 16;
   wait 14000ms;
   goto index 19;
   wait 9000ms;
   goto index 19;
   wait 3000ms;
   self position -> geometry "walk1" origin over 600ms;
   self direction = "north";
   "rand" ?= 3;
   if "rand" == 2 then goto index 28;
   if "rand" == 1 then goto index 26;
   wait 14000ms;
   goto index 29;
   wait 9000ms;
   goto index 29;
   wait 3000ms;
}

"on_go-castle-23-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-22";
   goto index 10;
   load map "ch2-castle-22-doorless";
}

"interact-ch2-helvetica" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   show dialog "ch2-castle-23.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 30;
   if "tempvar" == 1 then goto index 28;
   if "tempvar" == 2 then goto index 26;
   if "tempvar" == 3 then goto index 24;
   goto index 31;
   self direction = "west";
   goto index 31;
   self direction = "south";
   goto index 31;
   self direction = "east";
   goto index 31;
   self direction = "north";
}

"rocco-work-fancy" {
   entity "Rocco" current_animation = 3;
   "tempvar2" ?= 7;
   "tempvar2" += 3;
   "i" = 0;
   if "i" < "tempvar2" then goto index 6;
   goto index 9;
   entity "Rocco" animation -> 4 1x;
   "i" += 1;
   goto index 4;
   entity "Rocco" current_animation = 3;
   "tempvar2" ?= 2;
   if "tempvar2" == 1 then goto index 13;
   goto index 24;
   wait 1200ms;
   "tempvar2" ?= 4;
   "tempvar2" += 3;
   "i" = 0;
   if "i" < "tempvar2" then goto index 19;
   goto index 22;
   entity "Rocco" animation -> 4 1x;
   "i" += 1;
   goto index 17;
   entity "Rocco" current_animation = 3;
   wait 500ms;
   wait 500ms;
   entity "Rocco" animation -> 6 1x;
   "tempvar2" ?= 2;
   "tempvar2" += 1;
   "i" = 0;
   if "i" < "tempvar2" then goto index 31;
   goto index 34;
   entity "Rocco" animation -> 5 1x;
   "i" += 1;
   goto index 29;
   entity "Rocco" current_animation = 3;
   wait 1500ms;
   entity "Rocco" animation -> 6 1x;
   entity "Rocco" current_animation = 3;
}

"interact-ch2-rocco" {
   if "ch2-cactuscooler-delivered" then goto index 58;
   if !"ch2-rocco-backstory" then goto index 13;
   if "ch2-carrying-cactuscooler" then goto index 4;
   show dialog "ch2-castle-23.mgs-XX";
   self direction = player;
   entity "Rocco" on_tick = "null_script";
   entity "Rocco" current_animation = 0;
   if !"interrupt" then goto index 10;
   show dialog "ch2-castle-23.mgs-XX";
   goto index 12;
   show dialog "ch2-castle-23.mgs-XX";
   "interrupt" = true;
   goto "interact-ch2-rocco-give-q";
   self direction = player;
   entity "Rocco" on_tick = "null_script";
   entity "Rocco" current_animation = 0;
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" direction = "south";
   entity "Rocco" on_tick = "rocco-work-fancy";
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" on_tick = "null_script";
   entity "Rocco" current_animation = 0;
   self direction = player;
   show dialog "ch2-castle-23.mgs-XX";
   if !"ch2-lambda-deletion-backstory" then goto index 27;
   show dialog "ch2-castle-23.mgs-XX";
   goto index 28;
   show dialog "ch2-castle-23.mgs-XX";
   self direction += 1;
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" direction = "south";
   entity "Rocco" direction = "south";
   entity "Rocco" on_tick = "rocco-work-fancy";
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" on_tick = "null_script";
   entity "Rocco" current_animation = 3;
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" current_animation = 0;
   self direction = player;
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" direction = "south";
   entity "Rocco" on_tick = "rocco-work-fancy";
   show dialog "ch2-castle-23.mgs-XX";
   "ch2-rocco-backstory" = true;
   "ch2-want-cactuscooler" = true;
   "ch2-heatsink-firstlook" = true;
   "ch2-map-heatsink" = false;
   "ch2-map-cactuscooler-castle" = true;
   if "ch2-carrying-cactuscooler" then goto index 51;
   show dialog "ch2-castle-23.mgs-XX";
   goto index 59;
   show dialog "ch2-castle-23.mgs-XX";
   entity "Rocco" on_tick = "null_script";
   entity "Rocco" current_animation = 0;
   self direction = player;
   show dialog "ch2-castle-23.mgs-XX";
   "interrupt" = true;
   goto "interact-ch2-rocco-give-q";
   show dialog "ch2-castle-23.mgs-XX";
   goto "interact-ch2-rocco-wrapup";
}

"simon-game-start-q" {
   entity "Simon" current_animation = 12;
   if "ch2-simon-high" then goto index 4;
   show dialog "ch2-castle-31-simon.mgs-XX";
   goto index 5;
   show dialog "ch2-castle-31-simon.mgs-XX";
}

"simon-game-start-q-swap" {
   if "ch2-simon-high" then goto index 4;
   "ch2-simon-high" = true;
   show dialog "ch2-castle-31-simon.mgs-XX";
   goto index 6;
   "ch2-simon-high" = false;
   show dialog "ch2-castle-31-simon.mgs-XX";
}

"simon-game-start-difference" {
   lights_control = true;
   light ALL = false;
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "screen-lights-flash-battle-high";
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "ch2-serial-light-manager";
   light ALL = false;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "screen-lights-flash-battle-low";
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "ch2-serial-light-manager";
   if "ch2-ring-zero-enabled-in-castle" then goto index 19;
   if "ch2-in-room" == 0 then goto index 19;
   if debug_mode then goto index 19;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 23;
   goto index 24;
   light LED_USB = false;
   goto "simon-game-start-q";
}

"simon-game-start-nevermind" {
   if !"ch2-simon-won-before" then goto index 4;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31-simon.mgs-XX";
   goto index 6;
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Simon" current_animation = 0;
   goto "simon-game-start-q-wrapup";
}

"simon-game-start" {
   player_control = false;
   hex_control = false;
   "simon-pos1" ?= 4;
   "simon-pos2" ?= 4;
   "simon-pos3" ?= 4;
   "simon-pos4" ?= 4;
   "simon-pos5" ?= 4;
   "simon-pos6" ?= 4;
   "simon-pos7" ?= 4;
   if "ch2-simon-high" then goto index 11;
   goto index 18;
   "simon-pos1" += 2;
   "simon-pos2" += 2;
   "simon-pos3" += 2;
   "simon-pos4" += 2;
   "simon-pos5" += 2;
   "simon-pos6" += 2;
   "simon-pos7" += 2;
   "simon-round" = 1;
   lights_control = true;
   light ALL = false;
   wait 100ms;
   camera fade out -> #000000 over 400ms;
   camera = geometry "camera-spot";
   player position = geometry "mage-spot";
   entity "Simon" position = geometry "simon-spot";
   player current_animation = 3;
   entity "Simon" current_animation = 5;
   player direction = "south";
   entity "Simon" direction = "south";
   camera fade in -> #000000 over 400ms;
   if "ch2-simon-high" then goto index 37;
   entity "Lights" on_tick = "screen-lights-flash-battle-low";
   if !"ch2-simon-heard-low" then goto index 35;
   show dialog "ch2-castle-31-simon.mgs-XX";
   show dialog "ch2-castle-31-simon.mgs-XX";
   "ch2-simon-heard-low" = true;
   entity "Lights" on_tick = "screen-lights-flash-battle-high";
   if !"ch2-simon-heard-high" then goto index 41;
   show dialog "ch2-castle-31-simon.mgs-XX";
   goto index 43;
   show dialog "ch2-castle-31-simon.mgs-XX";
   "ch2-simon-heard-high" = true;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   light ALL = false;
   goto "simon-enemy-turn-start";
}

"simon-enemy-turn-start" {
   "ch2-simon-move-fail" = false;
   wait 800ms;
   "i" = 0;
   if "i" < "simon-round" then goto index 5;
   goto index 56;
   if "i" == 0 then goto index 25;
   if "i" == 1 then goto index 23;
   if "i" == 2 then goto index 21;
   if "i" == 3 then goto index 19;
   if "i" == 4 then goto index 17;
   if "i" == 5 then goto index 15;
   if "i" == 6 then goto index 13;
   goto index 26;
   "simon-pos-curr" = "simon-pos7";
   goto index 26;
   "simon-pos-curr" = "simon-pos6";
   goto index 26;
   "simon-pos-curr" = "simon-pos5";
   goto index 26;
   "simon-pos-curr" = "simon-pos4";
   goto index 26;
   "simon-pos-curr" = "simon-pos3";
   goto index 26;
   "simon-pos-curr" = "simon-pos2";
   goto index 26;
   "simon-pos-curr" = "simon-pos1";
   if "simon-pos-curr" == 0 then goto index 48;
   if "simon-pos-curr" == 1 then goto index 45;
   if "simon-pos-curr" == 2 then goto index 42;
   if "simon-pos-curr" == 3 then goto index 39;
   if "simon-pos-curr" == 4 then goto index 36;
   if "simon-pos-curr" == 5 then goto index 33;
   goto index 50;
   light LED_MEM0 = true;
   entity "Simon" current_animation = 6;
   goto index 50;
   light LED_XOR = true;
   entity "Simon" current_animation = 9;
   goto index 50;
   light LED_MEM3 = true;
   entity "Simon" current_animation = 7;
   goto index 50;
   light LED_PAGE = true;
   entity "Simon" current_animation = 10;
   goto index 50;
   light LED_BIT1 = true;
   entity "Simon" current_animation = 8;
   goto index 50;
   light LED_BIT128 = true;
   entity "Simon" current_animation = 11;
   wait 450ms;
   entity "Simon" current_animation = 5;
   light ALL = false;
   wait 150ms;
   "i" += 1;
   goto index 3;
   goto "simon-player-turn-start";
}

"simon-player-turn-loop-start" {
   if "i" >= "simon-round" then goto index 2;
   goto index 3;
   goto "simon-player-turn-end";
   if "i" == 0 then goto index 23;
   if "i" == 1 then goto index 21;
   if "i" == 2 then goto index 19;
   if "i" == 3 then goto index 17;
   if "i" == 4 then goto index 15;
   if "i" == 5 then goto index 13;
   if "i" == 6 then goto index 11;
   goto index 24;
   "simon-pos-curr" = "simon-pos7";
   goto index 24;
   "simon-pos-curr" = "simon-pos6";
   goto index 24;
   "simon-pos-curr" = "simon-pos5";
   goto index 24;
   "simon-pos-curr" = "simon-pos4";
   goto index 24;
   "simon-pos-curr" = "simon-pos3";
   goto index 24;
   "simon-pos-curr" = "simon-pos2";
   goto index 24;
   "simon-pos-curr" = "simon-pos1";
   goto "simon-player-listen";
}

"simon-player-listen" {
   player direction = "south";
   if "ch2-simon-high" then goto index 13;
   if "simon-pos-curr" != 0 then goto index 3;
   if button $button0 pressed then goto index 5;
   goto index 8;
   "simon-player-move" = 0;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 1 then goto index 9;
   if button $button1 pressed then goto index 10;
   "simon-player-move" = 1;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 4 then goto index 14;
   if button $button4 pressed then goto index 16;
   goto index 19;
   "simon-player-move" = 4;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 5 then goto index 20;
   if button $button5 pressed then goto index 22;
   goto index 25;
   "simon-player-move" = 5;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 2 then goto index 26;
   if button $button2 pressed then goto index 28;
   goto index 31;
   "simon-player-move" = 2;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 3 then goto index 32;
   if button $button3 pressed then goto index 34;
   goto index 37;
   "simon-player-move" = 3;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "ch2-simon-high" then goto index 47;
   if "simon-pos-curr" == 0 then goto index 39;
   if button $button0 pressed then goto index 41;
   goto index 43;
   "simon-player-move" = 0;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 1 then goto index 44;
   if button $button1 pressed then goto index 45;
   "simon-player-move" = 1;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 4 then goto index 48;
   if button $button4 pressed then goto index 50;
   goto index 52;
   "simon-player-move" = 4;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 5 then goto index 53;
   if button $button5 pressed then goto index 55;
   goto index 57;
   "simon-player-move" = 5;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 2 then goto index 58;
   if button $button2 pressed then goto index 60;
   goto index 62;
   "simon-player-move" = 2;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 3 then goto index 63;
   if button $button3 pressed then goto index 65;
   goto index 67;
   "simon-player-move" = 3;
   goto "simon-player-do-move";
   entity "Simon" on_tick = "simon-player-listen";
}

"simon-player-animation-pose_bottom_left-wait" {
   if button $button0 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_bottom_right-wait" {
   if button $button1 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_left-wait" {
   if button $button2 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_right-wait" {
   if button $button3 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_top_left-wait" {
   if button $button4 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_top_right-wait" {
   if button $button5 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-do-move" {
   if "simon-player-move" == 0 then goto index 22;
   if "simon-player-move" == 1 then goto index 19;
   if "simon-player-move" == 2 then goto index 16;
   if "simon-player-move" == 3 then goto index 13;
   if "simon-player-move" == 4 then goto index 10;
   if "simon-player-move" == 5 then goto index 7;
   goto index 24;
   light LED_MEM0 = true;
   player on_tick = "simon-player-animation-pose_top_right";
   goto index 24;
   light LED_XOR = true;
   player on_tick = "simon-player-animation-pose_top_left";
   goto index 24;
   light LED_MEM3 = true;
   player on_tick = "simon-player-animation-pose_right";
   goto index 24;
   light LED_PAGE = true;
   player on_tick = "simon-player-animation-pose_left";
   goto index 24;
   light LED_BIT1 = true;
   player on_tick = "simon-player-animation-pose_bottom_right";
   goto index 24;
   light LED_BIT128 = true;
   player on_tick = "simon-player-animation-pose_bottom_left";
   goto "simon-player-wait";
}

"simon-player-wait" {
   if "simon-player-wait-finished" then goto index 2;
   goto index 3;
   goto "simon-player-wait-finished";
}

"simon-player-wait-finished" {
   "simon-player-wait-finished" = false;
   player current_animation = 3;
   light ALL = false;
   "i" += 1;
   if "ch2-simon-move-fail" then goto index 6;
   goto index 7;
   goto "simon-game-lose";
   goto "simon-player-turn-loop-start";
}

"simon-player-turn-end" {
   "simon-round" += 1;
   if "simon-round" > 7 then goto index 3;
   goto index 4;
   goto "simon-game-win";
   goto "simon-enemy-turn-start";
}

"simon-game-lose" {
   player_control = false;
   lights_control = true;
   entity "Keyboard" on_tick = "simon-rock";
   if "ch2-ring-zero-enabled-in-castle" then goto index 6;
   if debug_mode then goto index 6;
   goto index 7;
   hex_control = true;
   wait 100ms;
   entity "Lights" on_tick = "screen-lights-lose";
   player on_tick = "player-lose";
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "ch2-serial-light-manager";
   if "ch2-ring-zero-enabled-in-castle" then goto index 19;
   if "ch2-in-room" == 0 then goto index 19;
   if debug_mode then goto index 19;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 23;
   goto index 24;
   light LED_USB = false;
   player_control = true;
   entity "Keyboard" on_tick = "null_script";
   entity "Simon" current_animation = 5;
   goto "simon-game-go-again";
}

"simon-game-win" {
   player_control = false;
   lights_control = true;
   if "ch2-ring-zero-enabled-in-castle" then goto index 5;
   if debug_mode then goto index 5;
   goto index 6;
   hex_control = true;
   entity "Lights" on_tick = "screen-lights-win";
   player on_tick = "player-win";
   if !"ch2-simon-won-before" then goto index 10;
   goto index 12;
   entity "Simon" current_animation = 3;
   wait 500ms;
   entity "Simon" animation -> 2 1x;
   entity "Simon" current_animation = 4;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Lights" on_tick = "ch2-serial-light-manager";
   if "ch2-ring-zero-enabled-in-castle" then goto index 23;
   if "ch2-in-room" == 0 then goto index 23;
   if debug_mode then goto index 23;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 27;
   goto index 28;
   light LED_USB = false;
   player_control = true;
   if !"ch2-simon-won-before" then goto index 32;
   goto "simon-game-go-again";
   goto index 56;
   camera fade out -> #000000 over 400ms;
   camera = player position;
   entity "Simon" current_animation = 0;
   player current_animation = 0;
   player position = geometry "return-spot";
   entity "Simon" position = geometry "simon-return-spot";
   player direction = "north";
   camera fade in -> #000000 over 400ms;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Simon" current_animation = 4;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Keyboard" position = geometry "hiding-spot";
   entity "Keyboard" name = " ";
   show dialog "ch2-castle-31-simon.mgs-XX";
   entity "Simon" current_animation = 12;
   "interrupt" = true;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-simon-won-before" = true;
   goto "null_script";
}

"simon-game-start-q-reprise" {
   if "ch2-simon-high" then goto index 3;
   show dialog "ch2-castle-31-simon.mgs-XX";
   goto index 4;
   show dialog "ch2-castle-31-simon.mgs-XX";
}

"on_load-ch2-castle-31-doorless" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   entity "Sea Moss" direction = "west";
   if warp_state == "walk_from-north" then goto index 10;
   if warp_state == "walk_from-west" then goto index 8;
   goto index 11;
   player position = geometry "walk_from-west";
   goto index 11;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
}

"on_load-ch2-castle-31" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   if !"ch2-seen-room-31" then goto index 5;
   show serial_dialog "ch2-castle-31.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-31.mgs-XX";
   "ch2-seen-room-31" = true;
   if "ch2-installed-keyboard" then goto index 10;
   if "ch2-carrying-keyboard" then goto index 10;
   goto index 12;
   entity "Keyboard" position = geometry "hiding-spot";
   entity "Keyboard" name = " ";
   "ch2-simon-heard-high" = false;
   "ch2-simon-heard-low" = false;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 27;
   if "ch2-in-room" == 0 then goto index 27;
   if debug_mode then goto index 27;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 31;
   goto index 32;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 58;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 59;
   serial_control = false;
   if "ch2-has-map" then goto index 61;
   goto index 63;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 133;
   if "ch2-warp-granted" then goto index 66;
   goto index 207;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 207;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 208;
   if "ch2-storyflag-round" < 5 then goto index 210;
   goto index 240;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 242;
   goto index 243;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 245;
   goto index 246;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 248;
   goto index 249;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 251;
   goto index 252;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 254;
   goto index 255;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 257;
   goto index 258;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 260;
   goto index 261;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 263;
   goto index 264;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 266;
   goto index 267;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 269;
   goto index 271;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 273;
   goto index 274;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 276;
   goto index 277;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 279;
   goto index 280;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 282;
   goto index 283;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 285;
   goto index 286;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 288;
   goto index 289;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 295;
   if "debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 299;
   if !"debug-curr-state" then goto index 297;
   goto index 298;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 301;
   goto index 309;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 312;
   goto index 380;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 314;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 374;
   if "goosefact" == 1 then goto index 372;
   if "goosefact" == 2 then goto index 370;
   if "goosefact" == 3 then goto index 368;
   if "goosefact" == 4 then goto index 366;
   if "goosefact" == 5 then goto index 364;
   if "goosefact" == 6 then goto index 362;
   if "goosefact" == 7 then goto index 360;
   if "goosefact" == 8 then goto index 358;
   if "goosefact" == 9 then goto index 356;
   if "goosefact" == 10 then goto index 354;
   if "goosefact" == 11 then goto index 352;
   if "goosefact" == 12 then goto index 350;
   if "goosefact" == 13 then goto index 348;
   if "goosefact" == 14 then goto index 346;
   if "goosefact" == 15 then goto index 344;
   if "goosefact" == 16 then goto index 342;
   if "goosefact" == 17 then goto index 340;
   if "goosefact" == 18 then goto index 338;
   if "goosefact" == 19 then goto index 336;
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 379;
   goto index 380;
   "goosefact" = 0;
   if debug_mode then goto index 382;
   goto index 388;
   command "simon" = "debug-simon";
   command "simon" + "high" = "debug-simon-high";
   command "simon" + "low" = "debug-simon-low";
   command "simon" + "win" = "debug-simon-win";
   command "simon" + "lose" = "debug-simon-lose";
   show serial_dialog "ch2-castle-31.mgs-XX";
}

"on_tick-ch2-castle-31-doorless" {
   if player intersects geometry "north-hitbox" then goto index 10;
   if player intersects geometry "west-hitbox" then goto index 3;
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-east";
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-12";
   goto index 9;
   load map "ch2-castle-12-doorless";
   goto index 16;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-32";
   goto index 16;
   load map "ch2-castle-32-doorless";
}

"on_go-castle-31-north" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-32";
   goto index 10;
   load map "ch2-castle-32-doorless";
}

"on_go-castle-31-west" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-12";
   goto index 10;
   load map "ch2-castle-12-doorless";
}

"interact-ch2-theodore" {
   if !"ch2-simon-won-before" then goto index 4;
   if !"interrupt" then goto index 4;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 5;
   show dialog "ch2-castle-31.mgs-XX";
}

"interact-ch2-alvin" {
   if !"ch2-simon-won-before" then goto index 4;
   if !"interrupt" then goto index 4;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 5;
   show dialog "ch2-castle-31.mgs-XX";
}

"interact-ch2-simon" {
   if "ch2-storyflag-round" < 2 then goto index 38;
   if !"ch2-simon-won-before" then goto index 22;
   if "interrupt" then goto index 18;
   entity "Simon" current_animation = 12;
   if !"ch2-simon-repeat-backstory" then goto index 7;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 9;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-repeat-backstory" = true;
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-repeat-brunhilda-backstory" = true;
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   if !"ch2-simon-backstory" then goto index 26;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 36;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 13;
   entity "Alvin" on_tick = "camera-angry-shake";
   show dialog "ch2-castle-31.mgs-XX";
   entity "Alvin" on_tick = "null_script";
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-backstory" = true;
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   show dialog "ch2-castle-31.mgs-XX";
}

"ch2-touch-keyboard" {
   if !"ch2-keyboard-firstlook" then goto index 2;
   goto index 4;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-keyboard-firstlook" = true;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 13;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 0;
   if "ch2-storyflag-round" == 2 then goto index 10;
   goto index 11;
   show dialog "ch2-castle-31.mgs-XX";
}

"on_load-ch2-castle-32-doorless" {
   "ch2-in-room" = 32;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-32.mgs-XX";
   if warp_state == "walk_from-northeast" then goto index 8;
   if warp_state == "walk_from-northwest" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-northwest";
   goto index 9;
   player position = geometry "walk_from-northeast";
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 23;
   if "ch2-in-room" == 0 then goto index 23;
   if debug_mode then goto index 23;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 27;
   goto index 28;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 54;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 55;
   serial_control = false;
   if "ch2-has-map" then goto index 57;
   goto index 59;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 129;
   if "ch2-warp-granted" then goto index 62;
   goto index 203;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 203;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 204;
   if "ch2-storyflag-round" < 5 then goto index 206;
   goto index 236;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 238;
   goto index 239;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 241;
   goto index 242;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 244;
   goto index 245;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 247;
   goto index 248;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 250;
   goto index 251;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 253;
   goto index 254;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 256;
   goto index 257;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 259;
   goto index 260;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 262;
   goto index 263;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 265;
   goto index 267;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 269;
   goto index 270;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 272;
   goto index 273;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 275;
   goto index 276;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 278;
   goto index 279;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 281;
   goto index 282;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 284;
   goto index 285;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 291;
   if "debug-curr-state" then goto index 288;
   goto index 289;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 295;
   if !"debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 297;
   goto index 305;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 308;
   goto index 376;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 310;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 370;
   if "goosefact" == 1 then goto index 368;
   if "goosefact" == 2 then goto index 366;
   if "goosefact" == 3 then goto index 364;
   if "goosefact" == 4 then goto index 362;
   if "goosefact" == 5 then goto index 360;
   if "goosefact" == 6 then goto index 358;
   if "goosefact" == 7 then goto index 356;
   if "goosefact" == 8 then goto index 354;
   if "goosefact" == 9 then goto index 352;
   if "goosefact" == 10 then goto index 350;
   if "goosefact" == 11 then goto index 348;
   if "goosefact" == 12 then goto index 346;
   if "goosefact" == 13 then goto index 344;
   if "goosefact" == 14 then goto index 342;
   if "goosefact" == 15 then goto index 340;
   if "goosefact" == 16 then goto index 338;
   if "goosefact" == 17 then goto index 336;
   if "goosefact" == 18 then goto index 334;
   if "goosefact" == 19 then goto index 332;
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 375;
   goto index 376;
   "goosefact" = 0;
}

"on_load-ch2-castle-32" {
   "ch2-in-room" = 32;
   entity "Gloria" position = geometry "worry-walk2";
   entity "Gloria" direction = entity "Samson";
   show serial_dialog "spacer";
   if !"ch2-seen-room-32" then goto index 7;
   show serial_dialog "ch2-castle-32.mgs-XX";
   goto index 9;
   show serial_dialog "ch2-castle-32.mgs-XX";
   "ch2-seen-room-32" = true;
   if !"ch2-ramchips-dispensed" then goto index 11;
   goto index 13;
   entity "RAM chips" position = geometry "hiding-spot";
   entity "RAM chips" name = " ";
   if warp_state == "walk_from-northeast" then goto index 18;
   if warp_state == "walk_from-northwest" then goto index 16;
   goto index 19;
   player position = geometry "walk_from-northwest";
   goto index 19;
   player position = geometry "walk_from-northeast";
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 33;
   if "ch2-in-room" == 0 then goto index 33;
   if debug_mode then goto index 33;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 37;
   goto index 38;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 64;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 65;
   serial_control = false;
   if "ch2-has-map" then goto index 67;
   goto index 69;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 139;
   if "ch2-warp-granted" then goto index 72;
   goto index 213;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 213;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 214;
   if "ch2-storyflag-round" < 5 then goto index 216;
   goto index 246;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 248;
   goto index 249;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 251;
   goto index 252;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 254;
   goto index 255;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 257;
   goto index 258;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 260;
   goto index 261;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 263;
   goto index 264;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 266;
   goto index 267;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 269;
   goto index 270;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 272;
   goto index 273;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 275;
   goto index 277;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 279;
   goto index 280;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 282;
   goto index 283;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 285;
   goto index 286;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 288;
   goto index 289;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 291;
   goto index 292;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 294;
   goto index 295;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 301;
   if "debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 305;
   if !"debug-curr-state" then goto index 303;
   goto index 304;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 307;
   goto index 315;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 318;
   goto index 386;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 320;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 380;
   if "goosefact" == 1 then goto index 378;
   if "goosefact" == 2 then goto index 376;
   if "goosefact" == 3 then goto index 374;
   if "goosefact" == 4 then goto index 372;
   if "goosefact" == 5 then goto index 370;
   if "goosefact" == 6 then goto index 368;
   if "goosefact" == 7 then goto index 366;
   if "goosefact" == 8 then goto index 364;
   if "goosefact" == 9 then goto index 362;
   if "goosefact" == 10 then goto index 360;
   if "goosefact" == 11 then goto index 358;
   if "goosefact" == 12 then goto index 356;
   if "goosefact" == 13 then goto index 354;
   if "goosefact" == 14 then goto index 352;
   if "goosefact" == 15 then goto index 350;
   if "goosefact" == 16 then goto index 348;
   if "goosefact" == 17 then goto index 346;
   if "goosefact" == 18 then goto index 344;
   if "goosefact" == 19 then goto index 342;
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 385;
   goto index 386;
   "goosefact" = 0;
   if debug_mode then goto index 388;
   goto index 390;
   command "want" + "chips" = "debug-want-chips";
   show serial_dialog "ch2-castle-32.mgs-XX";
}

"on_tick-ch2-castle-32" {
   if player intersects geometry "northwest-hitbox" then goto index 7;
   if player intersects geometry "northeast-hitbox" then goto index 3;
   goto index 10;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   load map "ch2-castle-34";
   goto index 10;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   load map "ch2-castle-33";
}

"on_tick-ch2-castle-32-doorless" {
   if player intersects geometry "northwest-hitbox" then goto index 15;
   if player intersects geometry "northeast-hitbox" then goto index 11;
   if player intersects geometry "south-hitbox" then goto index 4;
   goto index 18;
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-31";
   goto index 10;
   load map "ch2-castle-31-doorless";
   goto index 18;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   load map "ch2-castle-34";
   goto index 18;
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   load map "ch2-castle-33";
}

"ch2-gloria-worry-walk" {
   "tempvar" ?= 4;
   if "tempvar" == 0 then goto index 10;
   if "tempvar" == 1 then goto index 8;
   if "tempvar" == 2 then goto index 6;
   wait 2200ms;
   goto index 11;
   wait 1500ms;
   goto index 11;
   wait 1100ms;
   goto index 11;
   wait 400ms;
   self position -> geometry "%ENTITY_PATH%" origin over 200ms;
   self direction = entity "Samson";
   if self path != "worry-walk2" then goto index 19;
   "tempvar" ?= 2;
   if "tempvar" == 0 then goto index 18;
   self path = "worry-walk3";
   goto index 20;
   self path = "worry-walk1";
   self path = "worry-walk2";
}

"on_go-castle-32-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-31";
   goto index 10;
   load map "ch2-castle-31-doorless";
}

"interact-ch2-gloria" {
   player_control = false;
   self on_tick = "null_script";
   self direction = player;
   self animation -> 3 1x;
   self current_animation = 4;
   if !"ch2-gloria-backstory" then goto index 9;
   show dialog "ch2-castle-32.mgs-XX";
   self on_tick = "face-player";
   goto index 12;
   show dialog "ch2-castle-32.mgs-XX";
   "ch2-gloria-backstory" = true;
   entity "Gloria" direction = entity "Samson";
   self on_tick = "ch2-gloria-worry-walk";
   self animation -> 5 1x;
   self current_animation = 0;
   player_control = true;
}

"interact-ch2-samson" {
   self direction = player;
   self current_animation = 2;
   if "ch2-samson-count" == 0 then goto index 13;
   if "ch2-samson-count" == 1 then goto index 11;
   if "ch2-samson-count" == 2 then goto index 9;
   if "ch2-samson-count" == 3 then goto index 7;
   goto index 14;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 14;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 14;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 14;
   show dialog "ch2-castle-32.mgs-XX";
   self current_animation = 0;
   "ch2-samson-count" += 1;
   "ch2-samson-count" %= 4;
   self direction = "west";
}

"interact-ch2-vendingmachine" {
   if "ch2-storyflag-round" >= 3 then goto index 21;
   if !"ch2-want-cactuscooler" then goto index 20;
   if "ch2-carrying-cactuscooler" then goto index 20;
   if "ch2-cactuscooler-delivered" then goto index 20;
   if !"ch2-want-bobparty" then goto index 11;
   show dialog "ch2-castle-32.mgs-XX";
   player direction = entity "Sea Moss";
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = player;
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = "south";
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = player;
   show dialog "ch2-castle-32.mgs-XX";
   player direction = entity "Sea Moss";
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = player;
   "ch2-want-bobparty" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-cactuscooler-bobaustin" = true;
   show dialog "vending-pocket-change";
   if !"ch2-cutseen-ramchips" then goto index 24;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 56;
   player_control = false;
   show dialog "ch2-castle-32.mgs-XX";
   player direction = entity "Sea Moss";
   show dialog "ch2-castle-32.mgs-XX";
   player direction = entity "vend machine";
   show dialog "ch2-castle-32.mgs-XX";
   player direction = entity "Sea Moss";
   show dialog "ch2-castle-32.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-32.mgs-XX";
   if !player intersects geometry "vending-watchbox" then goto index 37;
   player on_tick = "ch2-watch-seamoss";
   goto index 38;
   player on_tick = "ch2-walk-to-vend-short";
   entity "Sea Moss" position -> geometry "vending-spot" origin over 1800ms;
   wait 800ms;
   player on_tick = "null_script";
   player direction = "north";
   show dialog "ch2-castle-32.mgs-XX";
   wait 850ms;
   entity "RAM chips" name = "RAM chips";
   entity "RAM chips" position = geometry "ch2-chips-slide";
   wait 500ms;
   entity "RAM chips" position -> geometry "ch2-chips-land" origin over 400ms;
   wait 1300ms;
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = "south";
   show dialog "ch2-castle-32.mgs-XX";
   player_control = true;
   "ch2-cutseen-ramchips" = true;
   "ch2-ramchips-dispensed" = true;
   player on_tick = "null_script";
}

"interact-ch2-seamoss" {
   self direction = player;
   if !"ch2-want-ramchips" then goto index 31;
   if !"ch2-cutseen-ramchips" then goto index 4;
   show dialog "ch2-castle-32.mgs-XX";
   if !"ch2-seamoss-backstory" then goto index 7;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 9;
   show dialog "ch2-castle-32.mgs-XX";
   "ch2-seamoss-backstory" = true;
   player_control = false;
   show dialog "ch2-castle-32.mgs-XX";
   wait 100ms;
   player on_tick = "ch2-walk-to-vend";
   entity "Sea Moss" position -> geometry "vending-spot" origin over 1800ms;
   wait 800ms;
   player on_tick = "null_script";
   player direction = "north";
   show dialog "ch2-castle-32.mgs-XX";
   wait 850ms;
   entity "RAM chips" name = "RAM chips";
   entity "RAM chips" position = geometry "ch2-chips-slide";
   wait 500ms;
   entity "RAM chips" position -> geometry "ch2-chips-land" origin over 400ms;
   wait 1300ms;
   show dialog "ch2-castle-32.mgs-XX";
   entity "Sea Moss" direction = "south";
   show dialog "ch2-castle-32.mgs-XX";
   player_control = true;
   "ch2-cutseen-ramchips" = true;
   "ch2-ramchips-dispensed" = true;
   player on_tick = "null_script";
   if !"ch2-seamoss-backstory" then goto index 34;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 36;
   show dialog "ch2-castle-32.mgs-XX";
   "ch2-seamoss-backstory" = true;
   self direction = "south";
}

"ch2-touch-ramchips" {
   if !"ch2-ramchips-firstlook" then goto index 3;
   show dialog "ch2-castle-32.mgs-XX";
   goto index 5;
   show dialog "ch2-castle-32.mgs-XX";
   "ch2-ramchips-firstlook" = true;
   show dialog "ch2-castle-32.mgs-XX";
}

"on_load-ch2-castle-33" {
   "ch2-in-room" = 33;
   show serial_dialog "spacer";
   if !"ch2-seen-room-33" then goto index 5;
   show serial_dialog "ch2-castle-33.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-33.mgs-XX";
   "ch2-seen-room-33" = true;
   if "ch2-installed-mouse" then goto index 10;
   if "ch2-carrying-mouse" then goto index 10;
   goto index 13;
   entity "Mouse" position = geometry "hiding-spot";
   entity "Mouse" name = " ";
   entity "Mouse" on_interact = "null_script";
   "ch2-mousegame" = false;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 27;
   if "ch2-in-room" == 0 then goto index 27;
   if debug_mode then goto index 27;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 31;
   goto index 32;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 58;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 59;
   serial_control = false;
   if "ch2-has-map" then goto index 61;
   goto index 63;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 133;
   if "ch2-warp-granted" then goto index 66;
   goto index 207;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 207;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 208;
   if "ch2-storyflag-round" < 5 then goto index 210;
   goto index 240;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 242;
   goto index 243;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 245;
   goto index 246;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 248;
   goto index 249;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 251;
   goto index 252;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 254;
   goto index 255;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 257;
   goto index 258;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 260;
   goto index 261;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 263;
   goto index 264;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 266;
   goto index 267;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 269;
   goto index 271;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 273;
   goto index 274;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 276;
   goto index 277;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 279;
   goto index 280;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 282;
   goto index 283;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 285;
   goto index 286;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 288;
   goto index 289;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 295;
   if "debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 299;
   if !"debug-curr-state" then goto index 297;
   goto index 298;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 301;
   goto index 309;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 312;
   goto index 380;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 314;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 374;
   if "goosefact" == 1 then goto index 372;
   if "goosefact" == 2 then goto index 370;
   if "goosefact" == 3 then goto index 368;
   if "goosefact" == 4 then goto index 366;
   if "goosefact" == 5 then goto index 364;
   if "goosefact" == 6 then goto index 362;
   if "goosefact" == 7 then goto index 360;
   if "goosefact" == 8 then goto index 358;
   if "goosefact" == 9 then goto index 356;
   if "goosefact" == 10 then goto index 354;
   if "goosefact" == 11 then goto index 352;
   if "goosefact" == 12 then goto index 350;
   if "goosefact" == 13 then goto index 348;
   if "goosefact" == 14 then goto index 346;
   if "goosefact" == 15 then goto index 344;
   if "goosefact" == 16 then goto index 342;
   if "goosefact" == 17 then goto index 340;
   if "goosefact" == 18 then goto index 338;
   if "goosefact" == 19 then goto index 336;
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 379;
   goto index 380;
   "goosefact" = 0;
   if debug_mode then goto index 382;
   goto index 384;
   command "mousegame" = "ch2-debug-mousegame";
   show serial_dialog "ch2-castle-33.mgs-XX";
   if !"ch2-cutseen-castle33" then goto index 386;
   goto index 399;
   player_control = false;
   if warp_state != "warped" then goto index 393;
   wait 200ms;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   show dialog "ch2-castle-33.mgs-XX";
   goto index 397;
   wait 600ms;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = true;
   "ch2-cutseen-castle33" = true;
}

"on_tick-ch2-castle-33" {
   if player intersects geometry "south-hitbox" then goto index 1;
   if "ch2-mousegame" then goto index 8;
   warp_state = "walk_from-northwest";
   if "ch2-storyflag-round" >= 5 then goto index 6;
   load map "ch2-castle-32";
   goto index 7;
   load map "ch2-castle-32-doorless";
   goto index 13;
   player_control = false;
   player current_animation = 0;
   show dialog "ch2-castle-33.mgs-XX";
   player position -> geometry "south-hitbox-bounce" origin over 300ms;
   player_control = true;
   if "ch2-mousegame" then goto index 15;
   goto index 16;
   goto "ch2-mousegame-tick";
}

"on_go-castle-33-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-32";
   goto index 10;
   load map "ch2-castle-32-doorless";
}

"ch2-interact-gregory-breakyes" {
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-mousegame" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 9;
   if "ch2-in-room" == 0 then goto index 9;
   if debug_mode then goto index 9;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 13;
   goto index 14;
   light LED_USB = false;
   show dialog "ch2-castle-33.mgs-XX";
   self on_interact = "ch2-interact-gregory";
}

"ch2-interact-gregory" {
   self direction = player;
   if "ch2-mousegame" then goto index 2;
   if !"interrupt" then goto index 5;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 7;
   show dialog "ch2-castle-33.mgs-XX";
   "interrupt" = true;
   if "ch2-storyflag-round" < 2 then goto index 60;
   if "ch2-carrying-mouse" then goto index 59;
   if "ch2-installed-mouse" then goto index 59;
   if !"ch2-mousegame-backstory" then goto index 15;
   if !"interrupt" then goto index 13;
   goto index 14;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-bluetooth-mouse-rant" then goto index 19;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 20;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "face-player";
   self direction = player;
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-bluetooth-mouse-rant" then goto index 29;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 30;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = false;
   entity "Gregory" on_tick = "null_script";
   entity "Gregory" direction += 1;
   wait 800ms;
   entity "Gregory" direction -= -1;
   entity "Gregory" on_tick = "face-player";
   show dialog "ch2-castle-33.mgs-XX";
   lights_control = true;
   light ALL = false;
   entity "Lights" on_tick = "screen-lights-flash-bits";
   show dialog "ch2-castle-33.mgs-XX";
   if "ch2-ring-zero-enabled-in-castle" then goto index 49;
   if "ch2-in-room" == 0 then goto index 49;
   if debug_mode then goto index 49;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 53;
   goto index 54;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = true;
   "interrupt" = true;
   "ch2-mousegame-backstory" = true;
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-gregory-backstory" then goto index 67;
   if !"ch2-want-cactuscooler" then goto index 65;
   if "ch2-carrying-cactuscooler" then goto index 65;
   if "ch2-cactuscooler-delivered" then goto index 65;
   show dialog "ch2-gregory-cactus-help";
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-bluetooth-mouse-rant" = true;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = "south";
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   entity "Gregory" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "face-player";
   self direction = player;
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-gregory-backstory" = true;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-gregory-cactus-help";
}

"ch2-touch-mouse" {
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-mousegame-catchcount" += 1;
   "ch2-mousegame" = false;
   if "ch2-mousegame-catchcount" == 1 then goto index 40;
   if "ch2-mousegame-catchcount" == 2 then goto index 35;
   if "ch2-mousegame-catchcount" == 3 then goto index 7;
   goto index 44;
   show dialog "ch2-castle-33.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 400ms;
   player position = geometry "dongle-handoff";
   player direction = entity "Gregory";
   camera fade in -> #000000 over 400ms;
   player_control = true;
   if "ch2-ring-zero-enabled-in-castle" then goto index 21;
   if "ch2-in-room" == 0 then goto index 21;
   if debug_mode then goto index 21;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 25;
   goto index 26;
   light LED_USB = false;
   entity "Mouse" position = geometry "hiding-spot";
   entity "Mouse" name = " ";
   entity "Mouse" on_interact = "null_script";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Mouse" on_interact = "null_script";
   goto index 44;
   show dialog "ch2-castle-33.mgs-XX";
   light ALL = false;
   show dialog "ch2-castle-33.mgs-XX";
   entity "Mouse" on_tick = "ch2-mousegame-prepare-board";
   goto index 44;
   show dialog "ch2-castle-33.mgs-XX";
   light ALL = false;
   show dialog "ch2-castle-33.mgs-XX";
   entity "Mouse" on_tick = "ch2-mousegame-prepare-board";
}

"ch2-mousegame-prepare-board" {
   if "ch2-mousegame-column" == 0 then goto index 5;
   if "ch2-mousegame-column" == 1 then goto index 4;
   "ch2-mousegame-column" = 1;
   goto index 7;
   "ch2-mousegame-column" = 2;
   "ch2-mousegame-column" ?= 2;
   "ch2-mousegame-column" += 1;
   "tempvar" ?= 2;
   if "ch2-mousegame-row" == 0 then goto index 20;
   if "ch2-mousegame-row" == 1 then goto index 18;
   if "ch2-mousegame-row" == 2 then goto index 14;
   if "ch2-mousegame-row" == 3 then goto index 12;
   "tempvar" += 1;
   "ch2-mousegame-row" = "tempvar";
   if "tempvar" == 0 then goto index 17;
   "ch2-mousegame-row" = 3;
   goto index 22;
   "ch2-mousegame-row" = 1;
   "tempvar" += 2;
   "ch2-mousegame-row" = "tempvar";
   "ch2-mousegame-row" ?= 3;
   "ch2-mousegame-row" += 1;
   if "ch2-mousegame-row" == 1 then goto index 25;
   "ch2-mousegame-cell" ?= 3;
   goto index 26;
   "ch2-mousegame-cell" ?= 4;
   "ch2-mousegame-cell" += 1;
   if "ch2-mousegame-column" == 1 then goto index 47;
   if "ch2-mousegame-row" == 1 then goto index 40;
   if "ch2-mousegame-row" == 2 then goto index 35;
   if "ch2-mousegame-cell" == 1 then goto index 34;
   if "ch2-mousegame-cell" == 2 then goto index 33;
   entity "Mouse" position = geometry "mouse-pos19";
   entity "Mouse" position = geometry "mouse-pos18";
   entity "Mouse" position = geometry "mouse-pos17";
   if "ch2-mousegame-cell" == 1 then goto index 39;
   if "ch2-mousegame-cell" == 2 then goto index 38;
   entity "Mouse" position = geometry "mouse-pos13";
   entity "Mouse" position = geometry "mouse-pos12";
   entity "Mouse" position = geometry "mouse-pos11";
   if "ch2-mousegame-cell" == 1 then goto index 46;
   if "ch2-mousegame-cell" == 2 then goto index 45;
   if "ch2-mousegame-cell" == 3 then goto index 44;
   entity "Mouse" position = geometry "mouse-pos7";
   entity "Mouse" position = geometry "mouse-pos6";
   entity "Mouse" position = geometry "mouse-pos5";
   entity "Mouse" position = geometry "mouse-pos4";
   if "ch2-mousegame-row" == 1 then goto index 59;
   if "ch2-mousegame-row" == 2 then goto index 54;
   if "ch2-mousegame-cell" == 1 then goto index 53;
   if "ch2-mousegame-cell" == 2 then goto index 52;
   entity "Mouse" position = geometry "mouse-pos16";
   entity "Mouse" position = geometry "mouse-pos15";
   entity "Mouse" position = geometry "mouse-pos14";
   if "ch2-mousegame-cell" == 1 then goto index 58;
   if "ch2-mousegame-cell" == 2 then goto index 57;
   entity "Mouse" position = geometry "mouse-pos10";
   entity "Mouse" position = geometry "mouse-pos9";
   entity "Mouse" position = geometry "mouse-pos8";
   if "ch2-mousegame-cell" == 1 then goto index 68;
   if "ch2-mousegame-cell" == 2 then goto index 66;
   if "ch2-mousegame-cell" == 3 then goto index 64;
   entity "Mouse" position = geometry "mouse-pos3";
   goto index 69;
   entity "Mouse" position = geometry "mouse-pos2";
   goto index 69;
   entity "Mouse" position = geometry "mouse-pos1";
   goto index 69;
   entity "Mouse" position = geometry "mouse-pos0";
   lights_control = true;
   light ALL = false;
   show dialog "ch2-castle-33.mgs-XX";
   entity "Mouse" on_interact = "ch2-touch-mouse";
   "mousegame-mouseX" = entity "Mouse" x;
   "mousegame-mouseY" = entity "Mouse" y;
   "ch2-mousegame" = true;
   goto "null_script";
}

"ch2-mousegame-tick" {
   wait 100ms;
   "mousegame-playerX" = player x;
   "mousegame-playerY" = player y;
   if "mousegame-playerX" > "mousegame-mouseX" then goto index 7;
   "mousegame-diffX" = "mousegame-mouseX";
   "mousegame-diffX" -= "mousegame-playerX";
   goto index 9;
   "mousegame-diffX" = "mousegame-playerX";
   "mousegame-diffX" -= "mousegame-mouseX";
   if "mousegame-playerY" > "mousegame-mouseY" then goto index 13;
   "mousegame-diffY" = "mousegame-mouseY";
   "mousegame-diffY" -= "mousegame-playerY";
   goto index 15;
   "mousegame-diffY" = "mousegame-playerY";
   "mousegame-diffY" -= "mousegame-mouseY";
   "mousegame-manhattan" = "mousegame-diffX";
   "mousegame-manhattan" += "mousegame-diffY";
   "mousegame-diff" = "mousegame-manhattan";
   "mousegame-diff" *= 16;
   "mousegame-diff" /= 680;
   if "mousegame-diff" > 8 then goto index 24;
   "mousegame-lights" = 8;
   "mousegame-lights" -= "mousegame-diff";
   goto index 25;
   "mousegame-lights" = 0;
   if "mousegame-lights" == 0 then goto index 107;
   if "mousegame-lights" == 1 then goto index 98;
   if "mousegame-lights" == 2 then goto index 89;
   if "mousegame-lights" == 3 then goto index 80;
   if "mousegame-lights" == 4 then goto index 71;
   if "mousegame-lights" == 5 then goto index 62;
   if "mousegame-lights" == 6 then goto index 53;
   if "mousegame-lights" == 7 then goto index 44;
   if "mousegame-lights" == 8 then goto index 35;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = true;
   light LED_BIT8 = true;
   light LED_BIT4 = true;
   light LED_BIT2 = true;
   light LED_BIT1 = true;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = true;
   light LED_BIT8 = true;
   light LED_BIT4 = true;
   light LED_BIT2 = true;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = true;
   light LED_BIT8 = true;
   light LED_BIT4 = true;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = true;
   light LED_BIT8 = true;
   light LED_BIT4 = false;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = true;
   light LED_BIT8 = false;
   light LED_BIT4 = false;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = true;
   light LED_BIT16 = false;
   light LED_BIT8 = false;
   light LED_BIT4 = false;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = true;
   light LED_BIT32 = false;
   light LED_BIT16 = false;
   light LED_BIT8 = false;
   light LED_BIT4 = false;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light LED_BIT128 = true;
   light LED_BIT64 = false;
   light LED_BIT32 = false;
   light LED_BIT16 = false;
   light LED_BIT8 = false;
   light LED_BIT4 = false;
   light LED_BIT2 = false;
   light LED_BIT1 = false;
   goto index 108;
   light ALL = false;
   map on_tick = "on_tick-ch2-castle-33";
}

"hanoi_move_1" {
   "cursor_pos" = 1;
   if "cursor_value" == 0 then goto index 181;
   if "cursor_pos" == 1 then goto index 37;
   if "cursor_pos" == 2 then goto index 21;
   if "cursor_pos" == 3 then goto index 5;
   if "array3_length" == 0 then goto index 20;
   if "array3_length" == 1 then goto index 19;
   if "array3_length" == 2 then goto index 18;
   if "array3_length" == 3 then goto index 17;
   if "array3_length" == 4 then goto index 16;
   if "array3_length" == 5 then goto index 15;
   if "array3_length" == 6 then goto index 14;
   if "array3_length" == 7 then goto index 13;
   "checked_value" = "array3_7";
   "checked_value" = "array3_6";
   "checked_value" = "array3_5";
   "checked_value" = "array3_4";
   "checked_value" = "array3_3";
   "checked_value" = "array3_2";
   "checked_value" = "array3_1";
   "checked_value" = 0;
   if "array2_length" == 0 then goto index 36;
   if "array2_length" == 1 then goto index 35;
   if "array2_length" == 2 then goto index 34;
   if "array2_length" == 3 then goto index 33;
   if "array2_length" == 4 then goto index 32;
   if "array2_length" == 5 then goto index 31;
   if "array2_length" == 6 then goto index 30;
   if "array2_length" == 7 then goto index 29;
   "checked_value" = "array2_7";
   "checked_value" = "array2_6";
   "checked_value" = "array2_5";
   "checked_value" = "array2_4";
   "checked_value" = "array2_3";
   "checked_value" = "array2_2";
   "checked_value" = "array2_1";
   "checked_value" = 0;
   if "array1_length" == 0 then goto index 60;
   if "array1_length" == 1 then goto index 58;
   if "array1_length" == 2 then goto index 56;
   if "array1_length" == 3 then goto index 54;
   if "array1_length" == 4 then goto index 52;
   if "array1_length" == 5 then goto index 50;
   if "array1_length" == 6 then goto index 48;
   if "array1_length" == 7 then goto index 46;
   goto index 61;
   "checked_value" = "array1_7";
   goto index 61;
   "checked_value" = "array1_6";
   goto index 61;
   "checked_value" = "array1_5";
   goto index 61;
   "checked_value" = "array1_4";
   goto index 61;
   "checked_value" = "array1_3";
   goto index 61;
   "checked_value" = "array1_2";
   goto index 61;
   "checked_value" = "array1_1";
   goto index 61;
   "checked_value" = 0;
   if "checked_value" == 0 then goto index 67;
   if "checked_value" > "cursor_value" then goto index 65;
   "can_drop" = false;
   goto index 68;
   "can_drop" = true;
   goto index 68;
   "can_drop" = true;
   if "can_drop" then goto index 70;
   "hanoi_warning_size" = true;
   if "cursor_pos" == 1 then goto index 145;
   if "cursor_pos" == 2 then goto index 109;
   if "cursor_pos" == 3 then goto index 73;
   if "cursor_value" == 0 then goto index 108;
   if "array3_length" >= 7 then goto index 106;
   if "array3_length" == 6 then goto index 101;
   if "array3_length" == 5 then goto index 98;
   if "array3_length" == 4 then goto index 95;
   if "array3_length" == 3 then goto index 92;
   if "array3_length" == 2 then goto index 89;
   if "array3_length" == 1 then goto index 86;
   if "array3_length" == 0 then goto index 83;
   goto index 103;
   "array3_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_7" = "cursor_value";
   "cursor_value" = 0;
   "array3_length" += 1;
   "hanoi_move_count" += 1;
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 144;
   if "array2_length" >= 7 then goto index 142;
   if "array2_length" == 6 then goto index 137;
   if "array2_length" == 5 then goto index 134;
   if "array2_length" == 4 then goto index 131;
   if "array2_length" == 3 then goto index 128;
   if "array2_length" == 2 then goto index 125;
   if "array2_length" == 1 then goto index 122;
   if "array2_length" == 0 then goto index 119;
   goto index 139;
   "array2_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_7" = "cursor_value";
   "cursor_value" = 0;
   "array2_length" += 1;
   "hanoi_move_count" += 1;
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 180;
   if "array1_length" >= 7 then goto index 178;
   if "array1_length" == 6 then goto index 173;
   if "array1_length" == 5 then goto index 170;
   if "array1_length" == 4 then goto index 167;
   if "array1_length" == 3 then goto index 164;
   if "array1_length" == 2 then goto index 161;
   if "array1_length" == 1 then goto index 158;
   if "array1_length" == 0 then goto index 155;
   goto index 175;
   "array1_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_7" = "cursor_value";
   "cursor_value" = 0;
   "array1_length" += 1;
   "hanoi_move_count" += 1;
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_pos" == 1 then goto index 252;
   if "cursor_pos" == 2 then goto index 218;
   if "cursor_pos" == 3 then goto index 184;
   if "array3_length" > 0 then goto index 185;
   if "array3_length" == 0 then goto index 217;
   if "array3_length" == 7 then goto index 212;
   if "array3_length" == 6 then goto index 209;
   if "array3_length" == 5 then goto index 206;
   if "array3_length" == 4 then goto index 203;
   if "array3_length" == 3 then goto index 200;
   if "array3_length" == 2 then goto index 197;
   if "array3_length" == 1 then goto index 194;
   goto index 214;
   "cursor_value" = "array3_1";
   "array3_1" = 0;
   goto index 214;
   "cursor_value" = "array3_2";
   "array3_2" = 0;
   goto index 214;
   "cursor_value" = "array3_3";
   "array3_3" = 0;
   goto index 214;
   "cursor_value" = "array3_4";
   "array3_4" = 0;
   goto index 214;
   "cursor_value" = "array3_5";
   "array3_5" = 0;
   goto index 214;
   "cursor_value" = "array3_6";
   "array3_6" = 0;
   goto index 214;
   "cursor_value" = "array3_7";
   "array3_7" = 0;
   "array3_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 218;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array2_length" > 0 then goto index 219;
   if "array2_length" == 0 then goto index 251;
   if "array2_length" == 7 then goto index 246;
   if "array2_length" == 6 then goto index 243;
   if "array2_length" == 5 then goto index 240;
   if "array2_length" == 4 then goto index 237;
   if "array2_length" == 3 then goto index 234;
   if "array2_length" == 2 then goto index 231;
   if "array2_length" == 1 then goto index 228;
   goto index 248;
   "cursor_value" = "array2_1";
   "array2_1" = 0;
   goto index 248;
   "cursor_value" = "array2_2";
   "array2_2" = 0;
   goto index 248;
   "cursor_value" = "array2_3";
   "array2_3" = 0;
   goto index 248;
   "cursor_value" = "array2_4";
   "array2_4" = 0;
   goto index 248;
   "cursor_value" = "array2_5";
   "array2_5" = 0;
   goto index 248;
   "cursor_value" = "array2_6";
   "array2_6" = 0;
   goto index 248;
   "cursor_value" = "array2_7";
   "array2_7" = 0;
   "array2_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 252;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array1_length" > 0 then goto index 254;
   goto index 287;
   if "array1_length" == 0 then goto index 286;
   if "array1_length" == 7 then goto index 281;
   if "array1_length" == 6 then goto index 278;
   if "array1_length" == 5 then goto index 275;
   if "array1_length" == 4 then goto index 272;
   if "array1_length" == 3 then goto index 269;
   if "array1_length" == 2 then goto index 266;
   if "array1_length" == 1 then goto index 263;
   goto index 283;
   "cursor_value" = "array1_1";
   "array1_1" = 0;
   goto index 283;
   "cursor_value" = "array1_2";
   "array1_2" = 0;
   goto index 283;
   "cursor_value" = "array1_3";
   "array1_3" = 0;
   goto index 283;
   "cursor_value" = "array1_4";
   "array1_4" = 0;
   goto index 283;
   "cursor_value" = "array1_5";
   "array1_5" = 0;
   goto index 283;
   "cursor_value" = "array1_6";
   "array1_6" = 0;
   goto index 283;
   "cursor_value" = "array1_7";
   "array1_7" = 0;
   "array1_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 287;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 6 then goto index 289;
   goto index 290;
   "hanoi_won" = true;
   if "cursor_pos" == 1 then goto index 298;
   if "cursor_pos" == 2 then goto index 296;
   if "cursor_pos" == 3 then goto index 294;
   goto index 299;
   "cursor_grip_height" = "array3_length";
   goto index 299;
   "cursor_grip_height" = "array2_length";
   goto index 299;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 315;
   "column" = 1;
   if "column" <= 3 then goto index 309;
   goto index 324;
   if "cursor_pos" == "column" then goto index 312;
   show serial_dialog "hanoi_space";
   goto index 313;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 307;
   if "cursor_pos" == 1 then goto index 323;
   if "cursor_pos" == 2 then goto index 321;
   if "cursor_pos" == 3 then goto index 319;
   goto index 324;
   show serial_dialog "hanoi_won_message3a";
   goto index 324;
   show serial_dialog "hanoi_won_message2a";
   goto index 324;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 405;
   if "hanoi_won" then goto index 393;
   "column" = 1;
   if "column" <= 3 then goto index 331;
   goto index 407;
   if "curr_plate" != 0 then goto index 367;
   if "cursor_pos" == "column" then goto index 334;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 366;
   if "cursor_hinge_height" == "row" then goto index 364;
   if "cursor_grip_height" == "row" then goto index 339;
   show serial_dialog "hanoi_space";
   goto index 391;
   if "cursor_value" == 0 then goto index 362;
   if "cursor_value" == 1 then goto index 360;
   if "cursor_value" == 2 then goto index 358;
   if "cursor_value" == 3 then goto index 356;
   if "cursor_value" == 4 then goto index 354;
   if "cursor_value" == 5 then goto index 352;
   if "cursor_value" == 6 then goto index 350;
   if "cursor_value" == 7 then goto index 348;
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 391;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 391;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 390;
   if "curr_plate" == 1 then goto index 388;
   if "curr_plate" == 2 then goto index 386;
   if "curr_plate" == 3 then goto index 384;
   if "curr_plate" == 4 then goto index 382;
   if "curr_plate" == 5 then goto index 380;
   if "curr_plate" == 6 then goto index 378;
   if "curr_plate" == 7 then goto index 376;
   goto index 391;
   show serial_dialog "hanoi_plate_7";
   goto index 391;
   show serial_dialog "hanoi_plate_6";
   goto index 391;
   show serial_dialog "hanoi_plate_5";
   goto index 391;
   show serial_dialog "hanoi_plate_4";
   goto index 391;
   show serial_dialog "hanoi_plate_3";
   goto index 391;
   show serial_dialog "hanoi_plate_2";
   goto index 391;
   show serial_dialog "hanoi_plate_1";
   goto index 391;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 329;
   if "cursor_pos" == 1 then goto index 404;
   if "cursor_pos" == 2 then goto index 403;
   if "cursor_pos" == 3 then goto index 396;
   if "hanoi_move_count" < 100 then goto index 402;
   if "hanoi_move_count" < 1000 then goto index 400;
   show serial_dialog "hanoi_won_message3b4";
   goto index 405;
   show serial_dialog "hanoi_won_message3b3";
   goto index 405;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 412;
   goto index 474;
   if "curr_plate" != 0 then goto index 448;
   if "cursor_pos" == "column" then goto index 415;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 447;
   if "cursor_hinge_height" == "row" then goto index 445;
   if "cursor_grip_height" == "row" then goto index 420;
   show serial_dialog "hanoi_space";
   goto index 472;
   if "cursor_value" == 0 then goto index 443;
   if "cursor_value" == 1 then goto index 441;
   if "cursor_value" == 2 then goto index 439;
   if "cursor_value" == 3 then goto index 437;
   if "cursor_value" == 4 then goto index 435;
   if "cursor_value" == 5 then goto index 433;
   if "cursor_value" == 6 then goto index 431;
   if "cursor_value" == 7 then goto index 429;
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 472;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 472;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 471;
   if "curr_plate" == 1 then goto index 469;
   if "curr_plate" == 2 then goto index 467;
   if "curr_plate" == 3 then goto index 465;
   if "curr_plate" == 4 then goto index 463;
   if "curr_plate" == 5 then goto index 461;
   if "curr_plate" == 6 then goto index 459;
   if "curr_plate" == 7 then goto index 457;
   goto index 472;
   show serial_dialog "hanoi_plate_7";
   goto index 472;
   show serial_dialog "hanoi_plate_6";
   goto index 472;
   show serial_dialog "hanoi_plate_5";
   goto index 472;
   show serial_dialog "hanoi_plate_4";
   goto index 472;
   show serial_dialog "hanoi_plate_3";
   goto index 472;
   show serial_dialog "hanoi_plate_2";
   goto index 472;
   show serial_dialog "hanoi_plate_1";
   goto index 472;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 410;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 479;
   goto index 541;
   if "curr_plate" != 0 then goto index 515;
   if "cursor_pos" == "column" then goto index 482;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 514;
   if "cursor_hinge_height" == "row" then goto index 512;
   if "cursor_grip_height" == "row" then goto index 487;
   show serial_dialog "hanoi_space";
   goto index 539;
   if "cursor_value" == 0 then goto index 510;
   if "cursor_value" == 1 then goto index 508;
   if "cursor_value" == 2 then goto index 506;
   if "cursor_value" == 3 then goto index 504;
   if "cursor_value" == 4 then goto index 502;
   if "cursor_value" == 5 then goto index 500;
   if "cursor_value" == 6 then goto index 498;
   if "cursor_value" == 7 then goto index 496;
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 539;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 539;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 538;
   if "curr_plate" == 1 then goto index 536;
   if "curr_plate" == 2 then goto index 534;
   if "curr_plate" == 3 then goto index 532;
   if "curr_plate" == 4 then goto index 530;
   if "curr_plate" == 5 then goto index 528;
   if "curr_plate" == 6 then goto index 526;
   if "curr_plate" == 7 then goto index 524;
   goto index 539;
   show serial_dialog "hanoi_plate_7";
   goto index 539;
   show serial_dialog "hanoi_plate_6";
   goto index 539;
   show serial_dialog "hanoi_plate_5";
   goto index 539;
   show serial_dialog "hanoi_plate_4";
   goto index 539;
   show serial_dialog "hanoi_plate_3";
   goto index 539;
   show serial_dialog "hanoi_plate_2";
   goto index 539;
   show serial_dialog "hanoi_plate_1";
   goto index 539;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 477;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 584;
   if "cursor_pos" == "column" then goto index 551;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 583;
   if "cursor_hinge_height" == "row" then goto index 581;
   if "cursor_grip_height" == "row" then goto index 556;
   show serial_dialog "hanoi_space";
   goto index 608;
   if "cursor_value" == 0 then goto index 579;
   if "cursor_value" == 1 then goto index 577;
   if "cursor_value" == 2 then goto index 575;
   if "cursor_value" == 3 then goto index 573;
   if "cursor_value" == 4 then goto index 571;
   if "cursor_value" == 5 then goto index 569;
   if "cursor_value" == 6 then goto index 567;
   if "cursor_value" == 7 then goto index 565;
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 608;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 608;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 607;
   if "curr_plate" == 1 then goto index 605;
   if "curr_plate" == 2 then goto index 603;
   if "curr_plate" == 3 then goto index 601;
   if "curr_plate" == 4 then goto index 599;
   if "curr_plate" == 5 then goto index 597;
   if "curr_plate" == 6 then goto index 595;
   if "curr_plate" == 7 then goto index 593;
   goto index 608;
   show serial_dialog "hanoi_plate_7";
   goto index 608;
   show serial_dialog "hanoi_plate_6";
   goto index 608;
   show serial_dialog "hanoi_plate_5";
   goto index 608;
   show serial_dialog "hanoi_plate_4";
   goto index 608;
   show serial_dialog "hanoi_plate_3";
   goto index 608;
   show serial_dialog "hanoi_plate_2";
   goto index 608;
   show serial_dialog "hanoi_plate_1";
   goto index 608;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 646;
   if "cursor_pos" == "column" then goto index 613;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 645;
   if "cursor_hinge_height" == "row" then goto index 643;
   if "cursor_grip_height" == "row" then goto index 618;
   show serial_dialog "hanoi_space";
   goto index 670;
   if "cursor_value" == 0 then goto index 641;
   if "cursor_value" == 1 then goto index 639;
   if "cursor_value" == 2 then goto index 637;
   if "cursor_value" == 3 then goto index 635;
   if "cursor_value" == 4 then goto index 633;
   if "cursor_value" == 5 then goto index 631;
   if "cursor_value" == 6 then goto index 629;
   if "cursor_value" == 7 then goto index 627;
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 670;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 670;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 669;
   if "curr_plate" == 1 then goto index 667;
   if "curr_plate" == 2 then goto index 665;
   if "curr_plate" == 3 then goto index 663;
   if "curr_plate" == 4 then goto index 661;
   if "curr_plate" == 5 then goto index 659;
   if "curr_plate" == 6 then goto index 657;
   if "curr_plate" == 7 then goto index 655;
   goto index 670;
   show serial_dialog "hanoi_plate_7";
   goto index 670;
   show serial_dialog "hanoi_plate_6";
   goto index 670;
   show serial_dialog "hanoi_plate_5";
   goto index 670;
   show serial_dialog "hanoi_plate_4";
   goto index 670;
   show serial_dialog "hanoi_plate_3";
   goto index 670;
   show serial_dialog "hanoi_plate_2";
   goto index 670;
   show serial_dialog "hanoi_plate_1";
   goto index 670;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 708;
   if "cursor_pos" == "column" then goto index 675;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 707;
   if "cursor_hinge_height" == "row" then goto index 705;
   if "cursor_grip_height" == "row" then goto index 680;
   show serial_dialog "hanoi_space";
   goto index 732;
   if "cursor_value" == 0 then goto index 703;
   if "cursor_value" == 1 then goto index 701;
   if "cursor_value" == 2 then goto index 699;
   if "cursor_value" == 3 then goto index 697;
   if "cursor_value" == 4 then goto index 695;
   if "cursor_value" == 5 then goto index 693;
   if "cursor_value" == 6 then goto index 691;
   if "cursor_value" == 7 then goto index 689;
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 732;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 732;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 731;
   if "curr_plate" == 1 then goto index 729;
   if "curr_plate" == 2 then goto index 727;
   if "curr_plate" == 3 then goto index 725;
   if "curr_plate" == 4 then goto index 723;
   if "curr_plate" == 5 then goto index 721;
   if "curr_plate" == 6 then goto index 719;
   if "curr_plate" == 7 then goto index 717;
   goto index 732;
   show serial_dialog "hanoi_plate_7";
   goto index 732;
   show serial_dialog "hanoi_plate_6";
   goto index 732;
   show serial_dialog "hanoi_plate_5";
   goto index 732;
   show serial_dialog "hanoi_plate_4";
   goto index 732;
   show serial_dialog "hanoi_plate_3";
   goto index 732;
   show serial_dialog "hanoi_plate_2";
   goto index 732;
   show serial_dialog "hanoi_plate_1";
   goto index 732;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 775;
   if "cursor_pos" == "column" then goto index 742;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 774;
   if "cursor_hinge_height" == "row" then goto index 772;
   if "cursor_grip_height" == "row" then goto index 747;
   show serial_dialog "hanoi_space";
   goto index 799;
   if "cursor_value" == 0 then goto index 770;
   if "cursor_value" == 1 then goto index 768;
   if "cursor_value" == 2 then goto index 766;
   if "cursor_value" == 3 then goto index 764;
   if "cursor_value" == 4 then goto index 762;
   if "cursor_value" == 5 then goto index 760;
   if "cursor_value" == 6 then goto index 758;
   if "cursor_value" == 7 then goto index 756;
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 799;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 799;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 798;
   if "curr_plate" == 1 then goto index 796;
   if "curr_plate" == 2 then goto index 794;
   if "curr_plate" == 3 then goto index 792;
   if "curr_plate" == 4 then goto index 790;
   if "curr_plate" == 5 then goto index 788;
   if "curr_plate" == 6 then goto index 786;
   if "curr_plate" == 7 then goto index 784;
   goto index 799;
   show serial_dialog "hanoi_plate_7";
   goto index 799;
   show serial_dialog "hanoi_plate_6";
   goto index 799;
   show serial_dialog "hanoi_plate_5";
   goto index 799;
   show serial_dialog "hanoi_plate_4";
   goto index 799;
   show serial_dialog "hanoi_plate_3";
   goto index 799;
   show serial_dialog "hanoi_plate_2";
   goto index 799;
   show serial_dialog "hanoi_plate_1";
   goto index 799;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 837;
   if "cursor_pos" == "column" then goto index 804;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 836;
   if "cursor_hinge_height" == "row" then goto index 834;
   if "cursor_grip_height" == "row" then goto index 809;
   show serial_dialog "hanoi_space";
   goto index 861;
   if "cursor_value" == 0 then goto index 832;
   if "cursor_value" == 1 then goto index 830;
   if "cursor_value" == 2 then goto index 828;
   if "cursor_value" == 3 then goto index 826;
   if "cursor_value" == 4 then goto index 824;
   if "cursor_value" == 5 then goto index 822;
   if "cursor_value" == 6 then goto index 820;
   if "cursor_value" == 7 then goto index 818;
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 861;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 861;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 860;
   if "curr_plate" == 1 then goto index 858;
   if "curr_plate" == 2 then goto index 856;
   if "curr_plate" == 3 then goto index 854;
   if "curr_plate" == 4 then goto index 852;
   if "curr_plate" == 5 then goto index 850;
   if "curr_plate" == 6 then goto index 848;
   if "curr_plate" == 7 then goto index 846;
   goto index 861;
   show serial_dialog "hanoi_plate_7";
   goto index 861;
   show serial_dialog "hanoi_plate_6";
   goto index 861;
   show serial_dialog "hanoi_plate_5";
   goto index 861;
   show serial_dialog "hanoi_plate_4";
   goto index 861;
   show serial_dialog "hanoi_plate_3";
   goto index 861;
   show serial_dialog "hanoi_plate_2";
   goto index 861;
   show serial_dialog "hanoi_plate_1";
   goto index 861;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 899;
   if "cursor_pos" == "column" then goto index 866;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 898;
   if "cursor_hinge_height" == "row" then goto index 896;
   if "cursor_grip_height" == "row" then goto index 871;
   show serial_dialog "hanoi_space";
   goto index 923;
   if "cursor_value" == 0 then goto index 894;
   if "cursor_value" == 1 then goto index 892;
   if "cursor_value" == 2 then goto index 890;
   if "cursor_value" == 3 then goto index 888;
   if "cursor_value" == 4 then goto index 886;
   if "cursor_value" == 5 then goto index 884;
   if "cursor_value" == 6 then goto index 882;
   if "cursor_value" == 7 then goto index 880;
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 923;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 923;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 922;
   if "curr_plate" == 1 then goto index 920;
   if "curr_plate" == 2 then goto index 918;
   if "curr_plate" == 3 then goto index 916;
   if "curr_plate" == 4 then goto index 914;
   if "curr_plate" == 5 then goto index 912;
   if "curr_plate" == 6 then goto index 910;
   if "curr_plate" == 7 then goto index 908;
   goto index 923;
   show serial_dialog "hanoi_plate_7";
   goto index 923;
   show serial_dialog "hanoi_plate_6";
   goto index 923;
   show serial_dialog "hanoi_plate_5";
   goto index 923;
   show serial_dialog "hanoi_plate_4";
   goto index 923;
   show serial_dialog "hanoi_plate_3";
   goto index 923;
   show serial_dialog "hanoi_plate_2";
   goto index 923;
   show serial_dialog "hanoi_plate_1";
   goto index 923;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 966;
   if "cursor_pos" == "column" then goto index 933;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 965;
   if "cursor_hinge_height" == "row" then goto index 963;
   if "cursor_grip_height" == "row" then goto index 938;
   show serial_dialog "hanoi_space";
   goto index 990;
   if "cursor_value" == 0 then goto index 961;
   if "cursor_value" == 1 then goto index 959;
   if "cursor_value" == 2 then goto index 957;
   if "cursor_value" == 3 then goto index 955;
   if "cursor_value" == 4 then goto index 953;
   if "cursor_value" == 5 then goto index 951;
   if "cursor_value" == 6 then goto index 949;
   if "cursor_value" == 7 then goto index 947;
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 990;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 990;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 989;
   if "curr_plate" == 1 then goto index 987;
   if "curr_plate" == 2 then goto index 985;
   if "curr_plate" == 3 then goto index 983;
   if "curr_plate" == 4 then goto index 981;
   if "curr_plate" == 5 then goto index 979;
   if "curr_plate" == 6 then goto index 977;
   if "curr_plate" == 7 then goto index 975;
   goto index 990;
   show serial_dialog "hanoi_plate_7";
   goto index 990;
   show serial_dialog "hanoi_plate_6";
   goto index 990;
   show serial_dialog "hanoi_plate_5";
   goto index 990;
   show serial_dialog "hanoi_plate_4";
   goto index 990;
   show serial_dialog "hanoi_plate_3";
   goto index 990;
   show serial_dialog "hanoi_plate_2";
   goto index 990;
   show serial_dialog "hanoi_plate_1";
   goto index 990;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1028;
   if "cursor_pos" == "column" then goto index 995;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1027;
   if "cursor_hinge_height" == "row" then goto index 1025;
   if "cursor_grip_height" == "row" then goto index 1000;
   show serial_dialog "hanoi_space";
   goto index 1052;
   if "cursor_value" == 0 then goto index 1023;
   if "cursor_value" == 1 then goto index 1021;
   if "cursor_value" == 2 then goto index 1019;
   if "cursor_value" == 3 then goto index 1017;
   if "cursor_value" == 4 then goto index 1015;
   if "cursor_value" == 5 then goto index 1013;
   if "cursor_value" == 6 then goto index 1011;
   if "cursor_value" == 7 then goto index 1009;
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1052;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1052;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1051;
   if "curr_plate" == 1 then goto index 1049;
   if "curr_plate" == 2 then goto index 1047;
   if "curr_plate" == 3 then goto index 1045;
   if "curr_plate" == 4 then goto index 1043;
   if "curr_plate" == 5 then goto index 1041;
   if "curr_plate" == 6 then goto index 1039;
   if "curr_plate" == 7 then goto index 1037;
   goto index 1052;
   show serial_dialog "hanoi_plate_7";
   goto index 1052;
   show serial_dialog "hanoi_plate_6";
   goto index 1052;
   show serial_dialog "hanoi_plate_5";
   goto index 1052;
   show serial_dialog "hanoi_plate_4";
   goto index 1052;
   show serial_dialog "hanoi_plate_3";
   goto index 1052;
   show serial_dialog "hanoi_plate_2";
   goto index 1052;
   show serial_dialog "hanoi_plate_1";
   goto index 1052;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1090;
   if "cursor_pos" == "column" then goto index 1057;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1089;
   if "cursor_hinge_height" == "row" then goto index 1087;
   if "cursor_grip_height" == "row" then goto index 1062;
   show serial_dialog "hanoi_space";
   goto index 1114;
   if "cursor_value" == 0 then goto index 1085;
   if "cursor_value" == 1 then goto index 1083;
   if "cursor_value" == 2 then goto index 1081;
   if "cursor_value" == 3 then goto index 1079;
   if "cursor_value" == 4 then goto index 1077;
   if "cursor_value" == 5 then goto index 1075;
   if "cursor_value" == 6 then goto index 1073;
   if "cursor_value" == 7 then goto index 1071;
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1114;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1114;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1113;
   if "curr_plate" == 1 then goto index 1111;
   if "curr_plate" == 2 then goto index 1109;
   if "curr_plate" == 3 then goto index 1107;
   if "curr_plate" == 4 then goto index 1105;
   if "curr_plate" == 5 then goto index 1103;
   if "curr_plate" == 6 then goto index 1101;
   if "curr_plate" == 7 then goto index 1099;
   goto index 1114;
   show serial_dialog "hanoi_plate_7";
   goto index 1114;
   show serial_dialog "hanoi_plate_6";
   goto index 1114;
   show serial_dialog "hanoi_plate_5";
   goto index 1114;
   show serial_dialog "hanoi_plate_4";
   goto index 1114;
   show serial_dialog "hanoi_plate_3";
   goto index 1114;
   show serial_dialog "hanoi_plate_2";
   goto index 1114;
   show serial_dialog "hanoi_plate_1";
   goto index 1114;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1157;
   if "cursor_pos" == "column" then goto index 1124;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1156;
   if "cursor_hinge_height" == "row" then goto index 1154;
   if "cursor_grip_height" == "row" then goto index 1129;
   show serial_dialog "hanoi_space";
   goto index 1181;
   if "cursor_value" == 0 then goto index 1152;
   if "cursor_value" == 1 then goto index 1150;
   if "cursor_value" == 2 then goto index 1148;
   if "cursor_value" == 3 then goto index 1146;
   if "cursor_value" == 4 then goto index 1144;
   if "cursor_value" == 5 then goto index 1142;
   if "cursor_value" == 6 then goto index 1140;
   if "cursor_value" == 7 then goto index 1138;
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1181;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1181;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1180;
   if "curr_plate" == 1 then goto index 1178;
   if "curr_plate" == 2 then goto index 1176;
   if "curr_plate" == 3 then goto index 1174;
   if "curr_plate" == 4 then goto index 1172;
   if "curr_plate" == 5 then goto index 1170;
   if "curr_plate" == 6 then goto index 1168;
   if "curr_plate" == 7 then goto index 1166;
   goto index 1181;
   show serial_dialog "hanoi_plate_7";
   goto index 1181;
   show serial_dialog "hanoi_plate_6";
   goto index 1181;
   show serial_dialog "hanoi_plate_5";
   goto index 1181;
   show serial_dialog "hanoi_plate_4";
   goto index 1181;
   show serial_dialog "hanoi_plate_3";
   goto index 1181;
   show serial_dialog "hanoi_plate_2";
   goto index 1181;
   show serial_dialog "hanoi_plate_1";
   goto index 1181;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1219;
   if "cursor_pos" == "column" then goto index 1186;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1218;
   if "cursor_hinge_height" == "row" then goto index 1216;
   if "cursor_grip_height" == "row" then goto index 1191;
   show serial_dialog "hanoi_space";
   goto index 1243;
   if "cursor_value" == 0 then goto index 1214;
   if "cursor_value" == 1 then goto index 1212;
   if "cursor_value" == 2 then goto index 1210;
   if "cursor_value" == 3 then goto index 1208;
   if "cursor_value" == 4 then goto index 1206;
   if "cursor_value" == 5 then goto index 1204;
   if "cursor_value" == 6 then goto index 1202;
   if "cursor_value" == 7 then goto index 1200;
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1243;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1243;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1242;
   if "curr_plate" == 1 then goto index 1240;
   if "curr_plate" == 2 then goto index 1238;
   if "curr_plate" == 3 then goto index 1236;
   if "curr_plate" == 4 then goto index 1234;
   if "curr_plate" == 5 then goto index 1232;
   if "curr_plate" == 6 then goto index 1230;
   if "curr_plate" == 7 then goto index 1228;
   goto index 1243;
   show serial_dialog "hanoi_plate_7";
   goto index 1243;
   show serial_dialog "hanoi_plate_6";
   goto index 1243;
   show serial_dialog "hanoi_plate_5";
   goto index 1243;
   show serial_dialog "hanoi_plate_4";
   goto index 1243;
   show serial_dialog "hanoi_plate_3";
   goto index 1243;
   show serial_dialog "hanoi_plate_2";
   goto index 1243;
   show serial_dialog "hanoi_plate_1";
   goto index 1243;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1281;
   if "cursor_pos" == "column" then goto index 1248;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1280;
   if "cursor_hinge_height" == "row" then goto index 1278;
   if "cursor_grip_height" == "row" then goto index 1253;
   show serial_dialog "hanoi_space";
   goto index 1305;
   if "cursor_value" == 0 then goto index 1276;
   if "cursor_value" == 1 then goto index 1274;
   if "cursor_value" == 2 then goto index 1272;
   if "cursor_value" == 3 then goto index 1270;
   if "cursor_value" == 4 then goto index 1268;
   if "cursor_value" == 5 then goto index 1266;
   if "cursor_value" == 6 then goto index 1264;
   if "cursor_value" == 7 then goto index 1262;
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1305;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1305;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1304;
   if "curr_plate" == 1 then goto index 1302;
   if "curr_plate" == 2 then goto index 1300;
   if "curr_plate" == 3 then goto index 1298;
   if "curr_plate" == 4 then goto index 1296;
   if "curr_plate" == 5 then goto index 1294;
   if "curr_plate" == 6 then goto index 1292;
   if "curr_plate" == 7 then goto index 1290;
   goto index 1305;
   show serial_dialog "hanoi_plate_7";
   goto index 1305;
   show serial_dialog "hanoi_plate_6";
   goto index 1305;
   show serial_dialog "hanoi_plate_5";
   goto index 1305;
   show serial_dialog "hanoi_plate_4";
   goto index 1305;
   show serial_dialog "hanoi_plate_3";
   goto index 1305;
   show serial_dialog "hanoi_plate_2";
   goto index 1305;
   show serial_dialog "hanoi_plate_1";
   goto index 1305;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1348;
   if "cursor_pos" == "column" then goto index 1315;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1347;
   if "cursor_hinge_height" == "row" then goto index 1345;
   if "cursor_grip_height" == "row" then goto index 1320;
   show serial_dialog "hanoi_space";
   goto index 1372;
   if "cursor_value" == 0 then goto index 1343;
   if "cursor_value" == 1 then goto index 1341;
   if "cursor_value" == 2 then goto index 1339;
   if "cursor_value" == 3 then goto index 1337;
   if "cursor_value" == 4 then goto index 1335;
   if "cursor_value" == 5 then goto index 1333;
   if "cursor_value" == 6 then goto index 1331;
   if "cursor_value" == 7 then goto index 1329;
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1372;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1372;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1371;
   if "curr_plate" == 1 then goto index 1369;
   if "curr_plate" == 2 then goto index 1367;
   if "curr_plate" == 3 then goto index 1365;
   if "curr_plate" == 4 then goto index 1363;
   if "curr_plate" == 5 then goto index 1361;
   if "curr_plate" == 6 then goto index 1359;
   if "curr_plate" == 7 then goto index 1357;
   goto index 1372;
   show serial_dialog "hanoi_plate_7";
   goto index 1372;
   show serial_dialog "hanoi_plate_6";
   goto index 1372;
   show serial_dialog "hanoi_plate_5";
   goto index 1372;
   show serial_dialog "hanoi_plate_4";
   goto index 1372;
   show serial_dialog "hanoi_plate_3";
   goto index 1372;
   show serial_dialog "hanoi_plate_2";
   goto index 1372;
   show serial_dialog "hanoi_plate_1";
   goto index 1372;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1410;
   if "cursor_pos" == "column" then goto index 1377;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1409;
   if "cursor_hinge_height" == "row" then goto index 1407;
   if "cursor_grip_height" == "row" then goto index 1382;
   show serial_dialog "hanoi_space";
   goto index 1434;
   if "cursor_value" == 0 then goto index 1405;
   if "cursor_value" == 1 then goto index 1403;
   if "cursor_value" == 2 then goto index 1401;
   if "cursor_value" == 3 then goto index 1399;
   if "cursor_value" == 4 then goto index 1397;
   if "cursor_value" == 5 then goto index 1395;
   if "cursor_value" == 6 then goto index 1393;
   if "cursor_value" == 7 then goto index 1391;
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1434;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1434;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1433;
   if "curr_plate" == 1 then goto index 1431;
   if "curr_plate" == 2 then goto index 1429;
   if "curr_plate" == 3 then goto index 1427;
   if "curr_plate" == 4 then goto index 1425;
   if "curr_plate" == 5 then goto index 1423;
   if "curr_plate" == 6 then goto index 1421;
   if "curr_plate" == 7 then goto index 1419;
   goto index 1434;
   show serial_dialog "hanoi_plate_7";
   goto index 1434;
   show serial_dialog "hanoi_plate_6";
   goto index 1434;
   show serial_dialog "hanoi_plate_5";
   goto index 1434;
   show serial_dialog "hanoi_plate_4";
   goto index 1434;
   show serial_dialog "hanoi_plate_3";
   goto index 1434;
   show serial_dialog "hanoi_plate_2";
   goto index 1434;
   show serial_dialog "hanoi_plate_1";
   goto index 1434;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1472;
   if "cursor_pos" == "column" then goto index 1439;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1471;
   if "cursor_hinge_height" == "row" then goto index 1469;
   if "cursor_grip_height" == "row" then goto index 1444;
   show serial_dialog "hanoi_space";
   goto index 1496;
   if "cursor_value" == 0 then goto index 1467;
   if "cursor_value" == 1 then goto index 1465;
   if "cursor_value" == 2 then goto index 1463;
   if "cursor_value" == 3 then goto index 1461;
   if "cursor_value" == 4 then goto index 1459;
   if "cursor_value" == 5 then goto index 1457;
   if "cursor_value" == 6 then goto index 1455;
   if "cursor_value" == 7 then goto index 1453;
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1496;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1496;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1495;
   if "curr_plate" == 1 then goto index 1493;
   if "curr_plate" == 2 then goto index 1491;
   if "curr_plate" == 3 then goto index 1489;
   if "curr_plate" == 4 then goto index 1487;
   if "curr_plate" == 5 then goto index 1485;
   if "curr_plate" == 6 then goto index 1483;
   if "curr_plate" == 7 then goto index 1481;
   goto index 1496;
   show serial_dialog "hanoi_plate_7";
   goto index 1496;
   show serial_dialog "hanoi_plate_6";
   goto index 1496;
   show serial_dialog "hanoi_plate_5";
   goto index 1496;
   show serial_dialog "hanoi_plate_4";
   goto index 1496;
   show serial_dialog "hanoi_plate_3";
   goto index 1496;
   show serial_dialog "hanoi_plate_2";
   goto index 1496;
   show serial_dialog "hanoi_plate_1";
   goto index 1496;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1539;
   if "cursor_pos" == "column" then goto index 1506;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1538;
   if "cursor_hinge_height" == "row" then goto index 1536;
   if "cursor_grip_height" == "row" then goto index 1511;
   show serial_dialog "hanoi_space";
   goto index 1563;
   if "cursor_value" == 0 then goto index 1534;
   if "cursor_value" == 1 then goto index 1532;
   if "cursor_value" == 2 then goto index 1530;
   if "cursor_value" == 3 then goto index 1528;
   if "cursor_value" == 4 then goto index 1526;
   if "cursor_value" == 5 then goto index 1524;
   if "cursor_value" == 6 then goto index 1522;
   if "cursor_value" == 7 then goto index 1520;
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1563;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1563;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1562;
   if "curr_plate" == 1 then goto index 1560;
   if "curr_plate" == 2 then goto index 1558;
   if "curr_plate" == 3 then goto index 1556;
   if "curr_plate" == 4 then goto index 1554;
   if "curr_plate" == 5 then goto index 1552;
   if "curr_plate" == 6 then goto index 1550;
   if "curr_plate" == 7 then goto index 1548;
   goto index 1563;
   show serial_dialog "hanoi_plate_7";
   goto index 1563;
   show serial_dialog "hanoi_plate_6";
   goto index 1563;
   show serial_dialog "hanoi_plate_5";
   goto index 1563;
   show serial_dialog "hanoi_plate_4";
   goto index 1563;
   show serial_dialog "hanoi_plate_3";
   goto index 1563;
   show serial_dialog "hanoi_plate_2";
   goto index 1563;
   show serial_dialog "hanoi_plate_1";
   goto index 1563;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1601;
   if "cursor_pos" == "column" then goto index 1568;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1600;
   if "cursor_hinge_height" == "row" then goto index 1598;
   if "cursor_grip_height" == "row" then goto index 1573;
   show serial_dialog "hanoi_space";
   goto index 1625;
   if "cursor_value" == 0 then goto index 1596;
   if "cursor_value" == 1 then goto index 1594;
   if "cursor_value" == 2 then goto index 1592;
   if "cursor_value" == 3 then goto index 1590;
   if "cursor_value" == 4 then goto index 1588;
   if "cursor_value" == 5 then goto index 1586;
   if "cursor_value" == 6 then goto index 1584;
   if "cursor_value" == 7 then goto index 1582;
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1625;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1625;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1624;
   if "curr_plate" == 1 then goto index 1622;
   if "curr_plate" == 2 then goto index 1620;
   if "curr_plate" == 3 then goto index 1618;
   if "curr_plate" == 4 then goto index 1616;
   if "curr_plate" == 5 then goto index 1614;
   if "curr_plate" == 6 then goto index 1612;
   if "curr_plate" == 7 then goto index 1610;
   goto index 1625;
   show serial_dialog "hanoi_plate_7";
   goto index 1625;
   show serial_dialog "hanoi_plate_6";
   goto index 1625;
   show serial_dialog "hanoi_plate_5";
   goto index 1625;
   show serial_dialog "hanoi_plate_4";
   goto index 1625;
   show serial_dialog "hanoi_plate_3";
   goto index 1625;
   show serial_dialog "hanoi_plate_2";
   goto index 1625;
   show serial_dialog "hanoi_plate_1";
   goto index 1625;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1663;
   if "cursor_pos" == "column" then goto index 1630;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1662;
   if "cursor_hinge_height" == "row" then goto index 1660;
   if "cursor_grip_height" == "row" then goto index 1635;
   show serial_dialog "hanoi_space";
   goto index 1687;
   if "cursor_value" == 0 then goto index 1658;
   if "cursor_value" == 1 then goto index 1656;
   if "cursor_value" == 2 then goto index 1654;
   if "cursor_value" == 3 then goto index 1652;
   if "cursor_value" == 4 then goto index 1650;
   if "cursor_value" == 5 then goto index 1648;
   if "cursor_value" == 6 then goto index 1646;
   if "cursor_value" == 7 then goto index 1644;
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1687;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1687;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1686;
   if "curr_plate" == 1 then goto index 1684;
   if "curr_plate" == 2 then goto index 1682;
   if "curr_plate" == 3 then goto index 1680;
   if "curr_plate" == 4 then goto index 1678;
   if "curr_plate" == 5 then goto index 1676;
   if "curr_plate" == 6 then goto index 1674;
   if "curr_plate" == 7 then goto index 1672;
   goto index 1687;
   show serial_dialog "hanoi_plate_7";
   goto index 1687;
   show serial_dialog "hanoi_plate_6";
   goto index 1687;
   show serial_dialog "hanoi_plate_5";
   goto index 1687;
   show serial_dialog "hanoi_plate_4";
   goto index 1687;
   show serial_dialog "hanoi_plate_3";
   goto index 1687;
   show serial_dialog "hanoi_plate_2";
   goto index 1687;
   show serial_dialog "hanoi_plate_1";
   goto index 1687;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1713;
   if "curr_plate" == 1 then goto index 1711;
   if "curr_plate" == 2 then goto index 1709;
   if "curr_plate" == 3 then goto index 1707;
   if "curr_plate" == 4 then goto index 1705;
   if "curr_plate" == 5 then goto index 1703;
   if "curr_plate" == 6 then goto index 1701;
   if "curr_plate" == 7 then goto index 1699;
   goto index 1714;
   show serial_dialog "hanoi_plate_7";
   goto index 1714;
   show serial_dialog "hanoi_plate_6";
   goto index 1714;
   show serial_dialog "hanoi_plate_5";
   goto index 1714;
   show serial_dialog "hanoi_plate_4";
   goto index 1714;
   show serial_dialog "hanoi_plate_3";
   goto index 1714;
   show serial_dialog "hanoi_plate_2";
   goto index 1714;
   show serial_dialog "hanoi_plate_1";
   goto index 1714;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1738;
   if "curr_plate" == 1 then goto index 1736;
   if "curr_plate" == 2 then goto index 1734;
   if "curr_plate" == 3 then goto index 1732;
   if "curr_plate" == 4 then goto index 1730;
   if "curr_plate" == 5 then goto index 1728;
   if "curr_plate" == 6 then goto index 1726;
   if "curr_plate" == 7 then goto index 1724;
   goto index 1739;
   show serial_dialog "hanoi_plate_7";
   goto index 1739;
   show serial_dialog "hanoi_plate_6";
   goto index 1739;
   show serial_dialog "hanoi_plate_5";
   goto index 1739;
   show serial_dialog "hanoi_plate_4";
   goto index 1739;
   show serial_dialog "hanoi_plate_3";
   goto index 1739;
   show serial_dialog "hanoi_plate_2";
   goto index 1739;
   show serial_dialog "hanoi_plate_1";
   goto index 1739;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1763;
   if "curr_plate" == 1 then goto index 1761;
   if "curr_plate" == 2 then goto index 1759;
   if "curr_plate" == 3 then goto index 1757;
   if "curr_plate" == 4 then goto index 1755;
   if "curr_plate" == 5 then goto index 1753;
   if "curr_plate" == 6 then goto index 1751;
   if "curr_plate" == 7 then goto index 1749;
   goto index 1764;
   show serial_dialog "hanoi_plate_7";
   goto index 1764;
   show serial_dialog "hanoi_plate_6";
   goto index 1764;
   show serial_dialog "hanoi_plate_5";
   goto index 1764;
   show serial_dialog "hanoi_plate_4";
   goto index 1764;
   show serial_dialog "hanoi_plate_3";
   goto index 1764;
   show serial_dialog "hanoi_plate_2";
   goto index 1764;
   show serial_dialog "hanoi_plate_1";
   goto index 1764;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1772;
   if "hanoi_draw_help" then goto index 1769;
   goto index 1808;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1808;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1786;
   goto index 1787;
   delete command "WIN";
   if !"hanoi_won" then goto index 1806;
   if !"ch2-carrying-plate" then goto index 1791;
   if !"ch2-installed-plate" then goto index 1791;
   goto index 1807;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1795;
   goto index 1796;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1804;
   if "hanoi_move_count" == 69 then goto index 1802;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1807;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_move_2" {
   "cursor_pos" = 2;
   if "cursor_value" == 0 then goto index 181;
   if "cursor_pos" == 1 then goto index 37;
   if "cursor_pos" == 2 then goto index 21;
   if "cursor_pos" == 3 then goto index 5;
   if "array3_length" == 0 then goto index 20;
   if "array3_length" == 1 then goto index 19;
   if "array3_length" == 2 then goto index 18;
   if "array3_length" == 3 then goto index 17;
   if "array3_length" == 4 then goto index 16;
   if "array3_length" == 5 then goto index 15;
   if "array3_length" == 6 then goto index 14;
   if "array3_length" == 7 then goto index 13;
   "checked_value" = "array3_7";
   "checked_value" = "array3_6";
   "checked_value" = "array3_5";
   "checked_value" = "array3_4";
   "checked_value" = "array3_3";
   "checked_value" = "array3_2";
   "checked_value" = "array3_1";
   "checked_value" = 0;
   if "array2_length" == 0 then goto index 36;
   if "array2_length" == 1 then goto index 35;
   if "array2_length" == 2 then goto index 34;
   if "array2_length" == 3 then goto index 33;
   if "array2_length" == 4 then goto index 32;
   if "array2_length" == 5 then goto index 31;
   if "array2_length" == 6 then goto index 30;
   if "array2_length" == 7 then goto index 29;
   "checked_value" = "array2_7";
   "checked_value" = "array2_6";
   "checked_value" = "array2_5";
   "checked_value" = "array2_4";
   "checked_value" = "array2_3";
   "checked_value" = "array2_2";
   "checked_value" = "array2_1";
   "checked_value" = 0;
   if "array1_length" == 0 then goto index 60;
   if "array1_length" == 1 then goto index 58;
   if "array1_length" == 2 then goto index 56;
   if "array1_length" == 3 then goto index 54;
   if "array1_length" == 4 then goto index 52;
   if "array1_length" == 5 then goto index 50;
   if "array1_length" == 6 then goto index 48;
   if "array1_length" == 7 then goto index 46;
   goto index 61;
   "checked_value" = "array1_7";
   goto index 61;
   "checked_value" = "array1_6";
   goto index 61;
   "checked_value" = "array1_5";
   goto index 61;
   "checked_value" = "array1_4";
   goto index 61;
   "checked_value" = "array1_3";
   goto index 61;
   "checked_value" = "array1_2";
   goto index 61;
   "checked_value" = "array1_1";
   goto index 61;
   "checked_value" = 0;
   if "checked_value" == 0 then goto index 67;
   if "checked_value" > "cursor_value" then goto index 65;
   "can_drop" = false;
   goto index 68;
   "can_drop" = true;
   goto index 68;
   "can_drop" = true;
   if "can_drop" then goto index 70;
   "hanoi_warning_size" = true;
   if "cursor_pos" == 1 then goto index 145;
   if "cursor_pos" == 2 then goto index 109;
   if "cursor_pos" == 3 then goto index 73;
   if "cursor_value" == 0 then goto index 108;
   if "array3_length" >= 7 then goto index 106;
   if "array3_length" == 6 then goto index 101;
   if "array3_length" == 5 then goto index 98;
   if "array3_length" == 4 then goto index 95;
   if "array3_length" == 3 then goto index 92;
   if "array3_length" == 2 then goto index 89;
   if "array3_length" == 1 then goto index 86;
   if "array3_length" == 0 then goto index 83;
   goto index 103;
   "array3_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_7" = "cursor_value";
   "cursor_value" = 0;
   "array3_length" += 1;
   "hanoi_move_count" += 1;
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 144;
   if "array2_length" >= 7 then goto index 142;
   if "array2_length" == 6 then goto index 137;
   if "array2_length" == 5 then goto index 134;
   if "array2_length" == 4 then goto index 131;
   if "array2_length" == 3 then goto index 128;
   if "array2_length" == 2 then goto index 125;
   if "array2_length" == 1 then goto index 122;
   if "array2_length" == 0 then goto index 119;
   goto index 139;
   "array2_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_7" = "cursor_value";
   "cursor_value" = 0;
   "array2_length" += 1;
   "hanoi_move_count" += 1;
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 180;
   if "array1_length" >= 7 then goto index 178;
   if "array1_length" == 6 then goto index 173;
   if "array1_length" == 5 then goto index 170;
   if "array1_length" == 4 then goto index 167;
   if "array1_length" == 3 then goto index 164;
   if "array1_length" == 2 then goto index 161;
   if "array1_length" == 1 then goto index 158;
   if "array1_length" == 0 then goto index 155;
   goto index 175;
   "array1_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_7" = "cursor_value";
   "cursor_value" = 0;
   "array1_length" += 1;
   "hanoi_move_count" += 1;
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_pos" == 1 then goto index 252;
   if "cursor_pos" == 2 then goto index 218;
   if "cursor_pos" == 3 then goto index 184;
   if "array3_length" > 0 then goto index 185;
   if "array3_length" == 0 then goto index 217;
   if "array3_length" == 7 then goto index 212;
   if "array3_length" == 6 then goto index 209;
   if "array3_length" == 5 then goto index 206;
   if "array3_length" == 4 then goto index 203;
   if "array3_length" == 3 then goto index 200;
   if "array3_length" == 2 then goto index 197;
   if "array3_length" == 1 then goto index 194;
   goto index 214;
   "cursor_value" = "array3_1";
   "array3_1" = 0;
   goto index 214;
   "cursor_value" = "array3_2";
   "array3_2" = 0;
   goto index 214;
   "cursor_value" = "array3_3";
   "array3_3" = 0;
   goto index 214;
   "cursor_value" = "array3_4";
   "array3_4" = 0;
   goto index 214;
   "cursor_value" = "array3_5";
   "array3_5" = 0;
   goto index 214;
   "cursor_value" = "array3_6";
   "array3_6" = 0;
   goto index 214;
   "cursor_value" = "array3_7";
   "array3_7" = 0;
   "array3_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 218;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array2_length" > 0 then goto index 219;
   if "array2_length" == 0 then goto index 251;
   if "array2_length" == 7 then goto index 246;
   if "array2_length" == 6 then goto index 243;
   if "array2_length" == 5 then goto index 240;
   if "array2_length" == 4 then goto index 237;
   if "array2_length" == 3 then goto index 234;
   if "array2_length" == 2 then goto index 231;
   if "array2_length" == 1 then goto index 228;
   goto index 248;
   "cursor_value" = "array2_1";
   "array2_1" = 0;
   goto index 248;
   "cursor_value" = "array2_2";
   "array2_2" = 0;
   goto index 248;
   "cursor_value" = "array2_3";
   "array2_3" = 0;
   goto index 248;
   "cursor_value" = "array2_4";
   "array2_4" = 0;
   goto index 248;
   "cursor_value" = "array2_5";
   "array2_5" = 0;
   goto index 248;
   "cursor_value" = "array2_6";
   "array2_6" = 0;
   goto index 248;
   "cursor_value" = "array2_7";
   "array2_7" = 0;
   "array2_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 252;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array1_length" > 0 then goto index 254;
   goto index 287;
   if "array1_length" == 0 then goto index 286;
   if "array1_length" == 7 then goto index 281;
   if "array1_length" == 6 then goto index 278;
   if "array1_length" == 5 then goto index 275;
   if "array1_length" == 4 then goto index 272;
   if "array1_length" == 3 then goto index 269;
   if "array1_length" == 2 then goto index 266;
   if "array1_length" == 1 then goto index 263;
   goto index 283;
   "cursor_value" = "array1_1";
   "array1_1" = 0;
   goto index 283;
   "cursor_value" = "array1_2";
   "array1_2" = 0;
   goto index 283;
   "cursor_value" = "array1_3";
   "array1_3" = 0;
   goto index 283;
   "cursor_value" = "array1_4";
   "array1_4" = 0;
   goto index 283;
   "cursor_value" = "array1_5";
   "array1_5" = 0;
   goto index 283;
   "cursor_value" = "array1_6";
   "array1_6" = 0;
   goto index 283;
   "cursor_value" = "array1_7";
   "array1_7" = 0;
   "array1_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 287;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 6 then goto index 289;
   goto index 290;
   "hanoi_won" = true;
   if "cursor_pos" == 1 then goto index 298;
   if "cursor_pos" == 2 then goto index 296;
   if "cursor_pos" == 3 then goto index 294;
   goto index 299;
   "cursor_grip_height" = "array3_length";
   goto index 299;
   "cursor_grip_height" = "array2_length";
   goto index 299;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 315;
   "column" = 1;
   if "column" <= 3 then goto index 309;
   goto index 324;
   if "cursor_pos" == "column" then goto index 312;
   show serial_dialog "hanoi_space";
   goto index 313;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 307;
   if "cursor_pos" == 1 then goto index 323;
   if "cursor_pos" == 2 then goto index 321;
   if "cursor_pos" == 3 then goto index 319;
   goto index 324;
   show serial_dialog "hanoi_won_message3a";
   goto index 324;
   show serial_dialog "hanoi_won_message2a";
   goto index 324;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 405;
   if "hanoi_won" then goto index 393;
   "column" = 1;
   if "column" <= 3 then goto index 331;
   goto index 407;
   if "curr_plate" != 0 then goto index 367;
   if "cursor_pos" == "column" then goto index 334;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 366;
   if "cursor_hinge_height" == "row" then goto index 364;
   if "cursor_grip_height" == "row" then goto index 339;
   show serial_dialog "hanoi_space";
   goto index 391;
   if "cursor_value" == 0 then goto index 362;
   if "cursor_value" == 1 then goto index 360;
   if "cursor_value" == 2 then goto index 358;
   if "cursor_value" == 3 then goto index 356;
   if "cursor_value" == 4 then goto index 354;
   if "cursor_value" == 5 then goto index 352;
   if "cursor_value" == 6 then goto index 350;
   if "cursor_value" == 7 then goto index 348;
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 391;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 391;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 390;
   if "curr_plate" == 1 then goto index 388;
   if "curr_plate" == 2 then goto index 386;
   if "curr_plate" == 3 then goto index 384;
   if "curr_plate" == 4 then goto index 382;
   if "curr_plate" == 5 then goto index 380;
   if "curr_plate" == 6 then goto index 378;
   if "curr_plate" == 7 then goto index 376;
   goto index 391;
   show serial_dialog "hanoi_plate_7";
   goto index 391;
   show serial_dialog "hanoi_plate_6";
   goto index 391;
   show serial_dialog "hanoi_plate_5";
   goto index 391;
   show serial_dialog "hanoi_plate_4";
   goto index 391;
   show serial_dialog "hanoi_plate_3";
   goto index 391;
   show serial_dialog "hanoi_plate_2";
   goto index 391;
   show serial_dialog "hanoi_plate_1";
   goto index 391;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 329;
   if "cursor_pos" == 1 then goto index 404;
   if "cursor_pos" == 2 then goto index 403;
   if "cursor_pos" == 3 then goto index 396;
   if "hanoi_move_count" < 100 then goto index 402;
   if "hanoi_move_count" < 1000 then goto index 400;
   show serial_dialog "hanoi_won_message3b4";
   goto index 405;
   show serial_dialog "hanoi_won_message3b3";
   goto index 405;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 412;
   goto index 474;
   if "curr_plate" != 0 then goto index 448;
   if "cursor_pos" == "column" then goto index 415;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 447;
   if "cursor_hinge_height" == "row" then goto index 445;
   if "cursor_grip_height" == "row" then goto index 420;
   show serial_dialog "hanoi_space";
   goto index 472;
   if "cursor_value" == 0 then goto index 443;
   if "cursor_value" == 1 then goto index 441;
   if "cursor_value" == 2 then goto index 439;
   if "cursor_value" == 3 then goto index 437;
   if "cursor_value" == 4 then goto index 435;
   if "cursor_value" == 5 then goto index 433;
   if "cursor_value" == 6 then goto index 431;
   if "cursor_value" == 7 then goto index 429;
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 472;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 472;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 471;
   if "curr_plate" == 1 then goto index 469;
   if "curr_plate" == 2 then goto index 467;
   if "curr_plate" == 3 then goto index 465;
   if "curr_plate" == 4 then goto index 463;
   if "curr_plate" == 5 then goto index 461;
   if "curr_plate" == 6 then goto index 459;
   if "curr_plate" == 7 then goto index 457;
   goto index 472;
   show serial_dialog "hanoi_plate_7";
   goto index 472;
   show serial_dialog "hanoi_plate_6";
   goto index 472;
   show serial_dialog "hanoi_plate_5";
   goto index 472;
   show serial_dialog "hanoi_plate_4";
   goto index 472;
   show serial_dialog "hanoi_plate_3";
   goto index 472;
   show serial_dialog "hanoi_plate_2";
   goto index 472;
   show serial_dialog "hanoi_plate_1";
   goto index 472;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 410;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 479;
   goto index 541;
   if "curr_plate" != 0 then goto index 515;
   if "cursor_pos" == "column" then goto index 482;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 514;
   if "cursor_hinge_height" == "row" then goto index 512;
   if "cursor_grip_height" == "row" then goto index 487;
   show serial_dialog "hanoi_space";
   goto index 539;
   if "cursor_value" == 0 then goto index 510;
   if "cursor_value" == 1 then goto index 508;
   if "cursor_value" == 2 then goto index 506;
   if "cursor_value" == 3 then goto index 504;
   if "cursor_value" == 4 then goto index 502;
   if "cursor_value" == 5 then goto index 500;
   if "cursor_value" == 6 then goto index 498;
   if "cursor_value" == 7 then goto index 496;
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 539;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 539;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 538;
   if "curr_plate" == 1 then goto index 536;
   if "curr_plate" == 2 then goto index 534;
   if "curr_plate" == 3 then goto index 532;
   if "curr_plate" == 4 then goto index 530;
   if "curr_plate" == 5 then goto index 528;
   if "curr_plate" == 6 then goto index 526;
   if "curr_plate" == 7 then goto index 524;
   goto index 539;
   show serial_dialog "hanoi_plate_7";
   goto index 539;
   show serial_dialog "hanoi_plate_6";
   goto index 539;
   show serial_dialog "hanoi_plate_5";
   goto index 539;
   show serial_dialog "hanoi_plate_4";
   goto index 539;
   show serial_dialog "hanoi_plate_3";
   goto index 539;
   show serial_dialog "hanoi_plate_2";
   goto index 539;
   show serial_dialog "hanoi_plate_1";
   goto index 539;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 477;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 584;
   if "cursor_pos" == "column" then goto index 551;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 583;
   if "cursor_hinge_height" == "row" then goto index 581;
   if "cursor_grip_height" == "row" then goto index 556;
   show serial_dialog "hanoi_space";
   goto index 608;
   if "cursor_value" == 0 then goto index 579;
   if "cursor_value" == 1 then goto index 577;
   if "cursor_value" == 2 then goto index 575;
   if "cursor_value" == 3 then goto index 573;
   if "cursor_value" == 4 then goto index 571;
   if "cursor_value" == 5 then goto index 569;
   if "cursor_value" == 6 then goto index 567;
   if "cursor_value" == 7 then goto index 565;
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 608;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 608;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 607;
   if "curr_plate" == 1 then goto index 605;
   if "curr_plate" == 2 then goto index 603;
   if "curr_plate" == 3 then goto index 601;
   if "curr_plate" == 4 then goto index 599;
   if "curr_plate" == 5 then goto index 597;
   if "curr_plate" == 6 then goto index 595;
   if "curr_plate" == 7 then goto index 593;
   goto index 608;
   show serial_dialog "hanoi_plate_7";
   goto index 608;
   show serial_dialog "hanoi_plate_6";
   goto index 608;
   show serial_dialog "hanoi_plate_5";
   goto index 608;
   show serial_dialog "hanoi_plate_4";
   goto index 608;
   show serial_dialog "hanoi_plate_3";
   goto index 608;
   show serial_dialog "hanoi_plate_2";
   goto index 608;
   show serial_dialog "hanoi_plate_1";
   goto index 608;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 646;
   if "cursor_pos" == "column" then goto index 613;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 645;
   if "cursor_hinge_height" == "row" then goto index 643;
   if "cursor_grip_height" == "row" then goto index 618;
   show serial_dialog "hanoi_space";
   goto index 670;
   if "cursor_value" == 0 then goto index 641;
   if "cursor_value" == 1 then goto index 639;
   if "cursor_value" == 2 then goto index 637;
   if "cursor_value" == 3 then goto index 635;
   if "cursor_value" == 4 then goto index 633;
   if "cursor_value" == 5 then goto index 631;
   if "cursor_value" == 6 then goto index 629;
   if "cursor_value" == 7 then goto index 627;
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 670;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 670;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 669;
   if "curr_plate" == 1 then goto index 667;
   if "curr_plate" == 2 then goto index 665;
   if "curr_plate" == 3 then goto index 663;
   if "curr_plate" == 4 then goto index 661;
   if "curr_plate" == 5 then goto index 659;
   if "curr_plate" == 6 then goto index 657;
   if "curr_plate" == 7 then goto index 655;
   goto index 670;
   show serial_dialog "hanoi_plate_7";
   goto index 670;
   show serial_dialog "hanoi_plate_6";
   goto index 670;
   show serial_dialog "hanoi_plate_5";
   goto index 670;
   show serial_dialog "hanoi_plate_4";
   goto index 670;
   show serial_dialog "hanoi_plate_3";
   goto index 670;
   show serial_dialog "hanoi_plate_2";
   goto index 670;
   show serial_dialog "hanoi_plate_1";
   goto index 670;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 708;
   if "cursor_pos" == "column" then goto index 675;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 707;
   if "cursor_hinge_height" == "row" then goto index 705;
   if "cursor_grip_height" == "row" then goto index 680;
   show serial_dialog "hanoi_space";
   goto index 732;
   if "cursor_value" == 0 then goto index 703;
   if "cursor_value" == 1 then goto index 701;
   if "cursor_value" == 2 then goto index 699;
   if "cursor_value" == 3 then goto index 697;
   if "cursor_value" == 4 then goto index 695;
   if "cursor_value" == 5 then goto index 693;
   if "cursor_value" == 6 then goto index 691;
   if "cursor_value" == 7 then goto index 689;
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 732;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 732;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 731;
   if "curr_plate" == 1 then goto index 729;
   if "curr_plate" == 2 then goto index 727;
   if "curr_plate" == 3 then goto index 725;
   if "curr_plate" == 4 then goto index 723;
   if "curr_plate" == 5 then goto index 721;
   if "curr_plate" == 6 then goto index 719;
   if "curr_plate" == 7 then goto index 717;
   goto index 732;
   show serial_dialog "hanoi_plate_7";
   goto index 732;
   show serial_dialog "hanoi_plate_6";
   goto index 732;
   show serial_dialog "hanoi_plate_5";
   goto index 732;
   show serial_dialog "hanoi_plate_4";
   goto index 732;
   show serial_dialog "hanoi_plate_3";
   goto index 732;
   show serial_dialog "hanoi_plate_2";
   goto index 732;
   show serial_dialog "hanoi_plate_1";
   goto index 732;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 775;
   if "cursor_pos" == "column" then goto index 742;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 774;
   if "cursor_hinge_height" == "row" then goto index 772;
   if "cursor_grip_height" == "row" then goto index 747;
   show serial_dialog "hanoi_space";
   goto index 799;
   if "cursor_value" == 0 then goto index 770;
   if "cursor_value" == 1 then goto index 768;
   if "cursor_value" == 2 then goto index 766;
   if "cursor_value" == 3 then goto index 764;
   if "cursor_value" == 4 then goto index 762;
   if "cursor_value" == 5 then goto index 760;
   if "cursor_value" == 6 then goto index 758;
   if "cursor_value" == 7 then goto index 756;
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 799;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 799;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 798;
   if "curr_plate" == 1 then goto index 796;
   if "curr_plate" == 2 then goto index 794;
   if "curr_plate" == 3 then goto index 792;
   if "curr_plate" == 4 then goto index 790;
   if "curr_plate" == 5 then goto index 788;
   if "curr_plate" == 6 then goto index 786;
   if "curr_plate" == 7 then goto index 784;
   goto index 799;
   show serial_dialog "hanoi_plate_7";
   goto index 799;
   show serial_dialog "hanoi_plate_6";
   goto index 799;
   show serial_dialog "hanoi_plate_5";
   goto index 799;
   show serial_dialog "hanoi_plate_4";
   goto index 799;
   show serial_dialog "hanoi_plate_3";
   goto index 799;
   show serial_dialog "hanoi_plate_2";
   goto index 799;
   show serial_dialog "hanoi_plate_1";
   goto index 799;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 837;
   if "cursor_pos" == "column" then goto index 804;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 836;
   if "cursor_hinge_height" == "row" then goto index 834;
   if "cursor_grip_height" == "row" then goto index 809;
   show serial_dialog "hanoi_space";
   goto index 861;
   if "cursor_value" == 0 then goto index 832;
   if "cursor_value" == 1 then goto index 830;
   if "cursor_value" == 2 then goto index 828;
   if "cursor_value" == 3 then goto index 826;
   if "cursor_value" == 4 then goto index 824;
   if "cursor_value" == 5 then goto index 822;
   if "cursor_value" == 6 then goto index 820;
   if "cursor_value" == 7 then goto index 818;
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 861;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 861;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 860;
   if "curr_plate" == 1 then goto index 858;
   if "curr_plate" == 2 then goto index 856;
   if "curr_plate" == 3 then goto index 854;
   if "curr_plate" == 4 then goto index 852;
   if "curr_plate" == 5 then goto index 850;
   if "curr_plate" == 6 then goto index 848;
   if "curr_plate" == 7 then goto index 846;
   goto index 861;
   show serial_dialog "hanoi_plate_7";
   goto index 861;
   show serial_dialog "hanoi_plate_6";
   goto index 861;
   show serial_dialog "hanoi_plate_5";
   goto index 861;
   show serial_dialog "hanoi_plate_4";
   goto index 861;
   show serial_dialog "hanoi_plate_3";
   goto index 861;
   show serial_dialog "hanoi_plate_2";
   goto index 861;
   show serial_dialog "hanoi_plate_1";
   goto index 861;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 899;
   if "cursor_pos" == "column" then goto index 866;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 898;
   if "cursor_hinge_height" == "row" then goto index 896;
   if "cursor_grip_height" == "row" then goto index 871;
   show serial_dialog "hanoi_space";
   goto index 923;
   if "cursor_value" == 0 then goto index 894;
   if "cursor_value" == 1 then goto index 892;
   if "cursor_value" == 2 then goto index 890;
   if "cursor_value" == 3 then goto index 888;
   if "cursor_value" == 4 then goto index 886;
   if "cursor_value" == 5 then goto index 884;
   if "cursor_value" == 6 then goto index 882;
   if "cursor_value" == 7 then goto index 880;
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 923;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 923;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 922;
   if "curr_plate" == 1 then goto index 920;
   if "curr_plate" == 2 then goto index 918;
   if "curr_plate" == 3 then goto index 916;
   if "curr_plate" == 4 then goto index 914;
   if "curr_plate" == 5 then goto index 912;
   if "curr_plate" == 6 then goto index 910;
   if "curr_plate" == 7 then goto index 908;
   goto index 923;
   show serial_dialog "hanoi_plate_7";
   goto index 923;
   show serial_dialog "hanoi_plate_6";
   goto index 923;
   show serial_dialog "hanoi_plate_5";
   goto index 923;
   show serial_dialog "hanoi_plate_4";
   goto index 923;
   show serial_dialog "hanoi_plate_3";
   goto index 923;
   show serial_dialog "hanoi_plate_2";
   goto index 923;
   show serial_dialog "hanoi_plate_1";
   goto index 923;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 966;
   if "cursor_pos" == "column" then goto index 933;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 965;
   if "cursor_hinge_height" == "row" then goto index 963;
   if "cursor_grip_height" == "row" then goto index 938;
   show serial_dialog "hanoi_space";
   goto index 990;
   if "cursor_value" == 0 then goto index 961;
   if "cursor_value" == 1 then goto index 959;
   if "cursor_value" == 2 then goto index 957;
   if "cursor_value" == 3 then goto index 955;
   if "cursor_value" == 4 then goto index 953;
   if "cursor_value" == 5 then goto index 951;
   if "cursor_value" == 6 then goto index 949;
   if "cursor_value" == 7 then goto index 947;
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 990;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 990;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 989;
   if "curr_plate" == 1 then goto index 987;
   if "curr_plate" == 2 then goto index 985;
   if "curr_plate" == 3 then goto index 983;
   if "curr_plate" == 4 then goto index 981;
   if "curr_plate" == 5 then goto index 979;
   if "curr_plate" == 6 then goto index 977;
   if "curr_plate" == 7 then goto index 975;
   goto index 990;
   show serial_dialog "hanoi_plate_7";
   goto index 990;
   show serial_dialog "hanoi_plate_6";
   goto index 990;
   show serial_dialog "hanoi_plate_5";
   goto index 990;
   show serial_dialog "hanoi_plate_4";
   goto index 990;
   show serial_dialog "hanoi_plate_3";
   goto index 990;
   show serial_dialog "hanoi_plate_2";
   goto index 990;
   show serial_dialog "hanoi_plate_1";
   goto index 990;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1028;
   if "cursor_pos" == "column" then goto index 995;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1027;
   if "cursor_hinge_height" == "row" then goto index 1025;
   if "cursor_grip_height" == "row" then goto index 1000;
   show serial_dialog "hanoi_space";
   goto index 1052;
   if "cursor_value" == 0 then goto index 1023;
   if "cursor_value" == 1 then goto index 1021;
   if "cursor_value" == 2 then goto index 1019;
   if "cursor_value" == 3 then goto index 1017;
   if "cursor_value" == 4 then goto index 1015;
   if "cursor_value" == 5 then goto index 1013;
   if "cursor_value" == 6 then goto index 1011;
   if "cursor_value" == 7 then goto index 1009;
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1052;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1052;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1051;
   if "curr_plate" == 1 then goto index 1049;
   if "curr_plate" == 2 then goto index 1047;
   if "curr_plate" == 3 then goto index 1045;
   if "curr_plate" == 4 then goto index 1043;
   if "curr_plate" == 5 then goto index 1041;
   if "curr_plate" == 6 then goto index 1039;
   if "curr_plate" == 7 then goto index 1037;
   goto index 1052;
   show serial_dialog "hanoi_plate_7";
   goto index 1052;
   show serial_dialog "hanoi_plate_6";
   goto index 1052;
   show serial_dialog "hanoi_plate_5";
   goto index 1052;
   show serial_dialog "hanoi_plate_4";
   goto index 1052;
   show serial_dialog "hanoi_plate_3";
   goto index 1052;
   show serial_dialog "hanoi_plate_2";
   goto index 1052;
   show serial_dialog "hanoi_plate_1";
   goto index 1052;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1090;
   if "cursor_pos" == "column" then goto index 1057;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1089;
   if "cursor_hinge_height" == "row" then goto index 1087;
   if "cursor_grip_height" == "row" then goto index 1062;
   show serial_dialog "hanoi_space";
   goto index 1114;
   if "cursor_value" == 0 then goto index 1085;
   if "cursor_value" == 1 then goto index 1083;
   if "cursor_value" == 2 then goto index 1081;
   if "cursor_value" == 3 then goto index 1079;
   if "cursor_value" == 4 then goto index 1077;
   if "cursor_value" == 5 then goto index 1075;
   if "cursor_value" == 6 then goto index 1073;
   if "cursor_value" == 7 then goto index 1071;
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1114;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1114;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1113;
   if "curr_plate" == 1 then goto index 1111;
   if "curr_plate" == 2 then goto index 1109;
   if "curr_plate" == 3 then goto index 1107;
   if "curr_plate" == 4 then goto index 1105;
   if "curr_plate" == 5 then goto index 1103;
   if "curr_plate" == 6 then goto index 1101;
   if "curr_plate" == 7 then goto index 1099;
   goto index 1114;
   show serial_dialog "hanoi_plate_7";
   goto index 1114;
   show serial_dialog "hanoi_plate_6";
   goto index 1114;
   show serial_dialog "hanoi_plate_5";
   goto index 1114;
   show serial_dialog "hanoi_plate_4";
   goto index 1114;
   show serial_dialog "hanoi_plate_3";
   goto index 1114;
   show serial_dialog "hanoi_plate_2";
   goto index 1114;
   show serial_dialog "hanoi_plate_1";
   goto index 1114;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1157;
   if "cursor_pos" == "column" then goto index 1124;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1156;
   if "cursor_hinge_height" == "row" then goto index 1154;
   if "cursor_grip_height" == "row" then goto index 1129;
   show serial_dialog "hanoi_space";
   goto index 1181;
   if "cursor_value" == 0 then goto index 1152;
   if "cursor_value" == 1 then goto index 1150;
   if "cursor_value" == 2 then goto index 1148;
   if "cursor_value" == 3 then goto index 1146;
   if "cursor_value" == 4 then goto index 1144;
   if "cursor_value" == 5 then goto index 1142;
   if "cursor_value" == 6 then goto index 1140;
   if "cursor_value" == 7 then goto index 1138;
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1181;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1181;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1180;
   if "curr_plate" == 1 then goto index 1178;
   if "curr_plate" == 2 then goto index 1176;
   if "curr_plate" == 3 then goto index 1174;
   if "curr_plate" == 4 then goto index 1172;
   if "curr_plate" == 5 then goto index 1170;
   if "curr_plate" == 6 then goto index 1168;
   if "curr_plate" == 7 then goto index 1166;
   goto index 1181;
   show serial_dialog "hanoi_plate_7";
   goto index 1181;
   show serial_dialog "hanoi_plate_6";
   goto index 1181;
   show serial_dialog "hanoi_plate_5";
   goto index 1181;
   show serial_dialog "hanoi_plate_4";
   goto index 1181;
   show serial_dialog "hanoi_plate_3";
   goto index 1181;
   show serial_dialog "hanoi_plate_2";
   goto index 1181;
   show serial_dialog "hanoi_plate_1";
   goto index 1181;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1219;
   if "cursor_pos" == "column" then goto index 1186;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1218;
   if "cursor_hinge_height" == "row" then goto index 1216;
   if "cursor_grip_height" == "row" then goto index 1191;
   show serial_dialog "hanoi_space";
   goto index 1243;
   if "cursor_value" == 0 then goto index 1214;
   if "cursor_value" == 1 then goto index 1212;
   if "cursor_value" == 2 then goto index 1210;
   if "cursor_value" == 3 then goto index 1208;
   if "cursor_value" == 4 then goto index 1206;
   if "cursor_value" == 5 then goto index 1204;
   if "cursor_value" == 6 then goto index 1202;
   if "cursor_value" == 7 then goto index 1200;
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1243;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1243;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1242;
   if "curr_plate" == 1 then goto index 1240;
   if "curr_plate" == 2 then goto index 1238;
   if "curr_plate" == 3 then goto index 1236;
   if "curr_plate" == 4 then goto index 1234;
   if "curr_plate" == 5 then goto index 1232;
   if "curr_plate" == 6 then goto index 1230;
   if "curr_plate" == 7 then goto index 1228;
   goto index 1243;
   show serial_dialog "hanoi_plate_7";
   goto index 1243;
   show serial_dialog "hanoi_plate_6";
   goto index 1243;
   show serial_dialog "hanoi_plate_5";
   goto index 1243;
   show serial_dialog "hanoi_plate_4";
   goto index 1243;
   show serial_dialog "hanoi_plate_3";
   goto index 1243;
   show serial_dialog "hanoi_plate_2";
   goto index 1243;
   show serial_dialog "hanoi_plate_1";
   goto index 1243;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1281;
   if "cursor_pos" == "column" then goto index 1248;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1280;
   if "cursor_hinge_height" == "row" then goto index 1278;
   if "cursor_grip_height" == "row" then goto index 1253;
   show serial_dialog "hanoi_space";
   goto index 1305;
   if "cursor_value" == 0 then goto index 1276;
   if "cursor_value" == 1 then goto index 1274;
   if "cursor_value" == 2 then goto index 1272;
   if "cursor_value" == 3 then goto index 1270;
   if "cursor_value" == 4 then goto index 1268;
   if "cursor_value" == 5 then goto index 1266;
   if "cursor_value" == 6 then goto index 1264;
   if "cursor_value" == 7 then goto index 1262;
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1305;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1305;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1304;
   if "curr_plate" == 1 then goto index 1302;
   if "curr_plate" == 2 then goto index 1300;
   if "curr_plate" == 3 then goto index 1298;
   if "curr_plate" == 4 then goto index 1296;
   if "curr_plate" == 5 then goto index 1294;
   if "curr_plate" == 6 then goto index 1292;
   if "curr_plate" == 7 then goto index 1290;
   goto index 1305;
   show serial_dialog "hanoi_plate_7";
   goto index 1305;
   show serial_dialog "hanoi_plate_6";
   goto index 1305;
   show serial_dialog "hanoi_plate_5";
   goto index 1305;
   show serial_dialog "hanoi_plate_4";
   goto index 1305;
   show serial_dialog "hanoi_plate_3";
   goto index 1305;
   show serial_dialog "hanoi_plate_2";
   goto index 1305;
   show serial_dialog "hanoi_plate_1";
   goto index 1305;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1348;
   if "cursor_pos" == "column" then goto index 1315;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1347;
   if "cursor_hinge_height" == "row" then goto index 1345;
   if "cursor_grip_height" == "row" then goto index 1320;
   show serial_dialog "hanoi_space";
   goto index 1372;
   if "cursor_value" == 0 then goto index 1343;
   if "cursor_value" == 1 then goto index 1341;
   if "cursor_value" == 2 then goto index 1339;
   if "cursor_value" == 3 then goto index 1337;
   if "cursor_value" == 4 then goto index 1335;
   if "cursor_value" == 5 then goto index 1333;
   if "cursor_value" == 6 then goto index 1331;
   if "cursor_value" == 7 then goto index 1329;
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1372;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1372;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1371;
   if "curr_plate" == 1 then goto index 1369;
   if "curr_plate" == 2 then goto index 1367;
   if "curr_plate" == 3 then goto index 1365;
   if "curr_plate" == 4 then goto index 1363;
   if "curr_plate" == 5 then goto index 1361;
   if "curr_plate" == 6 then goto index 1359;
   if "curr_plate" == 7 then goto index 1357;
   goto index 1372;
   show serial_dialog "hanoi_plate_7";
   goto index 1372;
   show serial_dialog "hanoi_plate_6";
   goto index 1372;
   show serial_dialog "hanoi_plate_5";
   goto index 1372;
   show serial_dialog "hanoi_plate_4";
   goto index 1372;
   show serial_dialog "hanoi_plate_3";
   goto index 1372;
   show serial_dialog "hanoi_plate_2";
   goto index 1372;
   show serial_dialog "hanoi_plate_1";
   goto index 1372;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1410;
   if "cursor_pos" == "column" then goto index 1377;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1409;
   if "cursor_hinge_height" == "row" then goto index 1407;
   if "cursor_grip_height" == "row" then goto index 1382;
   show serial_dialog "hanoi_space";
   goto index 1434;
   if "cursor_value" == 0 then goto index 1405;
   if "cursor_value" == 1 then goto index 1403;
   if "cursor_value" == 2 then goto index 1401;
   if "cursor_value" == 3 then goto index 1399;
   if "cursor_value" == 4 then goto index 1397;
   if "cursor_value" == 5 then goto index 1395;
   if "cursor_value" == 6 then goto index 1393;
   if "cursor_value" == 7 then goto index 1391;
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1434;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1434;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1433;
   if "curr_plate" == 1 then goto index 1431;
   if "curr_plate" == 2 then goto index 1429;
   if "curr_plate" == 3 then goto index 1427;
   if "curr_plate" == 4 then goto index 1425;
   if "curr_plate" == 5 then goto index 1423;
   if "curr_plate" == 6 then goto index 1421;
   if "curr_plate" == 7 then goto index 1419;
   goto index 1434;
   show serial_dialog "hanoi_plate_7";
   goto index 1434;
   show serial_dialog "hanoi_plate_6";
   goto index 1434;
   show serial_dialog "hanoi_plate_5";
   goto index 1434;
   show serial_dialog "hanoi_plate_4";
   goto index 1434;
   show serial_dialog "hanoi_plate_3";
   goto index 1434;
   show serial_dialog "hanoi_plate_2";
   goto index 1434;
   show serial_dialog "hanoi_plate_1";
   goto index 1434;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1472;
   if "cursor_pos" == "column" then goto index 1439;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1471;
   if "cursor_hinge_height" == "row" then goto index 1469;
   if "cursor_grip_height" == "row" then goto index 1444;
   show serial_dialog "hanoi_space";
   goto index 1496;
   if "cursor_value" == 0 then goto index 1467;
   if "cursor_value" == 1 then goto index 1465;
   if "cursor_value" == 2 then goto index 1463;
   if "cursor_value" == 3 then goto index 1461;
   if "cursor_value" == 4 then goto index 1459;
   if "cursor_value" == 5 then goto index 1457;
   if "cursor_value" == 6 then goto index 1455;
   if "cursor_value" == 7 then goto index 1453;
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1496;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1496;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1495;
   if "curr_plate" == 1 then goto index 1493;
   if "curr_plate" == 2 then goto index 1491;
   if "curr_plate" == 3 then goto index 1489;
   if "curr_plate" == 4 then goto index 1487;
   if "curr_plate" == 5 then goto index 1485;
   if "curr_plate" == 6 then goto index 1483;
   if "curr_plate" == 7 then goto index 1481;
   goto index 1496;
   show serial_dialog "hanoi_plate_7";
   goto index 1496;
   show serial_dialog "hanoi_plate_6";
   goto index 1496;
   show serial_dialog "hanoi_plate_5";
   goto index 1496;
   show serial_dialog "hanoi_plate_4";
   goto index 1496;
   show serial_dialog "hanoi_plate_3";
   goto index 1496;
   show serial_dialog "hanoi_plate_2";
   goto index 1496;
   show serial_dialog "hanoi_plate_1";
   goto index 1496;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1539;
   if "cursor_pos" == "column" then goto index 1506;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1538;
   if "cursor_hinge_height" == "row" then goto index 1536;
   if "cursor_grip_height" == "row" then goto index 1511;
   show serial_dialog "hanoi_space";
   goto index 1563;
   if "cursor_value" == 0 then goto index 1534;
   if "cursor_value" == 1 then goto index 1532;
   if "cursor_value" == 2 then goto index 1530;
   if "cursor_value" == 3 then goto index 1528;
   if "cursor_value" == 4 then goto index 1526;
   if "cursor_value" == 5 then goto index 1524;
   if "cursor_value" == 6 then goto index 1522;
   if "cursor_value" == 7 then goto index 1520;
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1563;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1563;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1562;
   if "curr_plate" == 1 then goto index 1560;
   if "curr_plate" == 2 then goto index 1558;
   if "curr_plate" == 3 then goto index 1556;
   if "curr_plate" == 4 then goto index 1554;
   if "curr_plate" == 5 then goto index 1552;
   if "curr_plate" == 6 then goto index 1550;
   if "curr_plate" == 7 then goto index 1548;
   goto index 1563;
   show serial_dialog "hanoi_plate_7";
   goto index 1563;
   show serial_dialog "hanoi_plate_6";
   goto index 1563;
   show serial_dialog "hanoi_plate_5";
   goto index 1563;
   show serial_dialog "hanoi_plate_4";
   goto index 1563;
   show serial_dialog "hanoi_plate_3";
   goto index 1563;
   show serial_dialog "hanoi_plate_2";
   goto index 1563;
   show serial_dialog "hanoi_plate_1";
   goto index 1563;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1601;
   if "cursor_pos" == "column" then goto index 1568;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1600;
   if "cursor_hinge_height" == "row" then goto index 1598;
   if "cursor_grip_height" == "row" then goto index 1573;
   show serial_dialog "hanoi_space";
   goto index 1625;
   if "cursor_value" == 0 then goto index 1596;
   if "cursor_value" == 1 then goto index 1594;
   if "cursor_value" == 2 then goto index 1592;
   if "cursor_value" == 3 then goto index 1590;
   if "cursor_value" == 4 then goto index 1588;
   if "cursor_value" == 5 then goto index 1586;
   if "cursor_value" == 6 then goto index 1584;
   if "cursor_value" == 7 then goto index 1582;
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1625;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1625;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1624;
   if "curr_plate" == 1 then goto index 1622;
   if "curr_plate" == 2 then goto index 1620;
   if "curr_plate" == 3 then goto index 1618;
   if "curr_plate" == 4 then goto index 1616;
   if "curr_plate" == 5 then goto index 1614;
   if "curr_plate" == 6 then goto index 1612;
   if "curr_plate" == 7 then goto index 1610;
   goto index 1625;
   show serial_dialog "hanoi_plate_7";
   goto index 1625;
   show serial_dialog "hanoi_plate_6";
   goto index 1625;
   show serial_dialog "hanoi_plate_5";
   goto index 1625;
   show serial_dialog "hanoi_plate_4";
   goto index 1625;
   show serial_dialog "hanoi_plate_3";
   goto index 1625;
   show serial_dialog "hanoi_plate_2";
   goto index 1625;
   show serial_dialog "hanoi_plate_1";
   goto index 1625;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1663;
   if "cursor_pos" == "column" then goto index 1630;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1662;
   if "cursor_hinge_height" == "row" then goto index 1660;
   if "cursor_grip_height" == "row" then goto index 1635;
   show serial_dialog "hanoi_space";
   goto index 1687;
   if "cursor_value" == 0 then goto index 1658;
   if "cursor_value" == 1 then goto index 1656;
   if "cursor_value" == 2 then goto index 1654;
   if "cursor_value" == 3 then goto index 1652;
   if "cursor_value" == 4 then goto index 1650;
   if "cursor_value" == 5 then goto index 1648;
   if "cursor_value" == 6 then goto index 1646;
   if "cursor_value" == 7 then goto index 1644;
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1687;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1687;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1686;
   if "curr_plate" == 1 then goto index 1684;
   if "curr_plate" == 2 then goto index 1682;
   if "curr_plate" == 3 then goto index 1680;
   if "curr_plate" == 4 then goto index 1678;
   if "curr_plate" == 5 then goto index 1676;
   if "curr_plate" == 6 then goto index 1674;
   if "curr_plate" == 7 then goto index 1672;
   goto index 1687;
   show serial_dialog "hanoi_plate_7";
   goto index 1687;
   show serial_dialog "hanoi_plate_6";
   goto index 1687;
   show serial_dialog "hanoi_plate_5";
   goto index 1687;
   show serial_dialog "hanoi_plate_4";
   goto index 1687;
   show serial_dialog "hanoi_plate_3";
   goto index 1687;
   show serial_dialog "hanoi_plate_2";
   goto index 1687;
   show serial_dialog "hanoi_plate_1";
   goto index 1687;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1713;
   if "curr_plate" == 1 then goto index 1711;
   if "curr_plate" == 2 then goto index 1709;
   if "curr_plate" == 3 then goto index 1707;
   if "curr_plate" == 4 then goto index 1705;
   if "curr_plate" == 5 then goto index 1703;
   if "curr_plate" == 6 then goto index 1701;
   if "curr_plate" == 7 then goto index 1699;
   goto index 1714;
   show serial_dialog "hanoi_plate_7";
   goto index 1714;
   show serial_dialog "hanoi_plate_6";
   goto index 1714;
   show serial_dialog "hanoi_plate_5";
   goto index 1714;
   show serial_dialog "hanoi_plate_4";
   goto index 1714;
   show serial_dialog "hanoi_plate_3";
   goto index 1714;
   show serial_dialog "hanoi_plate_2";
   goto index 1714;
   show serial_dialog "hanoi_plate_1";
   goto index 1714;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1738;
   if "curr_plate" == 1 then goto index 1736;
   if "curr_plate" == 2 then goto index 1734;
   if "curr_plate" == 3 then goto index 1732;
   if "curr_plate" == 4 then goto index 1730;
   if "curr_plate" == 5 then goto index 1728;
   if "curr_plate" == 6 then goto index 1726;
   if "curr_plate" == 7 then goto index 1724;
   goto index 1739;
   show serial_dialog "hanoi_plate_7";
   goto index 1739;
   show serial_dialog "hanoi_plate_6";
   goto index 1739;
   show serial_dialog "hanoi_plate_5";
   goto index 1739;
   show serial_dialog "hanoi_plate_4";
   goto index 1739;
   show serial_dialog "hanoi_plate_3";
   goto index 1739;
   show serial_dialog "hanoi_plate_2";
   goto index 1739;
   show serial_dialog "hanoi_plate_1";
   goto index 1739;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1763;
   if "curr_plate" == 1 then goto index 1761;
   if "curr_plate" == 2 then goto index 1759;
   if "curr_plate" == 3 then goto index 1757;
   if "curr_plate" == 4 then goto index 1755;
   if "curr_plate" == 5 then goto index 1753;
   if "curr_plate" == 6 then goto index 1751;
   if "curr_plate" == 7 then goto index 1749;
   goto index 1764;
   show serial_dialog "hanoi_plate_7";
   goto index 1764;
   show serial_dialog "hanoi_plate_6";
   goto index 1764;
   show serial_dialog "hanoi_plate_5";
   goto index 1764;
   show serial_dialog "hanoi_plate_4";
   goto index 1764;
   show serial_dialog "hanoi_plate_3";
   goto index 1764;
   show serial_dialog "hanoi_plate_2";
   goto index 1764;
   show serial_dialog "hanoi_plate_1";
   goto index 1764;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1772;
   if "hanoi_draw_help" then goto index 1769;
   goto index 1808;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1808;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1786;
   goto index 1787;
   delete command "WIN";
   if !"hanoi_won" then goto index 1806;
   if !"ch2-carrying-plate" then goto index 1791;
   if !"ch2-installed-plate" then goto index 1791;
   goto index 1807;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1795;
   goto index 1796;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1804;
   if "hanoi_move_count" == 69 then goto index 1802;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1807;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_move_3" {
   "cursor_pos" = 3;
   if "cursor_value" == 0 then goto index 181;
   if "cursor_pos" == 1 then goto index 37;
   if "cursor_pos" == 2 then goto index 21;
   if "cursor_pos" == 3 then goto index 5;
   if "array3_length" == 0 then goto index 20;
   if "array3_length" == 1 then goto index 19;
   if "array3_length" == 2 then goto index 18;
   if "array3_length" == 3 then goto index 17;
   if "array3_length" == 4 then goto index 16;
   if "array3_length" == 5 then goto index 15;
   if "array3_length" == 6 then goto index 14;
   if "array3_length" == 7 then goto index 13;
   "checked_value" = "array3_7";
   "checked_value" = "array3_6";
   "checked_value" = "array3_5";
   "checked_value" = "array3_4";
   "checked_value" = "array3_3";
   "checked_value" = "array3_2";
   "checked_value" = "array3_1";
   "checked_value" = 0;
   if "array2_length" == 0 then goto index 36;
   if "array2_length" == 1 then goto index 35;
   if "array2_length" == 2 then goto index 34;
   if "array2_length" == 3 then goto index 33;
   if "array2_length" == 4 then goto index 32;
   if "array2_length" == 5 then goto index 31;
   if "array2_length" == 6 then goto index 30;
   if "array2_length" == 7 then goto index 29;
   "checked_value" = "array2_7";
   "checked_value" = "array2_6";
   "checked_value" = "array2_5";
   "checked_value" = "array2_4";
   "checked_value" = "array2_3";
   "checked_value" = "array2_2";
   "checked_value" = "array2_1";
   "checked_value" = 0;
   if "array1_length" == 0 then goto index 60;
   if "array1_length" == 1 then goto index 58;
   if "array1_length" == 2 then goto index 56;
   if "array1_length" == 3 then goto index 54;
   if "array1_length" == 4 then goto index 52;
   if "array1_length" == 5 then goto index 50;
   if "array1_length" == 6 then goto index 48;
   if "array1_length" == 7 then goto index 46;
   goto index 61;
   "checked_value" = "array1_7";
   goto index 61;
   "checked_value" = "array1_6";
   goto index 61;
   "checked_value" = "array1_5";
   goto index 61;
   "checked_value" = "array1_4";
   goto index 61;
   "checked_value" = "array1_3";
   goto index 61;
   "checked_value" = "array1_2";
   goto index 61;
   "checked_value" = "array1_1";
   goto index 61;
   "checked_value" = 0;
   if "checked_value" == 0 then goto index 67;
   if "checked_value" > "cursor_value" then goto index 65;
   "can_drop" = false;
   goto index 68;
   "can_drop" = true;
   goto index 68;
   "can_drop" = true;
   if "can_drop" then goto index 70;
   "hanoi_warning_size" = true;
   if "cursor_pos" == 1 then goto index 145;
   if "cursor_pos" == 2 then goto index 109;
   if "cursor_pos" == 3 then goto index 73;
   if "cursor_value" == 0 then goto index 108;
   if "array3_length" >= 7 then goto index 106;
   if "array3_length" == 6 then goto index 101;
   if "array3_length" == 5 then goto index 98;
   if "array3_length" == 4 then goto index 95;
   if "array3_length" == 3 then goto index 92;
   if "array3_length" == 2 then goto index 89;
   if "array3_length" == 1 then goto index 86;
   if "array3_length" == 0 then goto index 83;
   goto index 103;
   "array3_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_7" = "cursor_value";
   "cursor_value" = 0;
   "array3_length" += 1;
   "hanoi_move_count" += 1;
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 144;
   if "array2_length" >= 7 then goto index 142;
   if "array2_length" == 6 then goto index 137;
   if "array2_length" == 5 then goto index 134;
   if "array2_length" == 4 then goto index 131;
   if "array2_length" == 3 then goto index 128;
   if "array2_length" == 2 then goto index 125;
   if "array2_length" == 1 then goto index 122;
   if "array2_length" == 0 then goto index 119;
   goto index 139;
   "array2_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_7" = "cursor_value";
   "cursor_value" = 0;
   "array2_length" += 1;
   "hanoi_move_count" += 1;
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 180;
   if "array1_length" >= 7 then goto index 178;
   if "array1_length" == 6 then goto index 173;
   if "array1_length" == 5 then goto index 170;
   if "array1_length" == 4 then goto index 167;
   if "array1_length" == 3 then goto index 164;
   if "array1_length" == 2 then goto index 161;
   if "array1_length" == 1 then goto index 158;
   if "array1_length" == 0 then goto index 155;
   goto index 175;
   "array1_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_7" = "cursor_value";
   "cursor_value" = 0;
   "array1_length" += 1;
   "hanoi_move_count" += 1;
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_pos" == 1 then goto index 252;
   if "cursor_pos" == 2 then goto index 218;
   if "cursor_pos" == 3 then goto index 184;
   if "array3_length" > 0 then goto index 185;
   if "array3_length" == 0 then goto index 217;
   if "array3_length" == 7 then goto index 212;
   if "array3_length" == 6 then goto index 209;
   if "array3_length" == 5 then goto index 206;
   if "array3_length" == 4 then goto index 203;
   if "array3_length" == 3 then goto index 200;
   if "array3_length" == 2 then goto index 197;
   if "array3_length" == 1 then goto index 194;
   goto index 214;
   "cursor_value" = "array3_1";
   "array3_1" = 0;
   goto index 214;
   "cursor_value" = "array3_2";
   "array3_2" = 0;
   goto index 214;
   "cursor_value" = "array3_3";
   "array3_3" = 0;
   goto index 214;
   "cursor_value" = "array3_4";
   "array3_4" = 0;
   goto index 214;
   "cursor_value" = "array3_5";
   "array3_5" = 0;
   goto index 214;
   "cursor_value" = "array3_6";
   "array3_6" = 0;
   goto index 214;
   "cursor_value" = "array3_7";
   "array3_7" = 0;
   "array3_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 218;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array2_length" > 0 then goto index 219;
   if "array2_length" == 0 then goto index 251;
   if "array2_length" == 7 then goto index 246;
   if "array2_length" == 6 then goto index 243;
   if "array2_length" == 5 then goto index 240;
   if "array2_length" == 4 then goto index 237;
   if "array2_length" == 3 then goto index 234;
   if "array2_length" == 2 then goto index 231;
   if "array2_length" == 1 then goto index 228;
   goto index 248;
   "cursor_value" = "array2_1";
   "array2_1" = 0;
   goto index 248;
   "cursor_value" = "array2_2";
   "array2_2" = 0;
   goto index 248;
   "cursor_value" = "array2_3";
   "array2_3" = 0;
   goto index 248;
   "cursor_value" = "array2_4";
   "array2_4" = 0;
   goto index 248;
   "cursor_value" = "array2_5";
   "array2_5" = 0;
   goto index 248;
   "cursor_value" = "array2_6";
   "array2_6" = 0;
   goto index 248;
   "cursor_value" = "array2_7";
   "array2_7" = 0;
   "array2_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 252;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array1_length" > 0 then goto index 254;
   goto index 287;
   if "array1_length" == 0 then goto index 286;
   if "array1_length" == 7 then goto index 281;
   if "array1_length" == 6 then goto index 278;
   if "array1_length" == 5 then goto index 275;
   if "array1_length" == 4 then goto index 272;
   if "array1_length" == 3 then goto index 269;
   if "array1_length" == 2 then goto index 266;
   if "array1_length" == 1 then goto index 263;
   goto index 283;
   "cursor_value" = "array1_1";
   "array1_1" = 0;
   goto index 283;
   "cursor_value" = "array1_2";
   "array1_2" = 0;
   goto index 283;
   "cursor_value" = "array1_3";
   "array1_3" = 0;
   goto index 283;
   "cursor_value" = "array1_4";
   "array1_4" = 0;
   goto index 283;
   "cursor_value" = "array1_5";
   "array1_5" = 0;
   goto index 283;
   "cursor_value" = "array1_6";
   "array1_6" = 0;
   goto index 283;
   "cursor_value" = "array1_7";
   "array1_7" = 0;
   "array1_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 287;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 6 then goto index 289;
   goto index 290;
   "hanoi_won" = true;
   if "cursor_pos" == 1 then goto index 298;
   if "cursor_pos" == 2 then goto index 296;
   if "cursor_pos" == 3 then goto index 294;
   goto index 299;
   "cursor_grip_height" = "array3_length";
   goto index 299;
   "cursor_grip_height" = "array2_length";
   goto index 299;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 315;
   "column" = 1;
   if "column" <= 3 then goto index 309;
   goto index 324;
   if "cursor_pos" == "column" then goto index 312;
   show serial_dialog "hanoi_space";
   goto index 313;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 307;
   if "cursor_pos" == 1 then goto index 323;
   if "cursor_pos" == 2 then goto index 321;
   if "cursor_pos" == 3 then goto index 319;
   goto index 324;
   show serial_dialog "hanoi_won_message3a";
   goto index 324;
   show serial_dialog "hanoi_won_message2a";
   goto index 324;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 405;
   if "hanoi_won" then goto index 393;
   "column" = 1;
   if "column" <= 3 then goto index 331;
   goto index 407;
   if "curr_plate" != 0 then goto index 367;
   if "cursor_pos" == "column" then goto index 334;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 366;
   if "cursor_hinge_height" == "row" then goto index 364;
   if "cursor_grip_height" == "row" then goto index 339;
   show serial_dialog "hanoi_space";
   goto index 391;
   if "cursor_value" == 0 then goto index 362;
   if "cursor_value" == 1 then goto index 360;
   if "cursor_value" == 2 then goto index 358;
   if "cursor_value" == 3 then goto index 356;
   if "cursor_value" == 4 then goto index 354;
   if "cursor_value" == 5 then goto index 352;
   if "cursor_value" == 6 then goto index 350;
   if "cursor_value" == 7 then goto index 348;
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 391;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 391;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 390;
   if "curr_plate" == 1 then goto index 388;
   if "curr_plate" == 2 then goto index 386;
   if "curr_plate" == 3 then goto index 384;
   if "curr_plate" == 4 then goto index 382;
   if "curr_plate" == 5 then goto index 380;
   if "curr_plate" == 6 then goto index 378;
   if "curr_plate" == 7 then goto index 376;
   goto index 391;
   show serial_dialog "hanoi_plate_7";
   goto index 391;
   show serial_dialog "hanoi_plate_6";
   goto index 391;
   show serial_dialog "hanoi_plate_5";
   goto index 391;
   show serial_dialog "hanoi_plate_4";
   goto index 391;
   show serial_dialog "hanoi_plate_3";
   goto index 391;
   show serial_dialog "hanoi_plate_2";
   goto index 391;
   show serial_dialog "hanoi_plate_1";
   goto index 391;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 329;
   if "cursor_pos" == 1 then goto index 404;
   if "cursor_pos" == 2 then goto index 403;
   if "cursor_pos" == 3 then goto index 396;
   if "hanoi_move_count" < 100 then goto index 402;
   if "hanoi_move_count" < 1000 then goto index 400;
   show serial_dialog "hanoi_won_message3b4";
   goto index 405;
   show serial_dialog "hanoi_won_message3b3";
   goto index 405;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 412;
   goto index 474;
   if "curr_plate" != 0 then goto index 448;
   if "cursor_pos" == "column" then goto index 415;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 447;
   if "cursor_hinge_height" == "row" then goto index 445;
   if "cursor_grip_height" == "row" then goto index 420;
   show serial_dialog "hanoi_space";
   goto index 472;
   if "cursor_value" == 0 then goto index 443;
   if "cursor_value" == 1 then goto index 441;
   if "cursor_value" == 2 then goto index 439;
   if "cursor_value" == 3 then goto index 437;
   if "cursor_value" == 4 then goto index 435;
   if "cursor_value" == 5 then goto index 433;
   if "cursor_value" == 6 then goto index 431;
   if "cursor_value" == 7 then goto index 429;
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 472;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 472;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 471;
   if "curr_plate" == 1 then goto index 469;
   if "curr_plate" == 2 then goto index 467;
   if "curr_plate" == 3 then goto index 465;
   if "curr_plate" == 4 then goto index 463;
   if "curr_plate" == 5 then goto index 461;
   if "curr_plate" == 6 then goto index 459;
   if "curr_plate" == 7 then goto index 457;
   goto index 472;
   show serial_dialog "hanoi_plate_7";
   goto index 472;
   show serial_dialog "hanoi_plate_6";
   goto index 472;
   show serial_dialog "hanoi_plate_5";
   goto index 472;
   show serial_dialog "hanoi_plate_4";
   goto index 472;
   show serial_dialog "hanoi_plate_3";
   goto index 472;
   show serial_dialog "hanoi_plate_2";
   goto index 472;
   show serial_dialog "hanoi_plate_1";
   goto index 472;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 410;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 479;
   goto index 541;
   if "curr_plate" != 0 then goto index 515;
   if "cursor_pos" == "column" then goto index 482;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 514;
   if "cursor_hinge_height" == "row" then goto index 512;
   if "cursor_grip_height" == "row" then goto index 487;
   show serial_dialog "hanoi_space";
   goto index 539;
   if "cursor_value" == 0 then goto index 510;
   if "cursor_value" == 1 then goto index 508;
   if "cursor_value" == 2 then goto index 506;
   if "cursor_value" == 3 then goto index 504;
   if "cursor_value" == 4 then goto index 502;
   if "cursor_value" == 5 then goto index 500;
   if "cursor_value" == 6 then goto index 498;
   if "cursor_value" == 7 then goto index 496;
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 539;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 539;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 538;
   if "curr_plate" == 1 then goto index 536;
   if "curr_plate" == 2 then goto index 534;
   if "curr_plate" == 3 then goto index 532;
   if "curr_plate" == 4 then goto index 530;
   if "curr_plate" == 5 then goto index 528;
   if "curr_plate" == 6 then goto index 526;
   if "curr_plate" == 7 then goto index 524;
   goto index 539;
   show serial_dialog "hanoi_plate_7";
   goto index 539;
   show serial_dialog "hanoi_plate_6";
   goto index 539;
   show serial_dialog "hanoi_plate_5";
   goto index 539;
   show serial_dialog "hanoi_plate_4";
   goto index 539;
   show serial_dialog "hanoi_plate_3";
   goto index 539;
   show serial_dialog "hanoi_plate_2";
   goto index 539;
   show serial_dialog "hanoi_plate_1";
   goto index 539;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 477;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 584;
   if "cursor_pos" == "column" then goto index 551;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 583;
   if "cursor_hinge_height" == "row" then goto index 581;
   if "cursor_grip_height" == "row" then goto index 556;
   show serial_dialog "hanoi_space";
   goto index 608;
   if "cursor_value" == 0 then goto index 579;
   if "cursor_value" == 1 then goto index 577;
   if "cursor_value" == 2 then goto index 575;
   if "cursor_value" == 3 then goto index 573;
   if "cursor_value" == 4 then goto index 571;
   if "cursor_value" == 5 then goto index 569;
   if "cursor_value" == 6 then goto index 567;
   if "cursor_value" == 7 then goto index 565;
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 608;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 608;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 607;
   if "curr_plate" == 1 then goto index 605;
   if "curr_plate" == 2 then goto index 603;
   if "curr_plate" == 3 then goto index 601;
   if "curr_plate" == 4 then goto index 599;
   if "curr_plate" == 5 then goto index 597;
   if "curr_plate" == 6 then goto index 595;
   if "curr_plate" == 7 then goto index 593;
   goto index 608;
   show serial_dialog "hanoi_plate_7";
   goto index 608;
   show serial_dialog "hanoi_plate_6";
   goto index 608;
   show serial_dialog "hanoi_plate_5";
   goto index 608;
   show serial_dialog "hanoi_plate_4";
   goto index 608;
   show serial_dialog "hanoi_plate_3";
   goto index 608;
   show serial_dialog "hanoi_plate_2";
   goto index 608;
   show serial_dialog "hanoi_plate_1";
   goto index 608;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 646;
   if "cursor_pos" == "column" then goto index 613;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 645;
   if "cursor_hinge_height" == "row" then goto index 643;
   if "cursor_grip_height" == "row" then goto index 618;
   show serial_dialog "hanoi_space";
   goto index 670;
   if "cursor_value" == 0 then goto index 641;
   if "cursor_value" == 1 then goto index 639;
   if "cursor_value" == 2 then goto index 637;
   if "cursor_value" == 3 then goto index 635;
   if "cursor_value" == 4 then goto index 633;
   if "cursor_value" == 5 then goto index 631;
   if "cursor_value" == 6 then goto index 629;
   if "cursor_value" == 7 then goto index 627;
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 670;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 670;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 669;
   if "curr_plate" == 1 then goto index 667;
   if "curr_plate" == 2 then goto index 665;
   if "curr_plate" == 3 then goto index 663;
   if "curr_plate" == 4 then goto index 661;
   if "curr_plate" == 5 then goto index 659;
   if "curr_plate" == 6 then goto index 657;
   if "curr_plate" == 7 then goto index 655;
   goto index 670;
   show serial_dialog "hanoi_plate_7";
   goto index 670;
   show serial_dialog "hanoi_plate_6";
   goto index 670;
   show serial_dialog "hanoi_plate_5";
   goto index 670;
   show serial_dialog "hanoi_plate_4";
   goto index 670;
   show serial_dialog "hanoi_plate_3";
   goto index 670;
   show serial_dialog "hanoi_plate_2";
   goto index 670;
   show serial_dialog "hanoi_plate_1";
   goto index 670;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 708;
   if "cursor_pos" == "column" then goto index 675;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 707;
   if "cursor_hinge_height" == "row" then goto index 705;
   if "cursor_grip_height" == "row" then goto index 680;
   show serial_dialog "hanoi_space";
   goto index 732;
   if "cursor_value" == 0 then goto index 703;
   if "cursor_value" == 1 then goto index 701;
   if "cursor_value" == 2 then goto index 699;
   if "cursor_value" == 3 then goto index 697;
   if "cursor_value" == 4 then goto index 695;
   if "cursor_value" == 5 then goto index 693;
   if "cursor_value" == 6 then goto index 691;
   if "cursor_value" == 7 then goto index 689;
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 732;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 732;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 731;
   if "curr_plate" == 1 then goto index 729;
   if "curr_plate" == 2 then goto index 727;
   if "curr_plate" == 3 then goto index 725;
   if "curr_plate" == 4 then goto index 723;
   if "curr_plate" == 5 then goto index 721;
   if "curr_plate" == 6 then goto index 719;
   if "curr_plate" == 7 then goto index 717;
   goto index 732;
   show serial_dialog "hanoi_plate_7";
   goto index 732;
   show serial_dialog "hanoi_plate_6";
   goto index 732;
   show serial_dialog "hanoi_plate_5";
   goto index 732;
   show serial_dialog "hanoi_plate_4";
   goto index 732;
   show serial_dialog "hanoi_plate_3";
   goto index 732;
   show serial_dialog "hanoi_plate_2";
   goto index 732;
   show serial_dialog "hanoi_plate_1";
   goto index 732;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 775;
   if "cursor_pos" == "column" then goto index 742;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 774;
   if "cursor_hinge_height" == "row" then goto index 772;
   if "cursor_grip_height" == "row" then goto index 747;
   show serial_dialog "hanoi_space";
   goto index 799;
   if "cursor_value" == 0 then goto index 770;
   if "cursor_value" == 1 then goto index 768;
   if "cursor_value" == 2 then goto index 766;
   if "cursor_value" == 3 then goto index 764;
   if "cursor_value" == 4 then goto index 762;
   if "cursor_value" == 5 then goto index 760;
   if "cursor_value" == 6 then goto index 758;
   if "cursor_value" == 7 then goto index 756;
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 799;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 799;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 798;
   if "curr_plate" == 1 then goto index 796;
   if "curr_plate" == 2 then goto index 794;
   if "curr_plate" == 3 then goto index 792;
   if "curr_plate" == 4 then goto index 790;
   if "curr_plate" == 5 then goto index 788;
   if "curr_plate" == 6 then goto index 786;
   if "curr_plate" == 7 then goto index 784;
   goto index 799;
   show serial_dialog "hanoi_plate_7";
   goto index 799;
   show serial_dialog "hanoi_plate_6";
   goto index 799;
   show serial_dialog "hanoi_plate_5";
   goto index 799;
   show serial_dialog "hanoi_plate_4";
   goto index 799;
   show serial_dialog "hanoi_plate_3";
   goto index 799;
   show serial_dialog "hanoi_plate_2";
   goto index 799;
   show serial_dialog "hanoi_plate_1";
   goto index 799;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 837;
   if "cursor_pos" == "column" then goto index 804;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 836;
   if "cursor_hinge_height" == "row" then goto index 834;
   if "cursor_grip_height" == "row" then goto index 809;
   show serial_dialog "hanoi_space";
   goto index 861;
   if "cursor_value" == 0 then goto index 832;
   if "cursor_value" == 1 then goto index 830;
   if "cursor_value" == 2 then goto index 828;
   if "cursor_value" == 3 then goto index 826;
   if "cursor_value" == 4 then goto index 824;
   if "cursor_value" == 5 then goto index 822;
   if "cursor_value" == 6 then goto index 820;
   if "cursor_value" == 7 then goto index 818;
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 861;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 861;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 860;
   if "curr_plate" == 1 then goto index 858;
   if "curr_plate" == 2 then goto index 856;
   if "curr_plate" == 3 then goto index 854;
   if "curr_plate" == 4 then goto index 852;
   if "curr_plate" == 5 then goto index 850;
   if "curr_plate" == 6 then goto index 848;
   if "curr_plate" == 7 then goto index 846;
   goto index 861;
   show serial_dialog "hanoi_plate_7";
   goto index 861;
   show serial_dialog "hanoi_plate_6";
   goto index 861;
   show serial_dialog "hanoi_plate_5";
   goto index 861;
   show serial_dialog "hanoi_plate_4";
   goto index 861;
   show serial_dialog "hanoi_plate_3";
   goto index 861;
   show serial_dialog "hanoi_plate_2";
   goto index 861;
   show serial_dialog "hanoi_plate_1";
   goto index 861;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 899;
   if "cursor_pos" == "column" then goto index 866;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 898;
   if "cursor_hinge_height" == "row" then goto index 896;
   if "cursor_grip_height" == "row" then goto index 871;
   show serial_dialog "hanoi_space";
   goto index 923;
   if "cursor_value" == 0 then goto index 894;
   if "cursor_value" == 1 then goto index 892;
   if "cursor_value" == 2 then goto index 890;
   if "cursor_value" == 3 then goto index 888;
   if "cursor_value" == 4 then goto index 886;
   if "cursor_value" == 5 then goto index 884;
   if "cursor_value" == 6 then goto index 882;
   if "cursor_value" == 7 then goto index 880;
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 923;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 923;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 922;
   if "curr_plate" == 1 then goto index 920;
   if "curr_plate" == 2 then goto index 918;
   if "curr_plate" == 3 then goto index 916;
   if "curr_plate" == 4 then goto index 914;
   if "curr_plate" == 5 then goto index 912;
   if "curr_plate" == 6 then goto index 910;
   if "curr_plate" == 7 then goto index 908;
   goto index 923;
   show serial_dialog "hanoi_plate_7";
   goto index 923;
   show serial_dialog "hanoi_plate_6";
   goto index 923;
   show serial_dialog "hanoi_plate_5";
   goto index 923;
   show serial_dialog "hanoi_plate_4";
   goto index 923;
   show serial_dialog "hanoi_plate_3";
   goto index 923;
   show serial_dialog "hanoi_plate_2";
   goto index 923;
   show serial_dialog "hanoi_plate_1";
   goto index 923;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 966;
   if "cursor_pos" == "column" then goto index 933;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 965;
   if "cursor_hinge_height" == "row" then goto index 963;
   if "cursor_grip_height" == "row" then goto index 938;
   show serial_dialog "hanoi_space";
   goto index 990;
   if "cursor_value" == 0 then goto index 961;
   if "cursor_value" == 1 then goto index 959;
   if "cursor_value" == 2 then goto index 957;
   if "cursor_value" == 3 then goto index 955;
   if "cursor_value" == 4 then goto index 953;
   if "cursor_value" == 5 then goto index 951;
   if "cursor_value" == 6 then goto index 949;
   if "cursor_value" == 7 then goto index 947;
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 990;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 990;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 989;
   if "curr_plate" == 1 then goto index 987;
   if "curr_plate" == 2 then goto index 985;
   if "curr_plate" == 3 then goto index 983;
   if "curr_plate" == 4 then goto index 981;
   if "curr_plate" == 5 then goto index 979;
   if "curr_plate" == 6 then goto index 977;
   if "curr_plate" == 7 then goto index 975;
   goto index 990;
   show serial_dialog "hanoi_plate_7";
   goto index 990;
   show serial_dialog "hanoi_plate_6";
   goto index 990;
   show serial_dialog "hanoi_plate_5";
   goto index 990;
   show serial_dialog "hanoi_plate_4";
   goto index 990;
   show serial_dialog "hanoi_plate_3";
   goto index 990;
   show serial_dialog "hanoi_plate_2";
   goto index 990;
   show serial_dialog "hanoi_plate_1";
   goto index 990;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1028;
   if "cursor_pos" == "column" then goto index 995;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1027;
   if "cursor_hinge_height" == "row" then goto index 1025;
   if "cursor_grip_height" == "row" then goto index 1000;
   show serial_dialog "hanoi_space";
   goto index 1052;
   if "cursor_value" == 0 then goto index 1023;
   if "cursor_value" == 1 then goto index 1021;
   if "cursor_value" == 2 then goto index 1019;
   if "cursor_value" == 3 then goto index 1017;
   if "cursor_value" == 4 then goto index 1015;
   if "cursor_value" == 5 then goto index 1013;
   if "cursor_value" == 6 then goto index 1011;
   if "cursor_value" == 7 then goto index 1009;
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1052;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1052;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1051;
   if "curr_plate" == 1 then goto index 1049;
   if "curr_plate" == 2 then goto index 1047;
   if "curr_plate" == 3 then goto index 1045;
   if "curr_plate" == 4 then goto index 1043;
   if "curr_plate" == 5 then goto index 1041;
   if "curr_plate" == 6 then goto index 1039;
   if "curr_plate" == 7 then goto index 1037;
   goto index 1052;
   show serial_dialog "hanoi_plate_7";
   goto index 1052;
   show serial_dialog "hanoi_plate_6";
   goto index 1052;
   show serial_dialog "hanoi_plate_5";
   goto index 1052;
   show serial_dialog "hanoi_plate_4";
   goto index 1052;
   show serial_dialog "hanoi_plate_3";
   goto index 1052;
   show serial_dialog "hanoi_plate_2";
   goto index 1052;
   show serial_dialog "hanoi_plate_1";
   goto index 1052;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1090;
   if "cursor_pos" == "column" then goto index 1057;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1089;
   if "cursor_hinge_height" == "row" then goto index 1087;
   if "cursor_grip_height" == "row" then goto index 1062;
   show serial_dialog "hanoi_space";
   goto index 1114;
   if "cursor_value" == 0 then goto index 1085;
   if "cursor_value" == 1 then goto index 1083;
   if "cursor_value" == 2 then goto index 1081;
   if "cursor_value" == 3 then goto index 1079;
   if "cursor_value" == 4 then goto index 1077;
   if "cursor_value" == 5 then goto index 1075;
   if "cursor_value" == 6 then goto index 1073;
   if "cursor_value" == 7 then goto index 1071;
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1114;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1114;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1113;
   if "curr_plate" == 1 then goto index 1111;
   if "curr_plate" == 2 then goto index 1109;
   if "curr_plate" == 3 then goto index 1107;
   if "curr_plate" == 4 then goto index 1105;
   if "curr_plate" == 5 then goto index 1103;
   if "curr_plate" == 6 then goto index 1101;
   if "curr_plate" == 7 then goto index 1099;
   goto index 1114;
   show serial_dialog "hanoi_plate_7";
   goto index 1114;
   show serial_dialog "hanoi_plate_6";
   goto index 1114;
   show serial_dialog "hanoi_plate_5";
   goto index 1114;
   show serial_dialog "hanoi_plate_4";
   goto index 1114;
   show serial_dialog "hanoi_plate_3";
   goto index 1114;
   show serial_dialog "hanoi_plate_2";
   goto index 1114;
   show serial_dialog "hanoi_plate_1";
   goto index 1114;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1157;
   if "cursor_pos" == "column" then goto index 1124;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1156;
   if "cursor_hinge_height" == "row" then goto index 1154;
   if "cursor_grip_height" == "row" then goto index 1129;
   show serial_dialog "hanoi_space";
   goto index 1181;
   if "cursor_value" == 0 then goto index 1152;
   if "cursor_value" == 1 then goto index 1150;
   if "cursor_value" == 2 then goto index 1148;
   if "cursor_value" == 3 then goto index 1146;
   if "cursor_value" == 4 then goto index 1144;
   if "cursor_value" == 5 then goto index 1142;
   if "cursor_value" == 6 then goto index 1140;
   if "cursor_value" == 7 then goto index 1138;
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1181;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1181;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1180;
   if "curr_plate" == 1 then goto index 1178;
   if "curr_plate" == 2 then goto index 1176;
   if "curr_plate" == 3 then goto index 1174;
   if "curr_plate" == 4 then goto index 1172;
   if "curr_plate" == 5 then goto index 1170;
   if "curr_plate" == 6 then goto index 1168;
   if "curr_plate" == 7 then goto index 1166;
   goto index 1181;
   show serial_dialog "hanoi_plate_7";
   goto index 1181;
   show serial_dialog "hanoi_plate_6";
   goto index 1181;
   show serial_dialog "hanoi_plate_5";
   goto index 1181;
   show serial_dialog "hanoi_plate_4";
   goto index 1181;
   show serial_dialog "hanoi_plate_3";
   goto index 1181;
   show serial_dialog "hanoi_plate_2";
   goto index 1181;
   show serial_dialog "hanoi_plate_1";
   goto index 1181;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1219;
   if "cursor_pos" == "column" then goto index 1186;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1218;
   if "cursor_hinge_height" == "row" then goto index 1216;
   if "cursor_grip_height" == "row" then goto index 1191;
   show serial_dialog "hanoi_space";
   goto index 1243;
   if "cursor_value" == 0 then goto index 1214;
   if "cursor_value" == 1 then goto index 1212;
   if "cursor_value" == 2 then goto index 1210;
   if "cursor_value" == 3 then goto index 1208;
   if "cursor_value" == 4 then goto index 1206;
   if "cursor_value" == 5 then goto index 1204;
   if "cursor_value" == 6 then goto index 1202;
   if "cursor_value" == 7 then goto index 1200;
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1243;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1243;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1242;
   if "curr_plate" == 1 then goto index 1240;
   if "curr_plate" == 2 then goto index 1238;
   if "curr_plate" == 3 then goto index 1236;
   if "curr_plate" == 4 then goto index 1234;
   if "curr_plate" == 5 then goto index 1232;
   if "curr_plate" == 6 then goto index 1230;
   if "curr_plate" == 7 then goto index 1228;
   goto index 1243;
   show serial_dialog "hanoi_plate_7";
   goto index 1243;
   show serial_dialog "hanoi_plate_6";
   goto index 1243;
   show serial_dialog "hanoi_plate_5";
   goto index 1243;
   show serial_dialog "hanoi_plate_4";
   goto index 1243;
   show serial_dialog "hanoi_plate_3";
   goto index 1243;
   show serial_dialog "hanoi_plate_2";
   goto index 1243;
   show serial_dialog "hanoi_plate_1";
   goto index 1243;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1281;
   if "cursor_pos" == "column" then goto index 1248;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1280;
   if "cursor_hinge_height" == "row" then goto index 1278;
   if "cursor_grip_height" == "row" then goto index 1253;
   show serial_dialog "hanoi_space";
   goto index 1305;
   if "cursor_value" == 0 then goto index 1276;
   if "cursor_value" == 1 then goto index 1274;
   if "cursor_value" == 2 then goto index 1272;
   if "cursor_value" == 3 then goto index 1270;
   if "cursor_value" == 4 then goto index 1268;
   if "cursor_value" == 5 then goto index 1266;
   if "cursor_value" == 6 then goto index 1264;
   if "cursor_value" == 7 then goto index 1262;
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1305;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1305;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1304;
   if "curr_plate" == 1 then goto index 1302;
   if "curr_plate" == 2 then goto index 1300;
   if "curr_plate" == 3 then goto index 1298;
   if "curr_plate" == 4 then goto index 1296;
   if "curr_plate" == 5 then goto index 1294;
   if "curr_plate" == 6 then goto index 1292;
   if "curr_plate" == 7 then goto index 1290;
   goto index 1305;
   show serial_dialog "hanoi_plate_7";
   goto index 1305;
   show serial_dialog "hanoi_plate_6";
   goto index 1305;
   show serial_dialog "hanoi_plate_5";
   goto index 1305;
   show serial_dialog "hanoi_plate_4";
   goto index 1305;
   show serial_dialog "hanoi_plate_3";
   goto index 1305;
   show serial_dialog "hanoi_plate_2";
   goto index 1305;
   show serial_dialog "hanoi_plate_1";
   goto index 1305;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1348;
   if "cursor_pos" == "column" then goto index 1315;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1347;
   if "cursor_hinge_height" == "row" then goto index 1345;
   if "cursor_grip_height" == "row" then goto index 1320;
   show serial_dialog "hanoi_space";
   goto index 1372;
   if "cursor_value" == 0 then goto index 1343;
   if "cursor_value" == 1 then goto index 1341;
   if "cursor_value" == 2 then goto index 1339;
   if "cursor_value" == 3 then goto index 1337;
   if "cursor_value" == 4 then goto index 1335;
   if "cursor_value" == 5 then goto index 1333;
   if "cursor_value" == 6 then goto index 1331;
   if "cursor_value" == 7 then goto index 1329;
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1372;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1372;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1371;
   if "curr_plate" == 1 then goto index 1369;
   if "curr_plate" == 2 then goto index 1367;
   if "curr_plate" == 3 then goto index 1365;
   if "curr_plate" == 4 then goto index 1363;
   if "curr_plate" == 5 then goto index 1361;
   if "curr_plate" == 6 then goto index 1359;
   if "curr_plate" == 7 then goto index 1357;
   goto index 1372;
   show serial_dialog "hanoi_plate_7";
   goto index 1372;
   show serial_dialog "hanoi_plate_6";
   goto index 1372;
   show serial_dialog "hanoi_plate_5";
   goto index 1372;
   show serial_dialog "hanoi_plate_4";
   goto index 1372;
   show serial_dialog "hanoi_plate_3";
   goto index 1372;
   show serial_dialog "hanoi_plate_2";
   goto index 1372;
   show serial_dialog "hanoi_plate_1";
   goto index 1372;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1410;
   if "cursor_pos" == "column" then goto index 1377;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1409;
   if "cursor_hinge_height" == "row" then goto index 1407;
   if "cursor_grip_height" == "row" then goto index 1382;
   show serial_dialog "hanoi_space";
   goto index 1434;
   if "cursor_value" == 0 then goto index 1405;
   if "cursor_value" == 1 then goto index 1403;
   if "cursor_value" == 2 then goto index 1401;
   if "cursor_value" == 3 then goto index 1399;
   if "cursor_value" == 4 then goto index 1397;
   if "cursor_value" == 5 then goto index 1395;
   if "cursor_value" == 6 then goto index 1393;
   if "cursor_value" == 7 then goto index 1391;
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1434;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1434;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1433;
   if "curr_plate" == 1 then goto index 1431;
   if "curr_plate" == 2 then goto index 1429;
   if "curr_plate" == 3 then goto index 1427;
   if "curr_plate" == 4 then goto index 1425;
   if "curr_plate" == 5 then goto index 1423;
   if "curr_plate" == 6 then goto index 1421;
   if "curr_plate" == 7 then goto index 1419;
   goto index 1434;
   show serial_dialog "hanoi_plate_7";
   goto index 1434;
   show serial_dialog "hanoi_plate_6";
   goto index 1434;
   show serial_dialog "hanoi_plate_5";
   goto index 1434;
   show serial_dialog "hanoi_plate_4";
   goto index 1434;
   show serial_dialog "hanoi_plate_3";
   goto index 1434;
   show serial_dialog "hanoi_plate_2";
   goto index 1434;
   show serial_dialog "hanoi_plate_1";
   goto index 1434;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1472;
   if "cursor_pos" == "column" then goto index 1439;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1471;
   if "cursor_hinge_height" == "row" then goto index 1469;
   if "cursor_grip_height" == "row" then goto index 1444;
   show serial_dialog "hanoi_space";
   goto index 1496;
   if "cursor_value" == 0 then goto index 1467;
   if "cursor_value" == 1 then goto index 1465;
   if "cursor_value" == 2 then goto index 1463;
   if "cursor_value" == 3 then goto index 1461;
   if "cursor_value" == 4 then goto index 1459;
   if "cursor_value" == 5 then goto index 1457;
   if "cursor_value" == 6 then goto index 1455;
   if "cursor_value" == 7 then goto index 1453;
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1496;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1496;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1495;
   if "curr_plate" == 1 then goto index 1493;
   if "curr_plate" == 2 then goto index 1491;
   if "curr_plate" == 3 then goto index 1489;
   if "curr_plate" == 4 then goto index 1487;
   if "curr_plate" == 5 then goto index 1485;
   if "curr_plate" == 6 then goto index 1483;
   if "curr_plate" == 7 then goto index 1481;
   goto index 1496;
   show serial_dialog "hanoi_plate_7";
   goto index 1496;
   show serial_dialog "hanoi_plate_6";
   goto index 1496;
   show serial_dialog "hanoi_plate_5";
   goto index 1496;
   show serial_dialog "hanoi_plate_4";
   goto index 1496;
   show serial_dialog "hanoi_plate_3";
   goto index 1496;
   show serial_dialog "hanoi_plate_2";
   goto index 1496;
   show serial_dialog "hanoi_plate_1";
   goto index 1496;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1539;
   if "cursor_pos" == "column" then goto index 1506;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1538;
   if "cursor_hinge_height" == "row" then goto index 1536;
   if "cursor_grip_height" == "row" then goto index 1511;
   show serial_dialog "hanoi_space";
   goto index 1563;
   if "cursor_value" == 0 then goto index 1534;
   if "cursor_value" == 1 then goto index 1532;
   if "cursor_value" == 2 then goto index 1530;
   if "cursor_value" == 3 then goto index 1528;
   if "cursor_value" == 4 then goto index 1526;
   if "cursor_value" == 5 then goto index 1524;
   if "cursor_value" == 6 then goto index 1522;
   if "cursor_value" == 7 then goto index 1520;
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1563;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1563;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1562;
   if "curr_plate" == 1 then goto index 1560;
   if "curr_plate" == 2 then goto index 1558;
   if "curr_plate" == 3 then goto index 1556;
   if "curr_plate" == 4 then goto index 1554;
   if "curr_plate" == 5 then goto index 1552;
   if "curr_plate" == 6 then goto index 1550;
   if "curr_plate" == 7 then goto index 1548;
   goto index 1563;
   show serial_dialog "hanoi_plate_7";
   goto index 1563;
   show serial_dialog "hanoi_plate_6";
   goto index 1563;
   show serial_dialog "hanoi_plate_5";
   goto index 1563;
   show serial_dialog "hanoi_plate_4";
   goto index 1563;
   show serial_dialog "hanoi_plate_3";
   goto index 1563;
   show serial_dialog "hanoi_plate_2";
   goto index 1563;
   show serial_dialog "hanoi_plate_1";
   goto index 1563;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1601;
   if "cursor_pos" == "column" then goto index 1568;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1600;
   if "cursor_hinge_height" == "row" then goto index 1598;
   if "cursor_grip_height" == "row" then goto index 1573;
   show serial_dialog "hanoi_space";
   goto index 1625;
   if "cursor_value" == 0 then goto index 1596;
   if "cursor_value" == 1 then goto index 1594;
   if "cursor_value" == 2 then goto index 1592;
   if "cursor_value" == 3 then goto index 1590;
   if "cursor_value" == 4 then goto index 1588;
   if "cursor_value" == 5 then goto index 1586;
   if "cursor_value" == 6 then goto index 1584;
   if "cursor_value" == 7 then goto index 1582;
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1625;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1625;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1624;
   if "curr_plate" == 1 then goto index 1622;
   if "curr_plate" == 2 then goto index 1620;
   if "curr_plate" == 3 then goto index 1618;
   if "curr_plate" == 4 then goto index 1616;
   if "curr_plate" == 5 then goto index 1614;
   if "curr_plate" == 6 then goto index 1612;
   if "curr_plate" == 7 then goto index 1610;
   goto index 1625;
   show serial_dialog "hanoi_plate_7";
   goto index 1625;
   show serial_dialog "hanoi_plate_6";
   goto index 1625;
   show serial_dialog "hanoi_plate_5";
   goto index 1625;
   show serial_dialog "hanoi_plate_4";
   goto index 1625;
   show serial_dialog "hanoi_plate_3";
   goto index 1625;
   show serial_dialog "hanoi_plate_2";
   goto index 1625;
   show serial_dialog "hanoi_plate_1";
   goto index 1625;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1663;
   if "cursor_pos" == "column" then goto index 1630;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1662;
   if "cursor_hinge_height" == "row" then goto index 1660;
   if "cursor_grip_height" == "row" then goto index 1635;
   show serial_dialog "hanoi_space";
   goto index 1687;
   if "cursor_value" == 0 then goto index 1658;
   if "cursor_value" == 1 then goto index 1656;
   if "cursor_value" == 2 then goto index 1654;
   if "cursor_value" == 3 then goto index 1652;
   if "cursor_value" == 4 then goto index 1650;
   if "cursor_value" == 5 then goto index 1648;
   if "cursor_value" == 6 then goto index 1646;
   if "cursor_value" == 7 then goto index 1644;
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1687;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1687;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1686;
   if "curr_plate" == 1 then goto index 1684;
   if "curr_plate" == 2 then goto index 1682;
   if "curr_plate" == 3 then goto index 1680;
   if "curr_plate" == 4 then goto index 1678;
   if "curr_plate" == 5 then goto index 1676;
   if "curr_plate" == 6 then goto index 1674;
   if "curr_plate" == 7 then goto index 1672;
   goto index 1687;
   show serial_dialog "hanoi_plate_7";
   goto index 1687;
   show serial_dialog "hanoi_plate_6";
   goto index 1687;
   show serial_dialog "hanoi_plate_5";
   goto index 1687;
   show serial_dialog "hanoi_plate_4";
   goto index 1687;
   show serial_dialog "hanoi_plate_3";
   goto index 1687;
   show serial_dialog "hanoi_plate_2";
   goto index 1687;
   show serial_dialog "hanoi_plate_1";
   goto index 1687;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1713;
   if "curr_plate" == 1 then goto index 1711;
   if "curr_plate" == 2 then goto index 1709;
   if "curr_plate" == 3 then goto index 1707;
   if "curr_plate" == 4 then goto index 1705;
   if "curr_plate" == 5 then goto index 1703;
   if "curr_plate" == 6 then goto index 1701;
   if "curr_plate" == 7 then goto index 1699;
   goto index 1714;
   show serial_dialog "hanoi_plate_7";
   goto index 1714;
   show serial_dialog "hanoi_plate_6";
   goto index 1714;
   show serial_dialog "hanoi_plate_5";
   goto index 1714;
   show serial_dialog "hanoi_plate_4";
   goto index 1714;
   show serial_dialog "hanoi_plate_3";
   goto index 1714;
   show serial_dialog "hanoi_plate_2";
   goto index 1714;
   show serial_dialog "hanoi_plate_1";
   goto index 1714;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1738;
   if "curr_plate" == 1 then goto index 1736;
   if "curr_plate" == 2 then goto index 1734;
   if "curr_plate" == 3 then goto index 1732;
   if "curr_plate" == 4 then goto index 1730;
   if "curr_plate" == 5 then goto index 1728;
   if "curr_plate" == 6 then goto index 1726;
   if "curr_plate" == 7 then goto index 1724;
   goto index 1739;
   show serial_dialog "hanoi_plate_7";
   goto index 1739;
   show serial_dialog "hanoi_plate_6";
   goto index 1739;
   show serial_dialog "hanoi_plate_5";
   goto index 1739;
   show serial_dialog "hanoi_plate_4";
   goto index 1739;
   show serial_dialog "hanoi_plate_3";
   goto index 1739;
   show serial_dialog "hanoi_plate_2";
   goto index 1739;
   show serial_dialog "hanoi_plate_1";
   goto index 1739;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1763;
   if "curr_plate" == 1 then goto index 1761;
   if "curr_plate" == 2 then goto index 1759;
   if "curr_plate" == 3 then goto index 1757;
   if "curr_plate" == 4 then goto index 1755;
   if "curr_plate" == 5 then goto index 1753;
   if "curr_plate" == 6 then goto index 1751;
   if "curr_plate" == 7 then goto index 1749;
   goto index 1764;
   show serial_dialog "hanoi_plate_7";
   goto index 1764;
   show serial_dialog "hanoi_plate_6";
   goto index 1764;
   show serial_dialog "hanoi_plate_5";
   goto index 1764;
   show serial_dialog "hanoi_plate_4";
   goto index 1764;
   show serial_dialog "hanoi_plate_3";
   goto index 1764;
   show serial_dialog "hanoi_plate_2";
   goto index 1764;
   show serial_dialog "hanoi_plate_1";
   goto index 1764;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1772;
   if "hanoi_draw_help" then goto index 1769;
   goto index 1808;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1808;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1786;
   goto index 1787;
   delete command "WIN";
   if !"hanoi_won" then goto index 1806;
   if !"ch2-carrying-plate" then goto index 1791;
   if !"ch2-installed-plate" then goto index 1791;
   goto index 1807;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1795;
   goto index 1796;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1804;
   if "hanoi_move_count" == 69 then goto index 1802;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1807;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"tick_hanoi" {
   if button HAX pressed then goto index 4864;
   if button LJOY_UP pressed then goto index 3056;
   if button RJOY_UP pressed then goto index 3056;
   if button LJOY_DOWN pressed then goto index 3056;
   if button RJOY_DOWN pressed then goto index 3056;
   if button LJOY_RIGHT pressed then goto index 1533;
   if button RJOY_RIGHT pressed then goto index 1533;
   if button LJOY_LEFT pressed then goto index 10;
   if button RJOY_LEFT pressed then goto index 10;
   goto index 4901;
   if "cursor_pos" == 2 then goto index 13;
   if "cursor_pos" == 3 then goto index 13;
   goto index 14;
   "cursor_pos" -= 1;
   if "cursor_pos" == 1 then goto index 22;
   if "cursor_pos" == 2 then goto index 20;
   if "cursor_pos" == 3 then goto index 18;
   goto index 23;
   "cursor_grip_height" = "array3_length";
   goto index 23;
   "cursor_grip_height" = "array2_length";
   goto index 23;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 39;
   "column" = 1;
   if "column" <= 3 then goto index 33;
   goto index 48;
   if "cursor_pos" == "column" then goto index 36;
   show serial_dialog "hanoi_space";
   goto index 37;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 31;
   if "cursor_pos" == 1 then goto index 47;
   if "cursor_pos" == 2 then goto index 45;
   if "cursor_pos" == 3 then goto index 43;
   goto index 48;
   show serial_dialog "hanoi_won_message3a";
   goto index 48;
   show serial_dialog "hanoi_won_message2a";
   goto index 48;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 129;
   if "hanoi_won" then goto index 117;
   "column" = 1;
   if "column" <= 3 then goto index 55;
   goto index 131;
   if "curr_plate" != 0 then goto index 91;
   if "cursor_pos" == "column" then goto index 58;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 90;
   if "cursor_hinge_height" == "row" then goto index 88;
   if "cursor_grip_height" == "row" then goto index 63;
   show serial_dialog "hanoi_space";
   goto index 115;
   if "cursor_value" == 0 then goto index 86;
   if "cursor_value" == 1 then goto index 84;
   if "cursor_value" == 2 then goto index 82;
   if "cursor_value" == 3 then goto index 80;
   if "cursor_value" == 4 then goto index 78;
   if "cursor_value" == 5 then goto index 76;
   if "cursor_value" == 6 then goto index 74;
   if "cursor_value" == 7 then goto index 72;
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 87;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 115;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 115;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 114;
   if "curr_plate" == 1 then goto index 112;
   if "curr_plate" == 2 then goto index 110;
   if "curr_plate" == 3 then goto index 108;
   if "curr_plate" == 4 then goto index 106;
   if "curr_plate" == 5 then goto index 104;
   if "curr_plate" == 6 then goto index 102;
   if "curr_plate" == 7 then goto index 100;
   goto index 115;
   show serial_dialog "hanoi_plate_7";
   goto index 115;
   show serial_dialog "hanoi_plate_6";
   goto index 115;
   show serial_dialog "hanoi_plate_5";
   goto index 115;
   show serial_dialog "hanoi_plate_4";
   goto index 115;
   show serial_dialog "hanoi_plate_3";
   goto index 115;
   show serial_dialog "hanoi_plate_2";
   goto index 115;
   show serial_dialog "hanoi_plate_1";
   goto index 115;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 53;
   if "cursor_pos" == 1 then goto index 128;
   if "cursor_pos" == 2 then goto index 127;
   if "cursor_pos" == 3 then goto index 120;
   if "hanoi_move_count" < 100 then goto index 126;
   if "hanoi_move_count" < 1000 then goto index 124;
   show serial_dialog "hanoi_won_message3b4";
   goto index 129;
   show serial_dialog "hanoi_won_message3b3";
   goto index 129;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 136;
   goto index 198;
   if "curr_plate" != 0 then goto index 172;
   if "cursor_pos" == "column" then goto index 139;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 171;
   if "cursor_hinge_height" == "row" then goto index 169;
   if "cursor_grip_height" == "row" then goto index 144;
   show serial_dialog "hanoi_space";
   goto index 196;
   if "cursor_value" == 0 then goto index 167;
   if "cursor_value" == 1 then goto index 165;
   if "cursor_value" == 2 then goto index 163;
   if "cursor_value" == 3 then goto index 161;
   if "cursor_value" == 4 then goto index 159;
   if "cursor_value" == 5 then goto index 157;
   if "cursor_value" == 6 then goto index 155;
   if "cursor_value" == 7 then goto index 153;
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 168;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 196;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 196;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 195;
   if "curr_plate" == 1 then goto index 193;
   if "curr_plate" == 2 then goto index 191;
   if "curr_plate" == 3 then goto index 189;
   if "curr_plate" == 4 then goto index 187;
   if "curr_plate" == 5 then goto index 185;
   if "curr_plate" == 6 then goto index 183;
   if "curr_plate" == 7 then goto index 181;
   goto index 196;
   show serial_dialog "hanoi_plate_7";
   goto index 196;
   show serial_dialog "hanoi_plate_6";
   goto index 196;
   show serial_dialog "hanoi_plate_5";
   goto index 196;
   show serial_dialog "hanoi_plate_4";
   goto index 196;
   show serial_dialog "hanoi_plate_3";
   goto index 196;
   show serial_dialog "hanoi_plate_2";
   goto index 196;
   show serial_dialog "hanoi_plate_1";
   goto index 196;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 134;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 203;
   goto index 265;
   if "curr_plate" != 0 then goto index 239;
   if "cursor_pos" == "column" then goto index 206;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 238;
   if "cursor_hinge_height" == "row" then goto index 236;
   if "cursor_grip_height" == "row" then goto index 211;
   show serial_dialog "hanoi_space";
   goto index 263;
   if "cursor_value" == 0 then goto index 234;
   if "cursor_value" == 1 then goto index 232;
   if "cursor_value" == 2 then goto index 230;
   if "cursor_value" == 3 then goto index 228;
   if "cursor_value" == 4 then goto index 226;
   if "cursor_value" == 5 then goto index 224;
   if "cursor_value" == 6 then goto index 222;
   if "cursor_value" == 7 then goto index 220;
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 235;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 263;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 263;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 262;
   if "curr_plate" == 1 then goto index 260;
   if "curr_plate" == 2 then goto index 258;
   if "curr_plate" == 3 then goto index 256;
   if "curr_plate" == 4 then goto index 254;
   if "curr_plate" == 5 then goto index 252;
   if "curr_plate" == 6 then goto index 250;
   if "curr_plate" == 7 then goto index 248;
   goto index 263;
   show serial_dialog "hanoi_plate_7";
   goto index 263;
   show serial_dialog "hanoi_plate_6";
   goto index 263;
   show serial_dialog "hanoi_plate_5";
   goto index 263;
   show serial_dialog "hanoi_plate_4";
   goto index 263;
   show serial_dialog "hanoi_plate_3";
   goto index 263;
   show serial_dialog "hanoi_plate_2";
   goto index 263;
   show serial_dialog "hanoi_plate_1";
   goto index 263;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 201;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 308;
   if "cursor_pos" == "column" then goto index 275;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 307;
   if "cursor_hinge_height" == "row" then goto index 305;
   if "cursor_grip_height" == "row" then goto index 280;
   show serial_dialog "hanoi_space";
   goto index 332;
   if "cursor_value" == 0 then goto index 303;
   if "cursor_value" == 1 then goto index 301;
   if "cursor_value" == 2 then goto index 299;
   if "cursor_value" == 3 then goto index 297;
   if "cursor_value" == 4 then goto index 295;
   if "cursor_value" == 5 then goto index 293;
   if "cursor_value" == 6 then goto index 291;
   if "cursor_value" == 7 then goto index 289;
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 304;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 332;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 332;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 331;
   if "curr_plate" == 1 then goto index 329;
   if "curr_plate" == 2 then goto index 327;
   if "curr_plate" == 3 then goto index 325;
   if "curr_plate" == 4 then goto index 323;
   if "curr_plate" == 5 then goto index 321;
   if "curr_plate" == 6 then goto index 319;
   if "curr_plate" == 7 then goto index 317;
   goto index 332;
   show serial_dialog "hanoi_plate_7";
   goto index 332;
   show serial_dialog "hanoi_plate_6";
   goto index 332;
   show serial_dialog "hanoi_plate_5";
   goto index 332;
   show serial_dialog "hanoi_plate_4";
   goto index 332;
   show serial_dialog "hanoi_plate_3";
   goto index 332;
   show serial_dialog "hanoi_plate_2";
   goto index 332;
   show serial_dialog "hanoi_plate_1";
   goto index 332;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 370;
   if "cursor_pos" == "column" then goto index 337;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 369;
   if "cursor_hinge_height" == "row" then goto index 367;
   if "cursor_grip_height" == "row" then goto index 342;
   show serial_dialog "hanoi_space";
   goto index 394;
   if "cursor_value" == 0 then goto index 365;
   if "cursor_value" == 1 then goto index 363;
   if "cursor_value" == 2 then goto index 361;
   if "cursor_value" == 3 then goto index 359;
   if "cursor_value" == 4 then goto index 357;
   if "cursor_value" == 5 then goto index 355;
   if "cursor_value" == 6 then goto index 353;
   if "cursor_value" == 7 then goto index 351;
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 366;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 394;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 394;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 393;
   if "curr_plate" == 1 then goto index 391;
   if "curr_plate" == 2 then goto index 389;
   if "curr_plate" == 3 then goto index 387;
   if "curr_plate" == 4 then goto index 385;
   if "curr_plate" == 5 then goto index 383;
   if "curr_plate" == 6 then goto index 381;
   if "curr_plate" == 7 then goto index 379;
   goto index 394;
   show serial_dialog "hanoi_plate_7";
   goto index 394;
   show serial_dialog "hanoi_plate_6";
   goto index 394;
   show serial_dialog "hanoi_plate_5";
   goto index 394;
   show serial_dialog "hanoi_plate_4";
   goto index 394;
   show serial_dialog "hanoi_plate_3";
   goto index 394;
   show serial_dialog "hanoi_plate_2";
   goto index 394;
   show serial_dialog "hanoi_plate_1";
   goto index 394;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 432;
   if "cursor_pos" == "column" then goto index 399;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 431;
   if "cursor_hinge_height" == "row" then goto index 429;
   if "cursor_grip_height" == "row" then goto index 404;
   show serial_dialog "hanoi_space";
   goto index 456;
   if "cursor_value" == 0 then goto index 427;
   if "cursor_value" == 1 then goto index 425;
   if "cursor_value" == 2 then goto index 423;
   if "cursor_value" == 3 then goto index 421;
   if "cursor_value" == 4 then goto index 419;
   if "cursor_value" == 5 then goto index 417;
   if "cursor_value" == 6 then goto index 415;
   if "cursor_value" == 7 then goto index 413;
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 428;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 456;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 456;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 455;
   if "curr_plate" == 1 then goto index 453;
   if "curr_plate" == 2 then goto index 451;
   if "curr_plate" == 3 then goto index 449;
   if "curr_plate" == 4 then goto index 447;
   if "curr_plate" == 5 then goto index 445;
   if "curr_plate" == 6 then goto index 443;
   if "curr_plate" == 7 then goto index 441;
   goto index 456;
   show serial_dialog "hanoi_plate_7";
   goto index 456;
   show serial_dialog "hanoi_plate_6";
   goto index 456;
   show serial_dialog "hanoi_plate_5";
   goto index 456;
   show serial_dialog "hanoi_plate_4";
   goto index 456;
   show serial_dialog "hanoi_plate_3";
   goto index 456;
   show serial_dialog "hanoi_plate_2";
   goto index 456;
   show serial_dialog "hanoi_plate_1";
   goto index 456;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 499;
   if "cursor_pos" == "column" then goto index 466;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 498;
   if "cursor_hinge_height" == "row" then goto index 496;
   if "cursor_grip_height" == "row" then goto index 471;
   show serial_dialog "hanoi_space";
   goto index 523;
   if "cursor_value" == 0 then goto index 494;
   if "cursor_value" == 1 then goto index 492;
   if "cursor_value" == 2 then goto index 490;
   if "cursor_value" == 3 then goto index 488;
   if "cursor_value" == 4 then goto index 486;
   if "cursor_value" == 5 then goto index 484;
   if "cursor_value" == 6 then goto index 482;
   if "cursor_value" == 7 then goto index 480;
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 495;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 523;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 523;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 522;
   if "curr_plate" == 1 then goto index 520;
   if "curr_plate" == 2 then goto index 518;
   if "curr_plate" == 3 then goto index 516;
   if "curr_plate" == 4 then goto index 514;
   if "curr_plate" == 5 then goto index 512;
   if "curr_plate" == 6 then goto index 510;
   if "curr_plate" == 7 then goto index 508;
   goto index 523;
   show serial_dialog "hanoi_plate_7";
   goto index 523;
   show serial_dialog "hanoi_plate_6";
   goto index 523;
   show serial_dialog "hanoi_plate_5";
   goto index 523;
   show serial_dialog "hanoi_plate_4";
   goto index 523;
   show serial_dialog "hanoi_plate_3";
   goto index 523;
   show serial_dialog "hanoi_plate_2";
   goto index 523;
   show serial_dialog "hanoi_plate_1";
   goto index 523;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 561;
   if "cursor_pos" == "column" then goto index 528;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 560;
   if "cursor_hinge_height" == "row" then goto index 558;
   if "cursor_grip_height" == "row" then goto index 533;
   show serial_dialog "hanoi_space";
   goto index 585;
   if "cursor_value" == 0 then goto index 556;
   if "cursor_value" == 1 then goto index 554;
   if "cursor_value" == 2 then goto index 552;
   if "cursor_value" == 3 then goto index 550;
   if "cursor_value" == 4 then goto index 548;
   if "cursor_value" == 5 then goto index 546;
   if "cursor_value" == 6 then goto index 544;
   if "cursor_value" == 7 then goto index 542;
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 557;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 585;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 585;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 584;
   if "curr_plate" == 1 then goto index 582;
   if "curr_plate" == 2 then goto index 580;
   if "curr_plate" == 3 then goto index 578;
   if "curr_plate" == 4 then goto index 576;
   if "curr_plate" == 5 then goto index 574;
   if "curr_plate" == 6 then goto index 572;
   if "curr_plate" == 7 then goto index 570;
   goto index 585;
   show serial_dialog "hanoi_plate_7";
   goto index 585;
   show serial_dialog "hanoi_plate_6";
   goto index 585;
   show serial_dialog "hanoi_plate_5";
   goto index 585;
   show serial_dialog "hanoi_plate_4";
   goto index 585;
   show serial_dialog "hanoi_plate_3";
   goto index 585;
   show serial_dialog "hanoi_plate_2";
   goto index 585;
   show serial_dialog "hanoi_plate_1";
   goto index 585;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 623;
   if "cursor_pos" == "column" then goto index 590;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 622;
   if "cursor_hinge_height" == "row" then goto index 620;
   if "cursor_grip_height" == "row" then goto index 595;
   show serial_dialog "hanoi_space";
   goto index 647;
   if "cursor_value" == 0 then goto index 618;
   if "cursor_value" == 1 then goto index 616;
   if "cursor_value" == 2 then goto index 614;
   if "cursor_value" == 3 then goto index 612;
   if "cursor_value" == 4 then goto index 610;
   if "cursor_value" == 5 then goto index 608;
   if "cursor_value" == 6 then goto index 606;
   if "cursor_value" == 7 then goto index 604;
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 619;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 647;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 647;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 646;
   if "curr_plate" == 1 then goto index 644;
   if "curr_plate" == 2 then goto index 642;
   if "curr_plate" == 3 then goto index 640;
   if "curr_plate" == 4 then goto index 638;
   if "curr_plate" == 5 then goto index 636;
   if "curr_plate" == 6 then goto index 634;
   if "curr_plate" == 7 then goto index 632;
   goto index 647;
   show serial_dialog "hanoi_plate_7";
   goto index 647;
   show serial_dialog "hanoi_plate_6";
   goto index 647;
   show serial_dialog "hanoi_plate_5";
   goto index 647;
   show serial_dialog "hanoi_plate_4";
   goto index 647;
   show serial_dialog "hanoi_plate_3";
   goto index 647;
   show serial_dialog "hanoi_plate_2";
   goto index 647;
   show serial_dialog "hanoi_plate_1";
   goto index 647;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 690;
   if "cursor_pos" == "column" then goto index 657;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 689;
   if "cursor_hinge_height" == "row" then goto index 687;
   if "cursor_grip_height" == "row" then goto index 662;
   show serial_dialog "hanoi_space";
   goto index 714;
   if "cursor_value" == 0 then goto index 685;
   if "cursor_value" == 1 then goto index 683;
   if "cursor_value" == 2 then goto index 681;
   if "cursor_value" == 3 then goto index 679;
   if "cursor_value" == 4 then goto index 677;
   if "cursor_value" == 5 then goto index 675;
   if "cursor_value" == 6 then goto index 673;
   if "cursor_value" == 7 then goto index 671;
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 686;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 714;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 714;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 713;
   if "curr_plate" == 1 then goto index 711;
   if "curr_plate" == 2 then goto index 709;
   if "curr_plate" == 3 then goto index 707;
   if "curr_plate" == 4 then goto index 705;
   if "curr_plate" == 5 then goto index 703;
   if "curr_plate" == 6 then goto index 701;
   if "curr_plate" == 7 then goto index 699;
   goto index 714;
   show serial_dialog "hanoi_plate_7";
   goto index 714;
   show serial_dialog "hanoi_plate_6";
   goto index 714;
   show serial_dialog "hanoi_plate_5";
   goto index 714;
   show serial_dialog "hanoi_plate_4";
   goto index 714;
   show serial_dialog "hanoi_plate_3";
   goto index 714;
   show serial_dialog "hanoi_plate_2";
   goto index 714;
   show serial_dialog "hanoi_plate_1";
   goto index 714;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 752;
   if "cursor_pos" == "column" then goto index 719;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 751;
   if "cursor_hinge_height" == "row" then goto index 749;
   if "cursor_grip_height" == "row" then goto index 724;
   show serial_dialog "hanoi_space";
   goto index 776;
   if "cursor_value" == 0 then goto index 747;
   if "cursor_value" == 1 then goto index 745;
   if "cursor_value" == 2 then goto index 743;
   if "cursor_value" == 3 then goto index 741;
   if "cursor_value" == 4 then goto index 739;
   if "cursor_value" == 5 then goto index 737;
   if "cursor_value" == 6 then goto index 735;
   if "cursor_value" == 7 then goto index 733;
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 748;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 776;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 776;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 775;
   if "curr_plate" == 1 then goto index 773;
   if "curr_plate" == 2 then goto index 771;
   if "curr_plate" == 3 then goto index 769;
   if "curr_plate" == 4 then goto index 767;
   if "curr_plate" == 5 then goto index 765;
   if "curr_plate" == 6 then goto index 763;
   if "curr_plate" == 7 then goto index 761;
   goto index 776;
   show serial_dialog "hanoi_plate_7";
   goto index 776;
   show serial_dialog "hanoi_plate_6";
   goto index 776;
   show serial_dialog "hanoi_plate_5";
   goto index 776;
   show serial_dialog "hanoi_plate_4";
   goto index 776;
   show serial_dialog "hanoi_plate_3";
   goto index 776;
   show serial_dialog "hanoi_plate_2";
   goto index 776;
   show serial_dialog "hanoi_plate_1";
   goto index 776;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 814;
   if "cursor_pos" == "column" then goto index 781;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 813;
   if "cursor_hinge_height" == "row" then goto index 811;
   if "cursor_grip_height" == "row" then goto index 786;
   show serial_dialog "hanoi_space";
   goto index 838;
   if "cursor_value" == 0 then goto index 809;
   if "cursor_value" == 1 then goto index 807;
   if "cursor_value" == 2 then goto index 805;
   if "cursor_value" == 3 then goto index 803;
   if "cursor_value" == 4 then goto index 801;
   if "cursor_value" == 5 then goto index 799;
   if "cursor_value" == 6 then goto index 797;
   if "cursor_value" == 7 then goto index 795;
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 810;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 838;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 838;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 837;
   if "curr_plate" == 1 then goto index 835;
   if "curr_plate" == 2 then goto index 833;
   if "curr_plate" == 3 then goto index 831;
   if "curr_plate" == 4 then goto index 829;
   if "curr_plate" == 5 then goto index 827;
   if "curr_plate" == 6 then goto index 825;
   if "curr_plate" == 7 then goto index 823;
   goto index 838;
   show serial_dialog "hanoi_plate_7";
   goto index 838;
   show serial_dialog "hanoi_plate_6";
   goto index 838;
   show serial_dialog "hanoi_plate_5";
   goto index 838;
   show serial_dialog "hanoi_plate_4";
   goto index 838;
   show serial_dialog "hanoi_plate_3";
   goto index 838;
   show serial_dialog "hanoi_plate_2";
   goto index 838;
   show serial_dialog "hanoi_plate_1";
   goto index 838;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 881;
   if "cursor_pos" == "column" then goto index 848;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 880;
   if "cursor_hinge_height" == "row" then goto index 878;
   if "cursor_grip_height" == "row" then goto index 853;
   show serial_dialog "hanoi_space";
   goto index 905;
   if "cursor_value" == 0 then goto index 876;
   if "cursor_value" == 1 then goto index 874;
   if "cursor_value" == 2 then goto index 872;
   if "cursor_value" == 3 then goto index 870;
   if "cursor_value" == 4 then goto index 868;
   if "cursor_value" == 5 then goto index 866;
   if "cursor_value" == 6 then goto index 864;
   if "cursor_value" == 7 then goto index 862;
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 877;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 905;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 905;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 904;
   if "curr_plate" == 1 then goto index 902;
   if "curr_plate" == 2 then goto index 900;
   if "curr_plate" == 3 then goto index 898;
   if "curr_plate" == 4 then goto index 896;
   if "curr_plate" == 5 then goto index 894;
   if "curr_plate" == 6 then goto index 892;
   if "curr_plate" == 7 then goto index 890;
   goto index 905;
   show serial_dialog "hanoi_plate_7";
   goto index 905;
   show serial_dialog "hanoi_plate_6";
   goto index 905;
   show serial_dialog "hanoi_plate_5";
   goto index 905;
   show serial_dialog "hanoi_plate_4";
   goto index 905;
   show serial_dialog "hanoi_plate_3";
   goto index 905;
   show serial_dialog "hanoi_plate_2";
   goto index 905;
   show serial_dialog "hanoi_plate_1";
   goto index 905;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 943;
   if "cursor_pos" == "column" then goto index 910;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 942;
   if "cursor_hinge_height" == "row" then goto index 940;
   if "cursor_grip_height" == "row" then goto index 915;
   show serial_dialog "hanoi_space";
   goto index 967;
   if "cursor_value" == 0 then goto index 938;
   if "cursor_value" == 1 then goto index 936;
   if "cursor_value" == 2 then goto index 934;
   if "cursor_value" == 3 then goto index 932;
   if "cursor_value" == 4 then goto index 930;
   if "cursor_value" == 5 then goto index 928;
   if "cursor_value" == 6 then goto index 926;
   if "cursor_value" == 7 then goto index 924;
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 939;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 967;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 967;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 966;
   if "curr_plate" == 1 then goto index 964;
   if "curr_plate" == 2 then goto index 962;
   if "curr_plate" == 3 then goto index 960;
   if "curr_plate" == 4 then goto index 958;
   if "curr_plate" == 5 then goto index 956;
   if "curr_plate" == 6 then goto index 954;
   if "curr_plate" == 7 then goto index 952;
   goto index 967;
   show serial_dialog "hanoi_plate_7";
   goto index 967;
   show serial_dialog "hanoi_plate_6";
   goto index 967;
   show serial_dialog "hanoi_plate_5";
   goto index 967;
   show serial_dialog "hanoi_plate_4";
   goto index 967;
   show serial_dialog "hanoi_plate_3";
   goto index 967;
   show serial_dialog "hanoi_plate_2";
   goto index 967;
   show serial_dialog "hanoi_plate_1";
   goto index 967;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1005;
   if "cursor_pos" == "column" then goto index 972;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1004;
   if "cursor_hinge_height" == "row" then goto index 1002;
   if "cursor_grip_height" == "row" then goto index 977;
   show serial_dialog "hanoi_space";
   goto index 1029;
   if "cursor_value" == 0 then goto index 1000;
   if "cursor_value" == 1 then goto index 998;
   if "cursor_value" == 2 then goto index 996;
   if "cursor_value" == 3 then goto index 994;
   if "cursor_value" == 4 then goto index 992;
   if "cursor_value" == 5 then goto index 990;
   if "cursor_value" == 6 then goto index 988;
   if "cursor_value" == 7 then goto index 986;
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1001;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1029;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1029;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1028;
   if "curr_plate" == 1 then goto index 1026;
   if "curr_plate" == 2 then goto index 1024;
   if "curr_plate" == 3 then goto index 1022;
   if "curr_plate" == 4 then goto index 1020;
   if "curr_plate" == 5 then goto index 1018;
   if "curr_plate" == 6 then goto index 1016;
   if "curr_plate" == 7 then goto index 1014;
   goto index 1029;
   show serial_dialog "hanoi_plate_7";
   goto index 1029;
   show serial_dialog "hanoi_plate_6";
   goto index 1029;
   show serial_dialog "hanoi_plate_5";
   goto index 1029;
   show serial_dialog "hanoi_plate_4";
   goto index 1029;
   show serial_dialog "hanoi_plate_3";
   goto index 1029;
   show serial_dialog "hanoi_plate_2";
   goto index 1029;
   show serial_dialog "hanoi_plate_1";
   goto index 1029;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1072;
   if "cursor_pos" == "column" then goto index 1039;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1071;
   if "cursor_hinge_height" == "row" then goto index 1069;
   if "cursor_grip_height" == "row" then goto index 1044;
   show serial_dialog "hanoi_space";
   goto index 1096;
   if "cursor_value" == 0 then goto index 1067;
   if "cursor_value" == 1 then goto index 1065;
   if "cursor_value" == 2 then goto index 1063;
   if "cursor_value" == 3 then goto index 1061;
   if "cursor_value" == 4 then goto index 1059;
   if "cursor_value" == 5 then goto index 1057;
   if "cursor_value" == 6 then goto index 1055;
   if "cursor_value" == 7 then goto index 1053;
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1068;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1096;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1096;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1095;
   if "curr_plate" == 1 then goto index 1093;
   if "curr_plate" == 2 then goto index 1091;
   if "curr_plate" == 3 then goto index 1089;
   if "curr_plate" == 4 then goto index 1087;
   if "curr_plate" == 5 then goto index 1085;
   if "curr_plate" == 6 then goto index 1083;
   if "curr_plate" == 7 then goto index 1081;
   goto index 1096;
   show serial_dialog "hanoi_plate_7";
   goto index 1096;
   show serial_dialog "hanoi_plate_6";
   goto index 1096;
   show serial_dialog "hanoi_plate_5";
   goto index 1096;
   show serial_dialog "hanoi_plate_4";
   goto index 1096;
   show serial_dialog "hanoi_plate_3";
   goto index 1096;
   show serial_dialog "hanoi_plate_2";
   goto index 1096;
   show serial_dialog "hanoi_plate_1";
   goto index 1096;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1134;
   if "cursor_pos" == "column" then goto index 1101;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1133;
   if "cursor_hinge_height" == "row" then goto index 1131;
   if "cursor_grip_height" == "row" then goto index 1106;
   show serial_dialog "hanoi_space";
   goto index 1158;
   if "cursor_value" == 0 then goto index 1129;
   if "cursor_value" == 1 then goto index 1127;
   if "cursor_value" == 2 then goto index 1125;
   if "cursor_value" == 3 then goto index 1123;
   if "cursor_value" == 4 then goto index 1121;
   if "cursor_value" == 5 then goto index 1119;
   if "cursor_value" == 6 then goto index 1117;
   if "cursor_value" == 7 then goto index 1115;
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1130;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1158;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1158;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1157;
   if "curr_plate" == 1 then goto index 1155;
   if "curr_plate" == 2 then goto index 1153;
   if "curr_plate" == 3 then goto index 1151;
   if "curr_plate" == 4 then goto index 1149;
   if "curr_plate" == 5 then goto index 1147;
   if "curr_plate" == 6 then goto index 1145;
   if "curr_plate" == 7 then goto index 1143;
   goto index 1158;
   show serial_dialog "hanoi_plate_7";
   goto index 1158;
   show serial_dialog "hanoi_plate_6";
   goto index 1158;
   show serial_dialog "hanoi_plate_5";
   goto index 1158;
   show serial_dialog "hanoi_plate_4";
   goto index 1158;
   show serial_dialog "hanoi_plate_3";
   goto index 1158;
   show serial_dialog "hanoi_plate_2";
   goto index 1158;
   show serial_dialog "hanoi_plate_1";
   goto index 1158;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1196;
   if "cursor_pos" == "column" then goto index 1163;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1195;
   if "cursor_hinge_height" == "row" then goto index 1193;
   if "cursor_grip_height" == "row" then goto index 1168;
   show serial_dialog "hanoi_space";
   goto index 1220;
   if "cursor_value" == 0 then goto index 1191;
   if "cursor_value" == 1 then goto index 1189;
   if "cursor_value" == 2 then goto index 1187;
   if "cursor_value" == 3 then goto index 1185;
   if "cursor_value" == 4 then goto index 1183;
   if "cursor_value" == 5 then goto index 1181;
   if "cursor_value" == 6 then goto index 1179;
   if "cursor_value" == 7 then goto index 1177;
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1192;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1220;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1220;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1219;
   if "curr_plate" == 1 then goto index 1217;
   if "curr_plate" == 2 then goto index 1215;
   if "curr_plate" == 3 then goto index 1213;
   if "curr_plate" == 4 then goto index 1211;
   if "curr_plate" == 5 then goto index 1209;
   if "curr_plate" == 6 then goto index 1207;
   if "curr_plate" == 7 then goto index 1205;
   goto index 1220;
   show serial_dialog "hanoi_plate_7";
   goto index 1220;
   show serial_dialog "hanoi_plate_6";
   goto index 1220;
   show serial_dialog "hanoi_plate_5";
   goto index 1220;
   show serial_dialog "hanoi_plate_4";
   goto index 1220;
   show serial_dialog "hanoi_plate_3";
   goto index 1220;
   show serial_dialog "hanoi_plate_2";
   goto index 1220;
   show serial_dialog "hanoi_plate_1";
   goto index 1220;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1263;
   if "cursor_pos" == "column" then goto index 1230;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1262;
   if "cursor_hinge_height" == "row" then goto index 1260;
   if "cursor_grip_height" == "row" then goto index 1235;
   show serial_dialog "hanoi_space";
   goto index 1287;
   if "cursor_value" == 0 then goto index 1258;
   if "cursor_value" == 1 then goto index 1256;
   if "cursor_value" == 2 then goto index 1254;
   if "cursor_value" == 3 then goto index 1252;
   if "cursor_value" == 4 then goto index 1250;
   if "cursor_value" == 5 then goto index 1248;
   if "cursor_value" == 6 then goto index 1246;
   if "cursor_value" == 7 then goto index 1244;
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1259;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1287;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1287;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1286;
   if "curr_plate" == 1 then goto index 1284;
   if "curr_plate" == 2 then goto index 1282;
   if "curr_plate" == 3 then goto index 1280;
   if "curr_plate" == 4 then goto index 1278;
   if "curr_plate" == 5 then goto index 1276;
   if "curr_plate" == 6 then goto index 1274;
   if "curr_plate" == 7 then goto index 1272;
   goto index 1287;
   show serial_dialog "hanoi_plate_7";
   goto index 1287;
   show serial_dialog "hanoi_plate_6";
   goto index 1287;
   show serial_dialog "hanoi_plate_5";
   goto index 1287;
   show serial_dialog "hanoi_plate_4";
   goto index 1287;
   show serial_dialog "hanoi_plate_3";
   goto index 1287;
   show serial_dialog "hanoi_plate_2";
   goto index 1287;
   show serial_dialog "hanoi_plate_1";
   goto index 1287;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1325;
   if "cursor_pos" == "column" then goto index 1292;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1324;
   if "cursor_hinge_height" == "row" then goto index 1322;
   if "cursor_grip_height" == "row" then goto index 1297;
   show serial_dialog "hanoi_space";
   goto index 1349;
   if "cursor_value" == 0 then goto index 1320;
   if "cursor_value" == 1 then goto index 1318;
   if "cursor_value" == 2 then goto index 1316;
   if "cursor_value" == 3 then goto index 1314;
   if "cursor_value" == 4 then goto index 1312;
   if "cursor_value" == 5 then goto index 1310;
   if "cursor_value" == 6 then goto index 1308;
   if "cursor_value" == 7 then goto index 1306;
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1321;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1349;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1349;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1348;
   if "curr_plate" == 1 then goto index 1346;
   if "curr_plate" == 2 then goto index 1344;
   if "curr_plate" == 3 then goto index 1342;
   if "curr_plate" == 4 then goto index 1340;
   if "curr_plate" == 5 then goto index 1338;
   if "curr_plate" == 6 then goto index 1336;
   if "curr_plate" == 7 then goto index 1334;
   goto index 1349;
   show serial_dialog "hanoi_plate_7";
   goto index 1349;
   show serial_dialog "hanoi_plate_6";
   goto index 1349;
   show serial_dialog "hanoi_plate_5";
   goto index 1349;
   show serial_dialog "hanoi_plate_4";
   goto index 1349;
   show serial_dialog "hanoi_plate_3";
   goto index 1349;
   show serial_dialog "hanoi_plate_2";
   goto index 1349;
   show serial_dialog "hanoi_plate_1";
   goto index 1349;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1387;
   if "cursor_pos" == "column" then goto index 1354;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1386;
   if "cursor_hinge_height" == "row" then goto index 1384;
   if "cursor_grip_height" == "row" then goto index 1359;
   show serial_dialog "hanoi_space";
   goto index 1411;
   if "cursor_value" == 0 then goto index 1382;
   if "cursor_value" == 1 then goto index 1380;
   if "cursor_value" == 2 then goto index 1378;
   if "cursor_value" == 3 then goto index 1376;
   if "cursor_value" == 4 then goto index 1374;
   if "cursor_value" == 5 then goto index 1372;
   if "cursor_value" == 6 then goto index 1370;
   if "cursor_value" == 7 then goto index 1368;
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1383;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1411;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1411;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1410;
   if "curr_plate" == 1 then goto index 1408;
   if "curr_plate" == 2 then goto index 1406;
   if "curr_plate" == 3 then goto index 1404;
   if "curr_plate" == 4 then goto index 1402;
   if "curr_plate" == 5 then goto index 1400;
   if "curr_plate" == 6 then goto index 1398;
   if "curr_plate" == 7 then goto index 1396;
   goto index 1411;
   show serial_dialog "hanoi_plate_7";
   goto index 1411;
   show serial_dialog "hanoi_plate_6";
   goto index 1411;
   show serial_dialog "hanoi_plate_5";
   goto index 1411;
   show serial_dialog "hanoi_plate_4";
   goto index 1411;
   show serial_dialog "hanoi_plate_3";
   goto index 1411;
   show serial_dialog "hanoi_plate_2";
   goto index 1411;
   show serial_dialog "hanoi_plate_1";
   goto index 1411;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1437;
   if "curr_plate" == 1 then goto index 1435;
   if "curr_plate" == 2 then goto index 1433;
   if "curr_plate" == 3 then goto index 1431;
   if "curr_plate" == 4 then goto index 1429;
   if "curr_plate" == 5 then goto index 1427;
   if "curr_plate" == 6 then goto index 1425;
   if "curr_plate" == 7 then goto index 1423;
   goto index 1438;
   show serial_dialog "hanoi_plate_7";
   goto index 1438;
   show serial_dialog "hanoi_plate_6";
   goto index 1438;
   show serial_dialog "hanoi_plate_5";
   goto index 1438;
   show serial_dialog "hanoi_plate_4";
   goto index 1438;
   show serial_dialog "hanoi_plate_3";
   goto index 1438;
   show serial_dialog "hanoi_plate_2";
   goto index 1438;
   show serial_dialog "hanoi_plate_1";
   goto index 1438;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1462;
   if "curr_plate" == 1 then goto index 1460;
   if "curr_plate" == 2 then goto index 1458;
   if "curr_plate" == 3 then goto index 1456;
   if "curr_plate" == 4 then goto index 1454;
   if "curr_plate" == 5 then goto index 1452;
   if "curr_plate" == 6 then goto index 1450;
   if "curr_plate" == 7 then goto index 1448;
   goto index 1463;
   show serial_dialog "hanoi_plate_7";
   goto index 1463;
   show serial_dialog "hanoi_plate_6";
   goto index 1463;
   show serial_dialog "hanoi_plate_5";
   goto index 1463;
   show serial_dialog "hanoi_plate_4";
   goto index 1463;
   show serial_dialog "hanoi_plate_3";
   goto index 1463;
   show serial_dialog "hanoi_plate_2";
   goto index 1463;
   show serial_dialog "hanoi_plate_1";
   goto index 1463;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1487;
   if "curr_plate" == 1 then goto index 1485;
   if "curr_plate" == 2 then goto index 1483;
   if "curr_plate" == 3 then goto index 1481;
   if "curr_plate" == 4 then goto index 1479;
   if "curr_plate" == 5 then goto index 1477;
   if "curr_plate" == 6 then goto index 1475;
   if "curr_plate" == 7 then goto index 1473;
   goto index 1488;
   show serial_dialog "hanoi_plate_7";
   goto index 1488;
   show serial_dialog "hanoi_plate_6";
   goto index 1488;
   show serial_dialog "hanoi_plate_5";
   goto index 1488;
   show serial_dialog "hanoi_plate_4";
   goto index 1488;
   show serial_dialog "hanoi_plate_3";
   goto index 1488;
   show serial_dialog "hanoi_plate_2";
   goto index 1488;
   show serial_dialog "hanoi_plate_1";
   goto index 1488;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1496;
   if "hanoi_draw_help" then goto index 1493;
   goto index 1532;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1532;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1510;
   goto index 1511;
   delete command "WIN";
   if !"hanoi_won" then goto index 1530;
   if !"ch2-carrying-plate" then goto index 1515;
   if !"ch2-installed-plate" then goto index 1515;
   goto index 1531;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1519;
   goto index 1520;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1528;
   if "hanoi_move_count" == 69 then goto index 1526;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1529;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1529;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1531;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
   goto index 4901;
   if "cursor_pos" == 1 then goto index 1536;
   if "cursor_pos" == 2 then goto index 1536;
   goto index 1537;
   "cursor_pos" += 1;
   if "cursor_pos" == 1 then goto index 1545;
   if "cursor_pos" == 2 then goto index 1543;
   if "cursor_pos" == 3 then goto index 1541;
   goto index 1546;
   "cursor_grip_height" = "array3_length";
   goto index 1546;
   "cursor_grip_height" = "array2_length";
   goto index 1546;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 1562;
   "column" = 1;
   if "column" <= 3 then goto index 1556;
   goto index 1571;
   if "cursor_pos" == "column" then goto index 1559;
   show serial_dialog "hanoi_space";
   goto index 1560;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 1554;
   if "cursor_pos" == 1 then goto index 1570;
   if "cursor_pos" == 2 then goto index 1568;
   if "cursor_pos" == 3 then goto index 1566;
   goto index 1571;
   show serial_dialog "hanoi_won_message3a";
   goto index 1571;
   show serial_dialog "hanoi_won_message2a";
   goto index 1571;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 1652;
   if "hanoi_won" then goto index 1640;
   "column" = 1;
   if "column" <= 3 then goto index 1578;
   goto index 1654;
   if "curr_plate" != 0 then goto index 1614;
   if "cursor_pos" == "column" then goto index 1581;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1613;
   if "cursor_hinge_height" == "row" then goto index 1611;
   if "cursor_grip_height" == "row" then goto index 1586;
   show serial_dialog "hanoi_space";
   goto index 1638;
   if "cursor_value" == 0 then goto index 1609;
   if "cursor_value" == 1 then goto index 1607;
   if "cursor_value" == 2 then goto index 1605;
   if "cursor_value" == 3 then goto index 1603;
   if "cursor_value" == 4 then goto index 1601;
   if "cursor_value" == 5 then goto index 1599;
   if "cursor_value" == 6 then goto index 1597;
   if "cursor_value" == 7 then goto index 1595;
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1610;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1638;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1638;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1637;
   if "curr_plate" == 1 then goto index 1635;
   if "curr_plate" == 2 then goto index 1633;
   if "curr_plate" == 3 then goto index 1631;
   if "curr_plate" == 4 then goto index 1629;
   if "curr_plate" == 5 then goto index 1627;
   if "curr_plate" == 6 then goto index 1625;
   if "curr_plate" == 7 then goto index 1623;
   goto index 1638;
   show serial_dialog "hanoi_plate_7";
   goto index 1638;
   show serial_dialog "hanoi_plate_6";
   goto index 1638;
   show serial_dialog "hanoi_plate_5";
   goto index 1638;
   show serial_dialog "hanoi_plate_4";
   goto index 1638;
   show serial_dialog "hanoi_plate_3";
   goto index 1638;
   show serial_dialog "hanoi_plate_2";
   goto index 1638;
   show serial_dialog "hanoi_plate_1";
   goto index 1638;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 1576;
   if "cursor_pos" == 1 then goto index 1651;
   if "cursor_pos" == 2 then goto index 1650;
   if "cursor_pos" == 3 then goto index 1643;
   if "hanoi_move_count" < 100 then goto index 1649;
   if "hanoi_move_count" < 1000 then goto index 1647;
   show serial_dialog "hanoi_won_message3b4";
   goto index 1652;
   show serial_dialog "hanoi_won_message3b3";
   goto index 1652;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 1659;
   goto index 1721;
   if "curr_plate" != 0 then goto index 1695;
   if "cursor_pos" == "column" then goto index 1662;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1694;
   if "cursor_hinge_height" == "row" then goto index 1692;
   if "cursor_grip_height" == "row" then goto index 1667;
   show serial_dialog "hanoi_space";
   goto index 1719;
   if "cursor_value" == 0 then goto index 1690;
   if "cursor_value" == 1 then goto index 1688;
   if "cursor_value" == 2 then goto index 1686;
   if "cursor_value" == 3 then goto index 1684;
   if "cursor_value" == 4 then goto index 1682;
   if "cursor_value" == 5 then goto index 1680;
   if "cursor_value" == 6 then goto index 1678;
   if "cursor_value" == 7 then goto index 1676;
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1691;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1719;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1719;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1718;
   if "curr_plate" == 1 then goto index 1716;
   if "curr_plate" == 2 then goto index 1714;
   if "curr_plate" == 3 then goto index 1712;
   if "curr_plate" == 4 then goto index 1710;
   if "curr_plate" == 5 then goto index 1708;
   if "curr_plate" == 6 then goto index 1706;
   if "curr_plate" == 7 then goto index 1704;
   goto index 1719;
   show serial_dialog "hanoi_plate_7";
   goto index 1719;
   show serial_dialog "hanoi_plate_6";
   goto index 1719;
   show serial_dialog "hanoi_plate_5";
   goto index 1719;
   show serial_dialog "hanoi_plate_4";
   goto index 1719;
   show serial_dialog "hanoi_plate_3";
   goto index 1719;
   show serial_dialog "hanoi_plate_2";
   goto index 1719;
   show serial_dialog "hanoi_plate_1";
   goto index 1719;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 1657;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 1726;
   goto index 1788;
   if "curr_plate" != 0 then goto index 1762;
   if "cursor_pos" == "column" then goto index 1729;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1761;
   if "cursor_hinge_height" == "row" then goto index 1759;
   if "cursor_grip_height" == "row" then goto index 1734;
   show serial_dialog "hanoi_space";
   goto index 1786;
   if "cursor_value" == 0 then goto index 1757;
   if "cursor_value" == 1 then goto index 1755;
   if "cursor_value" == 2 then goto index 1753;
   if "cursor_value" == 3 then goto index 1751;
   if "cursor_value" == 4 then goto index 1749;
   if "cursor_value" == 5 then goto index 1747;
   if "cursor_value" == 6 then goto index 1745;
   if "cursor_value" == 7 then goto index 1743;
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1758;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1786;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1786;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1785;
   if "curr_plate" == 1 then goto index 1783;
   if "curr_plate" == 2 then goto index 1781;
   if "curr_plate" == 3 then goto index 1779;
   if "curr_plate" == 4 then goto index 1777;
   if "curr_plate" == 5 then goto index 1775;
   if "curr_plate" == 6 then goto index 1773;
   if "curr_plate" == 7 then goto index 1771;
   goto index 1786;
   show serial_dialog "hanoi_plate_7";
   goto index 1786;
   show serial_dialog "hanoi_plate_6";
   goto index 1786;
   show serial_dialog "hanoi_plate_5";
   goto index 1786;
   show serial_dialog "hanoi_plate_4";
   goto index 1786;
   show serial_dialog "hanoi_plate_3";
   goto index 1786;
   show serial_dialog "hanoi_plate_2";
   goto index 1786;
   show serial_dialog "hanoi_plate_1";
   goto index 1786;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 1724;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1831;
   if "cursor_pos" == "column" then goto index 1798;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1830;
   if "cursor_hinge_height" == "row" then goto index 1828;
   if "cursor_grip_height" == "row" then goto index 1803;
   show serial_dialog "hanoi_space";
   goto index 1855;
   if "cursor_value" == 0 then goto index 1826;
   if "cursor_value" == 1 then goto index 1824;
   if "cursor_value" == 2 then goto index 1822;
   if "cursor_value" == 3 then goto index 1820;
   if "cursor_value" == 4 then goto index 1818;
   if "cursor_value" == 5 then goto index 1816;
   if "cursor_value" == 6 then goto index 1814;
   if "cursor_value" == 7 then goto index 1812;
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1827;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1855;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1855;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1854;
   if "curr_plate" == 1 then goto index 1852;
   if "curr_plate" == 2 then goto index 1850;
   if "curr_plate" == 3 then goto index 1848;
   if "curr_plate" == 4 then goto index 1846;
   if "curr_plate" == 5 then goto index 1844;
   if "curr_plate" == 6 then goto index 1842;
   if "curr_plate" == 7 then goto index 1840;
   goto index 1855;
   show serial_dialog "hanoi_plate_7";
   goto index 1855;
   show serial_dialog "hanoi_plate_6";
   goto index 1855;
   show serial_dialog "hanoi_plate_5";
   goto index 1855;
   show serial_dialog "hanoi_plate_4";
   goto index 1855;
   show serial_dialog "hanoi_plate_3";
   goto index 1855;
   show serial_dialog "hanoi_plate_2";
   goto index 1855;
   show serial_dialog "hanoi_plate_1";
   goto index 1855;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1893;
   if "cursor_pos" == "column" then goto index 1860;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1892;
   if "cursor_hinge_height" == "row" then goto index 1890;
   if "cursor_grip_height" == "row" then goto index 1865;
   show serial_dialog "hanoi_space";
   goto index 1917;
   if "cursor_value" == 0 then goto index 1888;
   if "cursor_value" == 1 then goto index 1886;
   if "cursor_value" == 2 then goto index 1884;
   if "cursor_value" == 3 then goto index 1882;
   if "cursor_value" == 4 then goto index 1880;
   if "cursor_value" == 5 then goto index 1878;
   if "cursor_value" == 6 then goto index 1876;
   if "cursor_value" == 7 then goto index 1874;
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1889;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1917;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1917;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1916;
   if "curr_plate" == 1 then goto index 1914;
   if "curr_plate" == 2 then goto index 1912;
   if "curr_plate" == 3 then goto index 1910;
   if "curr_plate" == 4 then goto index 1908;
   if "curr_plate" == 5 then goto index 1906;
   if "curr_plate" == 6 then goto index 1904;
   if "curr_plate" == 7 then goto index 1902;
   goto index 1917;
   show serial_dialog "hanoi_plate_7";
   goto index 1917;
   show serial_dialog "hanoi_plate_6";
   goto index 1917;
   show serial_dialog "hanoi_plate_5";
   goto index 1917;
   show serial_dialog "hanoi_plate_4";
   goto index 1917;
   show serial_dialog "hanoi_plate_3";
   goto index 1917;
   show serial_dialog "hanoi_plate_2";
   goto index 1917;
   show serial_dialog "hanoi_plate_1";
   goto index 1917;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1955;
   if "cursor_pos" == "column" then goto index 1922;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1954;
   if "cursor_hinge_height" == "row" then goto index 1952;
   if "cursor_grip_height" == "row" then goto index 1927;
   show serial_dialog "hanoi_space";
   goto index 1979;
   if "cursor_value" == 0 then goto index 1950;
   if "cursor_value" == 1 then goto index 1948;
   if "cursor_value" == 2 then goto index 1946;
   if "cursor_value" == 3 then goto index 1944;
   if "cursor_value" == 4 then goto index 1942;
   if "cursor_value" == 5 then goto index 1940;
   if "cursor_value" == 6 then goto index 1938;
   if "cursor_value" == 7 then goto index 1936;
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1951;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1979;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1979;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1978;
   if "curr_plate" == 1 then goto index 1976;
   if "curr_plate" == 2 then goto index 1974;
   if "curr_plate" == 3 then goto index 1972;
   if "curr_plate" == 4 then goto index 1970;
   if "curr_plate" == 5 then goto index 1968;
   if "curr_plate" == 6 then goto index 1966;
   if "curr_plate" == 7 then goto index 1964;
   goto index 1979;
   show serial_dialog "hanoi_plate_7";
   goto index 1979;
   show serial_dialog "hanoi_plate_6";
   goto index 1979;
   show serial_dialog "hanoi_plate_5";
   goto index 1979;
   show serial_dialog "hanoi_plate_4";
   goto index 1979;
   show serial_dialog "hanoi_plate_3";
   goto index 1979;
   show serial_dialog "hanoi_plate_2";
   goto index 1979;
   show serial_dialog "hanoi_plate_1";
   goto index 1979;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 2022;
   if "cursor_pos" == "column" then goto index 1989;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2021;
   if "cursor_hinge_height" == "row" then goto index 2019;
   if "cursor_grip_height" == "row" then goto index 1994;
   show serial_dialog "hanoi_space";
   goto index 2046;
   if "cursor_value" == 0 then goto index 2017;
   if "cursor_value" == 1 then goto index 2015;
   if "cursor_value" == 2 then goto index 2013;
   if "cursor_value" == 3 then goto index 2011;
   if "cursor_value" == 4 then goto index 2009;
   if "cursor_value" == 5 then goto index 2007;
   if "cursor_value" == 6 then goto index 2005;
   if "cursor_value" == 7 then goto index 2003;
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2018;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2046;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2046;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2045;
   if "curr_plate" == 1 then goto index 2043;
   if "curr_plate" == 2 then goto index 2041;
   if "curr_plate" == 3 then goto index 2039;
   if "curr_plate" == 4 then goto index 2037;
   if "curr_plate" == 5 then goto index 2035;
   if "curr_plate" == 6 then goto index 2033;
   if "curr_plate" == 7 then goto index 2031;
   goto index 2046;
   show serial_dialog "hanoi_plate_7";
   goto index 2046;
   show serial_dialog "hanoi_plate_6";
   goto index 2046;
   show serial_dialog "hanoi_plate_5";
   goto index 2046;
   show serial_dialog "hanoi_plate_4";
   goto index 2046;
   show serial_dialog "hanoi_plate_3";
   goto index 2046;
   show serial_dialog "hanoi_plate_2";
   goto index 2046;
   show serial_dialog "hanoi_plate_1";
   goto index 2046;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 2084;
   if "cursor_pos" == "column" then goto index 2051;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2083;
   if "cursor_hinge_height" == "row" then goto index 2081;
   if "cursor_grip_height" == "row" then goto index 2056;
   show serial_dialog "hanoi_space";
   goto index 2108;
   if "cursor_value" == 0 then goto index 2079;
   if "cursor_value" == 1 then goto index 2077;
   if "cursor_value" == 2 then goto index 2075;
   if "cursor_value" == 3 then goto index 2073;
   if "cursor_value" == 4 then goto index 2071;
   if "cursor_value" == 5 then goto index 2069;
   if "cursor_value" == 6 then goto index 2067;
   if "cursor_value" == 7 then goto index 2065;
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2080;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2108;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2108;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2107;
   if "curr_plate" == 1 then goto index 2105;
   if "curr_plate" == 2 then goto index 2103;
   if "curr_plate" == 3 then goto index 2101;
   if "curr_plate" == 4 then goto index 2099;
   if "curr_plate" == 5 then goto index 2097;
   if "curr_plate" == 6 then goto index 2095;
   if "curr_plate" == 7 then goto index 2093;
   goto index 2108;
   show serial_dialog "hanoi_plate_7";
   goto index 2108;
   show serial_dialog "hanoi_plate_6";
   goto index 2108;
   show serial_dialog "hanoi_plate_5";
   goto index 2108;
   show serial_dialog "hanoi_plate_4";
   goto index 2108;
   show serial_dialog "hanoi_plate_3";
   goto index 2108;
   show serial_dialog "hanoi_plate_2";
   goto index 2108;
   show serial_dialog "hanoi_plate_1";
   goto index 2108;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 2146;
   if "cursor_pos" == "column" then goto index 2113;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2145;
   if "cursor_hinge_height" == "row" then goto index 2143;
   if "cursor_grip_height" == "row" then goto index 2118;
   show serial_dialog "hanoi_space";
   goto index 2170;
   if "cursor_value" == 0 then goto index 2141;
   if "cursor_value" == 1 then goto index 2139;
   if "cursor_value" == 2 then goto index 2137;
   if "cursor_value" == 3 then goto index 2135;
   if "cursor_value" == 4 then goto index 2133;
   if "cursor_value" == 5 then goto index 2131;
   if "cursor_value" == 6 then goto index 2129;
   if "cursor_value" == 7 then goto index 2127;
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2142;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2170;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2170;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2169;
   if "curr_plate" == 1 then goto index 2167;
   if "curr_plate" == 2 then goto index 2165;
   if "curr_plate" == 3 then goto index 2163;
   if "curr_plate" == 4 then goto index 2161;
   if "curr_plate" == 5 then goto index 2159;
   if "curr_plate" == 6 then goto index 2157;
   if "curr_plate" == 7 then goto index 2155;
   goto index 2170;
   show serial_dialog "hanoi_plate_7";
   goto index 2170;
   show serial_dialog "hanoi_plate_6";
   goto index 2170;
   show serial_dialog "hanoi_plate_5";
   goto index 2170;
   show serial_dialog "hanoi_plate_4";
   goto index 2170;
   show serial_dialog "hanoi_plate_3";
   goto index 2170;
   show serial_dialog "hanoi_plate_2";
   goto index 2170;
   show serial_dialog "hanoi_plate_1";
   goto index 2170;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 2213;
   if "cursor_pos" == "column" then goto index 2180;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2212;
   if "cursor_hinge_height" == "row" then goto index 2210;
   if "cursor_grip_height" == "row" then goto index 2185;
   show serial_dialog "hanoi_space";
   goto index 2237;
   if "cursor_value" == 0 then goto index 2208;
   if "cursor_value" == 1 then goto index 2206;
   if "cursor_value" == 2 then goto index 2204;
   if "cursor_value" == 3 then goto index 2202;
   if "cursor_value" == 4 then goto index 2200;
   if "cursor_value" == 5 then goto index 2198;
   if "cursor_value" == 6 then goto index 2196;
   if "cursor_value" == 7 then goto index 2194;
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2209;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2237;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2237;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2236;
   if "curr_plate" == 1 then goto index 2234;
   if "curr_plate" == 2 then goto index 2232;
   if "curr_plate" == 3 then goto index 2230;
   if "curr_plate" == 4 then goto index 2228;
   if "curr_plate" == 5 then goto index 2226;
   if "curr_plate" == 6 then goto index 2224;
   if "curr_plate" == 7 then goto index 2222;
   goto index 2237;
   show serial_dialog "hanoi_plate_7";
   goto index 2237;
   show serial_dialog "hanoi_plate_6";
   goto index 2237;
   show serial_dialog "hanoi_plate_5";
   goto index 2237;
   show serial_dialog "hanoi_plate_4";
   goto index 2237;
   show serial_dialog "hanoi_plate_3";
   goto index 2237;
   show serial_dialog "hanoi_plate_2";
   goto index 2237;
   show serial_dialog "hanoi_plate_1";
   goto index 2237;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 2275;
   if "cursor_pos" == "column" then goto index 2242;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2274;
   if "cursor_hinge_height" == "row" then goto index 2272;
   if "cursor_grip_height" == "row" then goto index 2247;
   show serial_dialog "hanoi_space";
   goto index 2299;
   if "cursor_value" == 0 then goto index 2270;
   if "cursor_value" == 1 then goto index 2268;
   if "cursor_value" == 2 then goto index 2266;
   if "cursor_value" == 3 then goto index 2264;
   if "cursor_value" == 4 then goto index 2262;
   if "cursor_value" == 5 then goto index 2260;
   if "cursor_value" == 6 then goto index 2258;
   if "cursor_value" == 7 then goto index 2256;
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2271;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2299;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2299;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2298;
   if "curr_plate" == 1 then goto index 2296;
   if "curr_plate" == 2 then goto index 2294;
   if "curr_plate" == 3 then goto index 2292;
   if "curr_plate" == 4 then goto index 2290;
   if "curr_plate" == 5 then goto index 2288;
   if "curr_plate" == 6 then goto index 2286;
   if "curr_plate" == 7 then goto index 2284;
   goto index 2299;
   show serial_dialog "hanoi_plate_7";
   goto index 2299;
   show serial_dialog "hanoi_plate_6";
   goto index 2299;
   show serial_dialog "hanoi_plate_5";
   goto index 2299;
   show serial_dialog "hanoi_plate_4";
   goto index 2299;
   show serial_dialog "hanoi_plate_3";
   goto index 2299;
   show serial_dialog "hanoi_plate_2";
   goto index 2299;
   show serial_dialog "hanoi_plate_1";
   goto index 2299;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 2337;
   if "cursor_pos" == "column" then goto index 2304;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2336;
   if "cursor_hinge_height" == "row" then goto index 2334;
   if "cursor_grip_height" == "row" then goto index 2309;
   show serial_dialog "hanoi_space";
   goto index 2361;
   if "cursor_value" == 0 then goto index 2332;
   if "cursor_value" == 1 then goto index 2330;
   if "cursor_value" == 2 then goto index 2328;
   if "cursor_value" == 3 then goto index 2326;
   if "cursor_value" == 4 then goto index 2324;
   if "cursor_value" == 5 then goto index 2322;
   if "cursor_value" == 6 then goto index 2320;
   if "cursor_value" == 7 then goto index 2318;
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2333;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2361;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2361;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2360;
   if "curr_plate" == 1 then goto index 2358;
   if "curr_plate" == 2 then goto index 2356;
   if "curr_plate" == 3 then goto index 2354;
   if "curr_plate" == 4 then goto index 2352;
   if "curr_plate" == 5 then goto index 2350;
   if "curr_plate" == 6 then goto index 2348;
   if "curr_plate" == 7 then goto index 2346;
   goto index 2361;
   show serial_dialog "hanoi_plate_7";
   goto index 2361;
   show serial_dialog "hanoi_plate_6";
   goto index 2361;
   show serial_dialog "hanoi_plate_5";
   goto index 2361;
   show serial_dialog "hanoi_plate_4";
   goto index 2361;
   show serial_dialog "hanoi_plate_3";
   goto index 2361;
   show serial_dialog "hanoi_plate_2";
   goto index 2361;
   show serial_dialog "hanoi_plate_1";
   goto index 2361;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 2404;
   if "cursor_pos" == "column" then goto index 2371;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2403;
   if "cursor_hinge_height" == "row" then goto index 2401;
   if "cursor_grip_height" == "row" then goto index 2376;
   show serial_dialog "hanoi_space";
   goto index 2428;
   if "cursor_value" == 0 then goto index 2399;
   if "cursor_value" == 1 then goto index 2397;
   if "cursor_value" == 2 then goto index 2395;
   if "cursor_value" == 3 then goto index 2393;
   if "cursor_value" == 4 then goto index 2391;
   if "cursor_value" == 5 then goto index 2389;
   if "cursor_value" == 6 then goto index 2387;
   if "cursor_value" == 7 then goto index 2385;
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2400;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2428;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2428;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2427;
   if "curr_plate" == 1 then goto index 2425;
   if "curr_plate" == 2 then goto index 2423;
   if "curr_plate" == 3 then goto index 2421;
   if "curr_plate" == 4 then goto index 2419;
   if "curr_plate" == 5 then goto index 2417;
   if "curr_plate" == 6 then goto index 2415;
   if "curr_plate" == 7 then goto index 2413;
   goto index 2428;
   show serial_dialog "hanoi_plate_7";
   goto index 2428;
   show serial_dialog "hanoi_plate_6";
   goto index 2428;
   show serial_dialog "hanoi_plate_5";
   goto index 2428;
   show serial_dialog "hanoi_plate_4";
   goto index 2428;
   show serial_dialog "hanoi_plate_3";
   goto index 2428;
   show serial_dialog "hanoi_plate_2";
   goto index 2428;
   show serial_dialog "hanoi_plate_1";
   goto index 2428;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 2466;
   if "cursor_pos" == "column" then goto index 2433;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2465;
   if "cursor_hinge_height" == "row" then goto index 2463;
   if "cursor_grip_height" == "row" then goto index 2438;
   show serial_dialog "hanoi_space";
   goto index 2490;
   if "cursor_value" == 0 then goto index 2461;
   if "cursor_value" == 1 then goto index 2459;
   if "cursor_value" == 2 then goto index 2457;
   if "cursor_value" == 3 then goto index 2455;
   if "cursor_value" == 4 then goto index 2453;
   if "cursor_value" == 5 then goto index 2451;
   if "cursor_value" == 6 then goto index 2449;
   if "cursor_value" == 7 then goto index 2447;
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2462;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2490;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2490;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2489;
   if "curr_plate" == 1 then goto index 2487;
   if "curr_plate" == 2 then goto index 2485;
   if "curr_plate" == 3 then goto index 2483;
   if "curr_plate" == 4 then goto index 2481;
   if "curr_plate" == 5 then goto index 2479;
   if "curr_plate" == 6 then goto index 2477;
   if "curr_plate" == 7 then goto index 2475;
   goto index 2490;
   show serial_dialog "hanoi_plate_7";
   goto index 2490;
   show serial_dialog "hanoi_plate_6";
   goto index 2490;
   show serial_dialog "hanoi_plate_5";
   goto index 2490;
   show serial_dialog "hanoi_plate_4";
   goto index 2490;
   show serial_dialog "hanoi_plate_3";
   goto index 2490;
   show serial_dialog "hanoi_plate_2";
   goto index 2490;
   show serial_dialog "hanoi_plate_1";
   goto index 2490;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 2528;
   if "cursor_pos" == "column" then goto index 2495;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2527;
   if "cursor_hinge_height" == "row" then goto index 2525;
   if "cursor_grip_height" == "row" then goto index 2500;
   show serial_dialog "hanoi_space";
   goto index 2552;
   if "cursor_value" == 0 then goto index 2523;
   if "cursor_value" == 1 then goto index 2521;
   if "cursor_value" == 2 then goto index 2519;
   if "cursor_value" == 3 then goto index 2517;
   if "cursor_value" == 4 then goto index 2515;
   if "cursor_value" == 5 then goto index 2513;
   if "cursor_value" == 6 then goto index 2511;
   if "cursor_value" == 7 then goto index 2509;
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2524;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2552;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2552;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2551;
   if "curr_plate" == 1 then goto index 2549;
   if "curr_plate" == 2 then goto index 2547;
   if "curr_plate" == 3 then goto index 2545;
   if "curr_plate" == 4 then goto index 2543;
   if "curr_plate" == 5 then goto index 2541;
   if "curr_plate" == 6 then goto index 2539;
   if "curr_plate" == 7 then goto index 2537;
   goto index 2552;
   show serial_dialog "hanoi_plate_7";
   goto index 2552;
   show serial_dialog "hanoi_plate_6";
   goto index 2552;
   show serial_dialog "hanoi_plate_5";
   goto index 2552;
   show serial_dialog "hanoi_plate_4";
   goto index 2552;
   show serial_dialog "hanoi_plate_3";
   goto index 2552;
   show serial_dialog "hanoi_plate_2";
   goto index 2552;
   show serial_dialog "hanoi_plate_1";
   goto index 2552;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 2595;
   if "cursor_pos" == "column" then goto index 2562;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2594;
   if "cursor_hinge_height" == "row" then goto index 2592;
   if "cursor_grip_height" == "row" then goto index 2567;
   show serial_dialog "hanoi_space";
   goto index 2619;
   if "cursor_value" == 0 then goto index 2590;
   if "cursor_value" == 1 then goto index 2588;
   if "cursor_value" == 2 then goto index 2586;
   if "cursor_value" == 3 then goto index 2584;
   if "cursor_value" == 4 then goto index 2582;
   if "cursor_value" == 5 then goto index 2580;
   if "cursor_value" == 6 then goto index 2578;
   if "cursor_value" == 7 then goto index 2576;
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2591;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2619;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2619;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2618;
   if "curr_plate" == 1 then goto index 2616;
   if "curr_plate" == 2 then goto index 2614;
   if "curr_plate" == 3 then goto index 2612;
   if "curr_plate" == 4 then goto index 2610;
   if "curr_plate" == 5 then goto index 2608;
   if "curr_plate" == 6 then goto index 2606;
   if "curr_plate" == 7 then goto index 2604;
   goto index 2619;
   show serial_dialog "hanoi_plate_7";
   goto index 2619;
   show serial_dialog "hanoi_plate_6";
   goto index 2619;
   show serial_dialog "hanoi_plate_5";
   goto index 2619;
   show serial_dialog "hanoi_plate_4";
   goto index 2619;
   show serial_dialog "hanoi_plate_3";
   goto index 2619;
   show serial_dialog "hanoi_plate_2";
   goto index 2619;
   show serial_dialog "hanoi_plate_1";
   goto index 2619;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 2657;
   if "cursor_pos" == "column" then goto index 2624;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2656;
   if "cursor_hinge_height" == "row" then goto index 2654;
   if "cursor_grip_height" == "row" then goto index 2629;
   show serial_dialog "hanoi_space";
   goto index 2681;
   if "cursor_value" == 0 then goto index 2652;
   if "cursor_value" == 1 then goto index 2650;
   if "cursor_value" == 2 then goto index 2648;
   if "cursor_value" == 3 then goto index 2646;
   if "cursor_value" == 4 then goto index 2644;
   if "cursor_value" == 5 then goto index 2642;
   if "cursor_value" == 6 then goto index 2640;
   if "cursor_value" == 7 then goto index 2638;
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2653;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2681;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2681;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2680;
   if "curr_plate" == 1 then goto index 2678;
   if "curr_plate" == 2 then goto index 2676;
   if "curr_plate" == 3 then goto index 2674;
   if "curr_plate" == 4 then goto index 2672;
   if "curr_plate" == 5 then goto index 2670;
   if "curr_plate" == 6 then goto index 2668;
   if "curr_plate" == 7 then goto index 2666;
   goto index 2681;
   show serial_dialog "hanoi_plate_7";
   goto index 2681;
   show serial_dialog "hanoi_plate_6";
   goto index 2681;
   show serial_dialog "hanoi_plate_5";
   goto index 2681;
   show serial_dialog "hanoi_plate_4";
   goto index 2681;
   show serial_dialog "hanoi_plate_3";
   goto index 2681;
   show serial_dialog "hanoi_plate_2";
   goto index 2681;
   show serial_dialog "hanoi_plate_1";
   goto index 2681;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 2719;
   if "cursor_pos" == "column" then goto index 2686;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2718;
   if "cursor_hinge_height" == "row" then goto index 2716;
   if "cursor_grip_height" == "row" then goto index 2691;
   show serial_dialog "hanoi_space";
   goto index 2743;
   if "cursor_value" == 0 then goto index 2714;
   if "cursor_value" == 1 then goto index 2712;
   if "cursor_value" == 2 then goto index 2710;
   if "cursor_value" == 3 then goto index 2708;
   if "cursor_value" == 4 then goto index 2706;
   if "cursor_value" == 5 then goto index 2704;
   if "cursor_value" == 6 then goto index 2702;
   if "cursor_value" == 7 then goto index 2700;
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2715;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2743;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2743;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2742;
   if "curr_plate" == 1 then goto index 2740;
   if "curr_plate" == 2 then goto index 2738;
   if "curr_plate" == 3 then goto index 2736;
   if "curr_plate" == 4 then goto index 2734;
   if "curr_plate" == 5 then goto index 2732;
   if "curr_plate" == 6 then goto index 2730;
   if "curr_plate" == 7 then goto index 2728;
   goto index 2743;
   show serial_dialog "hanoi_plate_7";
   goto index 2743;
   show serial_dialog "hanoi_plate_6";
   goto index 2743;
   show serial_dialog "hanoi_plate_5";
   goto index 2743;
   show serial_dialog "hanoi_plate_4";
   goto index 2743;
   show serial_dialog "hanoi_plate_3";
   goto index 2743;
   show serial_dialog "hanoi_plate_2";
   goto index 2743;
   show serial_dialog "hanoi_plate_1";
   goto index 2743;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 2786;
   if "cursor_pos" == "column" then goto index 2753;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2785;
   if "cursor_hinge_height" == "row" then goto index 2783;
   if "cursor_grip_height" == "row" then goto index 2758;
   show serial_dialog "hanoi_space";
   goto index 2810;
   if "cursor_value" == 0 then goto index 2781;
   if "cursor_value" == 1 then goto index 2779;
   if "cursor_value" == 2 then goto index 2777;
   if "cursor_value" == 3 then goto index 2775;
   if "cursor_value" == 4 then goto index 2773;
   if "cursor_value" == 5 then goto index 2771;
   if "cursor_value" == 6 then goto index 2769;
   if "cursor_value" == 7 then goto index 2767;
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2782;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2810;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2810;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2809;
   if "curr_plate" == 1 then goto index 2807;
   if "curr_plate" == 2 then goto index 2805;
   if "curr_plate" == 3 then goto index 2803;
   if "curr_plate" == 4 then goto index 2801;
   if "curr_plate" == 5 then goto index 2799;
   if "curr_plate" == 6 then goto index 2797;
   if "curr_plate" == 7 then goto index 2795;
   goto index 2810;
   show serial_dialog "hanoi_plate_7";
   goto index 2810;
   show serial_dialog "hanoi_plate_6";
   goto index 2810;
   show serial_dialog "hanoi_plate_5";
   goto index 2810;
   show serial_dialog "hanoi_plate_4";
   goto index 2810;
   show serial_dialog "hanoi_plate_3";
   goto index 2810;
   show serial_dialog "hanoi_plate_2";
   goto index 2810;
   show serial_dialog "hanoi_plate_1";
   goto index 2810;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 2848;
   if "cursor_pos" == "column" then goto index 2815;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2847;
   if "cursor_hinge_height" == "row" then goto index 2845;
   if "cursor_grip_height" == "row" then goto index 2820;
   show serial_dialog "hanoi_space";
   goto index 2872;
   if "cursor_value" == 0 then goto index 2843;
   if "cursor_value" == 1 then goto index 2841;
   if "cursor_value" == 2 then goto index 2839;
   if "cursor_value" == 3 then goto index 2837;
   if "cursor_value" == 4 then goto index 2835;
   if "cursor_value" == 5 then goto index 2833;
   if "cursor_value" == 6 then goto index 2831;
   if "cursor_value" == 7 then goto index 2829;
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2844;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2872;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2872;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2871;
   if "curr_plate" == 1 then goto index 2869;
   if "curr_plate" == 2 then goto index 2867;
   if "curr_plate" == 3 then goto index 2865;
   if "curr_plate" == 4 then goto index 2863;
   if "curr_plate" == 5 then goto index 2861;
   if "curr_plate" == 6 then goto index 2859;
   if "curr_plate" == 7 then goto index 2857;
   goto index 2872;
   show serial_dialog "hanoi_plate_7";
   goto index 2872;
   show serial_dialog "hanoi_plate_6";
   goto index 2872;
   show serial_dialog "hanoi_plate_5";
   goto index 2872;
   show serial_dialog "hanoi_plate_4";
   goto index 2872;
   show serial_dialog "hanoi_plate_3";
   goto index 2872;
   show serial_dialog "hanoi_plate_2";
   goto index 2872;
   show serial_dialog "hanoi_plate_1";
   goto index 2872;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 2910;
   if "cursor_pos" == "column" then goto index 2877;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 2909;
   if "cursor_hinge_height" == "row" then goto index 2907;
   if "cursor_grip_height" == "row" then goto index 2882;
   show serial_dialog "hanoi_space";
   goto index 2934;
   if "cursor_value" == 0 then goto index 2905;
   if "cursor_value" == 1 then goto index 2903;
   if "cursor_value" == 2 then goto index 2901;
   if "cursor_value" == 3 then goto index 2899;
   if "cursor_value" == 4 then goto index 2897;
   if "cursor_value" == 5 then goto index 2895;
   if "cursor_value" == 6 then goto index 2893;
   if "cursor_value" == 7 then goto index 2891;
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 2906;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 2934;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 2934;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 2933;
   if "curr_plate" == 1 then goto index 2931;
   if "curr_plate" == 2 then goto index 2929;
   if "curr_plate" == 3 then goto index 2927;
   if "curr_plate" == 4 then goto index 2925;
   if "curr_plate" == 5 then goto index 2923;
   if "curr_plate" == 6 then goto index 2921;
   if "curr_plate" == 7 then goto index 2919;
   goto index 2934;
   show serial_dialog "hanoi_plate_7";
   goto index 2934;
   show serial_dialog "hanoi_plate_6";
   goto index 2934;
   show serial_dialog "hanoi_plate_5";
   goto index 2934;
   show serial_dialog "hanoi_plate_4";
   goto index 2934;
   show serial_dialog "hanoi_plate_3";
   goto index 2934;
   show serial_dialog "hanoi_plate_2";
   goto index 2934;
   show serial_dialog "hanoi_plate_1";
   goto index 2934;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 2960;
   if "curr_plate" == 1 then goto index 2958;
   if "curr_plate" == 2 then goto index 2956;
   if "curr_plate" == 3 then goto index 2954;
   if "curr_plate" == 4 then goto index 2952;
   if "curr_plate" == 5 then goto index 2950;
   if "curr_plate" == 6 then goto index 2948;
   if "curr_plate" == 7 then goto index 2946;
   goto index 2961;
   show serial_dialog "hanoi_plate_7";
   goto index 2961;
   show serial_dialog "hanoi_plate_6";
   goto index 2961;
   show serial_dialog "hanoi_plate_5";
   goto index 2961;
   show serial_dialog "hanoi_plate_4";
   goto index 2961;
   show serial_dialog "hanoi_plate_3";
   goto index 2961;
   show serial_dialog "hanoi_plate_2";
   goto index 2961;
   show serial_dialog "hanoi_plate_1";
   goto index 2961;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 2985;
   if "curr_plate" == 1 then goto index 2983;
   if "curr_plate" == 2 then goto index 2981;
   if "curr_plate" == 3 then goto index 2979;
   if "curr_plate" == 4 then goto index 2977;
   if "curr_plate" == 5 then goto index 2975;
   if "curr_plate" == 6 then goto index 2973;
   if "curr_plate" == 7 then goto index 2971;
   goto index 2986;
   show serial_dialog "hanoi_plate_7";
   goto index 2986;
   show serial_dialog "hanoi_plate_6";
   goto index 2986;
   show serial_dialog "hanoi_plate_5";
   goto index 2986;
   show serial_dialog "hanoi_plate_4";
   goto index 2986;
   show serial_dialog "hanoi_plate_3";
   goto index 2986;
   show serial_dialog "hanoi_plate_2";
   goto index 2986;
   show serial_dialog "hanoi_plate_1";
   goto index 2986;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 3010;
   if "curr_plate" == 1 then goto index 3008;
   if "curr_plate" == 2 then goto index 3006;
   if "curr_plate" == 3 then goto index 3004;
   if "curr_plate" == 4 then goto index 3002;
   if "curr_plate" == 5 then goto index 3000;
   if "curr_plate" == 6 then goto index 2998;
   if "curr_plate" == 7 then goto index 2996;
   goto index 3011;
   show serial_dialog "hanoi_plate_7";
   goto index 3011;
   show serial_dialog "hanoi_plate_6";
   goto index 3011;
   show serial_dialog "hanoi_plate_5";
   goto index 3011;
   show serial_dialog "hanoi_plate_4";
   goto index 3011;
   show serial_dialog "hanoi_plate_3";
   goto index 3011;
   show serial_dialog "hanoi_plate_2";
   goto index 3011;
   show serial_dialog "hanoi_plate_1";
   goto index 3011;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 3019;
   if "hanoi_draw_help" then goto index 3016;
   goto index 3055;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 3055;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 3033;
   goto index 3034;
   delete command "WIN";
   if !"hanoi_won" then goto index 3053;
   if !"ch2-carrying-plate" then goto index 3038;
   if !"ch2-installed-plate" then goto index 3038;
   goto index 3054;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 3042;
   goto index 3043;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 3051;
   if "hanoi_move_count" == 69 then goto index 3049;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 3052;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 3052;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 3054;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
   goto index 4901;
   if "cursor_value" == 0 then goto index 3236;
   if "cursor_pos" == 1 then goto index 3092;
   if "cursor_pos" == 2 then goto index 3076;
   if "cursor_pos" == 3 then goto index 3060;
   if "array3_length" == 0 then goto index 3075;
   if "array3_length" == 1 then goto index 3074;
   if "array3_length" == 2 then goto index 3073;
   if "array3_length" == 3 then goto index 3072;
   if "array3_length" == 4 then goto index 3071;
   if "array3_length" == 5 then goto index 3070;
   if "array3_length" == 6 then goto index 3069;
   if "array3_length" == 7 then goto index 3068;
   "checked_value" = "array3_7";
   "checked_value" = "array3_6";
   "checked_value" = "array3_5";
   "checked_value" = "array3_4";
   "checked_value" = "array3_3";
   "checked_value" = "array3_2";
   "checked_value" = "array3_1";
   "checked_value" = 0;
   if "array2_length" == 0 then goto index 3091;
   if "array2_length" == 1 then goto index 3090;
   if "array2_length" == 2 then goto index 3089;
   if "array2_length" == 3 then goto index 3088;
   if "array2_length" == 4 then goto index 3087;
   if "array2_length" == 5 then goto index 3086;
   if "array2_length" == 6 then goto index 3085;
   if "array2_length" == 7 then goto index 3084;
   "checked_value" = "array2_7";
   "checked_value" = "array2_6";
   "checked_value" = "array2_5";
   "checked_value" = "array2_4";
   "checked_value" = "array2_3";
   "checked_value" = "array2_2";
   "checked_value" = "array2_1";
   "checked_value" = 0;
   if "array1_length" == 0 then goto index 3115;
   if "array1_length" == 1 then goto index 3113;
   if "array1_length" == 2 then goto index 3111;
   if "array1_length" == 3 then goto index 3109;
   if "array1_length" == 4 then goto index 3107;
   if "array1_length" == 5 then goto index 3105;
   if "array1_length" == 6 then goto index 3103;
   if "array1_length" == 7 then goto index 3101;
   goto index 3116;
   "checked_value" = "array1_7";
   goto index 3116;
   "checked_value" = "array1_6";
   goto index 3116;
   "checked_value" = "array1_5";
   goto index 3116;
   "checked_value" = "array1_4";
   goto index 3116;
   "checked_value" = "array1_3";
   goto index 3116;
   "checked_value" = "array1_2";
   goto index 3116;
   "checked_value" = "array1_1";
   goto index 3116;
   "checked_value" = 0;
   if "checked_value" == 0 then goto index 3122;
   if "checked_value" > "cursor_value" then goto index 3120;
   "can_drop" = false;
   goto index 3123;
   "can_drop" = true;
   goto index 3123;
   "can_drop" = true;
   if "can_drop" then goto index 3125;
   "hanoi_warning_size" = true;
   if "cursor_pos" == 1 then goto index 3200;
   if "cursor_pos" == 2 then goto index 3164;
   if "cursor_pos" == 3 then goto index 3128;
   if "cursor_value" == 0 then goto index 3163;
   if "array3_length" >= 7 then goto index 3161;
   if "array3_length" == 6 then goto index 3156;
   if "array3_length" == 5 then goto index 3153;
   if "array3_length" == 4 then goto index 3150;
   if "array3_length" == 3 then goto index 3147;
   if "array3_length" == 2 then goto index 3144;
   if "array3_length" == 1 then goto index 3141;
   if "array3_length" == 0 then goto index 3138;
   goto index 3158;
   "array3_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 3158;
   "array3_7" = "cursor_value";
   "cursor_value" = 0;
   "array3_length" += 1;
   "hanoi_move_count" += 1;
   goto index 3164;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 3164;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 3199;
   if "array2_length" >= 7 then goto index 3197;
   if "array2_length" == 6 then goto index 3192;
   if "array2_length" == 5 then goto index 3189;
   if "array2_length" == 4 then goto index 3186;
   if "array2_length" == 3 then goto index 3183;
   if "array2_length" == 2 then goto index 3180;
   if "array2_length" == 1 then goto index 3177;
   if "array2_length" == 0 then goto index 3174;
   goto index 3194;
   "array2_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 3194;
   "array2_7" = "cursor_value";
   "cursor_value" = 0;
   "array2_length" += 1;
   "hanoi_move_count" += 1;
   goto index 3200;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 3200;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 3235;
   if "array1_length" >= 7 then goto index 3233;
   if "array1_length" == 6 then goto index 3228;
   if "array1_length" == 5 then goto index 3225;
   if "array1_length" == 4 then goto index 3222;
   if "array1_length" == 3 then goto index 3219;
   if "array1_length" == 2 then goto index 3216;
   if "array1_length" == 1 then goto index 3213;
   if "array1_length" == 0 then goto index 3210;
   goto index 3230;
   "array1_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 3230;
   "array1_7" = "cursor_value";
   "cursor_value" = 0;
   "array1_length" += 1;
   "hanoi_move_count" += 1;
   goto index 3236;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 3236;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_pos" == 1 then goto index 3307;
   if "cursor_pos" == 2 then goto index 3273;
   if "cursor_pos" == 3 then goto index 3239;
   if "array3_length" > 0 then goto index 3240;
   if "array3_length" == 0 then goto index 3272;
   if "array3_length" == 7 then goto index 3267;
   if "array3_length" == 6 then goto index 3264;
   if "array3_length" == 5 then goto index 3261;
   if "array3_length" == 4 then goto index 3258;
   if "array3_length" == 3 then goto index 3255;
   if "array3_length" == 2 then goto index 3252;
   if "array3_length" == 1 then goto index 3249;
   goto index 3269;
   "cursor_value" = "array3_1";
   "array3_1" = 0;
   goto index 3269;
   "cursor_value" = "array3_2";
   "array3_2" = 0;
   goto index 3269;
   "cursor_value" = "array3_3";
   "array3_3" = 0;
   goto index 3269;
   "cursor_value" = "array3_4";
   "array3_4" = 0;
   goto index 3269;
   "cursor_value" = "array3_5";
   "array3_5" = 0;
   goto index 3269;
   "cursor_value" = "array3_6";
   "array3_6" = 0;
   goto index 3269;
   "cursor_value" = "array3_7";
   "array3_7" = 0;
   "array3_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 3273;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array2_length" > 0 then goto index 3274;
   if "array2_length" == 0 then goto index 3306;
   if "array2_length" == 7 then goto index 3301;
   if "array2_length" == 6 then goto index 3298;
   if "array2_length" == 5 then goto index 3295;
   if "array2_length" == 4 then goto index 3292;
   if "array2_length" == 3 then goto index 3289;
   if "array2_length" == 2 then goto index 3286;
   if "array2_length" == 1 then goto index 3283;
   goto index 3303;
   "cursor_value" = "array2_1";
   "array2_1" = 0;
   goto index 3303;
   "cursor_value" = "array2_2";
   "array2_2" = 0;
   goto index 3303;
   "cursor_value" = "array2_3";
   "array2_3" = 0;
   goto index 3303;
   "cursor_value" = "array2_4";
   "array2_4" = 0;
   goto index 3303;
   "cursor_value" = "array2_5";
   "array2_5" = 0;
   goto index 3303;
   "cursor_value" = "array2_6";
   "array2_6" = 0;
   goto index 3303;
   "cursor_value" = "array2_7";
   "array2_7" = 0;
   "array2_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 3307;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array1_length" > 0 then goto index 3309;
   goto index 3342;
   if "array1_length" == 0 then goto index 3341;
   if "array1_length" == 7 then goto index 3336;
   if "array1_length" == 6 then goto index 3333;
   if "array1_length" == 5 then goto index 3330;
   if "array1_length" == 4 then goto index 3327;
   if "array1_length" == 3 then goto index 3324;
   if "array1_length" == 2 then goto index 3321;
   if "array1_length" == 1 then goto index 3318;
   goto index 3338;
   "cursor_value" = "array1_1";
   "array1_1" = 0;
   goto index 3338;
   "cursor_value" = "array1_2";
   "array1_2" = 0;
   goto index 3338;
   "cursor_value" = "array1_3";
   "array1_3" = 0;
   goto index 3338;
   "cursor_value" = "array1_4";
   "array1_4" = 0;
   goto index 3338;
   "cursor_value" = "array1_5";
   "array1_5" = 0;
   goto index 3338;
   "cursor_value" = "array1_6";
   "array1_6" = 0;
   goto index 3338;
   "cursor_value" = "array1_7";
   "array1_7" = 0;
   "array1_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 3342;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 6 then goto index 3344;
   goto index 3345;
   "hanoi_won" = true;
   if "cursor_pos" == 1 then goto index 3353;
   if "cursor_pos" == 2 then goto index 3351;
   if "cursor_pos" == 3 then goto index 3349;
   goto index 3354;
   "cursor_grip_height" = "array3_length";
   goto index 3354;
   "cursor_grip_height" = "array2_length";
   goto index 3354;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 3370;
   "column" = 1;
   if "column" <= 3 then goto index 3364;
   goto index 3379;
   if "cursor_pos" == "column" then goto index 3367;
   show serial_dialog "hanoi_space";
   goto index 3368;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 3362;
   if "cursor_pos" == 1 then goto index 3378;
   if "cursor_pos" == 2 then goto index 3376;
   if "cursor_pos" == 3 then goto index 3374;
   goto index 3379;
   show serial_dialog "hanoi_won_message3a";
   goto index 3379;
   show serial_dialog "hanoi_won_message2a";
   goto index 3379;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 3460;
   if "hanoi_won" then goto index 3448;
   "column" = 1;
   if "column" <= 3 then goto index 3386;
   goto index 3462;
   if "curr_plate" != 0 then goto index 3422;
   if "cursor_pos" == "column" then goto index 3389;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3421;
   if "cursor_hinge_height" == "row" then goto index 3419;
   if "cursor_grip_height" == "row" then goto index 3394;
   show serial_dialog "hanoi_space";
   goto index 3446;
   if "cursor_value" == 0 then goto index 3417;
   if "cursor_value" == 1 then goto index 3415;
   if "cursor_value" == 2 then goto index 3413;
   if "cursor_value" == 3 then goto index 3411;
   if "cursor_value" == 4 then goto index 3409;
   if "cursor_value" == 5 then goto index 3407;
   if "cursor_value" == 6 then goto index 3405;
   if "cursor_value" == 7 then goto index 3403;
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3418;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3446;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3446;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3445;
   if "curr_plate" == 1 then goto index 3443;
   if "curr_plate" == 2 then goto index 3441;
   if "curr_plate" == 3 then goto index 3439;
   if "curr_plate" == 4 then goto index 3437;
   if "curr_plate" == 5 then goto index 3435;
   if "curr_plate" == 6 then goto index 3433;
   if "curr_plate" == 7 then goto index 3431;
   goto index 3446;
   show serial_dialog "hanoi_plate_7";
   goto index 3446;
   show serial_dialog "hanoi_plate_6";
   goto index 3446;
   show serial_dialog "hanoi_plate_5";
   goto index 3446;
   show serial_dialog "hanoi_plate_4";
   goto index 3446;
   show serial_dialog "hanoi_plate_3";
   goto index 3446;
   show serial_dialog "hanoi_plate_2";
   goto index 3446;
   show serial_dialog "hanoi_plate_1";
   goto index 3446;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 3384;
   if "cursor_pos" == 1 then goto index 3459;
   if "cursor_pos" == 2 then goto index 3458;
   if "cursor_pos" == 3 then goto index 3451;
   if "hanoi_move_count" < 100 then goto index 3457;
   if "hanoi_move_count" < 1000 then goto index 3455;
   show serial_dialog "hanoi_won_message3b4";
   goto index 3460;
   show serial_dialog "hanoi_won_message3b3";
   goto index 3460;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 3467;
   goto index 3529;
   if "curr_plate" != 0 then goto index 3503;
   if "cursor_pos" == "column" then goto index 3470;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3502;
   if "cursor_hinge_height" == "row" then goto index 3500;
   if "cursor_grip_height" == "row" then goto index 3475;
   show serial_dialog "hanoi_space";
   goto index 3527;
   if "cursor_value" == 0 then goto index 3498;
   if "cursor_value" == 1 then goto index 3496;
   if "cursor_value" == 2 then goto index 3494;
   if "cursor_value" == 3 then goto index 3492;
   if "cursor_value" == 4 then goto index 3490;
   if "cursor_value" == 5 then goto index 3488;
   if "cursor_value" == 6 then goto index 3486;
   if "cursor_value" == 7 then goto index 3484;
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3499;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3527;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3527;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3526;
   if "curr_plate" == 1 then goto index 3524;
   if "curr_plate" == 2 then goto index 3522;
   if "curr_plate" == 3 then goto index 3520;
   if "curr_plate" == 4 then goto index 3518;
   if "curr_plate" == 5 then goto index 3516;
   if "curr_plate" == 6 then goto index 3514;
   if "curr_plate" == 7 then goto index 3512;
   goto index 3527;
   show serial_dialog "hanoi_plate_7";
   goto index 3527;
   show serial_dialog "hanoi_plate_6";
   goto index 3527;
   show serial_dialog "hanoi_plate_5";
   goto index 3527;
   show serial_dialog "hanoi_plate_4";
   goto index 3527;
   show serial_dialog "hanoi_plate_3";
   goto index 3527;
   show serial_dialog "hanoi_plate_2";
   goto index 3527;
   show serial_dialog "hanoi_plate_1";
   goto index 3527;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 3465;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 3534;
   goto index 3596;
   if "curr_plate" != 0 then goto index 3570;
   if "cursor_pos" == "column" then goto index 3537;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3569;
   if "cursor_hinge_height" == "row" then goto index 3567;
   if "cursor_grip_height" == "row" then goto index 3542;
   show serial_dialog "hanoi_space";
   goto index 3594;
   if "cursor_value" == 0 then goto index 3565;
   if "cursor_value" == 1 then goto index 3563;
   if "cursor_value" == 2 then goto index 3561;
   if "cursor_value" == 3 then goto index 3559;
   if "cursor_value" == 4 then goto index 3557;
   if "cursor_value" == 5 then goto index 3555;
   if "cursor_value" == 6 then goto index 3553;
   if "cursor_value" == 7 then goto index 3551;
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3566;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3594;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3594;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3593;
   if "curr_plate" == 1 then goto index 3591;
   if "curr_plate" == 2 then goto index 3589;
   if "curr_plate" == 3 then goto index 3587;
   if "curr_plate" == 4 then goto index 3585;
   if "curr_plate" == 5 then goto index 3583;
   if "curr_plate" == 6 then goto index 3581;
   if "curr_plate" == 7 then goto index 3579;
   goto index 3594;
   show serial_dialog "hanoi_plate_7";
   goto index 3594;
   show serial_dialog "hanoi_plate_6";
   goto index 3594;
   show serial_dialog "hanoi_plate_5";
   goto index 3594;
   show serial_dialog "hanoi_plate_4";
   goto index 3594;
   show serial_dialog "hanoi_plate_3";
   goto index 3594;
   show serial_dialog "hanoi_plate_2";
   goto index 3594;
   show serial_dialog "hanoi_plate_1";
   goto index 3594;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 3532;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 3639;
   if "cursor_pos" == "column" then goto index 3606;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3638;
   if "cursor_hinge_height" == "row" then goto index 3636;
   if "cursor_grip_height" == "row" then goto index 3611;
   show serial_dialog "hanoi_space";
   goto index 3663;
   if "cursor_value" == 0 then goto index 3634;
   if "cursor_value" == 1 then goto index 3632;
   if "cursor_value" == 2 then goto index 3630;
   if "cursor_value" == 3 then goto index 3628;
   if "cursor_value" == 4 then goto index 3626;
   if "cursor_value" == 5 then goto index 3624;
   if "cursor_value" == 6 then goto index 3622;
   if "cursor_value" == 7 then goto index 3620;
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3635;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3663;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3663;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3662;
   if "curr_plate" == 1 then goto index 3660;
   if "curr_plate" == 2 then goto index 3658;
   if "curr_plate" == 3 then goto index 3656;
   if "curr_plate" == 4 then goto index 3654;
   if "curr_plate" == 5 then goto index 3652;
   if "curr_plate" == 6 then goto index 3650;
   if "curr_plate" == 7 then goto index 3648;
   goto index 3663;
   show serial_dialog "hanoi_plate_7";
   goto index 3663;
   show serial_dialog "hanoi_plate_6";
   goto index 3663;
   show serial_dialog "hanoi_plate_5";
   goto index 3663;
   show serial_dialog "hanoi_plate_4";
   goto index 3663;
   show serial_dialog "hanoi_plate_3";
   goto index 3663;
   show serial_dialog "hanoi_plate_2";
   goto index 3663;
   show serial_dialog "hanoi_plate_1";
   goto index 3663;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 3701;
   if "cursor_pos" == "column" then goto index 3668;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3700;
   if "cursor_hinge_height" == "row" then goto index 3698;
   if "cursor_grip_height" == "row" then goto index 3673;
   show serial_dialog "hanoi_space";
   goto index 3725;
   if "cursor_value" == 0 then goto index 3696;
   if "cursor_value" == 1 then goto index 3694;
   if "cursor_value" == 2 then goto index 3692;
   if "cursor_value" == 3 then goto index 3690;
   if "cursor_value" == 4 then goto index 3688;
   if "cursor_value" == 5 then goto index 3686;
   if "cursor_value" == 6 then goto index 3684;
   if "cursor_value" == 7 then goto index 3682;
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3697;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3725;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3725;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3724;
   if "curr_plate" == 1 then goto index 3722;
   if "curr_plate" == 2 then goto index 3720;
   if "curr_plate" == 3 then goto index 3718;
   if "curr_plate" == 4 then goto index 3716;
   if "curr_plate" == 5 then goto index 3714;
   if "curr_plate" == 6 then goto index 3712;
   if "curr_plate" == 7 then goto index 3710;
   goto index 3725;
   show serial_dialog "hanoi_plate_7";
   goto index 3725;
   show serial_dialog "hanoi_plate_6";
   goto index 3725;
   show serial_dialog "hanoi_plate_5";
   goto index 3725;
   show serial_dialog "hanoi_plate_4";
   goto index 3725;
   show serial_dialog "hanoi_plate_3";
   goto index 3725;
   show serial_dialog "hanoi_plate_2";
   goto index 3725;
   show serial_dialog "hanoi_plate_1";
   goto index 3725;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 3763;
   if "cursor_pos" == "column" then goto index 3730;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3762;
   if "cursor_hinge_height" == "row" then goto index 3760;
   if "cursor_grip_height" == "row" then goto index 3735;
   show serial_dialog "hanoi_space";
   goto index 3787;
   if "cursor_value" == 0 then goto index 3758;
   if "cursor_value" == 1 then goto index 3756;
   if "cursor_value" == 2 then goto index 3754;
   if "cursor_value" == 3 then goto index 3752;
   if "cursor_value" == 4 then goto index 3750;
   if "cursor_value" == 5 then goto index 3748;
   if "cursor_value" == 6 then goto index 3746;
   if "cursor_value" == 7 then goto index 3744;
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3759;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3787;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3787;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3786;
   if "curr_plate" == 1 then goto index 3784;
   if "curr_plate" == 2 then goto index 3782;
   if "curr_plate" == 3 then goto index 3780;
   if "curr_plate" == 4 then goto index 3778;
   if "curr_plate" == 5 then goto index 3776;
   if "curr_plate" == 6 then goto index 3774;
   if "curr_plate" == 7 then goto index 3772;
   goto index 3787;
   show serial_dialog "hanoi_plate_7";
   goto index 3787;
   show serial_dialog "hanoi_plate_6";
   goto index 3787;
   show serial_dialog "hanoi_plate_5";
   goto index 3787;
   show serial_dialog "hanoi_plate_4";
   goto index 3787;
   show serial_dialog "hanoi_plate_3";
   goto index 3787;
   show serial_dialog "hanoi_plate_2";
   goto index 3787;
   show serial_dialog "hanoi_plate_1";
   goto index 3787;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 3830;
   if "cursor_pos" == "column" then goto index 3797;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3829;
   if "cursor_hinge_height" == "row" then goto index 3827;
   if "cursor_grip_height" == "row" then goto index 3802;
   show serial_dialog "hanoi_space";
   goto index 3854;
   if "cursor_value" == 0 then goto index 3825;
   if "cursor_value" == 1 then goto index 3823;
   if "cursor_value" == 2 then goto index 3821;
   if "cursor_value" == 3 then goto index 3819;
   if "cursor_value" == 4 then goto index 3817;
   if "cursor_value" == 5 then goto index 3815;
   if "cursor_value" == 6 then goto index 3813;
   if "cursor_value" == 7 then goto index 3811;
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3826;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3854;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3854;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3853;
   if "curr_plate" == 1 then goto index 3851;
   if "curr_plate" == 2 then goto index 3849;
   if "curr_plate" == 3 then goto index 3847;
   if "curr_plate" == 4 then goto index 3845;
   if "curr_plate" == 5 then goto index 3843;
   if "curr_plate" == 6 then goto index 3841;
   if "curr_plate" == 7 then goto index 3839;
   goto index 3854;
   show serial_dialog "hanoi_plate_7";
   goto index 3854;
   show serial_dialog "hanoi_plate_6";
   goto index 3854;
   show serial_dialog "hanoi_plate_5";
   goto index 3854;
   show serial_dialog "hanoi_plate_4";
   goto index 3854;
   show serial_dialog "hanoi_plate_3";
   goto index 3854;
   show serial_dialog "hanoi_plate_2";
   goto index 3854;
   show serial_dialog "hanoi_plate_1";
   goto index 3854;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 3892;
   if "cursor_pos" == "column" then goto index 3859;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3891;
   if "cursor_hinge_height" == "row" then goto index 3889;
   if "cursor_grip_height" == "row" then goto index 3864;
   show serial_dialog "hanoi_space";
   goto index 3916;
   if "cursor_value" == 0 then goto index 3887;
   if "cursor_value" == 1 then goto index 3885;
   if "cursor_value" == 2 then goto index 3883;
   if "cursor_value" == 3 then goto index 3881;
   if "cursor_value" == 4 then goto index 3879;
   if "cursor_value" == 5 then goto index 3877;
   if "cursor_value" == 6 then goto index 3875;
   if "cursor_value" == 7 then goto index 3873;
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3888;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3916;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3916;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3915;
   if "curr_plate" == 1 then goto index 3913;
   if "curr_plate" == 2 then goto index 3911;
   if "curr_plate" == 3 then goto index 3909;
   if "curr_plate" == 4 then goto index 3907;
   if "curr_plate" == 5 then goto index 3905;
   if "curr_plate" == 6 then goto index 3903;
   if "curr_plate" == 7 then goto index 3901;
   goto index 3916;
   show serial_dialog "hanoi_plate_7";
   goto index 3916;
   show serial_dialog "hanoi_plate_6";
   goto index 3916;
   show serial_dialog "hanoi_plate_5";
   goto index 3916;
   show serial_dialog "hanoi_plate_4";
   goto index 3916;
   show serial_dialog "hanoi_plate_3";
   goto index 3916;
   show serial_dialog "hanoi_plate_2";
   goto index 3916;
   show serial_dialog "hanoi_plate_1";
   goto index 3916;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 3954;
   if "cursor_pos" == "column" then goto index 3921;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 3953;
   if "cursor_hinge_height" == "row" then goto index 3951;
   if "cursor_grip_height" == "row" then goto index 3926;
   show serial_dialog "hanoi_space";
   goto index 3978;
   if "cursor_value" == 0 then goto index 3949;
   if "cursor_value" == 1 then goto index 3947;
   if "cursor_value" == 2 then goto index 3945;
   if "cursor_value" == 3 then goto index 3943;
   if "cursor_value" == 4 then goto index 3941;
   if "cursor_value" == 5 then goto index 3939;
   if "cursor_value" == 6 then goto index 3937;
   if "cursor_value" == 7 then goto index 3935;
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 3950;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 3978;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 3978;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 3977;
   if "curr_plate" == 1 then goto index 3975;
   if "curr_plate" == 2 then goto index 3973;
   if "curr_plate" == 3 then goto index 3971;
   if "curr_plate" == 4 then goto index 3969;
   if "curr_plate" == 5 then goto index 3967;
   if "curr_plate" == 6 then goto index 3965;
   if "curr_plate" == 7 then goto index 3963;
   goto index 3978;
   show serial_dialog "hanoi_plate_7";
   goto index 3978;
   show serial_dialog "hanoi_plate_6";
   goto index 3978;
   show serial_dialog "hanoi_plate_5";
   goto index 3978;
   show serial_dialog "hanoi_plate_4";
   goto index 3978;
   show serial_dialog "hanoi_plate_3";
   goto index 3978;
   show serial_dialog "hanoi_plate_2";
   goto index 3978;
   show serial_dialog "hanoi_plate_1";
   goto index 3978;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 4021;
   if "cursor_pos" == "column" then goto index 3988;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4020;
   if "cursor_hinge_height" == "row" then goto index 4018;
   if "cursor_grip_height" == "row" then goto index 3993;
   show serial_dialog "hanoi_space";
   goto index 4045;
   if "cursor_value" == 0 then goto index 4016;
   if "cursor_value" == 1 then goto index 4014;
   if "cursor_value" == 2 then goto index 4012;
   if "cursor_value" == 3 then goto index 4010;
   if "cursor_value" == 4 then goto index 4008;
   if "cursor_value" == 5 then goto index 4006;
   if "cursor_value" == 6 then goto index 4004;
   if "cursor_value" == 7 then goto index 4002;
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4017;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4045;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4045;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4044;
   if "curr_plate" == 1 then goto index 4042;
   if "curr_plate" == 2 then goto index 4040;
   if "curr_plate" == 3 then goto index 4038;
   if "curr_plate" == 4 then goto index 4036;
   if "curr_plate" == 5 then goto index 4034;
   if "curr_plate" == 6 then goto index 4032;
   if "curr_plate" == 7 then goto index 4030;
   goto index 4045;
   show serial_dialog "hanoi_plate_7";
   goto index 4045;
   show serial_dialog "hanoi_plate_6";
   goto index 4045;
   show serial_dialog "hanoi_plate_5";
   goto index 4045;
   show serial_dialog "hanoi_plate_4";
   goto index 4045;
   show serial_dialog "hanoi_plate_3";
   goto index 4045;
   show serial_dialog "hanoi_plate_2";
   goto index 4045;
   show serial_dialog "hanoi_plate_1";
   goto index 4045;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 4083;
   if "cursor_pos" == "column" then goto index 4050;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4082;
   if "cursor_hinge_height" == "row" then goto index 4080;
   if "cursor_grip_height" == "row" then goto index 4055;
   show serial_dialog "hanoi_space";
   goto index 4107;
   if "cursor_value" == 0 then goto index 4078;
   if "cursor_value" == 1 then goto index 4076;
   if "cursor_value" == 2 then goto index 4074;
   if "cursor_value" == 3 then goto index 4072;
   if "cursor_value" == 4 then goto index 4070;
   if "cursor_value" == 5 then goto index 4068;
   if "cursor_value" == 6 then goto index 4066;
   if "cursor_value" == 7 then goto index 4064;
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4079;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4107;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4107;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4106;
   if "curr_plate" == 1 then goto index 4104;
   if "curr_plate" == 2 then goto index 4102;
   if "curr_plate" == 3 then goto index 4100;
   if "curr_plate" == 4 then goto index 4098;
   if "curr_plate" == 5 then goto index 4096;
   if "curr_plate" == 6 then goto index 4094;
   if "curr_plate" == 7 then goto index 4092;
   goto index 4107;
   show serial_dialog "hanoi_plate_7";
   goto index 4107;
   show serial_dialog "hanoi_plate_6";
   goto index 4107;
   show serial_dialog "hanoi_plate_5";
   goto index 4107;
   show serial_dialog "hanoi_plate_4";
   goto index 4107;
   show serial_dialog "hanoi_plate_3";
   goto index 4107;
   show serial_dialog "hanoi_plate_2";
   goto index 4107;
   show serial_dialog "hanoi_plate_1";
   goto index 4107;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 4145;
   if "cursor_pos" == "column" then goto index 4112;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4144;
   if "cursor_hinge_height" == "row" then goto index 4142;
   if "cursor_grip_height" == "row" then goto index 4117;
   show serial_dialog "hanoi_space";
   goto index 4169;
   if "cursor_value" == 0 then goto index 4140;
   if "cursor_value" == 1 then goto index 4138;
   if "cursor_value" == 2 then goto index 4136;
   if "cursor_value" == 3 then goto index 4134;
   if "cursor_value" == 4 then goto index 4132;
   if "cursor_value" == 5 then goto index 4130;
   if "cursor_value" == 6 then goto index 4128;
   if "cursor_value" == 7 then goto index 4126;
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4141;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4169;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4169;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4168;
   if "curr_plate" == 1 then goto index 4166;
   if "curr_plate" == 2 then goto index 4164;
   if "curr_plate" == 3 then goto index 4162;
   if "curr_plate" == 4 then goto index 4160;
   if "curr_plate" == 5 then goto index 4158;
   if "curr_plate" == 6 then goto index 4156;
   if "curr_plate" == 7 then goto index 4154;
   goto index 4169;
   show serial_dialog "hanoi_plate_7";
   goto index 4169;
   show serial_dialog "hanoi_plate_6";
   goto index 4169;
   show serial_dialog "hanoi_plate_5";
   goto index 4169;
   show serial_dialog "hanoi_plate_4";
   goto index 4169;
   show serial_dialog "hanoi_plate_3";
   goto index 4169;
   show serial_dialog "hanoi_plate_2";
   goto index 4169;
   show serial_dialog "hanoi_plate_1";
   goto index 4169;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 4212;
   if "cursor_pos" == "column" then goto index 4179;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4211;
   if "cursor_hinge_height" == "row" then goto index 4209;
   if "cursor_grip_height" == "row" then goto index 4184;
   show serial_dialog "hanoi_space";
   goto index 4236;
   if "cursor_value" == 0 then goto index 4207;
   if "cursor_value" == 1 then goto index 4205;
   if "cursor_value" == 2 then goto index 4203;
   if "cursor_value" == 3 then goto index 4201;
   if "cursor_value" == 4 then goto index 4199;
   if "cursor_value" == 5 then goto index 4197;
   if "cursor_value" == 6 then goto index 4195;
   if "cursor_value" == 7 then goto index 4193;
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4208;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4236;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4236;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4235;
   if "curr_plate" == 1 then goto index 4233;
   if "curr_plate" == 2 then goto index 4231;
   if "curr_plate" == 3 then goto index 4229;
   if "curr_plate" == 4 then goto index 4227;
   if "curr_plate" == 5 then goto index 4225;
   if "curr_plate" == 6 then goto index 4223;
   if "curr_plate" == 7 then goto index 4221;
   goto index 4236;
   show serial_dialog "hanoi_plate_7";
   goto index 4236;
   show serial_dialog "hanoi_plate_6";
   goto index 4236;
   show serial_dialog "hanoi_plate_5";
   goto index 4236;
   show serial_dialog "hanoi_plate_4";
   goto index 4236;
   show serial_dialog "hanoi_plate_3";
   goto index 4236;
   show serial_dialog "hanoi_plate_2";
   goto index 4236;
   show serial_dialog "hanoi_plate_1";
   goto index 4236;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 4274;
   if "cursor_pos" == "column" then goto index 4241;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4273;
   if "cursor_hinge_height" == "row" then goto index 4271;
   if "cursor_grip_height" == "row" then goto index 4246;
   show serial_dialog "hanoi_space";
   goto index 4298;
   if "cursor_value" == 0 then goto index 4269;
   if "cursor_value" == 1 then goto index 4267;
   if "cursor_value" == 2 then goto index 4265;
   if "cursor_value" == 3 then goto index 4263;
   if "cursor_value" == 4 then goto index 4261;
   if "cursor_value" == 5 then goto index 4259;
   if "cursor_value" == 6 then goto index 4257;
   if "cursor_value" == 7 then goto index 4255;
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4270;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4298;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4298;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4297;
   if "curr_plate" == 1 then goto index 4295;
   if "curr_plate" == 2 then goto index 4293;
   if "curr_plate" == 3 then goto index 4291;
   if "curr_plate" == 4 then goto index 4289;
   if "curr_plate" == 5 then goto index 4287;
   if "curr_plate" == 6 then goto index 4285;
   if "curr_plate" == 7 then goto index 4283;
   goto index 4298;
   show serial_dialog "hanoi_plate_7";
   goto index 4298;
   show serial_dialog "hanoi_plate_6";
   goto index 4298;
   show serial_dialog "hanoi_plate_5";
   goto index 4298;
   show serial_dialog "hanoi_plate_4";
   goto index 4298;
   show serial_dialog "hanoi_plate_3";
   goto index 4298;
   show serial_dialog "hanoi_plate_2";
   goto index 4298;
   show serial_dialog "hanoi_plate_1";
   goto index 4298;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 4336;
   if "cursor_pos" == "column" then goto index 4303;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4335;
   if "cursor_hinge_height" == "row" then goto index 4333;
   if "cursor_grip_height" == "row" then goto index 4308;
   show serial_dialog "hanoi_space";
   goto index 4360;
   if "cursor_value" == 0 then goto index 4331;
   if "cursor_value" == 1 then goto index 4329;
   if "cursor_value" == 2 then goto index 4327;
   if "cursor_value" == 3 then goto index 4325;
   if "cursor_value" == 4 then goto index 4323;
   if "cursor_value" == 5 then goto index 4321;
   if "cursor_value" == 6 then goto index 4319;
   if "cursor_value" == 7 then goto index 4317;
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4332;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4360;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4360;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4359;
   if "curr_plate" == 1 then goto index 4357;
   if "curr_plate" == 2 then goto index 4355;
   if "curr_plate" == 3 then goto index 4353;
   if "curr_plate" == 4 then goto index 4351;
   if "curr_plate" == 5 then goto index 4349;
   if "curr_plate" == 6 then goto index 4347;
   if "curr_plate" == 7 then goto index 4345;
   goto index 4360;
   show serial_dialog "hanoi_plate_7";
   goto index 4360;
   show serial_dialog "hanoi_plate_6";
   goto index 4360;
   show serial_dialog "hanoi_plate_5";
   goto index 4360;
   show serial_dialog "hanoi_plate_4";
   goto index 4360;
   show serial_dialog "hanoi_plate_3";
   goto index 4360;
   show serial_dialog "hanoi_plate_2";
   goto index 4360;
   show serial_dialog "hanoi_plate_1";
   goto index 4360;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 4403;
   if "cursor_pos" == "column" then goto index 4370;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4402;
   if "cursor_hinge_height" == "row" then goto index 4400;
   if "cursor_grip_height" == "row" then goto index 4375;
   show serial_dialog "hanoi_space";
   goto index 4427;
   if "cursor_value" == 0 then goto index 4398;
   if "cursor_value" == 1 then goto index 4396;
   if "cursor_value" == 2 then goto index 4394;
   if "cursor_value" == 3 then goto index 4392;
   if "cursor_value" == 4 then goto index 4390;
   if "cursor_value" == 5 then goto index 4388;
   if "cursor_value" == 6 then goto index 4386;
   if "cursor_value" == 7 then goto index 4384;
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4399;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4427;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4427;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4426;
   if "curr_plate" == 1 then goto index 4424;
   if "curr_plate" == 2 then goto index 4422;
   if "curr_plate" == 3 then goto index 4420;
   if "curr_plate" == 4 then goto index 4418;
   if "curr_plate" == 5 then goto index 4416;
   if "curr_plate" == 6 then goto index 4414;
   if "curr_plate" == 7 then goto index 4412;
   goto index 4427;
   show serial_dialog "hanoi_plate_7";
   goto index 4427;
   show serial_dialog "hanoi_plate_6";
   goto index 4427;
   show serial_dialog "hanoi_plate_5";
   goto index 4427;
   show serial_dialog "hanoi_plate_4";
   goto index 4427;
   show serial_dialog "hanoi_plate_3";
   goto index 4427;
   show serial_dialog "hanoi_plate_2";
   goto index 4427;
   show serial_dialog "hanoi_plate_1";
   goto index 4427;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 4465;
   if "cursor_pos" == "column" then goto index 4432;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4464;
   if "cursor_hinge_height" == "row" then goto index 4462;
   if "cursor_grip_height" == "row" then goto index 4437;
   show serial_dialog "hanoi_space";
   goto index 4489;
   if "cursor_value" == 0 then goto index 4460;
   if "cursor_value" == 1 then goto index 4458;
   if "cursor_value" == 2 then goto index 4456;
   if "cursor_value" == 3 then goto index 4454;
   if "cursor_value" == 4 then goto index 4452;
   if "cursor_value" == 5 then goto index 4450;
   if "cursor_value" == 6 then goto index 4448;
   if "cursor_value" == 7 then goto index 4446;
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4461;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4489;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4489;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4488;
   if "curr_plate" == 1 then goto index 4486;
   if "curr_plate" == 2 then goto index 4484;
   if "curr_plate" == 3 then goto index 4482;
   if "curr_plate" == 4 then goto index 4480;
   if "curr_plate" == 5 then goto index 4478;
   if "curr_plate" == 6 then goto index 4476;
   if "curr_plate" == 7 then goto index 4474;
   goto index 4489;
   show serial_dialog "hanoi_plate_7";
   goto index 4489;
   show serial_dialog "hanoi_plate_6";
   goto index 4489;
   show serial_dialog "hanoi_plate_5";
   goto index 4489;
   show serial_dialog "hanoi_plate_4";
   goto index 4489;
   show serial_dialog "hanoi_plate_3";
   goto index 4489;
   show serial_dialog "hanoi_plate_2";
   goto index 4489;
   show serial_dialog "hanoi_plate_1";
   goto index 4489;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 4527;
   if "cursor_pos" == "column" then goto index 4494;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4526;
   if "cursor_hinge_height" == "row" then goto index 4524;
   if "cursor_grip_height" == "row" then goto index 4499;
   show serial_dialog "hanoi_space";
   goto index 4551;
   if "cursor_value" == 0 then goto index 4522;
   if "cursor_value" == 1 then goto index 4520;
   if "cursor_value" == 2 then goto index 4518;
   if "cursor_value" == 3 then goto index 4516;
   if "cursor_value" == 4 then goto index 4514;
   if "cursor_value" == 5 then goto index 4512;
   if "cursor_value" == 6 then goto index 4510;
   if "cursor_value" == 7 then goto index 4508;
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4523;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4551;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4551;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4550;
   if "curr_plate" == 1 then goto index 4548;
   if "curr_plate" == 2 then goto index 4546;
   if "curr_plate" == 3 then goto index 4544;
   if "curr_plate" == 4 then goto index 4542;
   if "curr_plate" == 5 then goto index 4540;
   if "curr_plate" == 6 then goto index 4538;
   if "curr_plate" == 7 then goto index 4536;
   goto index 4551;
   show serial_dialog "hanoi_plate_7";
   goto index 4551;
   show serial_dialog "hanoi_plate_6";
   goto index 4551;
   show serial_dialog "hanoi_plate_5";
   goto index 4551;
   show serial_dialog "hanoi_plate_4";
   goto index 4551;
   show serial_dialog "hanoi_plate_3";
   goto index 4551;
   show serial_dialog "hanoi_plate_2";
   goto index 4551;
   show serial_dialog "hanoi_plate_1";
   goto index 4551;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 4594;
   if "cursor_pos" == "column" then goto index 4561;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4593;
   if "cursor_hinge_height" == "row" then goto index 4591;
   if "cursor_grip_height" == "row" then goto index 4566;
   show serial_dialog "hanoi_space";
   goto index 4618;
   if "cursor_value" == 0 then goto index 4589;
   if "cursor_value" == 1 then goto index 4587;
   if "cursor_value" == 2 then goto index 4585;
   if "cursor_value" == 3 then goto index 4583;
   if "cursor_value" == 4 then goto index 4581;
   if "cursor_value" == 5 then goto index 4579;
   if "cursor_value" == 6 then goto index 4577;
   if "cursor_value" == 7 then goto index 4575;
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4590;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4618;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4618;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4617;
   if "curr_plate" == 1 then goto index 4615;
   if "curr_plate" == 2 then goto index 4613;
   if "curr_plate" == 3 then goto index 4611;
   if "curr_plate" == 4 then goto index 4609;
   if "curr_plate" == 5 then goto index 4607;
   if "curr_plate" == 6 then goto index 4605;
   if "curr_plate" == 7 then goto index 4603;
   goto index 4618;
   show serial_dialog "hanoi_plate_7";
   goto index 4618;
   show serial_dialog "hanoi_plate_6";
   goto index 4618;
   show serial_dialog "hanoi_plate_5";
   goto index 4618;
   show serial_dialog "hanoi_plate_4";
   goto index 4618;
   show serial_dialog "hanoi_plate_3";
   goto index 4618;
   show serial_dialog "hanoi_plate_2";
   goto index 4618;
   show serial_dialog "hanoi_plate_1";
   goto index 4618;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 4656;
   if "cursor_pos" == "column" then goto index 4623;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4655;
   if "cursor_hinge_height" == "row" then goto index 4653;
   if "cursor_grip_height" == "row" then goto index 4628;
   show serial_dialog "hanoi_space";
   goto index 4680;
   if "cursor_value" == 0 then goto index 4651;
   if "cursor_value" == 1 then goto index 4649;
   if "cursor_value" == 2 then goto index 4647;
   if "cursor_value" == 3 then goto index 4645;
   if "cursor_value" == 4 then goto index 4643;
   if "cursor_value" == 5 then goto index 4641;
   if "cursor_value" == 6 then goto index 4639;
   if "cursor_value" == 7 then goto index 4637;
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4652;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4680;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4680;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4679;
   if "curr_plate" == 1 then goto index 4677;
   if "curr_plate" == 2 then goto index 4675;
   if "curr_plate" == 3 then goto index 4673;
   if "curr_plate" == 4 then goto index 4671;
   if "curr_plate" == 5 then goto index 4669;
   if "curr_plate" == 6 then goto index 4667;
   if "curr_plate" == 7 then goto index 4665;
   goto index 4680;
   show serial_dialog "hanoi_plate_7";
   goto index 4680;
   show serial_dialog "hanoi_plate_6";
   goto index 4680;
   show serial_dialog "hanoi_plate_5";
   goto index 4680;
   show serial_dialog "hanoi_plate_4";
   goto index 4680;
   show serial_dialog "hanoi_plate_3";
   goto index 4680;
   show serial_dialog "hanoi_plate_2";
   goto index 4680;
   show serial_dialog "hanoi_plate_1";
   goto index 4680;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 4718;
   if "cursor_pos" == "column" then goto index 4685;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 4717;
   if "cursor_hinge_height" == "row" then goto index 4715;
   if "cursor_grip_height" == "row" then goto index 4690;
   show serial_dialog "hanoi_space";
   goto index 4742;
   if "cursor_value" == 0 then goto index 4713;
   if "cursor_value" == 1 then goto index 4711;
   if "cursor_value" == 2 then goto index 4709;
   if "cursor_value" == 3 then goto index 4707;
   if "cursor_value" == 4 then goto index 4705;
   if "cursor_value" == 5 then goto index 4703;
   if "cursor_value" == 6 then goto index 4701;
   if "cursor_value" == 7 then goto index 4699;
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 4714;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 4742;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 4742;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 4741;
   if "curr_plate" == 1 then goto index 4739;
   if "curr_plate" == 2 then goto index 4737;
   if "curr_plate" == 3 then goto index 4735;
   if "curr_plate" == 4 then goto index 4733;
   if "curr_plate" == 5 then goto index 4731;
   if "curr_plate" == 6 then goto index 4729;
   if "curr_plate" == 7 then goto index 4727;
   goto index 4742;
   show serial_dialog "hanoi_plate_7";
   goto index 4742;
   show serial_dialog "hanoi_plate_6";
   goto index 4742;
   show serial_dialog "hanoi_plate_5";
   goto index 4742;
   show serial_dialog "hanoi_plate_4";
   goto index 4742;
   show serial_dialog "hanoi_plate_3";
   goto index 4742;
   show serial_dialog "hanoi_plate_2";
   goto index 4742;
   show serial_dialog "hanoi_plate_1";
   goto index 4742;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 4768;
   if "curr_plate" == 1 then goto index 4766;
   if "curr_plate" == 2 then goto index 4764;
   if "curr_plate" == 3 then goto index 4762;
   if "curr_plate" == 4 then goto index 4760;
   if "curr_plate" == 5 then goto index 4758;
   if "curr_plate" == 6 then goto index 4756;
   if "curr_plate" == 7 then goto index 4754;
   goto index 4769;
   show serial_dialog "hanoi_plate_7";
   goto index 4769;
   show serial_dialog "hanoi_plate_6";
   goto index 4769;
   show serial_dialog "hanoi_plate_5";
   goto index 4769;
   show serial_dialog "hanoi_plate_4";
   goto index 4769;
   show serial_dialog "hanoi_plate_3";
   goto index 4769;
   show serial_dialog "hanoi_plate_2";
   goto index 4769;
   show serial_dialog "hanoi_plate_1";
   goto index 4769;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 4793;
   if "curr_plate" == 1 then goto index 4791;
   if "curr_plate" == 2 then goto index 4789;
   if "curr_plate" == 3 then goto index 4787;
   if "curr_plate" == 4 then goto index 4785;
   if "curr_plate" == 5 then goto index 4783;
   if "curr_plate" == 6 then goto index 4781;
   if "curr_plate" == 7 then goto index 4779;
   goto index 4794;
   show serial_dialog "hanoi_plate_7";
   goto index 4794;
   show serial_dialog "hanoi_plate_6";
   goto index 4794;
   show serial_dialog "hanoi_plate_5";
   goto index 4794;
   show serial_dialog "hanoi_plate_4";
   goto index 4794;
   show serial_dialog "hanoi_plate_3";
   goto index 4794;
   show serial_dialog "hanoi_plate_2";
   goto index 4794;
   show serial_dialog "hanoi_plate_1";
   goto index 4794;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 4818;
   if "curr_plate" == 1 then goto index 4816;
   if "curr_plate" == 2 then goto index 4814;
   if "curr_plate" == 3 then goto index 4812;
   if "curr_plate" == 4 then goto index 4810;
   if "curr_plate" == 5 then goto index 4808;
   if "curr_plate" == 6 then goto index 4806;
   if "curr_plate" == 7 then goto index 4804;
   goto index 4819;
   show serial_dialog "hanoi_plate_7";
   goto index 4819;
   show serial_dialog "hanoi_plate_6";
   goto index 4819;
   show serial_dialog "hanoi_plate_5";
   goto index 4819;
   show serial_dialog "hanoi_plate_4";
   goto index 4819;
   show serial_dialog "hanoi_plate_3";
   goto index 4819;
   show serial_dialog "hanoi_plate_2";
   goto index 4819;
   show serial_dialog "hanoi_plate_1";
   goto index 4819;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 4827;
   if "hanoi_draw_help" then goto index 4824;
   goto index 4863;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 4863;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 4841;
   goto index 4842;
   delete command "WIN";
   if !"hanoi_won" then goto index 4861;
   if !"ch2-carrying-plate" then goto index 4846;
   if !"ch2-installed-plate" then goto index 4846;
   goto index 4862;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 4850;
   goto index 4851;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 4859;
   if "hanoi_move_count" == 69 then goto index 4857;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4860;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4860;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4862;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
   goto index 4901;
   player_control = true;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 4879;
   goto index 4880;
   delete command "WIN";
   if !"hanoi_won" then goto index 4899;
   if !"ch2-carrying-plate" then goto index 4884;
   if !"ch2-installed-plate" then goto index 4884;
   goto index 4900;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 4888;
   goto index 4889;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 4897;
   if "hanoi_move_count" == 69 then goto index 4895;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4898;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4898;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 4900;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"draw_hanoi" {
   if "cursor_pos" == 1 then goto index 8;
   if "cursor_pos" == 2 then goto index 6;
   if "cursor_pos" == 3 then goto index 4;
   goto index 9;
   "cursor_grip_height" = "array3_length";
   goto index 9;
   "cursor_grip_height" = "array2_length";
   goto index 9;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 25;
   "column" = 1;
   if "column" <= 3 then goto index 19;
   goto index 34;
   if "cursor_pos" == "column" then goto index 22;
   show serial_dialog "hanoi_space";
   goto index 23;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 17;
   if "cursor_pos" == 1 then goto index 33;
   if "cursor_pos" == 2 then goto index 31;
   if "cursor_pos" == 3 then goto index 29;
   goto index 34;
   show serial_dialog "hanoi_won_message3a";
   goto index 34;
   show serial_dialog "hanoi_won_message2a";
   goto index 34;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 115;
   if "hanoi_won" then goto index 103;
   "column" = 1;
   if "column" <= 3 then goto index 41;
   goto index 117;
   if "curr_plate" != 0 then goto index 77;
   if "cursor_pos" == "column" then goto index 44;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 76;
   if "cursor_hinge_height" == "row" then goto index 74;
   if "cursor_grip_height" == "row" then goto index 49;
   show serial_dialog "hanoi_space";
   goto index 101;
   if "cursor_value" == 0 then goto index 72;
   if "cursor_value" == 1 then goto index 70;
   if "cursor_value" == 2 then goto index 68;
   if "cursor_value" == 3 then goto index 66;
   if "cursor_value" == 4 then goto index 64;
   if "cursor_value" == 5 then goto index 62;
   if "cursor_value" == 6 then goto index 60;
   if "cursor_value" == 7 then goto index 58;
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 73;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 101;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 101;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 100;
   if "curr_plate" == 1 then goto index 98;
   if "curr_plate" == 2 then goto index 96;
   if "curr_plate" == 3 then goto index 94;
   if "curr_plate" == 4 then goto index 92;
   if "curr_plate" == 5 then goto index 90;
   if "curr_plate" == 6 then goto index 88;
   if "curr_plate" == 7 then goto index 86;
   goto index 101;
   show serial_dialog "hanoi_plate_7";
   goto index 101;
   show serial_dialog "hanoi_plate_6";
   goto index 101;
   show serial_dialog "hanoi_plate_5";
   goto index 101;
   show serial_dialog "hanoi_plate_4";
   goto index 101;
   show serial_dialog "hanoi_plate_3";
   goto index 101;
   show serial_dialog "hanoi_plate_2";
   goto index 101;
   show serial_dialog "hanoi_plate_1";
   goto index 101;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 39;
   if "cursor_pos" == 1 then goto index 114;
   if "cursor_pos" == 2 then goto index 113;
   if "cursor_pos" == 3 then goto index 106;
   if "hanoi_move_count" < 100 then goto index 112;
   if "hanoi_move_count" < 1000 then goto index 110;
   show serial_dialog "hanoi_won_message3b4";
   goto index 115;
   show serial_dialog "hanoi_won_message3b3";
   goto index 115;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 122;
   goto index 184;
   if "curr_plate" != 0 then goto index 158;
   if "cursor_pos" == "column" then goto index 125;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 157;
   if "cursor_hinge_height" == "row" then goto index 155;
   if "cursor_grip_height" == "row" then goto index 130;
   show serial_dialog "hanoi_space";
   goto index 182;
   if "cursor_value" == 0 then goto index 153;
   if "cursor_value" == 1 then goto index 151;
   if "cursor_value" == 2 then goto index 149;
   if "cursor_value" == 3 then goto index 147;
   if "cursor_value" == 4 then goto index 145;
   if "cursor_value" == 5 then goto index 143;
   if "cursor_value" == 6 then goto index 141;
   if "cursor_value" == 7 then goto index 139;
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 154;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 182;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 182;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 181;
   if "curr_plate" == 1 then goto index 179;
   if "curr_plate" == 2 then goto index 177;
   if "curr_plate" == 3 then goto index 175;
   if "curr_plate" == 4 then goto index 173;
   if "curr_plate" == 5 then goto index 171;
   if "curr_plate" == 6 then goto index 169;
   if "curr_plate" == 7 then goto index 167;
   goto index 182;
   show serial_dialog "hanoi_plate_7";
   goto index 182;
   show serial_dialog "hanoi_plate_6";
   goto index 182;
   show serial_dialog "hanoi_plate_5";
   goto index 182;
   show serial_dialog "hanoi_plate_4";
   goto index 182;
   show serial_dialog "hanoi_plate_3";
   goto index 182;
   show serial_dialog "hanoi_plate_2";
   goto index 182;
   show serial_dialog "hanoi_plate_1";
   goto index 182;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 120;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 189;
   goto index 251;
   if "curr_plate" != 0 then goto index 225;
   if "cursor_pos" == "column" then goto index 192;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 224;
   if "cursor_hinge_height" == "row" then goto index 222;
   if "cursor_grip_height" == "row" then goto index 197;
   show serial_dialog "hanoi_space";
   goto index 249;
   if "cursor_value" == 0 then goto index 220;
   if "cursor_value" == 1 then goto index 218;
   if "cursor_value" == 2 then goto index 216;
   if "cursor_value" == 3 then goto index 214;
   if "cursor_value" == 4 then goto index 212;
   if "cursor_value" == 5 then goto index 210;
   if "cursor_value" == 6 then goto index 208;
   if "cursor_value" == 7 then goto index 206;
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 221;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 249;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 249;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 248;
   if "curr_plate" == 1 then goto index 246;
   if "curr_plate" == 2 then goto index 244;
   if "curr_plate" == 3 then goto index 242;
   if "curr_plate" == 4 then goto index 240;
   if "curr_plate" == 5 then goto index 238;
   if "curr_plate" == 6 then goto index 236;
   if "curr_plate" == 7 then goto index 234;
   goto index 249;
   show serial_dialog "hanoi_plate_7";
   goto index 249;
   show serial_dialog "hanoi_plate_6";
   goto index 249;
   show serial_dialog "hanoi_plate_5";
   goto index 249;
   show serial_dialog "hanoi_plate_4";
   goto index 249;
   show serial_dialog "hanoi_plate_3";
   goto index 249;
   show serial_dialog "hanoi_plate_2";
   goto index 249;
   show serial_dialog "hanoi_plate_1";
   goto index 249;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 187;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 294;
   if "cursor_pos" == "column" then goto index 261;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 293;
   if "cursor_hinge_height" == "row" then goto index 291;
   if "cursor_grip_height" == "row" then goto index 266;
   show serial_dialog "hanoi_space";
   goto index 318;
   if "cursor_value" == 0 then goto index 289;
   if "cursor_value" == 1 then goto index 287;
   if "cursor_value" == 2 then goto index 285;
   if "cursor_value" == 3 then goto index 283;
   if "cursor_value" == 4 then goto index 281;
   if "cursor_value" == 5 then goto index 279;
   if "cursor_value" == 6 then goto index 277;
   if "cursor_value" == 7 then goto index 275;
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 290;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 318;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 318;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 317;
   if "curr_plate" == 1 then goto index 315;
   if "curr_plate" == 2 then goto index 313;
   if "curr_plate" == 3 then goto index 311;
   if "curr_plate" == 4 then goto index 309;
   if "curr_plate" == 5 then goto index 307;
   if "curr_plate" == 6 then goto index 305;
   if "curr_plate" == 7 then goto index 303;
   goto index 318;
   show serial_dialog "hanoi_plate_7";
   goto index 318;
   show serial_dialog "hanoi_plate_6";
   goto index 318;
   show serial_dialog "hanoi_plate_5";
   goto index 318;
   show serial_dialog "hanoi_plate_4";
   goto index 318;
   show serial_dialog "hanoi_plate_3";
   goto index 318;
   show serial_dialog "hanoi_plate_2";
   goto index 318;
   show serial_dialog "hanoi_plate_1";
   goto index 318;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 356;
   if "cursor_pos" == "column" then goto index 323;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 355;
   if "cursor_hinge_height" == "row" then goto index 353;
   if "cursor_grip_height" == "row" then goto index 328;
   show serial_dialog "hanoi_space";
   goto index 380;
   if "cursor_value" == 0 then goto index 351;
   if "cursor_value" == 1 then goto index 349;
   if "cursor_value" == 2 then goto index 347;
   if "cursor_value" == 3 then goto index 345;
   if "cursor_value" == 4 then goto index 343;
   if "cursor_value" == 5 then goto index 341;
   if "cursor_value" == 6 then goto index 339;
   if "cursor_value" == 7 then goto index 337;
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 352;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 380;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 380;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 379;
   if "curr_plate" == 1 then goto index 377;
   if "curr_plate" == 2 then goto index 375;
   if "curr_plate" == 3 then goto index 373;
   if "curr_plate" == 4 then goto index 371;
   if "curr_plate" == 5 then goto index 369;
   if "curr_plate" == 6 then goto index 367;
   if "curr_plate" == 7 then goto index 365;
   goto index 380;
   show serial_dialog "hanoi_plate_7";
   goto index 380;
   show serial_dialog "hanoi_plate_6";
   goto index 380;
   show serial_dialog "hanoi_plate_5";
   goto index 380;
   show serial_dialog "hanoi_plate_4";
   goto index 380;
   show serial_dialog "hanoi_plate_3";
   goto index 380;
   show serial_dialog "hanoi_plate_2";
   goto index 380;
   show serial_dialog "hanoi_plate_1";
   goto index 380;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 418;
   if "cursor_pos" == "column" then goto index 385;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 417;
   if "cursor_hinge_height" == "row" then goto index 415;
   if "cursor_grip_height" == "row" then goto index 390;
   show serial_dialog "hanoi_space";
   goto index 442;
   if "cursor_value" == 0 then goto index 413;
   if "cursor_value" == 1 then goto index 411;
   if "cursor_value" == 2 then goto index 409;
   if "cursor_value" == 3 then goto index 407;
   if "cursor_value" == 4 then goto index 405;
   if "cursor_value" == 5 then goto index 403;
   if "cursor_value" == 6 then goto index 401;
   if "cursor_value" == 7 then goto index 399;
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 414;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 442;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 442;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 441;
   if "curr_plate" == 1 then goto index 439;
   if "curr_plate" == 2 then goto index 437;
   if "curr_plate" == 3 then goto index 435;
   if "curr_plate" == 4 then goto index 433;
   if "curr_plate" == 5 then goto index 431;
   if "curr_plate" == 6 then goto index 429;
   if "curr_plate" == 7 then goto index 427;
   goto index 442;
   show serial_dialog "hanoi_plate_7";
   goto index 442;
   show serial_dialog "hanoi_plate_6";
   goto index 442;
   show serial_dialog "hanoi_plate_5";
   goto index 442;
   show serial_dialog "hanoi_plate_4";
   goto index 442;
   show serial_dialog "hanoi_plate_3";
   goto index 442;
   show serial_dialog "hanoi_plate_2";
   goto index 442;
   show serial_dialog "hanoi_plate_1";
   goto index 442;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 485;
   if "cursor_pos" == "column" then goto index 452;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 484;
   if "cursor_hinge_height" == "row" then goto index 482;
   if "cursor_grip_height" == "row" then goto index 457;
   show serial_dialog "hanoi_space";
   goto index 509;
   if "cursor_value" == 0 then goto index 480;
   if "cursor_value" == 1 then goto index 478;
   if "cursor_value" == 2 then goto index 476;
   if "cursor_value" == 3 then goto index 474;
   if "cursor_value" == 4 then goto index 472;
   if "cursor_value" == 5 then goto index 470;
   if "cursor_value" == 6 then goto index 468;
   if "cursor_value" == 7 then goto index 466;
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 481;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 509;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 509;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 508;
   if "curr_plate" == 1 then goto index 506;
   if "curr_plate" == 2 then goto index 504;
   if "curr_plate" == 3 then goto index 502;
   if "curr_plate" == 4 then goto index 500;
   if "curr_plate" == 5 then goto index 498;
   if "curr_plate" == 6 then goto index 496;
   if "curr_plate" == 7 then goto index 494;
   goto index 509;
   show serial_dialog "hanoi_plate_7";
   goto index 509;
   show serial_dialog "hanoi_plate_6";
   goto index 509;
   show serial_dialog "hanoi_plate_5";
   goto index 509;
   show serial_dialog "hanoi_plate_4";
   goto index 509;
   show serial_dialog "hanoi_plate_3";
   goto index 509;
   show serial_dialog "hanoi_plate_2";
   goto index 509;
   show serial_dialog "hanoi_plate_1";
   goto index 509;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 547;
   if "cursor_pos" == "column" then goto index 514;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 546;
   if "cursor_hinge_height" == "row" then goto index 544;
   if "cursor_grip_height" == "row" then goto index 519;
   show serial_dialog "hanoi_space";
   goto index 571;
   if "cursor_value" == 0 then goto index 542;
   if "cursor_value" == 1 then goto index 540;
   if "cursor_value" == 2 then goto index 538;
   if "cursor_value" == 3 then goto index 536;
   if "cursor_value" == 4 then goto index 534;
   if "cursor_value" == 5 then goto index 532;
   if "cursor_value" == 6 then goto index 530;
   if "cursor_value" == 7 then goto index 528;
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 543;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 571;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 571;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 570;
   if "curr_plate" == 1 then goto index 568;
   if "curr_plate" == 2 then goto index 566;
   if "curr_plate" == 3 then goto index 564;
   if "curr_plate" == 4 then goto index 562;
   if "curr_plate" == 5 then goto index 560;
   if "curr_plate" == 6 then goto index 558;
   if "curr_plate" == 7 then goto index 556;
   goto index 571;
   show serial_dialog "hanoi_plate_7";
   goto index 571;
   show serial_dialog "hanoi_plate_6";
   goto index 571;
   show serial_dialog "hanoi_plate_5";
   goto index 571;
   show serial_dialog "hanoi_plate_4";
   goto index 571;
   show serial_dialog "hanoi_plate_3";
   goto index 571;
   show serial_dialog "hanoi_plate_2";
   goto index 571;
   show serial_dialog "hanoi_plate_1";
   goto index 571;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 609;
   if "cursor_pos" == "column" then goto index 576;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 608;
   if "cursor_hinge_height" == "row" then goto index 606;
   if "cursor_grip_height" == "row" then goto index 581;
   show serial_dialog "hanoi_space";
   goto index 633;
   if "cursor_value" == 0 then goto index 604;
   if "cursor_value" == 1 then goto index 602;
   if "cursor_value" == 2 then goto index 600;
   if "cursor_value" == 3 then goto index 598;
   if "cursor_value" == 4 then goto index 596;
   if "cursor_value" == 5 then goto index 594;
   if "cursor_value" == 6 then goto index 592;
   if "cursor_value" == 7 then goto index 590;
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 605;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 633;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 633;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 632;
   if "curr_plate" == 1 then goto index 630;
   if "curr_plate" == 2 then goto index 628;
   if "curr_plate" == 3 then goto index 626;
   if "curr_plate" == 4 then goto index 624;
   if "curr_plate" == 5 then goto index 622;
   if "curr_plate" == 6 then goto index 620;
   if "curr_plate" == 7 then goto index 618;
   goto index 633;
   show serial_dialog "hanoi_plate_7";
   goto index 633;
   show serial_dialog "hanoi_plate_6";
   goto index 633;
   show serial_dialog "hanoi_plate_5";
   goto index 633;
   show serial_dialog "hanoi_plate_4";
   goto index 633;
   show serial_dialog "hanoi_plate_3";
   goto index 633;
   show serial_dialog "hanoi_plate_2";
   goto index 633;
   show serial_dialog "hanoi_plate_1";
   goto index 633;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 676;
   if "cursor_pos" == "column" then goto index 643;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 675;
   if "cursor_hinge_height" == "row" then goto index 673;
   if "cursor_grip_height" == "row" then goto index 648;
   show serial_dialog "hanoi_space";
   goto index 700;
   if "cursor_value" == 0 then goto index 671;
   if "cursor_value" == 1 then goto index 669;
   if "cursor_value" == 2 then goto index 667;
   if "cursor_value" == 3 then goto index 665;
   if "cursor_value" == 4 then goto index 663;
   if "cursor_value" == 5 then goto index 661;
   if "cursor_value" == 6 then goto index 659;
   if "cursor_value" == 7 then goto index 657;
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 672;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 700;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 700;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 699;
   if "curr_plate" == 1 then goto index 697;
   if "curr_plate" == 2 then goto index 695;
   if "curr_plate" == 3 then goto index 693;
   if "curr_plate" == 4 then goto index 691;
   if "curr_plate" == 5 then goto index 689;
   if "curr_plate" == 6 then goto index 687;
   if "curr_plate" == 7 then goto index 685;
   goto index 700;
   show serial_dialog "hanoi_plate_7";
   goto index 700;
   show serial_dialog "hanoi_plate_6";
   goto index 700;
   show serial_dialog "hanoi_plate_5";
   goto index 700;
   show serial_dialog "hanoi_plate_4";
   goto index 700;
   show serial_dialog "hanoi_plate_3";
   goto index 700;
   show serial_dialog "hanoi_plate_2";
   goto index 700;
   show serial_dialog "hanoi_plate_1";
   goto index 700;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 738;
   if "cursor_pos" == "column" then goto index 705;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 737;
   if "cursor_hinge_height" == "row" then goto index 735;
   if "cursor_grip_height" == "row" then goto index 710;
   show serial_dialog "hanoi_space";
   goto index 762;
   if "cursor_value" == 0 then goto index 733;
   if "cursor_value" == 1 then goto index 731;
   if "cursor_value" == 2 then goto index 729;
   if "cursor_value" == 3 then goto index 727;
   if "cursor_value" == 4 then goto index 725;
   if "cursor_value" == 5 then goto index 723;
   if "cursor_value" == 6 then goto index 721;
   if "cursor_value" == 7 then goto index 719;
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 734;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 762;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 762;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 761;
   if "curr_plate" == 1 then goto index 759;
   if "curr_plate" == 2 then goto index 757;
   if "curr_plate" == 3 then goto index 755;
   if "curr_plate" == 4 then goto index 753;
   if "curr_plate" == 5 then goto index 751;
   if "curr_plate" == 6 then goto index 749;
   if "curr_plate" == 7 then goto index 747;
   goto index 762;
   show serial_dialog "hanoi_plate_7";
   goto index 762;
   show serial_dialog "hanoi_plate_6";
   goto index 762;
   show serial_dialog "hanoi_plate_5";
   goto index 762;
   show serial_dialog "hanoi_plate_4";
   goto index 762;
   show serial_dialog "hanoi_plate_3";
   goto index 762;
   show serial_dialog "hanoi_plate_2";
   goto index 762;
   show serial_dialog "hanoi_plate_1";
   goto index 762;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 800;
   if "cursor_pos" == "column" then goto index 767;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 799;
   if "cursor_hinge_height" == "row" then goto index 797;
   if "cursor_grip_height" == "row" then goto index 772;
   show serial_dialog "hanoi_space";
   goto index 824;
   if "cursor_value" == 0 then goto index 795;
   if "cursor_value" == 1 then goto index 793;
   if "cursor_value" == 2 then goto index 791;
   if "cursor_value" == 3 then goto index 789;
   if "cursor_value" == 4 then goto index 787;
   if "cursor_value" == 5 then goto index 785;
   if "cursor_value" == 6 then goto index 783;
   if "cursor_value" == 7 then goto index 781;
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 796;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 824;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 824;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 823;
   if "curr_plate" == 1 then goto index 821;
   if "curr_plate" == 2 then goto index 819;
   if "curr_plate" == 3 then goto index 817;
   if "curr_plate" == 4 then goto index 815;
   if "curr_plate" == 5 then goto index 813;
   if "curr_plate" == 6 then goto index 811;
   if "curr_plate" == 7 then goto index 809;
   goto index 824;
   show serial_dialog "hanoi_plate_7";
   goto index 824;
   show serial_dialog "hanoi_plate_6";
   goto index 824;
   show serial_dialog "hanoi_plate_5";
   goto index 824;
   show serial_dialog "hanoi_plate_4";
   goto index 824;
   show serial_dialog "hanoi_plate_3";
   goto index 824;
   show serial_dialog "hanoi_plate_2";
   goto index 824;
   show serial_dialog "hanoi_plate_1";
   goto index 824;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 867;
   if "cursor_pos" == "column" then goto index 834;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 866;
   if "cursor_hinge_height" == "row" then goto index 864;
   if "cursor_grip_height" == "row" then goto index 839;
   show serial_dialog "hanoi_space";
   goto index 891;
   if "cursor_value" == 0 then goto index 862;
   if "cursor_value" == 1 then goto index 860;
   if "cursor_value" == 2 then goto index 858;
   if "cursor_value" == 3 then goto index 856;
   if "cursor_value" == 4 then goto index 854;
   if "cursor_value" == 5 then goto index 852;
   if "cursor_value" == 6 then goto index 850;
   if "cursor_value" == 7 then goto index 848;
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 863;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 891;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 891;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 890;
   if "curr_plate" == 1 then goto index 888;
   if "curr_plate" == 2 then goto index 886;
   if "curr_plate" == 3 then goto index 884;
   if "curr_plate" == 4 then goto index 882;
   if "curr_plate" == 5 then goto index 880;
   if "curr_plate" == 6 then goto index 878;
   if "curr_plate" == 7 then goto index 876;
   goto index 891;
   show serial_dialog "hanoi_plate_7";
   goto index 891;
   show serial_dialog "hanoi_plate_6";
   goto index 891;
   show serial_dialog "hanoi_plate_5";
   goto index 891;
   show serial_dialog "hanoi_plate_4";
   goto index 891;
   show serial_dialog "hanoi_plate_3";
   goto index 891;
   show serial_dialog "hanoi_plate_2";
   goto index 891;
   show serial_dialog "hanoi_plate_1";
   goto index 891;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 929;
   if "cursor_pos" == "column" then goto index 896;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 928;
   if "cursor_hinge_height" == "row" then goto index 926;
   if "cursor_grip_height" == "row" then goto index 901;
   show serial_dialog "hanoi_space";
   goto index 953;
   if "cursor_value" == 0 then goto index 924;
   if "cursor_value" == 1 then goto index 922;
   if "cursor_value" == 2 then goto index 920;
   if "cursor_value" == 3 then goto index 918;
   if "cursor_value" == 4 then goto index 916;
   if "cursor_value" == 5 then goto index 914;
   if "cursor_value" == 6 then goto index 912;
   if "cursor_value" == 7 then goto index 910;
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 925;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 953;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 953;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 952;
   if "curr_plate" == 1 then goto index 950;
   if "curr_plate" == 2 then goto index 948;
   if "curr_plate" == 3 then goto index 946;
   if "curr_plate" == 4 then goto index 944;
   if "curr_plate" == 5 then goto index 942;
   if "curr_plate" == 6 then goto index 940;
   if "curr_plate" == 7 then goto index 938;
   goto index 953;
   show serial_dialog "hanoi_plate_7";
   goto index 953;
   show serial_dialog "hanoi_plate_6";
   goto index 953;
   show serial_dialog "hanoi_plate_5";
   goto index 953;
   show serial_dialog "hanoi_plate_4";
   goto index 953;
   show serial_dialog "hanoi_plate_3";
   goto index 953;
   show serial_dialog "hanoi_plate_2";
   goto index 953;
   show serial_dialog "hanoi_plate_1";
   goto index 953;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 991;
   if "cursor_pos" == "column" then goto index 958;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 990;
   if "cursor_hinge_height" == "row" then goto index 988;
   if "cursor_grip_height" == "row" then goto index 963;
   show serial_dialog "hanoi_space";
   goto index 1015;
   if "cursor_value" == 0 then goto index 986;
   if "cursor_value" == 1 then goto index 984;
   if "cursor_value" == 2 then goto index 982;
   if "cursor_value" == 3 then goto index 980;
   if "cursor_value" == 4 then goto index 978;
   if "cursor_value" == 5 then goto index 976;
   if "cursor_value" == 6 then goto index 974;
   if "cursor_value" == 7 then goto index 972;
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 987;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1015;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1015;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1014;
   if "curr_plate" == 1 then goto index 1012;
   if "curr_plate" == 2 then goto index 1010;
   if "curr_plate" == 3 then goto index 1008;
   if "curr_plate" == 4 then goto index 1006;
   if "curr_plate" == 5 then goto index 1004;
   if "curr_plate" == 6 then goto index 1002;
   if "curr_plate" == 7 then goto index 1000;
   goto index 1015;
   show serial_dialog "hanoi_plate_7";
   goto index 1015;
   show serial_dialog "hanoi_plate_6";
   goto index 1015;
   show serial_dialog "hanoi_plate_5";
   goto index 1015;
   show serial_dialog "hanoi_plate_4";
   goto index 1015;
   show serial_dialog "hanoi_plate_3";
   goto index 1015;
   show serial_dialog "hanoi_plate_2";
   goto index 1015;
   show serial_dialog "hanoi_plate_1";
   goto index 1015;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1058;
   if "cursor_pos" == "column" then goto index 1025;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1057;
   if "cursor_hinge_height" == "row" then goto index 1055;
   if "cursor_grip_height" == "row" then goto index 1030;
   show serial_dialog "hanoi_space";
   goto index 1082;
   if "cursor_value" == 0 then goto index 1053;
   if "cursor_value" == 1 then goto index 1051;
   if "cursor_value" == 2 then goto index 1049;
   if "cursor_value" == 3 then goto index 1047;
   if "cursor_value" == 4 then goto index 1045;
   if "cursor_value" == 5 then goto index 1043;
   if "cursor_value" == 6 then goto index 1041;
   if "cursor_value" == 7 then goto index 1039;
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1054;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1082;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1082;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1081;
   if "curr_plate" == 1 then goto index 1079;
   if "curr_plate" == 2 then goto index 1077;
   if "curr_plate" == 3 then goto index 1075;
   if "curr_plate" == 4 then goto index 1073;
   if "curr_plate" == 5 then goto index 1071;
   if "curr_plate" == 6 then goto index 1069;
   if "curr_plate" == 7 then goto index 1067;
   goto index 1082;
   show serial_dialog "hanoi_plate_7";
   goto index 1082;
   show serial_dialog "hanoi_plate_6";
   goto index 1082;
   show serial_dialog "hanoi_plate_5";
   goto index 1082;
   show serial_dialog "hanoi_plate_4";
   goto index 1082;
   show serial_dialog "hanoi_plate_3";
   goto index 1082;
   show serial_dialog "hanoi_plate_2";
   goto index 1082;
   show serial_dialog "hanoi_plate_1";
   goto index 1082;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1120;
   if "cursor_pos" == "column" then goto index 1087;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1119;
   if "cursor_hinge_height" == "row" then goto index 1117;
   if "cursor_grip_height" == "row" then goto index 1092;
   show serial_dialog "hanoi_space";
   goto index 1144;
   if "cursor_value" == 0 then goto index 1115;
   if "cursor_value" == 1 then goto index 1113;
   if "cursor_value" == 2 then goto index 1111;
   if "cursor_value" == 3 then goto index 1109;
   if "cursor_value" == 4 then goto index 1107;
   if "cursor_value" == 5 then goto index 1105;
   if "cursor_value" == 6 then goto index 1103;
   if "cursor_value" == 7 then goto index 1101;
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1116;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1144;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1144;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1143;
   if "curr_plate" == 1 then goto index 1141;
   if "curr_plate" == 2 then goto index 1139;
   if "curr_plate" == 3 then goto index 1137;
   if "curr_plate" == 4 then goto index 1135;
   if "curr_plate" == 5 then goto index 1133;
   if "curr_plate" == 6 then goto index 1131;
   if "curr_plate" == 7 then goto index 1129;
   goto index 1144;
   show serial_dialog "hanoi_plate_7";
   goto index 1144;
   show serial_dialog "hanoi_plate_6";
   goto index 1144;
   show serial_dialog "hanoi_plate_5";
   goto index 1144;
   show serial_dialog "hanoi_plate_4";
   goto index 1144;
   show serial_dialog "hanoi_plate_3";
   goto index 1144;
   show serial_dialog "hanoi_plate_2";
   goto index 1144;
   show serial_dialog "hanoi_plate_1";
   goto index 1144;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1182;
   if "cursor_pos" == "column" then goto index 1149;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1181;
   if "cursor_hinge_height" == "row" then goto index 1179;
   if "cursor_grip_height" == "row" then goto index 1154;
   show serial_dialog "hanoi_space";
   goto index 1206;
   if "cursor_value" == 0 then goto index 1177;
   if "cursor_value" == 1 then goto index 1175;
   if "cursor_value" == 2 then goto index 1173;
   if "cursor_value" == 3 then goto index 1171;
   if "cursor_value" == 4 then goto index 1169;
   if "cursor_value" == 5 then goto index 1167;
   if "cursor_value" == 6 then goto index 1165;
   if "cursor_value" == 7 then goto index 1163;
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1178;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1206;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1206;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1205;
   if "curr_plate" == 1 then goto index 1203;
   if "curr_plate" == 2 then goto index 1201;
   if "curr_plate" == 3 then goto index 1199;
   if "curr_plate" == 4 then goto index 1197;
   if "curr_plate" == 5 then goto index 1195;
   if "curr_plate" == 6 then goto index 1193;
   if "curr_plate" == 7 then goto index 1191;
   goto index 1206;
   show serial_dialog "hanoi_plate_7";
   goto index 1206;
   show serial_dialog "hanoi_plate_6";
   goto index 1206;
   show serial_dialog "hanoi_plate_5";
   goto index 1206;
   show serial_dialog "hanoi_plate_4";
   goto index 1206;
   show serial_dialog "hanoi_plate_3";
   goto index 1206;
   show serial_dialog "hanoi_plate_2";
   goto index 1206;
   show serial_dialog "hanoi_plate_1";
   goto index 1206;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1249;
   if "cursor_pos" == "column" then goto index 1216;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1248;
   if "cursor_hinge_height" == "row" then goto index 1246;
   if "cursor_grip_height" == "row" then goto index 1221;
   show serial_dialog "hanoi_space";
   goto index 1273;
   if "cursor_value" == 0 then goto index 1244;
   if "cursor_value" == 1 then goto index 1242;
   if "cursor_value" == 2 then goto index 1240;
   if "cursor_value" == 3 then goto index 1238;
   if "cursor_value" == 4 then goto index 1236;
   if "cursor_value" == 5 then goto index 1234;
   if "cursor_value" == 6 then goto index 1232;
   if "cursor_value" == 7 then goto index 1230;
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1245;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1273;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1273;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1272;
   if "curr_plate" == 1 then goto index 1270;
   if "curr_plate" == 2 then goto index 1268;
   if "curr_plate" == 3 then goto index 1266;
   if "curr_plate" == 4 then goto index 1264;
   if "curr_plate" == 5 then goto index 1262;
   if "curr_plate" == 6 then goto index 1260;
   if "curr_plate" == 7 then goto index 1258;
   goto index 1273;
   show serial_dialog "hanoi_plate_7";
   goto index 1273;
   show serial_dialog "hanoi_plate_6";
   goto index 1273;
   show serial_dialog "hanoi_plate_5";
   goto index 1273;
   show serial_dialog "hanoi_plate_4";
   goto index 1273;
   show serial_dialog "hanoi_plate_3";
   goto index 1273;
   show serial_dialog "hanoi_plate_2";
   goto index 1273;
   show serial_dialog "hanoi_plate_1";
   goto index 1273;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1311;
   if "cursor_pos" == "column" then goto index 1278;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1310;
   if "cursor_hinge_height" == "row" then goto index 1308;
   if "cursor_grip_height" == "row" then goto index 1283;
   show serial_dialog "hanoi_space";
   goto index 1335;
   if "cursor_value" == 0 then goto index 1306;
   if "cursor_value" == 1 then goto index 1304;
   if "cursor_value" == 2 then goto index 1302;
   if "cursor_value" == 3 then goto index 1300;
   if "cursor_value" == 4 then goto index 1298;
   if "cursor_value" == 5 then goto index 1296;
   if "cursor_value" == 6 then goto index 1294;
   if "cursor_value" == 7 then goto index 1292;
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1307;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1335;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1335;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1334;
   if "curr_plate" == 1 then goto index 1332;
   if "curr_plate" == 2 then goto index 1330;
   if "curr_plate" == 3 then goto index 1328;
   if "curr_plate" == 4 then goto index 1326;
   if "curr_plate" == 5 then goto index 1324;
   if "curr_plate" == 6 then goto index 1322;
   if "curr_plate" == 7 then goto index 1320;
   goto index 1335;
   show serial_dialog "hanoi_plate_7";
   goto index 1335;
   show serial_dialog "hanoi_plate_6";
   goto index 1335;
   show serial_dialog "hanoi_plate_5";
   goto index 1335;
   show serial_dialog "hanoi_plate_4";
   goto index 1335;
   show serial_dialog "hanoi_plate_3";
   goto index 1335;
   show serial_dialog "hanoi_plate_2";
   goto index 1335;
   show serial_dialog "hanoi_plate_1";
   goto index 1335;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1373;
   if "cursor_pos" == "column" then goto index 1340;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1372;
   if "cursor_hinge_height" == "row" then goto index 1370;
   if "cursor_grip_height" == "row" then goto index 1345;
   show serial_dialog "hanoi_space";
   goto index 1397;
   if "cursor_value" == 0 then goto index 1368;
   if "cursor_value" == 1 then goto index 1366;
   if "cursor_value" == 2 then goto index 1364;
   if "cursor_value" == 3 then goto index 1362;
   if "cursor_value" == 4 then goto index 1360;
   if "cursor_value" == 5 then goto index 1358;
   if "cursor_value" == 6 then goto index 1356;
   if "cursor_value" == 7 then goto index 1354;
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1369;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1397;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1397;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1396;
   if "curr_plate" == 1 then goto index 1394;
   if "curr_plate" == 2 then goto index 1392;
   if "curr_plate" == 3 then goto index 1390;
   if "curr_plate" == 4 then goto index 1388;
   if "curr_plate" == 5 then goto index 1386;
   if "curr_plate" == 6 then goto index 1384;
   if "curr_plate" == 7 then goto index 1382;
   goto index 1397;
   show serial_dialog "hanoi_plate_7";
   goto index 1397;
   show serial_dialog "hanoi_plate_6";
   goto index 1397;
   show serial_dialog "hanoi_plate_5";
   goto index 1397;
   show serial_dialog "hanoi_plate_4";
   goto index 1397;
   show serial_dialog "hanoi_plate_3";
   goto index 1397;
   show serial_dialog "hanoi_plate_2";
   goto index 1397;
   show serial_dialog "hanoi_plate_1";
   goto index 1397;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1423;
   if "curr_plate" == 1 then goto index 1421;
   if "curr_plate" == 2 then goto index 1419;
   if "curr_plate" == 3 then goto index 1417;
   if "curr_plate" == 4 then goto index 1415;
   if "curr_plate" == 5 then goto index 1413;
   if "curr_plate" == 6 then goto index 1411;
   if "curr_plate" == 7 then goto index 1409;
   goto index 1424;
   show serial_dialog "hanoi_plate_7";
   goto index 1424;
   show serial_dialog "hanoi_plate_6";
   goto index 1424;
   show serial_dialog "hanoi_plate_5";
   goto index 1424;
   show serial_dialog "hanoi_plate_4";
   goto index 1424;
   show serial_dialog "hanoi_plate_3";
   goto index 1424;
   show serial_dialog "hanoi_plate_2";
   goto index 1424;
   show serial_dialog "hanoi_plate_1";
   goto index 1424;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1448;
   if "curr_plate" == 1 then goto index 1446;
   if "curr_plate" == 2 then goto index 1444;
   if "curr_plate" == 3 then goto index 1442;
   if "curr_plate" == 4 then goto index 1440;
   if "curr_plate" == 5 then goto index 1438;
   if "curr_plate" == 6 then goto index 1436;
   if "curr_plate" == 7 then goto index 1434;
   goto index 1449;
   show serial_dialog "hanoi_plate_7";
   goto index 1449;
   show serial_dialog "hanoi_plate_6";
   goto index 1449;
   show serial_dialog "hanoi_plate_5";
   goto index 1449;
   show serial_dialog "hanoi_plate_4";
   goto index 1449;
   show serial_dialog "hanoi_plate_3";
   goto index 1449;
   show serial_dialog "hanoi_plate_2";
   goto index 1449;
   show serial_dialog "hanoi_plate_1";
   goto index 1449;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1473;
   if "curr_plate" == 1 then goto index 1471;
   if "curr_plate" == 2 then goto index 1469;
   if "curr_plate" == 3 then goto index 1467;
   if "curr_plate" == 4 then goto index 1465;
   if "curr_plate" == 5 then goto index 1463;
   if "curr_plate" == 6 then goto index 1461;
   if "curr_plate" == 7 then goto index 1459;
   goto index 1474;
   show serial_dialog "hanoi_plate_7";
   goto index 1474;
   show serial_dialog "hanoi_plate_6";
   goto index 1474;
   show serial_dialog "hanoi_plate_5";
   goto index 1474;
   show serial_dialog "hanoi_plate_4";
   goto index 1474;
   show serial_dialog "hanoi_plate_3";
   goto index 1474;
   show serial_dialog "hanoi_plate_2";
   goto index 1474;
   show serial_dialog "hanoi_plate_1";
   goto index 1474;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1482;
   if "hanoi_draw_help" then goto index 1479;
   goto index 1518;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1518;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1496;
   goto index 1497;
   delete command "WIN";
   if !"hanoi_won" then goto index 1516;
   if !"ch2-carrying-plate" then goto index 1501;
   if !"ch2-installed-plate" then goto index 1501;
   goto index 1517;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1505;
   goto index 1506;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1514;
   if "hanoi_move_count" == 69 then goto index 1512;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1515;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1515;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1517;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_quit" {
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 14;
   goto index 15;
   delete command "WIN";
   if !"hanoi_won" then goto index 34;
   if !"ch2-carrying-plate" then goto index 19;
   if !"ch2-installed-plate" then goto index 19;
   goto index 35;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 23;
   goto index 24;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 32;
   if "hanoi_move_count" == 69 then goto index 30;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 33;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 33;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 35;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_help" {
   "hanoi_draw_help" = true;
   if "cursor_value" == 0 then goto index 181;
   if "cursor_pos" == 1 then goto index 37;
   if "cursor_pos" == 2 then goto index 21;
   if "cursor_pos" == 3 then goto index 5;
   if "array3_length" == 0 then goto index 20;
   if "array3_length" == 1 then goto index 19;
   if "array3_length" == 2 then goto index 18;
   if "array3_length" == 3 then goto index 17;
   if "array3_length" == 4 then goto index 16;
   if "array3_length" == 5 then goto index 15;
   if "array3_length" == 6 then goto index 14;
   if "array3_length" == 7 then goto index 13;
   "checked_value" = "array3_7";
   "checked_value" = "array3_6";
   "checked_value" = "array3_5";
   "checked_value" = "array3_4";
   "checked_value" = "array3_3";
   "checked_value" = "array3_2";
   "checked_value" = "array3_1";
   "checked_value" = 0;
   if "array2_length" == 0 then goto index 36;
   if "array2_length" == 1 then goto index 35;
   if "array2_length" == 2 then goto index 34;
   if "array2_length" == 3 then goto index 33;
   if "array2_length" == 4 then goto index 32;
   if "array2_length" == 5 then goto index 31;
   if "array2_length" == 6 then goto index 30;
   if "array2_length" == 7 then goto index 29;
   "checked_value" = "array2_7";
   "checked_value" = "array2_6";
   "checked_value" = "array2_5";
   "checked_value" = "array2_4";
   "checked_value" = "array2_3";
   "checked_value" = "array2_2";
   "checked_value" = "array2_1";
   "checked_value" = 0;
   if "array1_length" == 0 then goto index 60;
   if "array1_length" == 1 then goto index 58;
   if "array1_length" == 2 then goto index 56;
   if "array1_length" == 3 then goto index 54;
   if "array1_length" == 4 then goto index 52;
   if "array1_length" == 5 then goto index 50;
   if "array1_length" == 6 then goto index 48;
   if "array1_length" == 7 then goto index 46;
   goto index 61;
   "checked_value" = "array1_7";
   goto index 61;
   "checked_value" = "array1_6";
   goto index 61;
   "checked_value" = "array1_5";
   goto index 61;
   "checked_value" = "array1_4";
   goto index 61;
   "checked_value" = "array1_3";
   goto index 61;
   "checked_value" = "array1_2";
   goto index 61;
   "checked_value" = "array1_1";
   goto index 61;
   "checked_value" = 0;
   if "checked_value" == 0 then goto index 67;
   if "checked_value" > "cursor_value" then goto index 65;
   "can_drop" = false;
   goto index 68;
   "can_drop" = true;
   goto index 68;
   "can_drop" = true;
   if "can_drop" then goto index 70;
   "hanoi_warning_size" = true;
   if "cursor_pos" == 1 then goto index 145;
   if "cursor_pos" == 2 then goto index 109;
   if "cursor_pos" == 3 then goto index 73;
   if "cursor_value" == 0 then goto index 108;
   if "array3_length" >= 7 then goto index 106;
   if "array3_length" == 6 then goto index 101;
   if "array3_length" == 5 then goto index 98;
   if "array3_length" == 4 then goto index 95;
   if "array3_length" == 3 then goto index 92;
   if "array3_length" == 2 then goto index 89;
   if "array3_length" == 1 then goto index 86;
   if "array3_length" == 0 then goto index 83;
   goto index 103;
   "array3_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 103;
   "array3_7" = "cursor_value";
   "cursor_value" = 0;
   "array3_length" += 1;
   "hanoi_move_count" += 1;
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 109;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 144;
   if "array2_length" >= 7 then goto index 142;
   if "array2_length" == 6 then goto index 137;
   if "array2_length" == 5 then goto index 134;
   if "array2_length" == 4 then goto index 131;
   if "array2_length" == 3 then goto index 128;
   if "array2_length" == 2 then goto index 125;
   if "array2_length" == 1 then goto index 122;
   if "array2_length" == 0 then goto index 119;
   goto index 139;
   "array2_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 139;
   "array2_7" = "cursor_value";
   "cursor_value" = 0;
   "array2_length" += 1;
   "hanoi_move_count" += 1;
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 145;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 0 then goto index 180;
   if "array1_length" >= 7 then goto index 178;
   if "array1_length" == 6 then goto index 173;
   if "array1_length" == 5 then goto index 170;
   if "array1_length" == 4 then goto index 167;
   if "array1_length" == 3 then goto index 164;
   if "array1_length" == 2 then goto index 161;
   if "array1_length" == 1 then goto index 158;
   if "array1_length" == 0 then goto index 155;
   goto index 175;
   "array1_1" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_2" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_3" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_4" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_5" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_6" = "cursor_value";
   "cursor_value" = 0;
   goto index 175;
   "array1_7" = "cursor_value";
   "cursor_value" = 0;
   "array1_length" += 1;
   "hanoi_move_count" += 1;
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto index 181;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_pos" == 1 then goto index 252;
   if "cursor_pos" == 2 then goto index 218;
   if "cursor_pos" == 3 then goto index 184;
   if "array3_length" > 0 then goto index 185;
   if "array3_length" == 0 then goto index 217;
   if "array3_length" == 7 then goto index 212;
   if "array3_length" == 6 then goto index 209;
   if "array3_length" == 5 then goto index 206;
   if "array3_length" == 4 then goto index 203;
   if "array3_length" == 3 then goto index 200;
   if "array3_length" == 2 then goto index 197;
   if "array3_length" == 1 then goto index 194;
   goto index 214;
   "cursor_value" = "array3_1";
   "array3_1" = 0;
   goto index 214;
   "cursor_value" = "array3_2";
   "array3_2" = 0;
   goto index 214;
   "cursor_value" = "array3_3";
   "array3_3" = 0;
   goto index 214;
   "cursor_value" = "array3_4";
   "array3_4" = 0;
   goto index 214;
   "cursor_value" = "array3_5";
   "array3_5" = 0;
   goto index 214;
   "cursor_value" = "array3_6";
   "array3_6" = 0;
   goto index 214;
   "cursor_value" = "array3_7";
   "array3_7" = 0;
   "array3_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 218;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array2_length" > 0 then goto index 219;
   if "array2_length" == 0 then goto index 251;
   if "array2_length" == 7 then goto index 246;
   if "array2_length" == 6 then goto index 243;
   if "array2_length" == 5 then goto index 240;
   if "array2_length" == 4 then goto index 237;
   if "array2_length" == 3 then goto index 234;
   if "array2_length" == 2 then goto index 231;
   if "array2_length" == 1 then goto index 228;
   goto index 248;
   "cursor_value" = "array2_1";
   "array2_1" = 0;
   goto index 248;
   "cursor_value" = "array2_2";
   "array2_2" = 0;
   goto index 248;
   "cursor_value" = "array2_3";
   "array2_3" = 0;
   goto index 248;
   "cursor_value" = "array2_4";
   "array2_4" = 0;
   goto index 248;
   "cursor_value" = "array2_5";
   "array2_5" = 0;
   goto index 248;
   "cursor_value" = "array2_6";
   "array2_6" = 0;
   goto index 248;
   "cursor_value" = "array2_7";
   "array2_7" = 0;
   "array2_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 252;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "array1_length" > 0 then goto index 254;
   goto index 287;
   if "array1_length" == 0 then goto index 286;
   if "array1_length" == 7 then goto index 281;
   if "array1_length" == 6 then goto index 278;
   if "array1_length" == 5 then goto index 275;
   if "array1_length" == 4 then goto index 272;
   if "array1_length" == 3 then goto index 269;
   if "array1_length" == 2 then goto index 266;
   if "array1_length" == 1 then goto index 263;
   goto index 283;
   "cursor_value" = "array1_1";
   "array1_1" = 0;
   goto index 283;
   "cursor_value" = "array1_2";
   "array1_2" = 0;
   goto index 283;
   "cursor_value" = "array1_3";
   "array1_3" = 0;
   goto index 283;
   "cursor_value" = "array1_4";
   "array1_4" = 0;
   goto index 283;
   "cursor_value" = "array1_5";
   "array1_5" = 0;
   goto index 283;
   "cursor_value" = "array1_6";
   "array1_6" = 0;
   goto index 283;
   "cursor_value" = "array1_7";
   "array1_7" = 0;
   "array1_length" -= 1;
   "hanoi_move_count" += 1;
   goto index 287;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "cursor_value" == 6 then goto index 289;
   goto index 290;
   "hanoi_won" = true;
   if "cursor_pos" == 1 then goto index 298;
   if "cursor_pos" == 2 then goto index 296;
   if "cursor_pos" == 3 then goto index 294;
   goto index 299;
   "cursor_grip_height" = "array3_length";
   goto index 299;
   "cursor_grip_height" = "array2_length";
   goto index 299;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 315;
   "column" = 1;
   if "column" <= 3 then goto index 309;
   goto index 324;
   if "cursor_pos" == "column" then goto index 312;
   show serial_dialog "hanoi_space";
   goto index 313;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 307;
   if "cursor_pos" == 1 then goto index 323;
   if "cursor_pos" == 2 then goto index 321;
   if "cursor_pos" == 3 then goto index 319;
   goto index 324;
   show serial_dialog "hanoi_won_message3a";
   goto index 324;
   show serial_dialog "hanoi_won_message2a";
   goto index 324;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 405;
   if "hanoi_won" then goto index 393;
   "column" = 1;
   if "column" <= 3 then goto index 331;
   goto index 407;
   if "curr_plate" != 0 then goto index 367;
   if "cursor_pos" == "column" then goto index 334;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 366;
   if "cursor_hinge_height" == "row" then goto index 364;
   if "cursor_grip_height" == "row" then goto index 339;
   show serial_dialog "hanoi_space";
   goto index 391;
   if "cursor_value" == 0 then goto index 362;
   if "cursor_value" == 1 then goto index 360;
   if "cursor_value" == 2 then goto index 358;
   if "cursor_value" == 3 then goto index 356;
   if "cursor_value" == 4 then goto index 354;
   if "cursor_value" == 5 then goto index 352;
   if "cursor_value" == 6 then goto index 350;
   if "cursor_value" == 7 then goto index 348;
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 363;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 391;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 391;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 390;
   if "curr_plate" == 1 then goto index 388;
   if "curr_plate" == 2 then goto index 386;
   if "curr_plate" == 3 then goto index 384;
   if "curr_plate" == 4 then goto index 382;
   if "curr_plate" == 5 then goto index 380;
   if "curr_plate" == 6 then goto index 378;
   if "curr_plate" == 7 then goto index 376;
   goto index 391;
   show serial_dialog "hanoi_plate_7";
   goto index 391;
   show serial_dialog "hanoi_plate_6";
   goto index 391;
   show serial_dialog "hanoi_plate_5";
   goto index 391;
   show serial_dialog "hanoi_plate_4";
   goto index 391;
   show serial_dialog "hanoi_plate_3";
   goto index 391;
   show serial_dialog "hanoi_plate_2";
   goto index 391;
   show serial_dialog "hanoi_plate_1";
   goto index 391;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 329;
   if "cursor_pos" == 1 then goto index 404;
   if "cursor_pos" == 2 then goto index 403;
   if "cursor_pos" == 3 then goto index 396;
   if "hanoi_move_count" < 100 then goto index 402;
   if "hanoi_move_count" < 1000 then goto index 400;
   show serial_dialog "hanoi_won_message3b4";
   goto index 405;
   show serial_dialog "hanoi_won_message3b3";
   goto index 405;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 412;
   goto index 474;
   if "curr_plate" != 0 then goto index 448;
   if "cursor_pos" == "column" then goto index 415;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 447;
   if "cursor_hinge_height" == "row" then goto index 445;
   if "cursor_grip_height" == "row" then goto index 420;
   show serial_dialog "hanoi_space";
   goto index 472;
   if "cursor_value" == 0 then goto index 443;
   if "cursor_value" == 1 then goto index 441;
   if "cursor_value" == 2 then goto index 439;
   if "cursor_value" == 3 then goto index 437;
   if "cursor_value" == 4 then goto index 435;
   if "cursor_value" == 5 then goto index 433;
   if "cursor_value" == 6 then goto index 431;
   if "cursor_value" == 7 then goto index 429;
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 472;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 472;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 471;
   if "curr_plate" == 1 then goto index 469;
   if "curr_plate" == 2 then goto index 467;
   if "curr_plate" == 3 then goto index 465;
   if "curr_plate" == 4 then goto index 463;
   if "curr_plate" == 5 then goto index 461;
   if "curr_plate" == 6 then goto index 459;
   if "curr_plate" == 7 then goto index 457;
   goto index 472;
   show serial_dialog "hanoi_plate_7";
   goto index 472;
   show serial_dialog "hanoi_plate_6";
   goto index 472;
   show serial_dialog "hanoi_plate_5";
   goto index 472;
   show serial_dialog "hanoi_plate_4";
   goto index 472;
   show serial_dialog "hanoi_plate_3";
   goto index 472;
   show serial_dialog "hanoi_plate_2";
   goto index 472;
   show serial_dialog "hanoi_plate_1";
   goto index 472;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 410;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 479;
   goto index 541;
   if "curr_plate" != 0 then goto index 515;
   if "cursor_pos" == "column" then goto index 482;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 514;
   if "cursor_hinge_height" == "row" then goto index 512;
   if "cursor_grip_height" == "row" then goto index 487;
   show serial_dialog "hanoi_space";
   goto index 539;
   if "cursor_value" == 0 then goto index 510;
   if "cursor_value" == 1 then goto index 508;
   if "cursor_value" == 2 then goto index 506;
   if "cursor_value" == 3 then goto index 504;
   if "cursor_value" == 4 then goto index 502;
   if "cursor_value" == 5 then goto index 500;
   if "cursor_value" == 6 then goto index 498;
   if "cursor_value" == 7 then goto index 496;
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 539;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 539;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 538;
   if "curr_plate" == 1 then goto index 536;
   if "curr_plate" == 2 then goto index 534;
   if "curr_plate" == 3 then goto index 532;
   if "curr_plate" == 4 then goto index 530;
   if "curr_plate" == 5 then goto index 528;
   if "curr_plate" == 6 then goto index 526;
   if "curr_plate" == 7 then goto index 524;
   goto index 539;
   show serial_dialog "hanoi_plate_7";
   goto index 539;
   show serial_dialog "hanoi_plate_6";
   goto index 539;
   show serial_dialog "hanoi_plate_5";
   goto index 539;
   show serial_dialog "hanoi_plate_4";
   goto index 539;
   show serial_dialog "hanoi_plate_3";
   goto index 539;
   show serial_dialog "hanoi_plate_2";
   goto index 539;
   show serial_dialog "hanoi_plate_1";
   goto index 539;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 477;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 584;
   if "cursor_pos" == "column" then goto index 551;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 583;
   if "cursor_hinge_height" == "row" then goto index 581;
   if "cursor_grip_height" == "row" then goto index 556;
   show serial_dialog "hanoi_space";
   goto index 608;
   if "cursor_value" == 0 then goto index 579;
   if "cursor_value" == 1 then goto index 577;
   if "cursor_value" == 2 then goto index 575;
   if "cursor_value" == 3 then goto index 573;
   if "cursor_value" == 4 then goto index 571;
   if "cursor_value" == 5 then goto index 569;
   if "cursor_value" == 6 then goto index 567;
   if "cursor_value" == 7 then goto index 565;
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 580;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 608;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 608;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 607;
   if "curr_plate" == 1 then goto index 605;
   if "curr_plate" == 2 then goto index 603;
   if "curr_plate" == 3 then goto index 601;
   if "curr_plate" == 4 then goto index 599;
   if "curr_plate" == 5 then goto index 597;
   if "curr_plate" == 6 then goto index 595;
   if "curr_plate" == 7 then goto index 593;
   goto index 608;
   show serial_dialog "hanoi_plate_7";
   goto index 608;
   show serial_dialog "hanoi_plate_6";
   goto index 608;
   show serial_dialog "hanoi_plate_5";
   goto index 608;
   show serial_dialog "hanoi_plate_4";
   goto index 608;
   show serial_dialog "hanoi_plate_3";
   goto index 608;
   show serial_dialog "hanoi_plate_2";
   goto index 608;
   show serial_dialog "hanoi_plate_1";
   goto index 608;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 646;
   if "cursor_pos" == "column" then goto index 613;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 645;
   if "cursor_hinge_height" == "row" then goto index 643;
   if "cursor_grip_height" == "row" then goto index 618;
   show serial_dialog "hanoi_space";
   goto index 670;
   if "cursor_value" == 0 then goto index 641;
   if "cursor_value" == 1 then goto index 639;
   if "cursor_value" == 2 then goto index 637;
   if "cursor_value" == 3 then goto index 635;
   if "cursor_value" == 4 then goto index 633;
   if "cursor_value" == 5 then goto index 631;
   if "cursor_value" == 6 then goto index 629;
   if "cursor_value" == 7 then goto index 627;
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 642;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 670;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 670;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 669;
   if "curr_plate" == 1 then goto index 667;
   if "curr_plate" == 2 then goto index 665;
   if "curr_plate" == 3 then goto index 663;
   if "curr_plate" == 4 then goto index 661;
   if "curr_plate" == 5 then goto index 659;
   if "curr_plate" == 6 then goto index 657;
   if "curr_plate" == 7 then goto index 655;
   goto index 670;
   show serial_dialog "hanoi_plate_7";
   goto index 670;
   show serial_dialog "hanoi_plate_6";
   goto index 670;
   show serial_dialog "hanoi_plate_5";
   goto index 670;
   show serial_dialog "hanoi_plate_4";
   goto index 670;
   show serial_dialog "hanoi_plate_3";
   goto index 670;
   show serial_dialog "hanoi_plate_2";
   goto index 670;
   show serial_dialog "hanoi_plate_1";
   goto index 670;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 708;
   if "cursor_pos" == "column" then goto index 675;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 707;
   if "cursor_hinge_height" == "row" then goto index 705;
   if "cursor_grip_height" == "row" then goto index 680;
   show serial_dialog "hanoi_space";
   goto index 732;
   if "cursor_value" == 0 then goto index 703;
   if "cursor_value" == 1 then goto index 701;
   if "cursor_value" == 2 then goto index 699;
   if "cursor_value" == 3 then goto index 697;
   if "cursor_value" == 4 then goto index 695;
   if "cursor_value" == 5 then goto index 693;
   if "cursor_value" == 6 then goto index 691;
   if "cursor_value" == 7 then goto index 689;
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 704;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 732;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 732;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 731;
   if "curr_plate" == 1 then goto index 729;
   if "curr_plate" == 2 then goto index 727;
   if "curr_plate" == 3 then goto index 725;
   if "curr_plate" == 4 then goto index 723;
   if "curr_plate" == 5 then goto index 721;
   if "curr_plate" == 6 then goto index 719;
   if "curr_plate" == 7 then goto index 717;
   goto index 732;
   show serial_dialog "hanoi_plate_7";
   goto index 732;
   show serial_dialog "hanoi_plate_6";
   goto index 732;
   show serial_dialog "hanoi_plate_5";
   goto index 732;
   show serial_dialog "hanoi_plate_4";
   goto index 732;
   show serial_dialog "hanoi_plate_3";
   goto index 732;
   show serial_dialog "hanoi_plate_2";
   goto index 732;
   show serial_dialog "hanoi_plate_1";
   goto index 732;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 775;
   if "cursor_pos" == "column" then goto index 742;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 774;
   if "cursor_hinge_height" == "row" then goto index 772;
   if "cursor_grip_height" == "row" then goto index 747;
   show serial_dialog "hanoi_space";
   goto index 799;
   if "cursor_value" == 0 then goto index 770;
   if "cursor_value" == 1 then goto index 768;
   if "cursor_value" == 2 then goto index 766;
   if "cursor_value" == 3 then goto index 764;
   if "cursor_value" == 4 then goto index 762;
   if "cursor_value" == 5 then goto index 760;
   if "cursor_value" == 6 then goto index 758;
   if "cursor_value" == 7 then goto index 756;
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 771;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 799;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 799;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 798;
   if "curr_plate" == 1 then goto index 796;
   if "curr_plate" == 2 then goto index 794;
   if "curr_plate" == 3 then goto index 792;
   if "curr_plate" == 4 then goto index 790;
   if "curr_plate" == 5 then goto index 788;
   if "curr_plate" == 6 then goto index 786;
   if "curr_plate" == 7 then goto index 784;
   goto index 799;
   show serial_dialog "hanoi_plate_7";
   goto index 799;
   show serial_dialog "hanoi_plate_6";
   goto index 799;
   show serial_dialog "hanoi_plate_5";
   goto index 799;
   show serial_dialog "hanoi_plate_4";
   goto index 799;
   show serial_dialog "hanoi_plate_3";
   goto index 799;
   show serial_dialog "hanoi_plate_2";
   goto index 799;
   show serial_dialog "hanoi_plate_1";
   goto index 799;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 837;
   if "cursor_pos" == "column" then goto index 804;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 836;
   if "cursor_hinge_height" == "row" then goto index 834;
   if "cursor_grip_height" == "row" then goto index 809;
   show serial_dialog "hanoi_space";
   goto index 861;
   if "cursor_value" == 0 then goto index 832;
   if "cursor_value" == 1 then goto index 830;
   if "cursor_value" == 2 then goto index 828;
   if "cursor_value" == 3 then goto index 826;
   if "cursor_value" == 4 then goto index 824;
   if "cursor_value" == 5 then goto index 822;
   if "cursor_value" == 6 then goto index 820;
   if "cursor_value" == 7 then goto index 818;
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 833;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 861;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 861;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 860;
   if "curr_plate" == 1 then goto index 858;
   if "curr_plate" == 2 then goto index 856;
   if "curr_plate" == 3 then goto index 854;
   if "curr_plate" == 4 then goto index 852;
   if "curr_plate" == 5 then goto index 850;
   if "curr_plate" == 6 then goto index 848;
   if "curr_plate" == 7 then goto index 846;
   goto index 861;
   show serial_dialog "hanoi_plate_7";
   goto index 861;
   show serial_dialog "hanoi_plate_6";
   goto index 861;
   show serial_dialog "hanoi_plate_5";
   goto index 861;
   show serial_dialog "hanoi_plate_4";
   goto index 861;
   show serial_dialog "hanoi_plate_3";
   goto index 861;
   show serial_dialog "hanoi_plate_2";
   goto index 861;
   show serial_dialog "hanoi_plate_1";
   goto index 861;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 899;
   if "cursor_pos" == "column" then goto index 866;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 898;
   if "cursor_hinge_height" == "row" then goto index 896;
   if "cursor_grip_height" == "row" then goto index 871;
   show serial_dialog "hanoi_space";
   goto index 923;
   if "cursor_value" == 0 then goto index 894;
   if "cursor_value" == 1 then goto index 892;
   if "cursor_value" == 2 then goto index 890;
   if "cursor_value" == 3 then goto index 888;
   if "cursor_value" == 4 then goto index 886;
   if "cursor_value" == 5 then goto index 884;
   if "cursor_value" == 6 then goto index 882;
   if "cursor_value" == 7 then goto index 880;
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 895;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 923;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 923;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 922;
   if "curr_plate" == 1 then goto index 920;
   if "curr_plate" == 2 then goto index 918;
   if "curr_plate" == 3 then goto index 916;
   if "curr_plate" == 4 then goto index 914;
   if "curr_plate" == 5 then goto index 912;
   if "curr_plate" == 6 then goto index 910;
   if "curr_plate" == 7 then goto index 908;
   goto index 923;
   show serial_dialog "hanoi_plate_7";
   goto index 923;
   show serial_dialog "hanoi_plate_6";
   goto index 923;
   show serial_dialog "hanoi_plate_5";
   goto index 923;
   show serial_dialog "hanoi_plate_4";
   goto index 923;
   show serial_dialog "hanoi_plate_3";
   goto index 923;
   show serial_dialog "hanoi_plate_2";
   goto index 923;
   show serial_dialog "hanoi_plate_1";
   goto index 923;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 966;
   if "cursor_pos" == "column" then goto index 933;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 965;
   if "cursor_hinge_height" == "row" then goto index 963;
   if "cursor_grip_height" == "row" then goto index 938;
   show serial_dialog "hanoi_space";
   goto index 990;
   if "cursor_value" == 0 then goto index 961;
   if "cursor_value" == 1 then goto index 959;
   if "cursor_value" == 2 then goto index 957;
   if "cursor_value" == 3 then goto index 955;
   if "cursor_value" == 4 then goto index 953;
   if "cursor_value" == 5 then goto index 951;
   if "cursor_value" == 6 then goto index 949;
   if "cursor_value" == 7 then goto index 947;
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 962;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 990;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 990;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 989;
   if "curr_plate" == 1 then goto index 987;
   if "curr_plate" == 2 then goto index 985;
   if "curr_plate" == 3 then goto index 983;
   if "curr_plate" == 4 then goto index 981;
   if "curr_plate" == 5 then goto index 979;
   if "curr_plate" == 6 then goto index 977;
   if "curr_plate" == 7 then goto index 975;
   goto index 990;
   show serial_dialog "hanoi_plate_7";
   goto index 990;
   show serial_dialog "hanoi_plate_6";
   goto index 990;
   show serial_dialog "hanoi_plate_5";
   goto index 990;
   show serial_dialog "hanoi_plate_4";
   goto index 990;
   show serial_dialog "hanoi_plate_3";
   goto index 990;
   show serial_dialog "hanoi_plate_2";
   goto index 990;
   show serial_dialog "hanoi_plate_1";
   goto index 990;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1028;
   if "cursor_pos" == "column" then goto index 995;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1027;
   if "cursor_hinge_height" == "row" then goto index 1025;
   if "cursor_grip_height" == "row" then goto index 1000;
   show serial_dialog "hanoi_space";
   goto index 1052;
   if "cursor_value" == 0 then goto index 1023;
   if "cursor_value" == 1 then goto index 1021;
   if "cursor_value" == 2 then goto index 1019;
   if "cursor_value" == 3 then goto index 1017;
   if "cursor_value" == 4 then goto index 1015;
   if "cursor_value" == 5 then goto index 1013;
   if "cursor_value" == 6 then goto index 1011;
   if "cursor_value" == 7 then goto index 1009;
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1024;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1052;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1052;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1051;
   if "curr_plate" == 1 then goto index 1049;
   if "curr_plate" == 2 then goto index 1047;
   if "curr_plate" == 3 then goto index 1045;
   if "curr_plate" == 4 then goto index 1043;
   if "curr_plate" == 5 then goto index 1041;
   if "curr_plate" == 6 then goto index 1039;
   if "curr_plate" == 7 then goto index 1037;
   goto index 1052;
   show serial_dialog "hanoi_plate_7";
   goto index 1052;
   show serial_dialog "hanoi_plate_6";
   goto index 1052;
   show serial_dialog "hanoi_plate_5";
   goto index 1052;
   show serial_dialog "hanoi_plate_4";
   goto index 1052;
   show serial_dialog "hanoi_plate_3";
   goto index 1052;
   show serial_dialog "hanoi_plate_2";
   goto index 1052;
   show serial_dialog "hanoi_plate_1";
   goto index 1052;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1090;
   if "cursor_pos" == "column" then goto index 1057;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1089;
   if "cursor_hinge_height" == "row" then goto index 1087;
   if "cursor_grip_height" == "row" then goto index 1062;
   show serial_dialog "hanoi_space";
   goto index 1114;
   if "cursor_value" == 0 then goto index 1085;
   if "cursor_value" == 1 then goto index 1083;
   if "cursor_value" == 2 then goto index 1081;
   if "cursor_value" == 3 then goto index 1079;
   if "cursor_value" == 4 then goto index 1077;
   if "cursor_value" == 5 then goto index 1075;
   if "cursor_value" == 6 then goto index 1073;
   if "cursor_value" == 7 then goto index 1071;
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1086;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1114;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1114;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1113;
   if "curr_plate" == 1 then goto index 1111;
   if "curr_plate" == 2 then goto index 1109;
   if "curr_plate" == 3 then goto index 1107;
   if "curr_plate" == 4 then goto index 1105;
   if "curr_plate" == 5 then goto index 1103;
   if "curr_plate" == 6 then goto index 1101;
   if "curr_plate" == 7 then goto index 1099;
   goto index 1114;
   show serial_dialog "hanoi_plate_7";
   goto index 1114;
   show serial_dialog "hanoi_plate_6";
   goto index 1114;
   show serial_dialog "hanoi_plate_5";
   goto index 1114;
   show serial_dialog "hanoi_plate_4";
   goto index 1114;
   show serial_dialog "hanoi_plate_3";
   goto index 1114;
   show serial_dialog "hanoi_plate_2";
   goto index 1114;
   show serial_dialog "hanoi_plate_1";
   goto index 1114;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1157;
   if "cursor_pos" == "column" then goto index 1124;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1156;
   if "cursor_hinge_height" == "row" then goto index 1154;
   if "cursor_grip_height" == "row" then goto index 1129;
   show serial_dialog "hanoi_space";
   goto index 1181;
   if "cursor_value" == 0 then goto index 1152;
   if "cursor_value" == 1 then goto index 1150;
   if "cursor_value" == 2 then goto index 1148;
   if "cursor_value" == 3 then goto index 1146;
   if "cursor_value" == 4 then goto index 1144;
   if "cursor_value" == 5 then goto index 1142;
   if "cursor_value" == 6 then goto index 1140;
   if "cursor_value" == 7 then goto index 1138;
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1153;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1181;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1181;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1180;
   if "curr_plate" == 1 then goto index 1178;
   if "curr_plate" == 2 then goto index 1176;
   if "curr_plate" == 3 then goto index 1174;
   if "curr_plate" == 4 then goto index 1172;
   if "curr_plate" == 5 then goto index 1170;
   if "curr_plate" == 6 then goto index 1168;
   if "curr_plate" == 7 then goto index 1166;
   goto index 1181;
   show serial_dialog "hanoi_plate_7";
   goto index 1181;
   show serial_dialog "hanoi_plate_6";
   goto index 1181;
   show serial_dialog "hanoi_plate_5";
   goto index 1181;
   show serial_dialog "hanoi_plate_4";
   goto index 1181;
   show serial_dialog "hanoi_plate_3";
   goto index 1181;
   show serial_dialog "hanoi_plate_2";
   goto index 1181;
   show serial_dialog "hanoi_plate_1";
   goto index 1181;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1219;
   if "cursor_pos" == "column" then goto index 1186;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1218;
   if "cursor_hinge_height" == "row" then goto index 1216;
   if "cursor_grip_height" == "row" then goto index 1191;
   show serial_dialog "hanoi_space";
   goto index 1243;
   if "cursor_value" == 0 then goto index 1214;
   if "cursor_value" == 1 then goto index 1212;
   if "cursor_value" == 2 then goto index 1210;
   if "cursor_value" == 3 then goto index 1208;
   if "cursor_value" == 4 then goto index 1206;
   if "cursor_value" == 5 then goto index 1204;
   if "cursor_value" == 6 then goto index 1202;
   if "cursor_value" == 7 then goto index 1200;
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1215;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1243;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1243;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1242;
   if "curr_plate" == 1 then goto index 1240;
   if "curr_plate" == 2 then goto index 1238;
   if "curr_plate" == 3 then goto index 1236;
   if "curr_plate" == 4 then goto index 1234;
   if "curr_plate" == 5 then goto index 1232;
   if "curr_plate" == 6 then goto index 1230;
   if "curr_plate" == 7 then goto index 1228;
   goto index 1243;
   show serial_dialog "hanoi_plate_7";
   goto index 1243;
   show serial_dialog "hanoi_plate_6";
   goto index 1243;
   show serial_dialog "hanoi_plate_5";
   goto index 1243;
   show serial_dialog "hanoi_plate_4";
   goto index 1243;
   show serial_dialog "hanoi_plate_3";
   goto index 1243;
   show serial_dialog "hanoi_plate_2";
   goto index 1243;
   show serial_dialog "hanoi_plate_1";
   goto index 1243;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1281;
   if "cursor_pos" == "column" then goto index 1248;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1280;
   if "cursor_hinge_height" == "row" then goto index 1278;
   if "cursor_grip_height" == "row" then goto index 1253;
   show serial_dialog "hanoi_space";
   goto index 1305;
   if "cursor_value" == 0 then goto index 1276;
   if "cursor_value" == 1 then goto index 1274;
   if "cursor_value" == 2 then goto index 1272;
   if "cursor_value" == 3 then goto index 1270;
   if "cursor_value" == 4 then goto index 1268;
   if "cursor_value" == 5 then goto index 1266;
   if "cursor_value" == 6 then goto index 1264;
   if "cursor_value" == 7 then goto index 1262;
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1277;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1305;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1305;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1304;
   if "curr_plate" == 1 then goto index 1302;
   if "curr_plate" == 2 then goto index 1300;
   if "curr_plate" == 3 then goto index 1298;
   if "curr_plate" == 4 then goto index 1296;
   if "curr_plate" == 5 then goto index 1294;
   if "curr_plate" == 6 then goto index 1292;
   if "curr_plate" == 7 then goto index 1290;
   goto index 1305;
   show serial_dialog "hanoi_plate_7";
   goto index 1305;
   show serial_dialog "hanoi_plate_6";
   goto index 1305;
   show serial_dialog "hanoi_plate_5";
   goto index 1305;
   show serial_dialog "hanoi_plate_4";
   goto index 1305;
   show serial_dialog "hanoi_plate_3";
   goto index 1305;
   show serial_dialog "hanoi_plate_2";
   goto index 1305;
   show serial_dialog "hanoi_plate_1";
   goto index 1305;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1348;
   if "cursor_pos" == "column" then goto index 1315;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1347;
   if "cursor_hinge_height" == "row" then goto index 1345;
   if "cursor_grip_height" == "row" then goto index 1320;
   show serial_dialog "hanoi_space";
   goto index 1372;
   if "cursor_value" == 0 then goto index 1343;
   if "cursor_value" == 1 then goto index 1341;
   if "cursor_value" == 2 then goto index 1339;
   if "cursor_value" == 3 then goto index 1337;
   if "cursor_value" == 4 then goto index 1335;
   if "cursor_value" == 5 then goto index 1333;
   if "cursor_value" == 6 then goto index 1331;
   if "cursor_value" == 7 then goto index 1329;
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1344;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1372;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1372;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1371;
   if "curr_plate" == 1 then goto index 1369;
   if "curr_plate" == 2 then goto index 1367;
   if "curr_plate" == 3 then goto index 1365;
   if "curr_plate" == 4 then goto index 1363;
   if "curr_plate" == 5 then goto index 1361;
   if "curr_plate" == 6 then goto index 1359;
   if "curr_plate" == 7 then goto index 1357;
   goto index 1372;
   show serial_dialog "hanoi_plate_7";
   goto index 1372;
   show serial_dialog "hanoi_plate_6";
   goto index 1372;
   show serial_dialog "hanoi_plate_5";
   goto index 1372;
   show serial_dialog "hanoi_plate_4";
   goto index 1372;
   show serial_dialog "hanoi_plate_3";
   goto index 1372;
   show serial_dialog "hanoi_plate_2";
   goto index 1372;
   show serial_dialog "hanoi_plate_1";
   goto index 1372;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1410;
   if "cursor_pos" == "column" then goto index 1377;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1409;
   if "cursor_hinge_height" == "row" then goto index 1407;
   if "cursor_grip_height" == "row" then goto index 1382;
   show serial_dialog "hanoi_space";
   goto index 1434;
   if "cursor_value" == 0 then goto index 1405;
   if "cursor_value" == 1 then goto index 1403;
   if "cursor_value" == 2 then goto index 1401;
   if "cursor_value" == 3 then goto index 1399;
   if "cursor_value" == 4 then goto index 1397;
   if "cursor_value" == 5 then goto index 1395;
   if "cursor_value" == 6 then goto index 1393;
   if "cursor_value" == 7 then goto index 1391;
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1406;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1434;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1434;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1433;
   if "curr_plate" == 1 then goto index 1431;
   if "curr_plate" == 2 then goto index 1429;
   if "curr_plate" == 3 then goto index 1427;
   if "curr_plate" == 4 then goto index 1425;
   if "curr_plate" == 5 then goto index 1423;
   if "curr_plate" == 6 then goto index 1421;
   if "curr_plate" == 7 then goto index 1419;
   goto index 1434;
   show serial_dialog "hanoi_plate_7";
   goto index 1434;
   show serial_dialog "hanoi_plate_6";
   goto index 1434;
   show serial_dialog "hanoi_plate_5";
   goto index 1434;
   show serial_dialog "hanoi_plate_4";
   goto index 1434;
   show serial_dialog "hanoi_plate_3";
   goto index 1434;
   show serial_dialog "hanoi_plate_2";
   goto index 1434;
   show serial_dialog "hanoi_plate_1";
   goto index 1434;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1472;
   if "cursor_pos" == "column" then goto index 1439;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1471;
   if "cursor_hinge_height" == "row" then goto index 1469;
   if "cursor_grip_height" == "row" then goto index 1444;
   show serial_dialog "hanoi_space";
   goto index 1496;
   if "cursor_value" == 0 then goto index 1467;
   if "cursor_value" == 1 then goto index 1465;
   if "cursor_value" == 2 then goto index 1463;
   if "cursor_value" == 3 then goto index 1461;
   if "cursor_value" == 4 then goto index 1459;
   if "cursor_value" == 5 then goto index 1457;
   if "cursor_value" == 6 then goto index 1455;
   if "cursor_value" == 7 then goto index 1453;
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1468;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1496;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1496;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1495;
   if "curr_plate" == 1 then goto index 1493;
   if "curr_plate" == 2 then goto index 1491;
   if "curr_plate" == 3 then goto index 1489;
   if "curr_plate" == 4 then goto index 1487;
   if "curr_plate" == 5 then goto index 1485;
   if "curr_plate" == 6 then goto index 1483;
   if "curr_plate" == 7 then goto index 1481;
   goto index 1496;
   show serial_dialog "hanoi_plate_7";
   goto index 1496;
   show serial_dialog "hanoi_plate_6";
   goto index 1496;
   show serial_dialog "hanoi_plate_5";
   goto index 1496;
   show serial_dialog "hanoi_plate_4";
   goto index 1496;
   show serial_dialog "hanoi_plate_3";
   goto index 1496;
   show serial_dialog "hanoi_plate_2";
   goto index 1496;
   show serial_dialog "hanoi_plate_1";
   goto index 1496;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1539;
   if "cursor_pos" == "column" then goto index 1506;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1538;
   if "cursor_hinge_height" == "row" then goto index 1536;
   if "cursor_grip_height" == "row" then goto index 1511;
   show serial_dialog "hanoi_space";
   goto index 1563;
   if "cursor_value" == 0 then goto index 1534;
   if "cursor_value" == 1 then goto index 1532;
   if "cursor_value" == 2 then goto index 1530;
   if "cursor_value" == 3 then goto index 1528;
   if "cursor_value" == 4 then goto index 1526;
   if "cursor_value" == 5 then goto index 1524;
   if "cursor_value" == 6 then goto index 1522;
   if "cursor_value" == 7 then goto index 1520;
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1535;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1563;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1563;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1562;
   if "curr_plate" == 1 then goto index 1560;
   if "curr_plate" == 2 then goto index 1558;
   if "curr_plate" == 3 then goto index 1556;
   if "curr_plate" == 4 then goto index 1554;
   if "curr_plate" == 5 then goto index 1552;
   if "curr_plate" == 6 then goto index 1550;
   if "curr_plate" == 7 then goto index 1548;
   goto index 1563;
   show serial_dialog "hanoi_plate_7";
   goto index 1563;
   show serial_dialog "hanoi_plate_6";
   goto index 1563;
   show serial_dialog "hanoi_plate_5";
   goto index 1563;
   show serial_dialog "hanoi_plate_4";
   goto index 1563;
   show serial_dialog "hanoi_plate_3";
   goto index 1563;
   show serial_dialog "hanoi_plate_2";
   goto index 1563;
   show serial_dialog "hanoi_plate_1";
   goto index 1563;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1601;
   if "cursor_pos" == "column" then goto index 1568;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1600;
   if "cursor_hinge_height" == "row" then goto index 1598;
   if "cursor_grip_height" == "row" then goto index 1573;
   show serial_dialog "hanoi_space";
   goto index 1625;
   if "cursor_value" == 0 then goto index 1596;
   if "cursor_value" == 1 then goto index 1594;
   if "cursor_value" == 2 then goto index 1592;
   if "cursor_value" == 3 then goto index 1590;
   if "cursor_value" == 4 then goto index 1588;
   if "cursor_value" == 5 then goto index 1586;
   if "cursor_value" == 6 then goto index 1584;
   if "cursor_value" == 7 then goto index 1582;
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1597;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1625;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1625;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1624;
   if "curr_plate" == 1 then goto index 1622;
   if "curr_plate" == 2 then goto index 1620;
   if "curr_plate" == 3 then goto index 1618;
   if "curr_plate" == 4 then goto index 1616;
   if "curr_plate" == 5 then goto index 1614;
   if "curr_plate" == 6 then goto index 1612;
   if "curr_plate" == 7 then goto index 1610;
   goto index 1625;
   show serial_dialog "hanoi_plate_7";
   goto index 1625;
   show serial_dialog "hanoi_plate_6";
   goto index 1625;
   show serial_dialog "hanoi_plate_5";
   goto index 1625;
   show serial_dialog "hanoi_plate_4";
   goto index 1625;
   show serial_dialog "hanoi_plate_3";
   goto index 1625;
   show serial_dialog "hanoi_plate_2";
   goto index 1625;
   show serial_dialog "hanoi_plate_1";
   goto index 1625;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1663;
   if "cursor_pos" == "column" then goto index 1630;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1662;
   if "cursor_hinge_height" == "row" then goto index 1660;
   if "cursor_grip_height" == "row" then goto index 1635;
   show serial_dialog "hanoi_space";
   goto index 1687;
   if "cursor_value" == 0 then goto index 1658;
   if "cursor_value" == 1 then goto index 1656;
   if "cursor_value" == 2 then goto index 1654;
   if "cursor_value" == 3 then goto index 1652;
   if "cursor_value" == 4 then goto index 1650;
   if "cursor_value" == 5 then goto index 1648;
   if "cursor_value" == 6 then goto index 1646;
   if "cursor_value" == 7 then goto index 1644;
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1659;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1687;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1687;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1686;
   if "curr_plate" == 1 then goto index 1684;
   if "curr_plate" == 2 then goto index 1682;
   if "curr_plate" == 3 then goto index 1680;
   if "curr_plate" == 4 then goto index 1678;
   if "curr_plate" == 5 then goto index 1676;
   if "curr_plate" == 6 then goto index 1674;
   if "curr_plate" == 7 then goto index 1672;
   goto index 1687;
   show serial_dialog "hanoi_plate_7";
   goto index 1687;
   show serial_dialog "hanoi_plate_6";
   goto index 1687;
   show serial_dialog "hanoi_plate_5";
   goto index 1687;
   show serial_dialog "hanoi_plate_4";
   goto index 1687;
   show serial_dialog "hanoi_plate_3";
   goto index 1687;
   show serial_dialog "hanoi_plate_2";
   goto index 1687;
   show serial_dialog "hanoi_plate_1";
   goto index 1687;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1713;
   if "curr_plate" == 1 then goto index 1711;
   if "curr_plate" == 2 then goto index 1709;
   if "curr_plate" == 3 then goto index 1707;
   if "curr_plate" == 4 then goto index 1705;
   if "curr_plate" == 5 then goto index 1703;
   if "curr_plate" == 6 then goto index 1701;
   if "curr_plate" == 7 then goto index 1699;
   goto index 1714;
   show serial_dialog "hanoi_plate_7";
   goto index 1714;
   show serial_dialog "hanoi_plate_6";
   goto index 1714;
   show serial_dialog "hanoi_plate_5";
   goto index 1714;
   show serial_dialog "hanoi_plate_4";
   goto index 1714;
   show serial_dialog "hanoi_plate_3";
   goto index 1714;
   show serial_dialog "hanoi_plate_2";
   goto index 1714;
   show serial_dialog "hanoi_plate_1";
   goto index 1714;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1738;
   if "curr_plate" == 1 then goto index 1736;
   if "curr_plate" == 2 then goto index 1734;
   if "curr_plate" == 3 then goto index 1732;
   if "curr_plate" == 4 then goto index 1730;
   if "curr_plate" == 5 then goto index 1728;
   if "curr_plate" == 6 then goto index 1726;
   if "curr_plate" == 7 then goto index 1724;
   goto index 1739;
   show serial_dialog "hanoi_plate_7";
   goto index 1739;
   show serial_dialog "hanoi_plate_6";
   goto index 1739;
   show serial_dialog "hanoi_plate_5";
   goto index 1739;
   show serial_dialog "hanoi_plate_4";
   goto index 1739;
   show serial_dialog "hanoi_plate_3";
   goto index 1739;
   show serial_dialog "hanoi_plate_2";
   goto index 1739;
   show serial_dialog "hanoi_plate_1";
   goto index 1739;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1763;
   if "curr_plate" == 1 then goto index 1761;
   if "curr_plate" == 2 then goto index 1759;
   if "curr_plate" == 3 then goto index 1757;
   if "curr_plate" == 4 then goto index 1755;
   if "curr_plate" == 5 then goto index 1753;
   if "curr_plate" == 6 then goto index 1751;
   if "curr_plate" == 7 then goto index 1749;
   goto index 1764;
   show serial_dialog "hanoi_plate_7";
   goto index 1764;
   show serial_dialog "hanoi_plate_6";
   goto index 1764;
   show serial_dialog "hanoi_plate_5";
   goto index 1764;
   show serial_dialog "hanoi_plate_4";
   goto index 1764;
   show serial_dialog "hanoi_plate_3";
   goto index 1764;
   show serial_dialog "hanoi_plate_2";
   goto index 1764;
   show serial_dialog "hanoi_plate_1";
   goto index 1764;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1772;
   if "hanoi_draw_help" then goto index 1769;
   goto index 1808;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1808;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1786;
   goto index 1787;
   delete command "WIN";
   if !"hanoi_won" then goto index 1806;
   if !"ch2-carrying-plate" then goto index 1791;
   if !"ch2-installed-plate" then goto index 1791;
   goto index 1807;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1795;
   goto index 1796;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1804;
   if "hanoi_move_count" == 69 then goto index 1802;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1805;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1807;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_reset" {
   "hanoi_init_done" = false;
   "cursor_pos" = 1;
   "cursor_value" = 0;
   "array1_7" = 0;
   "array1_6" = 1;
   "array1_5" = 2;
   "array1_4" = 3;
   "array1_3" = 4;
   "array1_2" = 5;
   "array1_1" = 6;
   "array1_length" = 6;
   "array2_7" = 0;
   "array2_6" = 0;
   "array2_5" = 0;
   "array2_4" = 0;
   "array2_3" = 0;
   "array2_2" = 0;
   "array2_1" = 0;
   "array2_length" = 0;
   "array3_7" = 0;
   "array3_6" = 0;
   "array3_5" = 0;
   "array3_4" = 0;
   "array3_3" = 0;
   "array3_2" = 0;
   "array3_1" = 0;
   "array3_length" = 0;
   "hanoi_move_count" = 0;
   "hanoi_init_done" = true;
   "hanoi_won" = false;
   if "cursor_pos" == 1 then goto index 38;
   if "cursor_pos" == 2 then goto index 36;
   if "cursor_pos" == 3 then goto index 34;
   goto index 39;
   "cursor_grip_height" = "array3_length";
   goto index 39;
   "cursor_grip_height" = "array2_length";
   goto index 39;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 55;
   "column" = 1;
   if "column" <= 3 then goto index 49;
   goto index 64;
   if "cursor_pos" == "column" then goto index 52;
   show serial_dialog "hanoi_space";
   goto index 53;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 47;
   if "cursor_pos" == 1 then goto index 63;
   if "cursor_pos" == 2 then goto index 61;
   if "cursor_pos" == 3 then goto index 59;
   goto index 64;
   show serial_dialog "hanoi_won_message3a";
   goto index 64;
   show serial_dialog "hanoi_won_message2a";
   goto index 64;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 145;
   if "hanoi_won" then goto index 133;
   "column" = 1;
   if "column" <= 3 then goto index 71;
   goto index 147;
   if "curr_plate" != 0 then goto index 107;
   if "cursor_pos" == "column" then goto index 74;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 106;
   if "cursor_hinge_height" == "row" then goto index 104;
   if "cursor_grip_height" == "row" then goto index 79;
   show serial_dialog "hanoi_space";
   goto index 131;
   if "cursor_value" == 0 then goto index 102;
   if "cursor_value" == 1 then goto index 100;
   if "cursor_value" == 2 then goto index 98;
   if "cursor_value" == 3 then goto index 96;
   if "cursor_value" == 4 then goto index 94;
   if "cursor_value" == 5 then goto index 92;
   if "cursor_value" == 6 then goto index 90;
   if "cursor_value" == 7 then goto index 88;
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 103;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 131;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 131;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 130;
   if "curr_plate" == 1 then goto index 128;
   if "curr_plate" == 2 then goto index 126;
   if "curr_plate" == 3 then goto index 124;
   if "curr_plate" == 4 then goto index 122;
   if "curr_plate" == 5 then goto index 120;
   if "curr_plate" == 6 then goto index 118;
   if "curr_plate" == 7 then goto index 116;
   goto index 131;
   show serial_dialog "hanoi_plate_7";
   goto index 131;
   show serial_dialog "hanoi_plate_6";
   goto index 131;
   show serial_dialog "hanoi_plate_5";
   goto index 131;
   show serial_dialog "hanoi_plate_4";
   goto index 131;
   show serial_dialog "hanoi_plate_3";
   goto index 131;
   show serial_dialog "hanoi_plate_2";
   goto index 131;
   show serial_dialog "hanoi_plate_1";
   goto index 131;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 69;
   if "cursor_pos" == 1 then goto index 144;
   if "cursor_pos" == 2 then goto index 143;
   if "cursor_pos" == 3 then goto index 136;
   if "hanoi_move_count" < 100 then goto index 142;
   if "hanoi_move_count" < 1000 then goto index 140;
   show serial_dialog "hanoi_won_message3b4";
   goto index 145;
   show serial_dialog "hanoi_won_message3b3";
   goto index 145;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 152;
   goto index 214;
   if "curr_plate" != 0 then goto index 188;
   if "cursor_pos" == "column" then goto index 155;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 187;
   if "cursor_hinge_height" == "row" then goto index 185;
   if "cursor_grip_height" == "row" then goto index 160;
   show serial_dialog "hanoi_space";
   goto index 212;
   if "cursor_value" == 0 then goto index 183;
   if "cursor_value" == 1 then goto index 181;
   if "cursor_value" == 2 then goto index 179;
   if "cursor_value" == 3 then goto index 177;
   if "cursor_value" == 4 then goto index 175;
   if "cursor_value" == 5 then goto index 173;
   if "cursor_value" == 6 then goto index 171;
   if "cursor_value" == 7 then goto index 169;
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 184;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 212;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 212;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 211;
   if "curr_plate" == 1 then goto index 209;
   if "curr_plate" == 2 then goto index 207;
   if "curr_plate" == 3 then goto index 205;
   if "curr_plate" == 4 then goto index 203;
   if "curr_plate" == 5 then goto index 201;
   if "curr_plate" == 6 then goto index 199;
   if "curr_plate" == 7 then goto index 197;
   goto index 212;
   show serial_dialog "hanoi_plate_7";
   goto index 212;
   show serial_dialog "hanoi_plate_6";
   goto index 212;
   show serial_dialog "hanoi_plate_5";
   goto index 212;
   show serial_dialog "hanoi_plate_4";
   goto index 212;
   show serial_dialog "hanoi_plate_3";
   goto index 212;
   show serial_dialog "hanoi_plate_2";
   goto index 212;
   show serial_dialog "hanoi_plate_1";
   goto index 212;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 150;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 219;
   goto index 281;
   if "curr_plate" != 0 then goto index 255;
   if "cursor_pos" == "column" then goto index 222;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 254;
   if "cursor_hinge_height" == "row" then goto index 252;
   if "cursor_grip_height" == "row" then goto index 227;
   show serial_dialog "hanoi_space";
   goto index 279;
   if "cursor_value" == 0 then goto index 250;
   if "cursor_value" == 1 then goto index 248;
   if "cursor_value" == 2 then goto index 246;
   if "cursor_value" == 3 then goto index 244;
   if "cursor_value" == 4 then goto index 242;
   if "cursor_value" == 5 then goto index 240;
   if "cursor_value" == 6 then goto index 238;
   if "cursor_value" == 7 then goto index 236;
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 251;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 279;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 279;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 278;
   if "curr_plate" == 1 then goto index 276;
   if "curr_plate" == 2 then goto index 274;
   if "curr_plate" == 3 then goto index 272;
   if "curr_plate" == 4 then goto index 270;
   if "curr_plate" == 5 then goto index 268;
   if "curr_plate" == 6 then goto index 266;
   if "curr_plate" == 7 then goto index 264;
   goto index 279;
   show serial_dialog "hanoi_plate_7";
   goto index 279;
   show serial_dialog "hanoi_plate_6";
   goto index 279;
   show serial_dialog "hanoi_plate_5";
   goto index 279;
   show serial_dialog "hanoi_plate_4";
   goto index 279;
   show serial_dialog "hanoi_plate_3";
   goto index 279;
   show serial_dialog "hanoi_plate_2";
   goto index 279;
   show serial_dialog "hanoi_plate_1";
   goto index 279;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 217;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 324;
   if "cursor_pos" == "column" then goto index 291;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 323;
   if "cursor_hinge_height" == "row" then goto index 321;
   if "cursor_grip_height" == "row" then goto index 296;
   show serial_dialog "hanoi_space";
   goto index 348;
   if "cursor_value" == 0 then goto index 319;
   if "cursor_value" == 1 then goto index 317;
   if "cursor_value" == 2 then goto index 315;
   if "cursor_value" == 3 then goto index 313;
   if "cursor_value" == 4 then goto index 311;
   if "cursor_value" == 5 then goto index 309;
   if "cursor_value" == 6 then goto index 307;
   if "cursor_value" == 7 then goto index 305;
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 320;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 348;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 348;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 347;
   if "curr_plate" == 1 then goto index 345;
   if "curr_plate" == 2 then goto index 343;
   if "curr_plate" == 3 then goto index 341;
   if "curr_plate" == 4 then goto index 339;
   if "curr_plate" == 5 then goto index 337;
   if "curr_plate" == 6 then goto index 335;
   if "curr_plate" == 7 then goto index 333;
   goto index 348;
   show serial_dialog "hanoi_plate_7";
   goto index 348;
   show serial_dialog "hanoi_plate_6";
   goto index 348;
   show serial_dialog "hanoi_plate_5";
   goto index 348;
   show serial_dialog "hanoi_plate_4";
   goto index 348;
   show serial_dialog "hanoi_plate_3";
   goto index 348;
   show serial_dialog "hanoi_plate_2";
   goto index 348;
   show serial_dialog "hanoi_plate_1";
   goto index 348;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 386;
   if "cursor_pos" == "column" then goto index 353;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 385;
   if "cursor_hinge_height" == "row" then goto index 383;
   if "cursor_grip_height" == "row" then goto index 358;
   show serial_dialog "hanoi_space";
   goto index 410;
   if "cursor_value" == 0 then goto index 381;
   if "cursor_value" == 1 then goto index 379;
   if "cursor_value" == 2 then goto index 377;
   if "cursor_value" == 3 then goto index 375;
   if "cursor_value" == 4 then goto index 373;
   if "cursor_value" == 5 then goto index 371;
   if "cursor_value" == 6 then goto index 369;
   if "cursor_value" == 7 then goto index 367;
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 382;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 410;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 410;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 409;
   if "curr_plate" == 1 then goto index 407;
   if "curr_plate" == 2 then goto index 405;
   if "curr_plate" == 3 then goto index 403;
   if "curr_plate" == 4 then goto index 401;
   if "curr_plate" == 5 then goto index 399;
   if "curr_plate" == 6 then goto index 397;
   if "curr_plate" == 7 then goto index 395;
   goto index 410;
   show serial_dialog "hanoi_plate_7";
   goto index 410;
   show serial_dialog "hanoi_plate_6";
   goto index 410;
   show serial_dialog "hanoi_plate_5";
   goto index 410;
   show serial_dialog "hanoi_plate_4";
   goto index 410;
   show serial_dialog "hanoi_plate_3";
   goto index 410;
   show serial_dialog "hanoi_plate_2";
   goto index 410;
   show serial_dialog "hanoi_plate_1";
   goto index 410;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 448;
   if "cursor_pos" == "column" then goto index 415;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 447;
   if "cursor_hinge_height" == "row" then goto index 445;
   if "cursor_grip_height" == "row" then goto index 420;
   show serial_dialog "hanoi_space";
   goto index 472;
   if "cursor_value" == 0 then goto index 443;
   if "cursor_value" == 1 then goto index 441;
   if "cursor_value" == 2 then goto index 439;
   if "cursor_value" == 3 then goto index 437;
   if "cursor_value" == 4 then goto index 435;
   if "cursor_value" == 5 then goto index 433;
   if "cursor_value" == 6 then goto index 431;
   if "cursor_value" == 7 then goto index 429;
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 444;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 472;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 472;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 471;
   if "curr_plate" == 1 then goto index 469;
   if "curr_plate" == 2 then goto index 467;
   if "curr_plate" == 3 then goto index 465;
   if "curr_plate" == 4 then goto index 463;
   if "curr_plate" == 5 then goto index 461;
   if "curr_plate" == 6 then goto index 459;
   if "curr_plate" == 7 then goto index 457;
   goto index 472;
   show serial_dialog "hanoi_plate_7";
   goto index 472;
   show serial_dialog "hanoi_plate_6";
   goto index 472;
   show serial_dialog "hanoi_plate_5";
   goto index 472;
   show serial_dialog "hanoi_plate_4";
   goto index 472;
   show serial_dialog "hanoi_plate_3";
   goto index 472;
   show serial_dialog "hanoi_plate_2";
   goto index 472;
   show serial_dialog "hanoi_plate_1";
   goto index 472;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 515;
   if "cursor_pos" == "column" then goto index 482;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 514;
   if "cursor_hinge_height" == "row" then goto index 512;
   if "cursor_grip_height" == "row" then goto index 487;
   show serial_dialog "hanoi_space";
   goto index 539;
   if "cursor_value" == 0 then goto index 510;
   if "cursor_value" == 1 then goto index 508;
   if "cursor_value" == 2 then goto index 506;
   if "cursor_value" == 3 then goto index 504;
   if "cursor_value" == 4 then goto index 502;
   if "cursor_value" == 5 then goto index 500;
   if "cursor_value" == 6 then goto index 498;
   if "cursor_value" == 7 then goto index 496;
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 511;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 539;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 539;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 538;
   if "curr_plate" == 1 then goto index 536;
   if "curr_plate" == 2 then goto index 534;
   if "curr_plate" == 3 then goto index 532;
   if "curr_plate" == 4 then goto index 530;
   if "curr_plate" == 5 then goto index 528;
   if "curr_plate" == 6 then goto index 526;
   if "curr_plate" == 7 then goto index 524;
   goto index 539;
   show serial_dialog "hanoi_plate_7";
   goto index 539;
   show serial_dialog "hanoi_plate_6";
   goto index 539;
   show serial_dialog "hanoi_plate_5";
   goto index 539;
   show serial_dialog "hanoi_plate_4";
   goto index 539;
   show serial_dialog "hanoi_plate_3";
   goto index 539;
   show serial_dialog "hanoi_plate_2";
   goto index 539;
   show serial_dialog "hanoi_plate_1";
   goto index 539;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 577;
   if "cursor_pos" == "column" then goto index 544;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 576;
   if "cursor_hinge_height" == "row" then goto index 574;
   if "cursor_grip_height" == "row" then goto index 549;
   show serial_dialog "hanoi_space";
   goto index 601;
   if "cursor_value" == 0 then goto index 572;
   if "cursor_value" == 1 then goto index 570;
   if "cursor_value" == 2 then goto index 568;
   if "cursor_value" == 3 then goto index 566;
   if "cursor_value" == 4 then goto index 564;
   if "cursor_value" == 5 then goto index 562;
   if "cursor_value" == 6 then goto index 560;
   if "cursor_value" == 7 then goto index 558;
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 573;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 601;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 601;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 600;
   if "curr_plate" == 1 then goto index 598;
   if "curr_plate" == 2 then goto index 596;
   if "curr_plate" == 3 then goto index 594;
   if "curr_plate" == 4 then goto index 592;
   if "curr_plate" == 5 then goto index 590;
   if "curr_plate" == 6 then goto index 588;
   if "curr_plate" == 7 then goto index 586;
   goto index 601;
   show serial_dialog "hanoi_plate_7";
   goto index 601;
   show serial_dialog "hanoi_plate_6";
   goto index 601;
   show serial_dialog "hanoi_plate_5";
   goto index 601;
   show serial_dialog "hanoi_plate_4";
   goto index 601;
   show serial_dialog "hanoi_plate_3";
   goto index 601;
   show serial_dialog "hanoi_plate_2";
   goto index 601;
   show serial_dialog "hanoi_plate_1";
   goto index 601;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 639;
   if "cursor_pos" == "column" then goto index 606;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 638;
   if "cursor_hinge_height" == "row" then goto index 636;
   if "cursor_grip_height" == "row" then goto index 611;
   show serial_dialog "hanoi_space";
   goto index 663;
   if "cursor_value" == 0 then goto index 634;
   if "cursor_value" == 1 then goto index 632;
   if "cursor_value" == 2 then goto index 630;
   if "cursor_value" == 3 then goto index 628;
   if "cursor_value" == 4 then goto index 626;
   if "cursor_value" == 5 then goto index 624;
   if "cursor_value" == 6 then goto index 622;
   if "cursor_value" == 7 then goto index 620;
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 635;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 663;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 663;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 662;
   if "curr_plate" == 1 then goto index 660;
   if "curr_plate" == 2 then goto index 658;
   if "curr_plate" == 3 then goto index 656;
   if "curr_plate" == 4 then goto index 654;
   if "curr_plate" == 5 then goto index 652;
   if "curr_plate" == 6 then goto index 650;
   if "curr_plate" == 7 then goto index 648;
   goto index 663;
   show serial_dialog "hanoi_plate_7";
   goto index 663;
   show serial_dialog "hanoi_plate_6";
   goto index 663;
   show serial_dialog "hanoi_plate_5";
   goto index 663;
   show serial_dialog "hanoi_plate_4";
   goto index 663;
   show serial_dialog "hanoi_plate_3";
   goto index 663;
   show serial_dialog "hanoi_plate_2";
   goto index 663;
   show serial_dialog "hanoi_plate_1";
   goto index 663;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 706;
   if "cursor_pos" == "column" then goto index 673;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 705;
   if "cursor_hinge_height" == "row" then goto index 703;
   if "cursor_grip_height" == "row" then goto index 678;
   show serial_dialog "hanoi_space";
   goto index 730;
   if "cursor_value" == 0 then goto index 701;
   if "cursor_value" == 1 then goto index 699;
   if "cursor_value" == 2 then goto index 697;
   if "cursor_value" == 3 then goto index 695;
   if "cursor_value" == 4 then goto index 693;
   if "cursor_value" == 5 then goto index 691;
   if "cursor_value" == 6 then goto index 689;
   if "cursor_value" == 7 then goto index 687;
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 702;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 730;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 730;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 729;
   if "curr_plate" == 1 then goto index 727;
   if "curr_plate" == 2 then goto index 725;
   if "curr_plate" == 3 then goto index 723;
   if "curr_plate" == 4 then goto index 721;
   if "curr_plate" == 5 then goto index 719;
   if "curr_plate" == 6 then goto index 717;
   if "curr_plate" == 7 then goto index 715;
   goto index 730;
   show serial_dialog "hanoi_plate_7";
   goto index 730;
   show serial_dialog "hanoi_plate_6";
   goto index 730;
   show serial_dialog "hanoi_plate_5";
   goto index 730;
   show serial_dialog "hanoi_plate_4";
   goto index 730;
   show serial_dialog "hanoi_plate_3";
   goto index 730;
   show serial_dialog "hanoi_plate_2";
   goto index 730;
   show serial_dialog "hanoi_plate_1";
   goto index 730;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 768;
   if "cursor_pos" == "column" then goto index 735;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 767;
   if "cursor_hinge_height" == "row" then goto index 765;
   if "cursor_grip_height" == "row" then goto index 740;
   show serial_dialog "hanoi_space";
   goto index 792;
   if "cursor_value" == 0 then goto index 763;
   if "cursor_value" == 1 then goto index 761;
   if "cursor_value" == 2 then goto index 759;
   if "cursor_value" == 3 then goto index 757;
   if "cursor_value" == 4 then goto index 755;
   if "cursor_value" == 5 then goto index 753;
   if "cursor_value" == 6 then goto index 751;
   if "cursor_value" == 7 then goto index 749;
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 764;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 792;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 792;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 791;
   if "curr_plate" == 1 then goto index 789;
   if "curr_plate" == 2 then goto index 787;
   if "curr_plate" == 3 then goto index 785;
   if "curr_plate" == 4 then goto index 783;
   if "curr_plate" == 5 then goto index 781;
   if "curr_plate" == 6 then goto index 779;
   if "curr_plate" == 7 then goto index 777;
   goto index 792;
   show serial_dialog "hanoi_plate_7";
   goto index 792;
   show serial_dialog "hanoi_plate_6";
   goto index 792;
   show serial_dialog "hanoi_plate_5";
   goto index 792;
   show serial_dialog "hanoi_plate_4";
   goto index 792;
   show serial_dialog "hanoi_plate_3";
   goto index 792;
   show serial_dialog "hanoi_plate_2";
   goto index 792;
   show serial_dialog "hanoi_plate_1";
   goto index 792;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 830;
   if "cursor_pos" == "column" then goto index 797;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 829;
   if "cursor_hinge_height" == "row" then goto index 827;
   if "cursor_grip_height" == "row" then goto index 802;
   show serial_dialog "hanoi_space";
   goto index 854;
   if "cursor_value" == 0 then goto index 825;
   if "cursor_value" == 1 then goto index 823;
   if "cursor_value" == 2 then goto index 821;
   if "cursor_value" == 3 then goto index 819;
   if "cursor_value" == 4 then goto index 817;
   if "cursor_value" == 5 then goto index 815;
   if "cursor_value" == 6 then goto index 813;
   if "cursor_value" == 7 then goto index 811;
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 826;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 854;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 854;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 853;
   if "curr_plate" == 1 then goto index 851;
   if "curr_plate" == 2 then goto index 849;
   if "curr_plate" == 3 then goto index 847;
   if "curr_plate" == 4 then goto index 845;
   if "curr_plate" == 5 then goto index 843;
   if "curr_plate" == 6 then goto index 841;
   if "curr_plate" == 7 then goto index 839;
   goto index 854;
   show serial_dialog "hanoi_plate_7";
   goto index 854;
   show serial_dialog "hanoi_plate_6";
   goto index 854;
   show serial_dialog "hanoi_plate_5";
   goto index 854;
   show serial_dialog "hanoi_plate_4";
   goto index 854;
   show serial_dialog "hanoi_plate_3";
   goto index 854;
   show serial_dialog "hanoi_plate_2";
   goto index 854;
   show serial_dialog "hanoi_plate_1";
   goto index 854;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 897;
   if "cursor_pos" == "column" then goto index 864;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 896;
   if "cursor_hinge_height" == "row" then goto index 894;
   if "cursor_grip_height" == "row" then goto index 869;
   show serial_dialog "hanoi_space";
   goto index 921;
   if "cursor_value" == 0 then goto index 892;
   if "cursor_value" == 1 then goto index 890;
   if "cursor_value" == 2 then goto index 888;
   if "cursor_value" == 3 then goto index 886;
   if "cursor_value" == 4 then goto index 884;
   if "cursor_value" == 5 then goto index 882;
   if "cursor_value" == 6 then goto index 880;
   if "cursor_value" == 7 then goto index 878;
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 893;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 921;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 921;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 920;
   if "curr_plate" == 1 then goto index 918;
   if "curr_plate" == 2 then goto index 916;
   if "curr_plate" == 3 then goto index 914;
   if "curr_plate" == 4 then goto index 912;
   if "curr_plate" == 5 then goto index 910;
   if "curr_plate" == 6 then goto index 908;
   if "curr_plate" == 7 then goto index 906;
   goto index 921;
   show serial_dialog "hanoi_plate_7";
   goto index 921;
   show serial_dialog "hanoi_plate_6";
   goto index 921;
   show serial_dialog "hanoi_plate_5";
   goto index 921;
   show serial_dialog "hanoi_plate_4";
   goto index 921;
   show serial_dialog "hanoi_plate_3";
   goto index 921;
   show serial_dialog "hanoi_plate_2";
   goto index 921;
   show serial_dialog "hanoi_plate_1";
   goto index 921;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 959;
   if "cursor_pos" == "column" then goto index 926;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 958;
   if "cursor_hinge_height" == "row" then goto index 956;
   if "cursor_grip_height" == "row" then goto index 931;
   show serial_dialog "hanoi_space";
   goto index 983;
   if "cursor_value" == 0 then goto index 954;
   if "cursor_value" == 1 then goto index 952;
   if "cursor_value" == 2 then goto index 950;
   if "cursor_value" == 3 then goto index 948;
   if "cursor_value" == 4 then goto index 946;
   if "cursor_value" == 5 then goto index 944;
   if "cursor_value" == 6 then goto index 942;
   if "cursor_value" == 7 then goto index 940;
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 955;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 983;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 983;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 982;
   if "curr_plate" == 1 then goto index 980;
   if "curr_plate" == 2 then goto index 978;
   if "curr_plate" == 3 then goto index 976;
   if "curr_plate" == 4 then goto index 974;
   if "curr_plate" == 5 then goto index 972;
   if "curr_plate" == 6 then goto index 970;
   if "curr_plate" == 7 then goto index 968;
   goto index 983;
   show serial_dialog "hanoi_plate_7";
   goto index 983;
   show serial_dialog "hanoi_plate_6";
   goto index 983;
   show serial_dialog "hanoi_plate_5";
   goto index 983;
   show serial_dialog "hanoi_plate_4";
   goto index 983;
   show serial_dialog "hanoi_plate_3";
   goto index 983;
   show serial_dialog "hanoi_plate_2";
   goto index 983;
   show serial_dialog "hanoi_plate_1";
   goto index 983;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1021;
   if "cursor_pos" == "column" then goto index 988;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1020;
   if "cursor_hinge_height" == "row" then goto index 1018;
   if "cursor_grip_height" == "row" then goto index 993;
   show serial_dialog "hanoi_space";
   goto index 1045;
   if "cursor_value" == 0 then goto index 1016;
   if "cursor_value" == 1 then goto index 1014;
   if "cursor_value" == 2 then goto index 1012;
   if "cursor_value" == 3 then goto index 1010;
   if "cursor_value" == 4 then goto index 1008;
   if "cursor_value" == 5 then goto index 1006;
   if "cursor_value" == 6 then goto index 1004;
   if "cursor_value" == 7 then goto index 1002;
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1017;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1045;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1045;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1044;
   if "curr_plate" == 1 then goto index 1042;
   if "curr_plate" == 2 then goto index 1040;
   if "curr_plate" == 3 then goto index 1038;
   if "curr_plate" == 4 then goto index 1036;
   if "curr_plate" == 5 then goto index 1034;
   if "curr_plate" == 6 then goto index 1032;
   if "curr_plate" == 7 then goto index 1030;
   goto index 1045;
   show serial_dialog "hanoi_plate_7";
   goto index 1045;
   show serial_dialog "hanoi_plate_6";
   goto index 1045;
   show serial_dialog "hanoi_plate_5";
   goto index 1045;
   show serial_dialog "hanoi_plate_4";
   goto index 1045;
   show serial_dialog "hanoi_plate_3";
   goto index 1045;
   show serial_dialog "hanoi_plate_2";
   goto index 1045;
   show serial_dialog "hanoi_plate_1";
   goto index 1045;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1088;
   if "cursor_pos" == "column" then goto index 1055;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1087;
   if "cursor_hinge_height" == "row" then goto index 1085;
   if "cursor_grip_height" == "row" then goto index 1060;
   show serial_dialog "hanoi_space";
   goto index 1112;
   if "cursor_value" == 0 then goto index 1083;
   if "cursor_value" == 1 then goto index 1081;
   if "cursor_value" == 2 then goto index 1079;
   if "cursor_value" == 3 then goto index 1077;
   if "cursor_value" == 4 then goto index 1075;
   if "cursor_value" == 5 then goto index 1073;
   if "cursor_value" == 6 then goto index 1071;
   if "cursor_value" == 7 then goto index 1069;
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1084;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1112;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1112;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1111;
   if "curr_plate" == 1 then goto index 1109;
   if "curr_plate" == 2 then goto index 1107;
   if "curr_plate" == 3 then goto index 1105;
   if "curr_plate" == 4 then goto index 1103;
   if "curr_plate" == 5 then goto index 1101;
   if "curr_plate" == 6 then goto index 1099;
   if "curr_plate" == 7 then goto index 1097;
   goto index 1112;
   show serial_dialog "hanoi_plate_7";
   goto index 1112;
   show serial_dialog "hanoi_plate_6";
   goto index 1112;
   show serial_dialog "hanoi_plate_5";
   goto index 1112;
   show serial_dialog "hanoi_plate_4";
   goto index 1112;
   show serial_dialog "hanoi_plate_3";
   goto index 1112;
   show serial_dialog "hanoi_plate_2";
   goto index 1112;
   show serial_dialog "hanoi_plate_1";
   goto index 1112;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1150;
   if "cursor_pos" == "column" then goto index 1117;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1149;
   if "cursor_hinge_height" == "row" then goto index 1147;
   if "cursor_grip_height" == "row" then goto index 1122;
   show serial_dialog "hanoi_space";
   goto index 1174;
   if "cursor_value" == 0 then goto index 1145;
   if "cursor_value" == 1 then goto index 1143;
   if "cursor_value" == 2 then goto index 1141;
   if "cursor_value" == 3 then goto index 1139;
   if "cursor_value" == 4 then goto index 1137;
   if "cursor_value" == 5 then goto index 1135;
   if "cursor_value" == 6 then goto index 1133;
   if "cursor_value" == 7 then goto index 1131;
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1146;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1174;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1174;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1173;
   if "curr_plate" == 1 then goto index 1171;
   if "curr_plate" == 2 then goto index 1169;
   if "curr_plate" == 3 then goto index 1167;
   if "curr_plate" == 4 then goto index 1165;
   if "curr_plate" == 5 then goto index 1163;
   if "curr_plate" == 6 then goto index 1161;
   if "curr_plate" == 7 then goto index 1159;
   goto index 1174;
   show serial_dialog "hanoi_plate_7";
   goto index 1174;
   show serial_dialog "hanoi_plate_6";
   goto index 1174;
   show serial_dialog "hanoi_plate_5";
   goto index 1174;
   show serial_dialog "hanoi_plate_4";
   goto index 1174;
   show serial_dialog "hanoi_plate_3";
   goto index 1174;
   show serial_dialog "hanoi_plate_2";
   goto index 1174;
   show serial_dialog "hanoi_plate_1";
   goto index 1174;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1212;
   if "cursor_pos" == "column" then goto index 1179;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1211;
   if "cursor_hinge_height" == "row" then goto index 1209;
   if "cursor_grip_height" == "row" then goto index 1184;
   show serial_dialog "hanoi_space";
   goto index 1236;
   if "cursor_value" == 0 then goto index 1207;
   if "cursor_value" == 1 then goto index 1205;
   if "cursor_value" == 2 then goto index 1203;
   if "cursor_value" == 3 then goto index 1201;
   if "cursor_value" == 4 then goto index 1199;
   if "cursor_value" == 5 then goto index 1197;
   if "cursor_value" == 6 then goto index 1195;
   if "cursor_value" == 7 then goto index 1193;
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1208;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1236;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1236;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1235;
   if "curr_plate" == 1 then goto index 1233;
   if "curr_plate" == 2 then goto index 1231;
   if "curr_plate" == 3 then goto index 1229;
   if "curr_plate" == 4 then goto index 1227;
   if "curr_plate" == 5 then goto index 1225;
   if "curr_plate" == 6 then goto index 1223;
   if "curr_plate" == 7 then goto index 1221;
   goto index 1236;
   show serial_dialog "hanoi_plate_7";
   goto index 1236;
   show serial_dialog "hanoi_plate_6";
   goto index 1236;
   show serial_dialog "hanoi_plate_5";
   goto index 1236;
   show serial_dialog "hanoi_plate_4";
   goto index 1236;
   show serial_dialog "hanoi_plate_3";
   goto index 1236;
   show serial_dialog "hanoi_plate_2";
   goto index 1236;
   show serial_dialog "hanoi_plate_1";
   goto index 1236;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1279;
   if "cursor_pos" == "column" then goto index 1246;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1278;
   if "cursor_hinge_height" == "row" then goto index 1276;
   if "cursor_grip_height" == "row" then goto index 1251;
   show serial_dialog "hanoi_space";
   goto index 1303;
   if "cursor_value" == 0 then goto index 1274;
   if "cursor_value" == 1 then goto index 1272;
   if "cursor_value" == 2 then goto index 1270;
   if "cursor_value" == 3 then goto index 1268;
   if "cursor_value" == 4 then goto index 1266;
   if "cursor_value" == 5 then goto index 1264;
   if "cursor_value" == 6 then goto index 1262;
   if "cursor_value" == 7 then goto index 1260;
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1275;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1303;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1303;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1302;
   if "curr_plate" == 1 then goto index 1300;
   if "curr_plate" == 2 then goto index 1298;
   if "curr_plate" == 3 then goto index 1296;
   if "curr_plate" == 4 then goto index 1294;
   if "curr_plate" == 5 then goto index 1292;
   if "curr_plate" == 6 then goto index 1290;
   if "curr_plate" == 7 then goto index 1288;
   goto index 1303;
   show serial_dialog "hanoi_plate_7";
   goto index 1303;
   show serial_dialog "hanoi_plate_6";
   goto index 1303;
   show serial_dialog "hanoi_plate_5";
   goto index 1303;
   show serial_dialog "hanoi_plate_4";
   goto index 1303;
   show serial_dialog "hanoi_plate_3";
   goto index 1303;
   show serial_dialog "hanoi_plate_2";
   goto index 1303;
   show serial_dialog "hanoi_plate_1";
   goto index 1303;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1341;
   if "cursor_pos" == "column" then goto index 1308;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1340;
   if "cursor_hinge_height" == "row" then goto index 1338;
   if "cursor_grip_height" == "row" then goto index 1313;
   show serial_dialog "hanoi_space";
   goto index 1365;
   if "cursor_value" == 0 then goto index 1336;
   if "cursor_value" == 1 then goto index 1334;
   if "cursor_value" == 2 then goto index 1332;
   if "cursor_value" == 3 then goto index 1330;
   if "cursor_value" == 4 then goto index 1328;
   if "cursor_value" == 5 then goto index 1326;
   if "cursor_value" == 6 then goto index 1324;
   if "cursor_value" == 7 then goto index 1322;
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1337;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1365;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1365;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1364;
   if "curr_plate" == 1 then goto index 1362;
   if "curr_plate" == 2 then goto index 1360;
   if "curr_plate" == 3 then goto index 1358;
   if "curr_plate" == 4 then goto index 1356;
   if "curr_plate" == 5 then goto index 1354;
   if "curr_plate" == 6 then goto index 1352;
   if "curr_plate" == 7 then goto index 1350;
   goto index 1365;
   show serial_dialog "hanoi_plate_7";
   goto index 1365;
   show serial_dialog "hanoi_plate_6";
   goto index 1365;
   show serial_dialog "hanoi_plate_5";
   goto index 1365;
   show serial_dialog "hanoi_plate_4";
   goto index 1365;
   show serial_dialog "hanoi_plate_3";
   goto index 1365;
   show serial_dialog "hanoi_plate_2";
   goto index 1365;
   show serial_dialog "hanoi_plate_1";
   goto index 1365;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1403;
   if "cursor_pos" == "column" then goto index 1370;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1402;
   if "cursor_hinge_height" == "row" then goto index 1400;
   if "cursor_grip_height" == "row" then goto index 1375;
   show serial_dialog "hanoi_space";
   goto index 1427;
   if "cursor_value" == 0 then goto index 1398;
   if "cursor_value" == 1 then goto index 1396;
   if "cursor_value" == 2 then goto index 1394;
   if "cursor_value" == 3 then goto index 1392;
   if "cursor_value" == 4 then goto index 1390;
   if "cursor_value" == 5 then goto index 1388;
   if "cursor_value" == 6 then goto index 1386;
   if "cursor_value" == 7 then goto index 1384;
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1399;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1427;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1427;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1426;
   if "curr_plate" == 1 then goto index 1424;
   if "curr_plate" == 2 then goto index 1422;
   if "curr_plate" == 3 then goto index 1420;
   if "curr_plate" == 4 then goto index 1418;
   if "curr_plate" == 5 then goto index 1416;
   if "curr_plate" == 6 then goto index 1414;
   if "curr_plate" == 7 then goto index 1412;
   goto index 1427;
   show serial_dialog "hanoi_plate_7";
   goto index 1427;
   show serial_dialog "hanoi_plate_6";
   goto index 1427;
   show serial_dialog "hanoi_plate_5";
   goto index 1427;
   show serial_dialog "hanoi_plate_4";
   goto index 1427;
   show serial_dialog "hanoi_plate_3";
   goto index 1427;
   show serial_dialog "hanoi_plate_2";
   goto index 1427;
   show serial_dialog "hanoi_plate_1";
   goto index 1427;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1453;
   if "curr_plate" == 1 then goto index 1451;
   if "curr_plate" == 2 then goto index 1449;
   if "curr_plate" == 3 then goto index 1447;
   if "curr_plate" == 4 then goto index 1445;
   if "curr_plate" == 5 then goto index 1443;
   if "curr_plate" == 6 then goto index 1441;
   if "curr_plate" == 7 then goto index 1439;
   goto index 1454;
   show serial_dialog "hanoi_plate_7";
   goto index 1454;
   show serial_dialog "hanoi_plate_6";
   goto index 1454;
   show serial_dialog "hanoi_plate_5";
   goto index 1454;
   show serial_dialog "hanoi_plate_4";
   goto index 1454;
   show serial_dialog "hanoi_plate_3";
   goto index 1454;
   show serial_dialog "hanoi_plate_2";
   goto index 1454;
   show serial_dialog "hanoi_plate_1";
   goto index 1454;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1478;
   if "curr_plate" == 1 then goto index 1476;
   if "curr_plate" == 2 then goto index 1474;
   if "curr_plate" == 3 then goto index 1472;
   if "curr_plate" == 4 then goto index 1470;
   if "curr_plate" == 5 then goto index 1468;
   if "curr_plate" == 6 then goto index 1466;
   if "curr_plate" == 7 then goto index 1464;
   goto index 1479;
   show serial_dialog "hanoi_plate_7";
   goto index 1479;
   show serial_dialog "hanoi_plate_6";
   goto index 1479;
   show serial_dialog "hanoi_plate_5";
   goto index 1479;
   show serial_dialog "hanoi_plate_4";
   goto index 1479;
   show serial_dialog "hanoi_plate_3";
   goto index 1479;
   show serial_dialog "hanoi_plate_2";
   goto index 1479;
   show serial_dialog "hanoi_plate_1";
   goto index 1479;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1503;
   if "curr_plate" == 1 then goto index 1501;
   if "curr_plate" == 2 then goto index 1499;
   if "curr_plate" == 3 then goto index 1497;
   if "curr_plate" == 4 then goto index 1495;
   if "curr_plate" == 5 then goto index 1493;
   if "curr_plate" == 6 then goto index 1491;
   if "curr_plate" == 7 then goto index 1489;
   goto index 1504;
   show serial_dialog "hanoi_plate_7";
   goto index 1504;
   show serial_dialog "hanoi_plate_6";
   goto index 1504;
   show serial_dialog "hanoi_plate_5";
   goto index 1504;
   show serial_dialog "hanoi_plate_4";
   goto index 1504;
   show serial_dialog "hanoi_plate_3";
   goto index 1504;
   show serial_dialog "hanoi_plate_2";
   goto index 1504;
   show serial_dialog "hanoi_plate_1";
   goto index 1504;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1512;
   if "hanoi_draw_help" then goto index 1509;
   goto index 1548;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1548;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1526;
   goto index 1527;
   delete command "WIN";
   if !"hanoi_won" then goto index 1546;
   if !"ch2-carrying-plate" then goto index 1531;
   if !"ch2-installed-plate" then goto index 1531;
   goto index 1547;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1535;
   goto index 1536;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1544;
   if "hanoi_move_count" == 69 then goto index 1542;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1545;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1545;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1547;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
}

"hanoi_win" {
   "hanoi_won" = true;
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 12;
   goto index 13;
   delete command "WIN";
   goto "draw_hanoi";
}

"on_load-ch2-castle-34" {
   "ch2-in-room" = 34;
   show serial_dialog "spacer";
   if !"ch2-seen-room-34" then goto index 5;
   show serial_dialog "ch2-castle-34.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-34.mgs-XX";
   "ch2-seen-room-34" = true;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
}

"on_tick-ch2-castle-34" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 7;
   warp_state = "walk_from-northeast";
   if "ch2-storyflag-round" >= 5 then goto index 6;
   load map "ch2-castle-32";
   goto index 7;
   load map "ch2-castle-32-doorless";
}

"on_go-castle-34-south" {
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 9;
   load map "ch2-castle-32";
   goto index 10;
   load map "ch2-castle-32-doorless";
}

"ch2-interact-pantryfridge" {
   if !"ch2-want-cactuscooler" then goto index 5;
   if "ch2-carrying-cactuscooler" then goto index 5;
   if "ch2-cactuscooler-delivered" then goto index 5;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 6;
   show dialog "ch2-castle-34.mgs-XX";
}

"ch2-interact-pantryshelf" {
   if !"ch2-want-cactuscooler" then goto index 5;
   if "ch2-carrying-cactuscooler" then goto index 5;
   if "ch2-cactuscooler-delivered" then goto index 5;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 6;
   show dialog "ch2-castle-34.mgs-XX";
}

"ch2-interact-dishshelf" {
   if "ch2-jukebox-backstory" then goto index 22;
   if "ch2-storyflag-round" < 2 then goto index 22;
   show dialog "ch2-castle-34.mgs-XX";
   pause entity "Clara" on_tick;
   entity "Clara" direction = player;
   show dialog "ch2-castle-34.mgs-XX";
   pause entity "Clara" on_tick;
   entity "Clara" direction = player;
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "PlateMover90";
   show dialog "ch2-castle-34.mgs-XX";
   if "ch2-plate-firstlook" then goto index 16;
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-plate-firstlook" = true;
   goto index 17;
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-jukebox-backstory" = true;
   unpause entity "Clara" on_tick;
   goto index 23;
   show dialog "ch2-castle-34.mgs-XX";
}

"interact-ch2-clara" {
   if "ch2-storyflag-round" < 2 then goto index 21;
   if "ch2-jukebox-backstory" then goto index 19;
   pause entity "Clara" on_tick;
   entity "Clara" direction = player;
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "PlateMover90";
   show dialog "ch2-castle-34.mgs-XX";
   if "ch2-plate-firstlook" then goto index 12;
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-plate-firstlook" = true;
   goto index 13;
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-jukebox-backstory" = true;
   unpause entity "Clara" on_tick;
   "ch2-jukebox-backstory" = true;
   goto index 63;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 63;
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 35;
   if self direction == "east" then goto index 33;
   if self direction == "south" then goto index 31;
   if self direction == "west" then goto index 29;
   goto index 36;
   "tempvar" = 3;
   goto index 36;
   "tempvar" = 2;
   goto index 36;
   "tempvar" = 1;
   goto index 36;
   "tempvar" = 0;
   self direction = player;
   if !"ch2-clara-backstory" then goto index 39;
   goto index 40;
   show dialog "ch2-castle-34.mgs-XX";
   if !"ch2-want-cactuscooler" then goto index 45;
   if "ch2-carrying-cactuscooler" then goto index 45;
   if "ch2-cactuscooler-delivered" then goto index 45;
   "ch2-clara-backstory" = true;
   show dialog "ch2-clara-soda";
   if !"ch2-clara-backstory" then goto index 48;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 49;
   "ch2-clara-backstory" = true;
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 62;
   if "tempvar" == 1 then goto index 60;
   if "tempvar" == 2 then goto index 58;
   if "tempvar" == 3 then goto index 56;
   goto index 63;
   self direction = "west";
   goto index 63;
   self direction = "south";
   goto index 63;
   self direction = "east";
   goto index 63;
   self direction = "north";
}

"ch2-touch-plate" {
   if "ch2-storyflag-round" < 2 then goto index 1583;
   if !"ch2-jukebox-backstory" then goto index 1572;
   if "ch2-carrying-plate" then goto index 1571;
   if "ch2-installed-plate" then goto index 1571;
   show dialog "ch2-castle-34.mgs-XX";
   player_control = false;
   if !"hanoi_init_done" then goto index 9;
   if "hanoi_won" then goto index 9;
   goto index 38;
   "cursor_pos" = 1;
   "cursor_value" = 0;
   "array1_7" = 0;
   "array1_6" = 1;
   "array1_5" = 2;
   "array1_4" = 3;
   "array1_3" = 4;
   "array1_2" = 5;
   "array1_1" = 6;
   "array1_length" = 6;
   "array2_7" = 0;
   "array2_6" = 0;
   "array2_5" = 0;
   "array2_4" = 0;
   "array2_3" = 0;
   "array2_2" = 0;
   "array2_1" = 0;
   "array2_length" = 0;
   "array3_7" = 0;
   "array3_6" = 0;
   "array3_5" = 0;
   "array3_4" = 0;
   "array3_3" = 0;
   "array3_2" = 0;
   "array3_1" = 0;
   "array3_length" = 0;
   "hanoi_move_count" = 0;
   "hanoi_init_done" = true;
   "hanoi_won" = false;
   command "1" = "hanoi_move_1";
   command "2" = "hanoi_move_2";
   command "3" = "hanoi_move_3";
   command "T" = "hanoi_help";
   command "TIPS" = "hanoi_help";
   command "R" = "hanoi_reset";
   command "RESET" = "hanoi_reset";
   command "Q" = "hanoi_quit_from_terminal";
   command "QUIT" = "hanoi_quit_from_terminal";
   if debug_mode then goto index 49;
   goto index 50;
   command "WIN" = "hanoi_win";
   light LED_USB = true;
   entity "Lights" on_tick = "null_script";
   if "cursor_pos" == 1 then goto index 60;
   if "cursor_pos" == 2 then goto index 58;
   if "cursor_pos" == 3 then goto index 56;
   goto index 61;
   "cursor_grip_height" = "array3_length";
   goto index 61;
   "cursor_grip_height" = "array2_length";
   goto index 61;
   "cursor_grip_height" = "array1_length";
   "cursor_grip_height" += 2;
   "cursor_hinge_height" = "cursor_grip_height";
   "cursor_hinge_height" += 1;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "curr_plate" = 0;
   "row" = 11;
   if "hanoi_won" then goto index 77;
   "column" = 1;
   if "column" <= 3 then goto index 71;
   goto index 86;
   if "cursor_pos" == "column" then goto index 74;
   show serial_dialog "hanoi_space";
   goto index 75;
   show serial_dialog "hanoi_cursor_arm";
   "column" += 1;
   goto index 69;
   if "cursor_pos" == 1 then goto index 85;
   if "cursor_pos" == 2 then goto index 83;
   if "cursor_pos" == 3 then goto index 81;
   goto index 86;
   show serial_dialog "hanoi_won_message3a";
   goto index 86;
   show serial_dialog "hanoi_won_message2a";
   goto index 86;
   show serial_dialog "hanoi_won_message1a";
   show serial_dialog "newline";
   "row" = 10;
   if "hanoi_warning_size" then goto index 167;
   if "hanoi_won" then goto index 155;
   "column" = 1;
   if "column" <= 3 then goto index 93;
   goto index 169;
   if "curr_plate" != 0 then goto index 129;
   if "cursor_pos" == "column" then goto index 96;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 128;
   if "cursor_hinge_height" == "row" then goto index 126;
   if "cursor_grip_height" == "row" then goto index 101;
   show serial_dialog "hanoi_space";
   goto index 153;
   if "cursor_value" == 0 then goto index 124;
   if "cursor_value" == 1 then goto index 122;
   if "cursor_value" == 2 then goto index 120;
   if "cursor_value" == 3 then goto index 118;
   if "cursor_value" == 4 then goto index 116;
   if "cursor_value" == 5 then goto index 114;
   if "cursor_value" == 6 then goto index 112;
   if "cursor_value" == 7 then goto index 110;
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 125;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 153;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 153;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 152;
   if "curr_plate" == 1 then goto index 150;
   if "curr_plate" == 2 then goto index 148;
   if "curr_plate" == 3 then goto index 146;
   if "curr_plate" == 4 then goto index 144;
   if "curr_plate" == 5 then goto index 142;
   if "curr_plate" == 6 then goto index 140;
   if "curr_plate" == 7 then goto index 138;
   goto index 153;
   show serial_dialog "hanoi_plate_7";
   goto index 153;
   show serial_dialog "hanoi_plate_6";
   goto index 153;
   show serial_dialog "hanoi_plate_5";
   goto index 153;
   show serial_dialog "hanoi_plate_4";
   goto index 153;
   show serial_dialog "hanoi_plate_3";
   goto index 153;
   show serial_dialog "hanoi_plate_2";
   goto index 153;
   show serial_dialog "hanoi_plate_1";
   goto index 153;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 91;
   if "cursor_pos" == 1 then goto index 166;
   if "cursor_pos" == 2 then goto index 165;
   if "cursor_pos" == 3 then goto index 158;
   if "hanoi_move_count" < 100 then goto index 164;
   if "hanoi_move_count" < 1000 then goto index 162;
   show serial_dialog "hanoi_won_message3b4";
   goto index 167;
   show serial_dialog "hanoi_won_message3b3";
   goto index 167;
   show serial_dialog "hanoi_won_message3b2";
   show serial_dialog "hanoi_won_message2b";
   show serial_dialog "hanoi_won_message1b";
   show serial_dialog "hanoi_size_warning";
   "hanoi_warning_size" = false;
   show serial_dialog "newline";
   "row" = 9;
   "column" = 1;
   if "column" <= 3 then goto index 174;
   goto index 236;
   if "curr_plate" != 0 then goto index 210;
   if "cursor_pos" == "column" then goto index 177;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 209;
   if "cursor_hinge_height" == "row" then goto index 207;
   if "cursor_grip_height" == "row" then goto index 182;
   show serial_dialog "hanoi_space";
   goto index 234;
   if "cursor_value" == 0 then goto index 205;
   if "cursor_value" == 1 then goto index 203;
   if "cursor_value" == 2 then goto index 201;
   if "cursor_value" == 3 then goto index 199;
   if "cursor_value" == 4 then goto index 197;
   if "cursor_value" == 5 then goto index 195;
   if "cursor_value" == 6 then goto index 193;
   if "cursor_value" == 7 then goto index 191;
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 206;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 234;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 234;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 233;
   if "curr_plate" == 1 then goto index 231;
   if "curr_plate" == 2 then goto index 229;
   if "curr_plate" == 3 then goto index 227;
   if "curr_plate" == 4 then goto index 225;
   if "curr_plate" == 5 then goto index 223;
   if "curr_plate" == 6 then goto index 221;
   if "curr_plate" == 7 then goto index 219;
   goto index 234;
   show serial_dialog "hanoi_plate_7";
   goto index 234;
   show serial_dialog "hanoi_plate_6";
   goto index 234;
   show serial_dialog "hanoi_plate_5";
   goto index 234;
   show serial_dialog "hanoi_plate_4";
   goto index 234;
   show serial_dialog "hanoi_plate_3";
   goto index 234;
   show serial_dialog "hanoi_plate_2";
   goto index 234;
   show serial_dialog "hanoi_plate_1";
   goto index 234;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 172;
   show serial_dialog "newline";
   "row" = 8;
   "column" = 1;
   if "column" <= 3 then goto index 241;
   goto index 303;
   if "curr_plate" != 0 then goto index 277;
   if "cursor_pos" == "column" then goto index 244;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 276;
   if "cursor_hinge_height" == "row" then goto index 274;
   if "cursor_grip_height" == "row" then goto index 249;
   show serial_dialog "hanoi_space";
   goto index 301;
   if "cursor_value" == 0 then goto index 272;
   if "cursor_value" == 1 then goto index 270;
   if "cursor_value" == 2 then goto index 268;
   if "cursor_value" == 3 then goto index 266;
   if "cursor_value" == 4 then goto index 264;
   if "cursor_value" == 5 then goto index 262;
   if "cursor_value" == 6 then goto index 260;
   if "cursor_value" == 7 then goto index 258;
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 273;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 301;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 301;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 300;
   if "curr_plate" == 1 then goto index 298;
   if "curr_plate" == 2 then goto index 296;
   if "curr_plate" == 3 then goto index 294;
   if "curr_plate" == 4 then goto index 292;
   if "curr_plate" == 5 then goto index 290;
   if "curr_plate" == 6 then goto index 288;
   if "curr_plate" == 7 then goto index 286;
   goto index 301;
   show serial_dialog "hanoi_plate_7";
   goto index 301;
   show serial_dialog "hanoi_plate_6";
   goto index 301;
   show serial_dialog "hanoi_plate_5";
   goto index 301;
   show serial_dialog "hanoi_plate_4";
   goto index 301;
   show serial_dialog "hanoi_plate_3";
   goto index 301;
   show serial_dialog "hanoi_plate_2";
   goto index 301;
   show serial_dialog "hanoi_plate_1";
   goto index 301;
   show serial_dialog "hanoi_space";
   "column" += 1;
   goto index 239;
   show serial_dialog "newline";
   "row" = 7;
   "plate1" = "array1_7";
   "plate2" = "array2_7";
   "plate3" = "array3_7";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 346;
   if "cursor_pos" == "column" then goto index 313;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 345;
   if "cursor_hinge_height" == "row" then goto index 343;
   if "cursor_grip_height" == "row" then goto index 318;
   show serial_dialog "hanoi_space";
   goto index 370;
   if "cursor_value" == 0 then goto index 341;
   if "cursor_value" == 1 then goto index 339;
   if "cursor_value" == 2 then goto index 337;
   if "cursor_value" == 3 then goto index 335;
   if "cursor_value" == 4 then goto index 333;
   if "cursor_value" == 5 then goto index 331;
   if "cursor_value" == 6 then goto index 329;
   if "cursor_value" == 7 then goto index 327;
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 342;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 370;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 370;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 369;
   if "curr_plate" == 1 then goto index 367;
   if "curr_plate" == 2 then goto index 365;
   if "curr_plate" == 3 then goto index 363;
   if "curr_plate" == 4 then goto index 361;
   if "curr_plate" == 5 then goto index 359;
   if "curr_plate" == 6 then goto index 357;
   if "curr_plate" == 7 then goto index 355;
   goto index 370;
   show serial_dialog "hanoi_plate_7";
   goto index 370;
   show serial_dialog "hanoi_plate_6";
   goto index 370;
   show serial_dialog "hanoi_plate_5";
   goto index 370;
   show serial_dialog "hanoi_plate_4";
   goto index 370;
   show serial_dialog "hanoi_plate_3";
   goto index 370;
   show serial_dialog "hanoi_plate_2";
   goto index 370;
   show serial_dialog "hanoi_plate_1";
   goto index 370;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 408;
   if "cursor_pos" == "column" then goto index 375;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 407;
   if "cursor_hinge_height" == "row" then goto index 405;
   if "cursor_grip_height" == "row" then goto index 380;
   show serial_dialog "hanoi_space";
   goto index 432;
   if "cursor_value" == 0 then goto index 403;
   if "cursor_value" == 1 then goto index 401;
   if "cursor_value" == 2 then goto index 399;
   if "cursor_value" == 3 then goto index 397;
   if "cursor_value" == 4 then goto index 395;
   if "cursor_value" == 5 then goto index 393;
   if "cursor_value" == 6 then goto index 391;
   if "cursor_value" == 7 then goto index 389;
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 404;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 432;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 432;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 431;
   if "curr_plate" == 1 then goto index 429;
   if "curr_plate" == 2 then goto index 427;
   if "curr_plate" == 3 then goto index 425;
   if "curr_plate" == 4 then goto index 423;
   if "curr_plate" == 5 then goto index 421;
   if "curr_plate" == 6 then goto index 419;
   if "curr_plate" == 7 then goto index 417;
   goto index 432;
   show serial_dialog "hanoi_plate_7";
   goto index 432;
   show serial_dialog "hanoi_plate_6";
   goto index 432;
   show serial_dialog "hanoi_plate_5";
   goto index 432;
   show serial_dialog "hanoi_plate_4";
   goto index 432;
   show serial_dialog "hanoi_plate_3";
   goto index 432;
   show serial_dialog "hanoi_plate_2";
   goto index 432;
   show serial_dialog "hanoi_plate_1";
   goto index 432;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 470;
   if "cursor_pos" == "column" then goto index 437;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 469;
   if "cursor_hinge_height" == "row" then goto index 467;
   if "cursor_grip_height" == "row" then goto index 442;
   show serial_dialog "hanoi_space";
   goto index 494;
   if "cursor_value" == 0 then goto index 465;
   if "cursor_value" == 1 then goto index 463;
   if "cursor_value" == 2 then goto index 461;
   if "cursor_value" == 3 then goto index 459;
   if "cursor_value" == 4 then goto index 457;
   if "cursor_value" == 5 then goto index 455;
   if "cursor_value" == 6 then goto index 453;
   if "cursor_value" == 7 then goto index 451;
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 466;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 494;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 494;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 493;
   if "curr_plate" == 1 then goto index 491;
   if "curr_plate" == 2 then goto index 489;
   if "curr_plate" == 3 then goto index 487;
   if "curr_plate" == 4 then goto index 485;
   if "curr_plate" == 5 then goto index 483;
   if "curr_plate" == 6 then goto index 481;
   if "curr_plate" == 7 then goto index 479;
   goto index 494;
   show serial_dialog "hanoi_plate_7";
   goto index 494;
   show serial_dialog "hanoi_plate_6";
   goto index 494;
   show serial_dialog "hanoi_plate_5";
   goto index 494;
   show serial_dialog "hanoi_plate_4";
   goto index 494;
   show serial_dialog "hanoi_plate_3";
   goto index 494;
   show serial_dialog "hanoi_plate_2";
   goto index 494;
   show serial_dialog "hanoi_plate_1";
   goto index 494;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 6;
   "plate1" = "array1_6";
   "plate2" = "array2_6";
   "plate3" = "array3_6";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 537;
   if "cursor_pos" == "column" then goto index 504;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 536;
   if "cursor_hinge_height" == "row" then goto index 534;
   if "cursor_grip_height" == "row" then goto index 509;
   show serial_dialog "hanoi_space";
   goto index 561;
   if "cursor_value" == 0 then goto index 532;
   if "cursor_value" == 1 then goto index 530;
   if "cursor_value" == 2 then goto index 528;
   if "cursor_value" == 3 then goto index 526;
   if "cursor_value" == 4 then goto index 524;
   if "cursor_value" == 5 then goto index 522;
   if "cursor_value" == 6 then goto index 520;
   if "cursor_value" == 7 then goto index 518;
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 533;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 561;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 561;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 560;
   if "curr_plate" == 1 then goto index 558;
   if "curr_plate" == 2 then goto index 556;
   if "curr_plate" == 3 then goto index 554;
   if "curr_plate" == 4 then goto index 552;
   if "curr_plate" == 5 then goto index 550;
   if "curr_plate" == 6 then goto index 548;
   if "curr_plate" == 7 then goto index 546;
   goto index 561;
   show serial_dialog "hanoi_plate_7";
   goto index 561;
   show serial_dialog "hanoi_plate_6";
   goto index 561;
   show serial_dialog "hanoi_plate_5";
   goto index 561;
   show serial_dialog "hanoi_plate_4";
   goto index 561;
   show serial_dialog "hanoi_plate_3";
   goto index 561;
   show serial_dialog "hanoi_plate_2";
   goto index 561;
   show serial_dialog "hanoi_plate_1";
   goto index 561;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 599;
   if "cursor_pos" == "column" then goto index 566;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 598;
   if "cursor_hinge_height" == "row" then goto index 596;
   if "cursor_grip_height" == "row" then goto index 571;
   show serial_dialog "hanoi_space";
   goto index 623;
   if "cursor_value" == 0 then goto index 594;
   if "cursor_value" == 1 then goto index 592;
   if "cursor_value" == 2 then goto index 590;
   if "cursor_value" == 3 then goto index 588;
   if "cursor_value" == 4 then goto index 586;
   if "cursor_value" == 5 then goto index 584;
   if "cursor_value" == 6 then goto index 582;
   if "cursor_value" == 7 then goto index 580;
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 595;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 623;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 623;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 622;
   if "curr_plate" == 1 then goto index 620;
   if "curr_plate" == 2 then goto index 618;
   if "curr_plate" == 3 then goto index 616;
   if "curr_plate" == 4 then goto index 614;
   if "curr_plate" == 5 then goto index 612;
   if "curr_plate" == 6 then goto index 610;
   if "curr_plate" == 7 then goto index 608;
   goto index 623;
   show serial_dialog "hanoi_plate_7";
   goto index 623;
   show serial_dialog "hanoi_plate_6";
   goto index 623;
   show serial_dialog "hanoi_plate_5";
   goto index 623;
   show serial_dialog "hanoi_plate_4";
   goto index 623;
   show serial_dialog "hanoi_plate_3";
   goto index 623;
   show serial_dialog "hanoi_plate_2";
   goto index 623;
   show serial_dialog "hanoi_plate_1";
   goto index 623;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 661;
   if "cursor_pos" == "column" then goto index 628;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 660;
   if "cursor_hinge_height" == "row" then goto index 658;
   if "cursor_grip_height" == "row" then goto index 633;
   show serial_dialog "hanoi_space";
   goto index 685;
   if "cursor_value" == 0 then goto index 656;
   if "cursor_value" == 1 then goto index 654;
   if "cursor_value" == 2 then goto index 652;
   if "cursor_value" == 3 then goto index 650;
   if "cursor_value" == 4 then goto index 648;
   if "cursor_value" == 5 then goto index 646;
   if "cursor_value" == 6 then goto index 644;
   if "cursor_value" == 7 then goto index 642;
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 657;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 685;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 685;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 684;
   if "curr_plate" == 1 then goto index 682;
   if "curr_plate" == 2 then goto index 680;
   if "curr_plate" == 3 then goto index 678;
   if "curr_plate" == 4 then goto index 676;
   if "curr_plate" == 5 then goto index 674;
   if "curr_plate" == 6 then goto index 672;
   if "curr_plate" == 7 then goto index 670;
   goto index 685;
   show serial_dialog "hanoi_plate_7";
   goto index 685;
   show serial_dialog "hanoi_plate_6";
   goto index 685;
   show serial_dialog "hanoi_plate_5";
   goto index 685;
   show serial_dialog "hanoi_plate_4";
   goto index 685;
   show serial_dialog "hanoi_plate_3";
   goto index 685;
   show serial_dialog "hanoi_plate_2";
   goto index 685;
   show serial_dialog "hanoi_plate_1";
   goto index 685;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 5;
   "plate1" = "array1_5";
   "plate2" = "array2_5";
   "plate3" = "array3_5";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 728;
   if "cursor_pos" == "column" then goto index 695;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 727;
   if "cursor_hinge_height" == "row" then goto index 725;
   if "cursor_grip_height" == "row" then goto index 700;
   show serial_dialog "hanoi_space";
   goto index 752;
   if "cursor_value" == 0 then goto index 723;
   if "cursor_value" == 1 then goto index 721;
   if "cursor_value" == 2 then goto index 719;
   if "cursor_value" == 3 then goto index 717;
   if "cursor_value" == 4 then goto index 715;
   if "cursor_value" == 5 then goto index 713;
   if "cursor_value" == 6 then goto index 711;
   if "cursor_value" == 7 then goto index 709;
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 724;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 752;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 752;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 751;
   if "curr_plate" == 1 then goto index 749;
   if "curr_plate" == 2 then goto index 747;
   if "curr_plate" == 3 then goto index 745;
   if "curr_plate" == 4 then goto index 743;
   if "curr_plate" == 5 then goto index 741;
   if "curr_plate" == 6 then goto index 739;
   if "curr_plate" == 7 then goto index 737;
   goto index 752;
   show serial_dialog "hanoi_plate_7";
   goto index 752;
   show serial_dialog "hanoi_plate_6";
   goto index 752;
   show serial_dialog "hanoi_plate_5";
   goto index 752;
   show serial_dialog "hanoi_plate_4";
   goto index 752;
   show serial_dialog "hanoi_plate_3";
   goto index 752;
   show serial_dialog "hanoi_plate_2";
   goto index 752;
   show serial_dialog "hanoi_plate_1";
   goto index 752;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 790;
   if "cursor_pos" == "column" then goto index 757;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 789;
   if "cursor_hinge_height" == "row" then goto index 787;
   if "cursor_grip_height" == "row" then goto index 762;
   show serial_dialog "hanoi_space";
   goto index 814;
   if "cursor_value" == 0 then goto index 785;
   if "cursor_value" == 1 then goto index 783;
   if "cursor_value" == 2 then goto index 781;
   if "cursor_value" == 3 then goto index 779;
   if "cursor_value" == 4 then goto index 777;
   if "cursor_value" == 5 then goto index 775;
   if "cursor_value" == 6 then goto index 773;
   if "cursor_value" == 7 then goto index 771;
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 786;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 814;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 814;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 813;
   if "curr_plate" == 1 then goto index 811;
   if "curr_plate" == 2 then goto index 809;
   if "curr_plate" == 3 then goto index 807;
   if "curr_plate" == 4 then goto index 805;
   if "curr_plate" == 5 then goto index 803;
   if "curr_plate" == 6 then goto index 801;
   if "curr_plate" == 7 then goto index 799;
   goto index 814;
   show serial_dialog "hanoi_plate_7";
   goto index 814;
   show serial_dialog "hanoi_plate_6";
   goto index 814;
   show serial_dialog "hanoi_plate_5";
   goto index 814;
   show serial_dialog "hanoi_plate_4";
   goto index 814;
   show serial_dialog "hanoi_plate_3";
   goto index 814;
   show serial_dialog "hanoi_plate_2";
   goto index 814;
   show serial_dialog "hanoi_plate_1";
   goto index 814;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 852;
   if "cursor_pos" == "column" then goto index 819;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 851;
   if "cursor_hinge_height" == "row" then goto index 849;
   if "cursor_grip_height" == "row" then goto index 824;
   show serial_dialog "hanoi_space";
   goto index 876;
   if "cursor_value" == 0 then goto index 847;
   if "cursor_value" == 1 then goto index 845;
   if "cursor_value" == 2 then goto index 843;
   if "cursor_value" == 3 then goto index 841;
   if "cursor_value" == 4 then goto index 839;
   if "cursor_value" == 5 then goto index 837;
   if "cursor_value" == 6 then goto index 835;
   if "cursor_value" == 7 then goto index 833;
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 848;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 876;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 876;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 875;
   if "curr_plate" == 1 then goto index 873;
   if "curr_plate" == 2 then goto index 871;
   if "curr_plate" == 3 then goto index 869;
   if "curr_plate" == 4 then goto index 867;
   if "curr_plate" == 5 then goto index 865;
   if "curr_plate" == 6 then goto index 863;
   if "curr_plate" == 7 then goto index 861;
   goto index 876;
   show serial_dialog "hanoi_plate_7";
   goto index 876;
   show serial_dialog "hanoi_plate_6";
   goto index 876;
   show serial_dialog "hanoi_plate_5";
   goto index 876;
   show serial_dialog "hanoi_plate_4";
   goto index 876;
   show serial_dialog "hanoi_plate_3";
   goto index 876;
   show serial_dialog "hanoi_plate_2";
   goto index 876;
   show serial_dialog "hanoi_plate_1";
   goto index 876;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 4;
   "plate1" = "array1_4";
   "plate2" = "array2_4";
   "plate3" = "array3_4";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 919;
   if "cursor_pos" == "column" then goto index 886;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 918;
   if "cursor_hinge_height" == "row" then goto index 916;
   if "cursor_grip_height" == "row" then goto index 891;
   show serial_dialog "hanoi_space";
   goto index 943;
   if "cursor_value" == 0 then goto index 914;
   if "cursor_value" == 1 then goto index 912;
   if "cursor_value" == 2 then goto index 910;
   if "cursor_value" == 3 then goto index 908;
   if "cursor_value" == 4 then goto index 906;
   if "cursor_value" == 5 then goto index 904;
   if "cursor_value" == 6 then goto index 902;
   if "cursor_value" == 7 then goto index 900;
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 915;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 943;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 943;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 942;
   if "curr_plate" == 1 then goto index 940;
   if "curr_plate" == 2 then goto index 938;
   if "curr_plate" == 3 then goto index 936;
   if "curr_plate" == 4 then goto index 934;
   if "curr_plate" == 5 then goto index 932;
   if "curr_plate" == 6 then goto index 930;
   if "curr_plate" == 7 then goto index 928;
   goto index 943;
   show serial_dialog "hanoi_plate_7";
   goto index 943;
   show serial_dialog "hanoi_plate_6";
   goto index 943;
   show serial_dialog "hanoi_plate_5";
   goto index 943;
   show serial_dialog "hanoi_plate_4";
   goto index 943;
   show serial_dialog "hanoi_plate_3";
   goto index 943;
   show serial_dialog "hanoi_plate_2";
   goto index 943;
   show serial_dialog "hanoi_plate_1";
   goto index 943;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 981;
   if "cursor_pos" == "column" then goto index 948;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 980;
   if "cursor_hinge_height" == "row" then goto index 978;
   if "cursor_grip_height" == "row" then goto index 953;
   show serial_dialog "hanoi_space";
   goto index 1005;
   if "cursor_value" == 0 then goto index 976;
   if "cursor_value" == 1 then goto index 974;
   if "cursor_value" == 2 then goto index 972;
   if "cursor_value" == 3 then goto index 970;
   if "cursor_value" == 4 then goto index 968;
   if "cursor_value" == 5 then goto index 966;
   if "cursor_value" == 6 then goto index 964;
   if "cursor_value" == 7 then goto index 962;
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 977;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1005;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1005;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1004;
   if "curr_plate" == 1 then goto index 1002;
   if "curr_plate" == 2 then goto index 1000;
   if "curr_plate" == 3 then goto index 998;
   if "curr_plate" == 4 then goto index 996;
   if "curr_plate" == 5 then goto index 994;
   if "curr_plate" == 6 then goto index 992;
   if "curr_plate" == 7 then goto index 990;
   goto index 1005;
   show serial_dialog "hanoi_plate_7";
   goto index 1005;
   show serial_dialog "hanoi_plate_6";
   goto index 1005;
   show serial_dialog "hanoi_plate_5";
   goto index 1005;
   show serial_dialog "hanoi_plate_4";
   goto index 1005;
   show serial_dialog "hanoi_plate_3";
   goto index 1005;
   show serial_dialog "hanoi_plate_2";
   goto index 1005;
   show serial_dialog "hanoi_plate_1";
   goto index 1005;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1043;
   if "cursor_pos" == "column" then goto index 1010;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1042;
   if "cursor_hinge_height" == "row" then goto index 1040;
   if "cursor_grip_height" == "row" then goto index 1015;
   show serial_dialog "hanoi_space";
   goto index 1067;
   if "cursor_value" == 0 then goto index 1038;
   if "cursor_value" == 1 then goto index 1036;
   if "cursor_value" == 2 then goto index 1034;
   if "cursor_value" == 3 then goto index 1032;
   if "cursor_value" == 4 then goto index 1030;
   if "cursor_value" == 5 then goto index 1028;
   if "cursor_value" == 6 then goto index 1026;
   if "cursor_value" == 7 then goto index 1024;
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1039;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1067;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1067;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1066;
   if "curr_plate" == 1 then goto index 1064;
   if "curr_plate" == 2 then goto index 1062;
   if "curr_plate" == 3 then goto index 1060;
   if "curr_plate" == 4 then goto index 1058;
   if "curr_plate" == 5 then goto index 1056;
   if "curr_plate" == 6 then goto index 1054;
   if "curr_plate" == 7 then goto index 1052;
   goto index 1067;
   show serial_dialog "hanoi_plate_7";
   goto index 1067;
   show serial_dialog "hanoi_plate_6";
   goto index 1067;
   show serial_dialog "hanoi_plate_5";
   goto index 1067;
   show serial_dialog "hanoi_plate_4";
   goto index 1067;
   show serial_dialog "hanoi_plate_3";
   goto index 1067;
   show serial_dialog "hanoi_plate_2";
   goto index 1067;
   show serial_dialog "hanoi_plate_1";
   goto index 1067;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 3;
   "plate1" = "array1_3";
   "plate2" = "array2_3";
   "plate3" = "array3_3";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1110;
   if "cursor_pos" == "column" then goto index 1077;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1109;
   if "cursor_hinge_height" == "row" then goto index 1107;
   if "cursor_grip_height" == "row" then goto index 1082;
   show serial_dialog "hanoi_space";
   goto index 1134;
   if "cursor_value" == 0 then goto index 1105;
   if "cursor_value" == 1 then goto index 1103;
   if "cursor_value" == 2 then goto index 1101;
   if "cursor_value" == 3 then goto index 1099;
   if "cursor_value" == 4 then goto index 1097;
   if "cursor_value" == 5 then goto index 1095;
   if "cursor_value" == 6 then goto index 1093;
   if "cursor_value" == 7 then goto index 1091;
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1106;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1134;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1134;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1133;
   if "curr_plate" == 1 then goto index 1131;
   if "curr_plate" == 2 then goto index 1129;
   if "curr_plate" == 3 then goto index 1127;
   if "curr_plate" == 4 then goto index 1125;
   if "curr_plate" == 5 then goto index 1123;
   if "curr_plate" == 6 then goto index 1121;
   if "curr_plate" == 7 then goto index 1119;
   goto index 1134;
   show serial_dialog "hanoi_plate_7";
   goto index 1134;
   show serial_dialog "hanoi_plate_6";
   goto index 1134;
   show serial_dialog "hanoi_plate_5";
   goto index 1134;
   show serial_dialog "hanoi_plate_4";
   goto index 1134;
   show serial_dialog "hanoi_plate_3";
   goto index 1134;
   show serial_dialog "hanoi_plate_2";
   goto index 1134;
   show serial_dialog "hanoi_plate_1";
   goto index 1134;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1172;
   if "cursor_pos" == "column" then goto index 1139;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1171;
   if "cursor_hinge_height" == "row" then goto index 1169;
   if "cursor_grip_height" == "row" then goto index 1144;
   show serial_dialog "hanoi_space";
   goto index 1196;
   if "cursor_value" == 0 then goto index 1167;
   if "cursor_value" == 1 then goto index 1165;
   if "cursor_value" == 2 then goto index 1163;
   if "cursor_value" == 3 then goto index 1161;
   if "cursor_value" == 4 then goto index 1159;
   if "cursor_value" == 5 then goto index 1157;
   if "cursor_value" == 6 then goto index 1155;
   if "cursor_value" == 7 then goto index 1153;
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1168;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1196;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1196;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1195;
   if "curr_plate" == 1 then goto index 1193;
   if "curr_plate" == 2 then goto index 1191;
   if "curr_plate" == 3 then goto index 1189;
   if "curr_plate" == 4 then goto index 1187;
   if "curr_plate" == 5 then goto index 1185;
   if "curr_plate" == 6 then goto index 1183;
   if "curr_plate" == 7 then goto index 1181;
   goto index 1196;
   show serial_dialog "hanoi_plate_7";
   goto index 1196;
   show serial_dialog "hanoi_plate_6";
   goto index 1196;
   show serial_dialog "hanoi_plate_5";
   goto index 1196;
   show serial_dialog "hanoi_plate_4";
   goto index 1196;
   show serial_dialog "hanoi_plate_3";
   goto index 1196;
   show serial_dialog "hanoi_plate_2";
   goto index 1196;
   show serial_dialog "hanoi_plate_1";
   goto index 1196;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1234;
   if "cursor_pos" == "column" then goto index 1201;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1233;
   if "cursor_hinge_height" == "row" then goto index 1231;
   if "cursor_grip_height" == "row" then goto index 1206;
   show serial_dialog "hanoi_space";
   goto index 1258;
   if "cursor_value" == 0 then goto index 1229;
   if "cursor_value" == 1 then goto index 1227;
   if "cursor_value" == 2 then goto index 1225;
   if "cursor_value" == 3 then goto index 1223;
   if "cursor_value" == 4 then goto index 1221;
   if "cursor_value" == 5 then goto index 1219;
   if "cursor_value" == 6 then goto index 1217;
   if "cursor_value" == 7 then goto index 1215;
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1230;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1258;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1258;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1257;
   if "curr_plate" == 1 then goto index 1255;
   if "curr_plate" == 2 then goto index 1253;
   if "curr_plate" == 3 then goto index 1251;
   if "curr_plate" == 4 then goto index 1249;
   if "curr_plate" == 5 then goto index 1247;
   if "curr_plate" == 6 then goto index 1245;
   if "curr_plate" == 7 then goto index 1243;
   goto index 1258;
   show serial_dialog "hanoi_plate_7";
   goto index 1258;
   show serial_dialog "hanoi_plate_6";
   goto index 1258;
   show serial_dialog "hanoi_plate_5";
   goto index 1258;
   show serial_dialog "hanoi_plate_4";
   goto index 1258;
   show serial_dialog "hanoi_plate_3";
   goto index 1258;
   show serial_dialog "hanoi_plate_2";
   goto index 1258;
   show serial_dialog "hanoi_plate_1";
   goto index 1258;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 2;
   "plate1" = "array1_2";
   "plate2" = "array2_2";
   "plate3" = "array3_2";
   "column" = 1;
   "curr_plate" = "plate1";
   if "curr_plate" != 0 then goto index 1301;
   if "cursor_pos" == "column" then goto index 1268;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1300;
   if "cursor_hinge_height" == "row" then goto index 1298;
   if "cursor_grip_height" == "row" then goto index 1273;
   show serial_dialog "hanoi_space";
   goto index 1325;
   if "cursor_value" == 0 then goto index 1296;
   if "cursor_value" == 1 then goto index 1294;
   if "cursor_value" == 2 then goto index 1292;
   if "cursor_value" == 3 then goto index 1290;
   if "cursor_value" == 4 then goto index 1288;
   if "cursor_value" == 5 then goto index 1286;
   if "cursor_value" == 6 then goto index 1284;
   if "cursor_value" == 7 then goto index 1282;
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1297;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1325;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1325;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1324;
   if "curr_plate" == 1 then goto index 1322;
   if "curr_plate" == 2 then goto index 1320;
   if "curr_plate" == 3 then goto index 1318;
   if "curr_plate" == 4 then goto index 1316;
   if "curr_plate" == 5 then goto index 1314;
   if "curr_plate" == 6 then goto index 1312;
   if "curr_plate" == 7 then goto index 1310;
   goto index 1325;
   show serial_dialog "hanoi_plate_7";
   goto index 1325;
   show serial_dialog "hanoi_plate_6";
   goto index 1325;
   show serial_dialog "hanoi_plate_5";
   goto index 1325;
   show serial_dialog "hanoi_plate_4";
   goto index 1325;
   show serial_dialog "hanoi_plate_3";
   goto index 1325;
   show serial_dialog "hanoi_plate_2";
   goto index 1325;
   show serial_dialog "hanoi_plate_1";
   goto index 1325;
   show serial_dialog "hanoi_space";
   "column" = 2;
   "curr_plate" = "plate2";
   if "curr_plate" != 0 then goto index 1363;
   if "cursor_pos" == "column" then goto index 1330;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1362;
   if "cursor_hinge_height" == "row" then goto index 1360;
   if "cursor_grip_height" == "row" then goto index 1335;
   show serial_dialog "hanoi_space";
   goto index 1387;
   if "cursor_value" == 0 then goto index 1358;
   if "cursor_value" == 1 then goto index 1356;
   if "cursor_value" == 2 then goto index 1354;
   if "cursor_value" == 3 then goto index 1352;
   if "cursor_value" == 4 then goto index 1350;
   if "cursor_value" == 5 then goto index 1348;
   if "cursor_value" == 6 then goto index 1346;
   if "cursor_value" == 7 then goto index 1344;
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1359;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1387;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1387;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1386;
   if "curr_plate" == 1 then goto index 1384;
   if "curr_plate" == 2 then goto index 1382;
   if "curr_plate" == 3 then goto index 1380;
   if "curr_plate" == 4 then goto index 1378;
   if "curr_plate" == 5 then goto index 1376;
   if "curr_plate" == 6 then goto index 1374;
   if "curr_plate" == 7 then goto index 1372;
   goto index 1387;
   show serial_dialog "hanoi_plate_7";
   goto index 1387;
   show serial_dialog "hanoi_plate_6";
   goto index 1387;
   show serial_dialog "hanoi_plate_5";
   goto index 1387;
   show serial_dialog "hanoi_plate_4";
   goto index 1387;
   show serial_dialog "hanoi_plate_3";
   goto index 1387;
   show serial_dialog "hanoi_plate_2";
   goto index 1387;
   show serial_dialog "hanoi_plate_1";
   goto index 1387;
   show serial_dialog "hanoi_space";
   "column" = 3;
   "curr_plate" = "plate3";
   if "curr_plate" != 0 then goto index 1425;
   if "cursor_pos" == "column" then goto index 1392;
   show serial_dialog "hanoi_space";
   if "cursor_hinge_height" < "row" then goto index 1424;
   if "cursor_hinge_height" == "row" then goto index 1422;
   if "cursor_grip_height" == "row" then goto index 1397;
   show serial_dialog "hanoi_space";
   goto index 1449;
   if "cursor_value" == 0 then goto index 1420;
   if "cursor_value" == 1 then goto index 1418;
   if "cursor_value" == 2 then goto index 1416;
   if "cursor_value" == 3 then goto index 1414;
   if "cursor_value" == 4 then goto index 1412;
   if "cursor_value" == 5 then goto index 1410;
   if "cursor_value" == 6 then goto index 1408;
   if "cursor_value" == 7 then goto index 1406;
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_7";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_6";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_5";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_4";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_3";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_2";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_1";
   goto index 1421;
   show serial_dialog "hanoi_cursor_grip_0";
   goto index 1449;
   show serial_dialog "hanoi_cursor_hinge";
   goto index 1449;
   show serial_dialog "hanoi_cursor_arm";
   if "curr_plate" == 0 then goto index 1448;
   if "curr_plate" == 1 then goto index 1446;
   if "curr_plate" == 2 then goto index 1444;
   if "curr_plate" == 3 then goto index 1442;
   if "curr_plate" == 4 then goto index 1440;
   if "curr_plate" == 5 then goto index 1438;
   if "curr_plate" == 6 then goto index 1436;
   if "curr_plate" == 7 then goto index 1434;
   goto index 1449;
   show serial_dialog "hanoi_plate_7";
   goto index 1449;
   show serial_dialog "hanoi_plate_6";
   goto index 1449;
   show serial_dialog "hanoi_plate_5";
   goto index 1449;
   show serial_dialog "hanoi_plate_4";
   goto index 1449;
   show serial_dialog "hanoi_plate_3";
   goto index 1449;
   show serial_dialog "hanoi_plate_2";
   goto index 1449;
   show serial_dialog "hanoi_plate_1";
   goto index 1449;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   "row" = 1;
   "curr_plate" = "array1_1";
   if "curr_plate" == 0 then goto index 1475;
   if "curr_plate" == 1 then goto index 1473;
   if "curr_plate" == 2 then goto index 1471;
   if "curr_plate" == 3 then goto index 1469;
   if "curr_plate" == 4 then goto index 1467;
   if "curr_plate" == 5 then goto index 1465;
   if "curr_plate" == 6 then goto index 1463;
   if "curr_plate" == 7 then goto index 1461;
   goto index 1476;
   show serial_dialog "hanoi_plate_7";
   goto index 1476;
   show serial_dialog "hanoi_plate_6";
   goto index 1476;
   show serial_dialog "hanoi_plate_5";
   goto index 1476;
   show serial_dialog "hanoi_plate_4";
   goto index 1476;
   show serial_dialog "hanoi_plate_3";
   goto index 1476;
   show serial_dialog "hanoi_plate_2";
   goto index 1476;
   show serial_dialog "hanoi_plate_1";
   goto index 1476;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array2_1";
   if "curr_plate" == 0 then goto index 1500;
   if "curr_plate" == 1 then goto index 1498;
   if "curr_plate" == 2 then goto index 1496;
   if "curr_plate" == 3 then goto index 1494;
   if "curr_plate" == 4 then goto index 1492;
   if "curr_plate" == 5 then goto index 1490;
   if "curr_plate" == 6 then goto index 1488;
   if "curr_plate" == 7 then goto index 1486;
   goto index 1501;
   show serial_dialog "hanoi_plate_7";
   goto index 1501;
   show serial_dialog "hanoi_plate_6";
   goto index 1501;
   show serial_dialog "hanoi_plate_5";
   goto index 1501;
   show serial_dialog "hanoi_plate_4";
   goto index 1501;
   show serial_dialog "hanoi_plate_3";
   goto index 1501;
   show serial_dialog "hanoi_plate_2";
   goto index 1501;
   show serial_dialog "hanoi_plate_1";
   goto index 1501;
   show serial_dialog "hanoi_space";
   "curr_plate" = "array3_1";
   if "curr_plate" == 0 then goto index 1525;
   if "curr_plate" == 1 then goto index 1523;
   if "curr_plate" == 2 then goto index 1521;
   if "curr_plate" == 3 then goto index 1519;
   if "curr_plate" == 4 then goto index 1517;
   if "curr_plate" == 5 then goto index 1515;
   if "curr_plate" == 6 then goto index 1513;
   if "curr_plate" == 7 then goto index 1511;
   goto index 1526;
   show serial_dialog "hanoi_plate_7";
   goto index 1526;
   show serial_dialog "hanoi_plate_6";
   goto index 1526;
   show serial_dialog "hanoi_plate_5";
   goto index 1526;
   show serial_dialog "hanoi_plate_4";
   goto index 1526;
   show serial_dialog "hanoi_plate_3";
   goto index 1526;
   show serial_dialog "hanoi_plate_2";
   goto index 1526;
   show serial_dialog "hanoi_plate_1";
   goto index 1526;
   show serial_dialog "hanoi_space";
   show serial_dialog "newline";
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   if "hanoi_won" then goto index 1534;
   if "hanoi_draw_help" then goto index 1531;
   goto index 1570;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   "hanoi_draw_help" = false;
   goto index 1570;
   player_control = true;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   delete command "1";
   delete command "2";
   delete command "3";
   delete command "T";
   delete command "TIPS";
   delete command "R";
   delete command "RESET";
   delete command "Q";
   delete command "QUIT";
   if debug_mode then goto index 1548;
   goto index 1549;
   delete command "WIN";
   if !"hanoi_won" then goto index 1568;
   if !"ch2-carrying-plate" then goto index 1553;
   if !"ch2-installed-plate" then goto index 1553;
   goto index 1569;
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 1557;
   goto index 1558;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   show dialog "ch2-castle-34.mgs-XX";
   if "hanoi_move_count" == 33 then goto index 1566;
   if "hanoi_move_count" == 69 then goto index 1564;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1567;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1567;
   show dialog "ch2-castle-34.mgs-XX";
   goto index 1569;
   show serial_dialog "ch2-castle-34-hanoi.mgs-XX";
   goto "on_tick-ch2-castle-34";
   map on_tick = "tick_hanoi";
   show dialog "ch2-castle-34.mgs-XX";
   show dialog "ch2-castle-34.mgs-XX";
   pause entity "Clara" on_tick;
   entity "Clara" direction = player;
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "PlateMover90";
   show dialog "ch2-castle-34.mgs-XX";
   player direction = entity "Clara";
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-jukebox-backstory" = true;
   unpause entity "Clara" on_tick;
   if !"ch2-plate-firstlook" then goto index 1585;
   goto index 1587;
   show dialog "ch2-castle-34.mgs-XX";
   "ch2-plate-firstlook" = true;
}

"on_load-ch2-castle-99" {
   "ch2-in-room" = 99;
   show serial_dialog "spacer";
   if !"ch2-seen-room-99" then goto index 5;
   show serial_dialog "ch2-castle-99.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-99.mgs-XX";
   "ch2-seen-room-99" = true;
   camera = geometry "camera";
   if !"ch2-cutseen-castle99" then goto index 10;
   goto index 11;
   entity "Lambda" current_animation = 8;
   if "ch2-carrying-minirake-99" then goto index 13;
   goto index 16;
   entity "clothes rake" position = geometry "hiding-spot";
   entity "clothes rake" name = " ";
   entity "clothes rake" on_interact = "null_script";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 29;
   if "ch2-in-room" == 0 then goto index 29;
   if debug_mode then goto index 29;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 33;
   goto index 34;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 60;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 61;
   serial_control = false;
   if "ch2-has-map" then goto index 63;
   goto index 65;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 135;
   if "ch2-warp-granted" then goto index 68;
   goto index 209;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 209;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 210;
   if "ch2-storyflag-round" < 5 then goto index 212;
   goto index 242;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 244;
   goto index 245;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 247;
   goto index 248;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 250;
   goto index 251;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 253;
   goto index 254;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 256;
   goto index 257;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 259;
   goto index 260;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 262;
   goto index 263;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 265;
   goto index 266;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 268;
   goto index 269;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 271;
   goto index 273;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 275;
   goto index 276;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 278;
   goto index 279;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 281;
   goto index 282;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 284;
   goto index 285;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 287;
   goto index 288;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 290;
   goto index 291;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 297;
   if "debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 301;
   if !"debug-curr-state" then goto index 299;
   goto index 300;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 303;
   goto index 311;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 314;
   goto index 382;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 316;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 376;
   if "goosefact" == 1 then goto index 374;
   if "goosefact" == 2 then goto index 372;
   if "goosefact" == 3 then goto index 370;
   if "goosefact" == 4 then goto index 368;
   if "goosefact" == 5 then goto index 366;
   if "goosefact" == 6 then goto index 364;
   if "goosefact" == 7 then goto index 362;
   if "goosefact" == 8 then goto index 360;
   if "goosefact" == 9 then goto index 358;
   if "goosefact" == 10 then goto index 356;
   if "goosefact" == 11 then goto index 354;
   if "goosefact" == 12 then goto index 352;
   if "goosefact" == 13 then goto index 350;
   if "goosefact" == 14 then goto index 348;
   if "goosefact" == 15 then goto index 346;
   if "goosefact" == 16 then goto index 344;
   if "goosefact" == 17 then goto index 342;
   if "goosefact" == 18 then goto index 340;
   if "goosefact" == 19 then goto index 338;
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 381;
   goto index 382;
   "goosefact" = 0;
   if !"ch2-cutseen-castle99" then goto index 384;
   goto index 389;
   if debug_mode then goto index 386;
   goto index 388;
   command "skip" = "ch2-skip-99";
   show serial_dialog "ch2-castle-99.mgs-XX";
   goto "ch2-cutscene-castle99";
}

"ch2-skip-99" {
   "ch2-map-mainframeos" = false;
   "ch2-carrying-mainframeos" = true;
   "ch2-cutseen-castle99" = true;
   if "ch2-storyflag-round" >= 5 then goto index 6;
   load map "ch2-castle-1";
   goto index 7;
   load map "ch2-castle-1-doorless";
}

"interact-ch2-lambda-lab" {
   self direction = player;
   entity "Lambda" current_animation = 3;
   if "ch2-storyflag-round" < 5 then goto index 5;
   show dialog "ch2-castle-99.mgs-XX";
   goto index 6;
   show dialog "ch2-castle-99.mgs-XX";
   self direction = entity "CRT";
}

"on_load-ch2-castle-outside" {
   player_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-outside.mgs-XX";
   if "ch2-storyflag-round" != 0 then goto index 5;
   goto index 6;
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" == 1 then goto index 11;
   if "ch2-storyflag-round" == 2 then goto index 11;
   if "ch2-storyflag-round" == 3 then goto index 11;
   if "ch2-storyflag-round" >= 5 then goto index 11;
   goto index 13;
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 26;
   if "ch2-in-room" == 0 then goto index 26;
   if debug_mode then goto index 26;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 30;
   goto index 31;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 57;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 58;
   serial_control = false;
   if "ch2-has-map" then goto index 60;
   goto index 62;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 132;
   if "ch2-warp-granted" then goto index 65;
   goto index 206;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 206;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 207;
   if "ch2-storyflag-round" < 5 then goto index 209;
   goto index 239;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 241;
   goto index 242;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 244;
   goto index 245;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 247;
   goto index 248;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 250;
   goto index 251;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 253;
   goto index 254;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 256;
   goto index 257;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 259;
   goto index 260;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 262;
   goto index 263;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 265;
   goto index 266;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 268;
   goto index 270;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 272;
   goto index 273;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 275;
   goto index 276;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 278;
   goto index 279;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 281;
   goto index 282;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 284;
   goto index 285;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 287;
   goto index 288;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 294;
   if "debug-curr-state" then goto index 291;
   goto index 292;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 298;
   if !"debug-curr-state" then goto index 296;
   goto index 297;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 300;
   goto index 308;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 311;
   goto index 379;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 313;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 373;
   if "goosefact" == 1 then goto index 371;
   if "goosefact" == 2 then goto index 369;
   if "goosefact" == 3 then goto index 367;
   if "goosefact" == 4 then goto index 365;
   if "goosefact" == 5 then goto index 363;
   if "goosefact" == 6 then goto index 361;
   if "goosefact" == 7 then goto index 359;
   if "goosefact" == 8 then goto index 357;
   if "goosefact" == 9 then goto index 355;
   if "goosefact" == 10 then goto index 353;
   if "goosefact" == 11 then goto index 351;
   if "goosefact" == 12 then goto index 349;
   if "goosefact" == 13 then goto index 347;
   if "goosefact" == 14 then goto index 345;
   if "goosefact" == 15 then goto index 343;
   if "goosefact" == 16 then goto index 341;
   if "goosefact" == 17 then goto index 339;
   if "goosefact" == 18 then goto index 337;
   if "goosefact" == 19 then goto index 335;
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 378;
   goto index 379;
   "goosefact" = 0;
   if warp_state == "walk_from-north" then goto index 389;
   if warp_state == "walk_from-east" then goto index 385;
   if warp_state == "ch2-ending" then goto index 383;
   goto index 390;
   goto "ch2-post-credits";
   goto index 390;
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 390;
   player position -> geometry "walk_from-north" length over 200ms;
}

"on_tick-ch2-castle-outside" {
   if player intersects geometry "north-hitbox" then goto index 2;
   goto index 7;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 6;
   load map "ch2-castle-1";
   goto index 7;
   load map "ch2-castle-1-doorless";
   if player intersects geometry "east-hitbox" then goto index 9;
   goto index 14;
   warp_state = "walk_from-west";
   player path = "east-point";
   player on_tick = "on_tick-ch2-town-walkfadeout";
   camera fade out -> #000000 over 500ms;
   load map "ch2-town";
}

"on_go-castle-outside-north" {
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-1";
   goto index 9;
   load map "ch2-castle-1-doorless";
}

"interact-ch2-alfonso-outside" {
   if "ch2-storyflag-round" == 4 then goto index 2;
   show dialog "ch2-castle-outside.mgs-XX";
   if !"ch2-alfonso-almostdone" then goto index 5;
   show dialog "ch2-castle-outside.mgs-XX";
   goto index 7;
   show dialog "ch2-castle-outside.mgs-XX";
   "ch2-alfonso-almostdone" = true;
}

"interact-ch2-jackob-outside" {
   if "ch2-storyflag-round" == 4 then goto index 3;
   show dialog "ch2-castle-outside.mgs-XX";
   goto index 8;
   if !"ch2-jackob-almostdone" then goto index 5;
   goto index 7;
   show dialog "ch2-castle-outside.mgs-XX";
   "ch2-jackob-almostdone" = true;
   show dialog "ch2-castle-outside.mgs-XX";
}

"on_tick-ch2-credits" {
   hex_control = false;
   serial_control = false;
   player_control = true;
   player direction = "south";
   camera = entity "cameraman" position;
   entity "cameraman" position = geometry "credits_camera";
   camera fade in -> #000000 over 400ms;
   entity "Gregory" current_animation = 1;
   wait 1200ms;
   entity "cameraman" position -> geometry "credits_camera" length over 52000ms;
   wait 600ms;
   entity "Wizard" direction = "south";
   entity "Wizard" animation -> 5 1x;
   entity "Wizard" current_animation = 3;
   wait 2300ms;
   entity "Wizard" animation -> 4 1x;
   entity "Wizard" current_animation = 0;
   camera fade out -> #000000 over 1200ms;
   hex_control = true;
   serial_control = true;
   player_control = true;
   if warp_state == "ch2-ending" then goto index 25;
   if !"credits-from-menu" then goto index 25;
   load map "main_menu";
   goto index 29;
   if "ch2-storyflag-round" >= 5 then goto index 28;
   load map "ch2-castle-1";
   goto index 29;
   load map "ch2-castle-1-doorless";
}

"ch2-post-credits" {
   serial_control = false;
   player_control = false;
   entity "Bert" on_tick = "null_script";
   entity "Bert" position = geometry "hiding-spot";
   entity "Bert" type = "lambda";
   player on_tick = "ch2-post-credits-walkin";
   camera fade in -> #000000 over 1100ms;
   wait 700ms;
   entity "Bert" position = geometry "lambda1";
   show dialog "ch2-ending.mgs-XX";
   player on_tick = "player-watch-lambda-actor";
   entity "Bert" position -> geometry "lambda2" origin over 1800ms;
   entity "Bert" current_animation = 3;
   wait 1200ms;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = "south";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = "east";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" strafe = 2;
   entity "Bert" position -> geometry "lambda-hide" origin over 150ms;
   entity "Bert" strafe = 0;
   entity "Bert" direction = "east";
   wait 200ms;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" on_tick = "spin_self_clockwise";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" on_tick = "null_script";
   entity "Bert" on_tick = "lambda-cower";
   player on_tick = "player-watch-lambda-actor";
   show dialog "ch2-ending.mgs-XX";
   player on_tick = "player-watch-alfonso";
   entity "Alfonso" path = "alfonso-walkin";
   entity "Jackob" path = "jackob-walkin";
   entity "Alfonso" on_tick = "ch2-elder-ending-walkin";
   wait 200ms;
   entity "Jackob" on_tick = "ch2-elder-ending-walkin";
   wait 100ms;
   show dialog "ch2-ending.mgs-XX";
   wait 500ms;
   if entity "Alfonso" current_animation == 0 then goto index 42;
   goto index 43;
   entity "Alfonso" direction = entity "Jackob";
   show dialog "ch2-ending.mgs-XX";
   if entity "Alfonso" current_animation == 0 then goto index 46;
   goto index 47;
   entity "Alfonso" direction = player;
   show dialog "ch2-ending.mgs-XX";
   player on_tick = "null_script";
   player direction = entity "Bert";
   show dialog "ch2-ending.mgs-XX";
   wait 1200ms;
   entity "Alfonso" on_tick = "alfonso-watch-lambda-actor";
   wait 200ms;
   entity "Jackob" on_tick = "jackob-watch-lambda-actor";
   wait 1400ms;
   show dialog "ch2-ending.mgs-XX";
   wait 500ms;
   entity "Bert" position -> geometry "lambda6" origin over 1200ms;
   entity "Bert" direction = "south";
   wait 500ms;
   entity "Bert" position -> geometry "lambda7" origin over 2300ms;
   entity "Bert" current_animation = 3;
   player on_tick = "null_script";
   entity "Jackob" on_tick = "null_script";
   entity "Alfonso" on_tick = "null_script";
   wait 200ms;
   entity "Bert" direction = entity "Alfonso";
   wait 1400ms;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction += 1;
   entity "Bert" animation -> 7 1x;
   entity "Bert" current_animation = 8;
   wait 1400ms;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = entity "Alfonso";
   entity "Bert" current_animation = 3;
   show dialog "ch2-ending.mgs-XX";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction += 1;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = entity "Alfonso";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction += 1;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction += 1;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = player;
   show dialog "ch2-ending.mgs-XX";
   entity "Alfonso" direction = entity "Jackob";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = entity "Jackob";
   show dialog "ch2-ending.mgs-XX";
   entity "Jackob" direction = "south";
   entity "Alfonso" direction = entity "Bert";
   show dialog "ch2-ending.mgs-XX";
   player on_tick = "look-left-and-right-fast";
   wait 800ms;
   show dialog "ch2-ending.mgs-XX";
   player on_tick = "null_script";
   player direction = entity "Alfonso";
   entity "Jackob" direction = player;
   show dialog "ch2-ending.mgs-XX";
   entity "Alfonso" direction = entity "Jackob";
   show dialog "ch2-ending.mgs-XX";
   entity "Jackob" direction = entity "Alfonso";
   show dialog "ch2-ending.mgs-XX";
   entity "Jackob" on_tick = "look-left-and-up-fast";
   show dialog "ch2-ending.mgs-XX";
   entity "Alfonso" direction = entity "Bert";
   wait 800ms;
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" direction = entity "Bert";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" animation -> 7 1x;
   entity "Bert" current_animation = 8;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" animation -> 9 1x;
   entity "Bert" current_animation = 3;
   show dialog "ch2-ending.mgs-XX";
   entity "Jackob" direction = player;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = "south";
   entity "Jackob" direction = player;
   show dialog "ch2-ending.mgs-XX";
   entity "Alfonso" path = "alfonso-walkout";
   entity "Jackob" path = "jackob-walkout";
   entity "Alfonso" on_tick = "ch2-elder-ending-walkin-end";
   wait 100ms;
   entity "Jackob" on_tick = "ch2-elder-ending-walkin-end";
   show dialog "ch2-ending.mgs-XX";
   wait 1100ms;
   entity "Bert" animation -> 7 1x;
   entity "Bert" current_animation = 8;
   entity "Bert" direction = "south";
   wait 200ms;
   player on_tick = "player-watch-lambda-actor";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = "west";
   entity "Bert" current_animation = 4;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" position -> geometry "lambda8" origin over 300ms;
   entity "Bert" current_animation = 3;
   wait 500ms;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = player;
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" direction = "west";
   show dialog "ch2-ending.mgs-XX";
   entity "Bert" on_tick = "ch2-lambda-walkout";
   "ch2-cutseen-secret-ending" = true;
   wait 800ms;
   player on_tick = "null_script";
   camera fade out -> #000000 over 1200ms;
   load map "credits2";
}

"on_load-ch2-greenhouse" {
   command "look" + "ethernettles" = "look-ch2-ethernettles";
   show serial_dialog "spacer";
   show serial_dialog "ch2-greenhouse.mgs-XX";
   "ethernettle_id" = entity "EtherNettle1" primary_id;
   "EtherNettle1" = entity "EtherNettle1" primary_id;
   "EtherNettle2" = entity "EtherNettle2" primary_id;
   "EtherNettle3" = entity "EtherNettle3" primary_id;
   "EtherNettle4" = entity "EtherNettle4" primary_id;
   "EtherNettle5" = entity "EtherNettle5" primary_id;
   "EtherNettle6" = entity "EtherNettle6" primary_id;
   "EtherNettle7" = entity "EtherNettle7" primary_id;
   "EtherNettle8" = entity "EtherNettle8" primary_id;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_tick-ch2-greenhouse" {
   if !entity "EtherNettle1" intersects geometry "EtherNettle1Origin" then goto index 33;
   if !entity "EtherNettle2" intersects geometry "EtherNettle2Origin" then goto index 33;
   if !entity "EtherNettle3" intersects geometry "EtherNettle3Origin" then goto index 33;
   if !entity "EtherNettle4" intersects geometry "EtherNettle4Origin" then goto index 33;
   if !entity "EtherNettle5" intersects geometry "EtherNettle5Origin" then goto index 33;
   if !entity "EtherNettle6" intersects geometry "EtherNettle6Origin" then goto index 33;
   if !entity "EtherNettle7" intersects geometry "EtherNettle7Origin" then goto index 33;
   if !entity "EtherNettle8" intersects geometry "EtherNettle8Origin" then goto index 33;
   if "EtherNettle1" != "ethernettle_id" then goto index 33;
   if "EtherNettle2" != "ethernettle_id" then goto index 33;
   if "EtherNettle3" != "ethernettle_id" then goto index 33;
   if "EtherNettle4" != "ethernettle_id" then goto index 33;
   if "EtherNettle5" != "ethernettle_id" then goto index 33;
   if "EtherNettle6" != "ethernettle_id" then goto index 33;
   if "EtherNettle7" != "ethernettle_id" then goto index 33;
   if "EtherNettle8" != "ethernettle_id" then goto index 33;
   if entity "EtherNettle1" secondary_id != 3 then goto index 33;
   if entity "EtherNettle2" secondary_id != 2 then goto index 33;
   if entity "EtherNettle3" secondary_id != 7 then goto index 33;
   if entity "EtherNettle4" secondary_id != 0 then goto index 33;
   if entity "EtherNettle5" secondary_id != 1 then goto index 33;
   if entity "EtherNettle6" secondary_id != 6 then goto index 33;
   if entity "EtherNettle7" secondary_id != 5 then goto index 33;
   if entity "EtherNettle8" secondary_id != 4 then goto index 33;
   if entity "EtherNettle1" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle2" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle3" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle4" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle5" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle6" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle7" primary_id_type != 0 then goto index 33;
   if entity "EtherNettle8" primary_id_type != 0 then goto index 33;
   goto index 66;
   show dialog "ch2-greenhouse.mgs-XX";
   entity "EtherNettle1" position = geometry "EtherNettle1Origin";
   entity "EtherNettle2" position = geometry "EtherNettle2Origin";
   entity "EtherNettle3" position = geometry "EtherNettle3Origin";
   entity "EtherNettle4" position = geometry "EtherNettle4Origin";
   entity "EtherNettle5" position = geometry "EtherNettle5Origin";
   entity "EtherNettle6" position = geometry "EtherNettle6Origin";
   entity "EtherNettle7" position = geometry "EtherNettle7Origin";
   entity "EtherNettle8" position = geometry "EtherNettle8Origin";
   entity "EtherNettle1" primary_id = "ethernettle_id";
   entity "EtherNettle2" primary_id = "ethernettle_id";
   entity "EtherNettle3" primary_id = "ethernettle_id";
   entity "EtherNettle4" primary_id = "ethernettle_id";
   entity "EtherNettle5" primary_id = "ethernettle_id";
   entity "EtherNettle6" primary_id = "ethernettle_id";
   entity "EtherNettle7" primary_id = "ethernettle_id";
   entity "EtherNettle8" primary_id = "ethernettle_id";
   entity "EtherNettle1" secondary_id = 3;
   entity "EtherNettle2" secondary_id = 2;
   entity "EtherNettle3" secondary_id = 7;
   entity "EtherNettle4" secondary_id = 0;
   entity "EtherNettle5" secondary_id = 1;
   entity "EtherNettle6" secondary_id = 6;
   entity "EtherNettle7" secondary_id = 5;
   entity "EtherNettle8" secondary_id = 4;
   entity "EtherNettle1" primary_id_type = 0;
   entity "EtherNettle2" primary_id_type = 0;
   entity "EtherNettle3" primary_id_type = 0;
   entity "EtherNettle4" primary_id_type = 0;
   entity "EtherNettle5" primary_id_type = 0;
   entity "EtherNettle6" primary_id_type = 0;
   entity "EtherNettle7" primary_id_type = 0;
   entity "EtherNettle8" primary_id_type = 0;
   if player intersects geometry "south-hitbox" then goto index 68;
   goto index 70;
   warp_state = "walk_from-greenhouse";
   load map "ch2-town";
}

"interact-ch2-trekkie" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 10;
   if "ch2-storyflag-round" <= 2 then goto index 8;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-greenhouse.mgs-XX";
   goto index 11;
   show dialog "ch2-greenhouse.mgs-XX";
   goto index 11;
   show dialog "ch2-greenhouse.mgs-XX";
   goto index 11;
   show dialog "ch2-greenhouse.mgs-XX";
   self direction = "east";
}

"on_load-ch2-lodge-rtfm" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge-rtfm.mgs-XX";
   if "ch2-storyflag-round" != 1 then goto index 4;
   goto index 5;
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" != 3 then goto index 7;
   goto index 9;
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_tick-ch2-lodge-rtfm" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-north";
   load map "ch2-lodge";
}

"interact-ch2-alfonso-rtfm" {
   if "ch2-storyflag-round" != 3 then goto index 2;
   goto index 3;
   goto "null_script";
   self direction = player;
   show dialog "ch2-lodge-rtfm.mgs-XX";
   self direction = "west";
}

"interact-ch2-jackob-rtfm" {
   if "ch2-storyflag-round" != 3 then goto index 2;
   goto index 3;
   goto "null_script";
   self direction = player;
   show dialog "ch2-lodge-rtfm.mgs-XX";
   self direction = "south";
}

"interact-ch2-bert-rtfm" {
   if "ch2-storyflag-round" != 1 then goto index 2;
   goto index 3;
   goto "null_script";
   self direction = player;
   show dialog "ch2-lodge-rtfm.mgs-XX";
   self direction = "north";
}

"on_load-ch2-lodge" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge.mgs-XX";
   if "ch2-storyflag-round" != 1 then goto index 4;
   goto index 5;
   entity "Alfonso" on_tick = "yeet";
   if "ch2-storyflag-round" == 3 then goto index 11;
   if "ch2-storyflag-round" == 4 then goto index 11;
   if "ch2-storyflag-round" != 1 then goto index 9;
   goto index 18;
   entity "Jackob" on_tick = "yeet";
   goto index 18;
   entity "Jackob" position = geometry "zappy-spot";
   entity "Jackob" name = "Uncle Zappy";
   entity "Jackob" on_look = "look-ch2-zappy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zappy";
   entity "Jackob" type = "lightning_boy2";
   entity "Jackob" direction = "north";
   if "ch2-installed-manual" then goto index 21;
   if "ch2-carrying-manual" then goto index 21;
   goto index 23;
   entity "HP35c Man" position = geometry "hiding-spot";
   entity "HP35c Man" name = " ";
   if warp_state == "walk_from-north" then goto index 25;
   goto index 27;
   player_control = false;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 40;
   if "ch2-in-room" == 0 then goto index 40;
   if debug_mode then goto index 40;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 44;
   goto index 45;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 71;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 72;
   serial_control = false;
   if "ch2-has-map" then goto index 74;
   goto index 76;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 146;
   if "ch2-warp-granted" then goto index 79;
   goto index 220;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 220;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 221;
   if "ch2-storyflag-round" < 5 then goto index 223;
   goto index 253;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 255;
   goto index 256;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 258;
   goto index 259;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 261;
   goto index 262;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 264;
   goto index 265;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 267;
   goto index 268;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 270;
   goto index 271;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 273;
   goto index 274;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 276;
   goto index 277;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 279;
   goto index 280;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 282;
   goto index 284;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 286;
   goto index 287;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 289;
   goto index 290;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 292;
   goto index 293;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 295;
   goto index 296;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 298;
   goto index 299;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 301;
   goto index 302;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 308;
   if "debug-curr-state" then goto index 305;
   goto index 306;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 312;
   if !"debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 314;
   goto index 322;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 325;
   goto index 393;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 327;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 387;
   if "goosefact" == 1 then goto index 385;
   if "goosefact" == 2 then goto index 383;
   if "goosefact" == 3 then goto index 381;
   if "goosefact" == 4 then goto index 379;
   if "goosefact" == 5 then goto index 377;
   if "goosefact" == 6 then goto index 375;
   if "goosefact" == 7 then goto index 373;
   if "goosefact" == 8 then goto index 371;
   if "goosefact" == 9 then goto index 369;
   if "goosefact" == 10 then goto index 367;
   if "goosefact" == 11 then goto index 365;
   if "goosefact" == 12 then goto index 363;
   if "goosefact" == 13 then goto index 361;
   if "goosefact" == 14 then goto index 359;
   if "goosefact" == 15 then goto index 357;
   if "goosefact" == 16 then goto index 355;
   if "goosefact" == 17 then goto index 353;
   if "goosefact" == 18 then goto index 351;
   if "goosefact" == 19 then goto index 349;
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 392;
   goto index 393;
   "goosefact" = 0;
}

"on_tick-ch2-lodge" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-lodge";
   load map "ch2-town";
   if player intersects geometry "north-hitbox" then goto index 6;
   goto index 8;
   warp_state = "walk_from-south";
   load map "ch2-lodge-rtfm";
}

"ch2-interact-manual" {
   if !"ch2-want-manual" then goto index 9;
   show dialog "ch2-lodge.mgs-XX";
   "ch2-map-manual" = false;
   "ch2-map-abacus" = true;
   "ch2-carrying-manual" = true;
   command "look" + "abacus" = "look-abacus";
   entity "HP35c Man" position = geometry "hiding-spot";
   entity "HP35c Man" name = " ";
   goto index 10;
   show dialog "ch2-lodge.mgs-XX";
}

"interact-ch2-timmy" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 10;
   if "ch2-storyflag-round" <= 2 then goto index 8;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-lodge.mgs-XX";
   goto index 11;
   show dialog "ch2-lodge.mgs-XX";
   goto index 11;
   show dialog "ch2-lodge.mgs-XX";
   goto index 11;
   show dialog "ch2-lodge.mgs-XX";
   self direction = "east";
}

"interact-ch2-alfonso-library" {
   "ch2-alfonso-library-count" += 1;
   "ch2-alfonso-library-count" %= 4;
   if "ch2-alfonso-library-count" == 1 then goto index 11;
   if "ch2-alfonso-library-count" == 2 then goto index 9;
   if "ch2-alfonso-library-count" == 3 then goto index 7;
   show dialog "ch2-lodge.mgs-XX";
   goto index 12;
   show dialog "ch2-lodge.mgs-XX";
   goto index 12;
   show dialog "ch2-lodge.mgs-XX";
   goto index 12;
   show dialog "ch2-lodge.mgs-XX";
   self direction = player;
   show dialog "ch2-lodge.mgs-XX";
   self direction = "north";
}

"ch2-goose-library" {
   if !"ch2-has-artifact" then goto index 8;
   if !"ch2-goosefacts" then goto index 4;
   show dialog "ch2-lodge.mgs-XX";
   goto index 9;
   show serial_dialog "ch2-lodge.mgs-XX";
   show dialog "ch2-lodge.mgs-XX";
   "ch2-goosefacts" = true;
   command "stop" = "stop-goosefacts";
   show dialog "ch2-lodge.mgs-XX";
}

"look-ch2-microwave-magehouse" {
   show serial_dialog "spacer";
   if !"ch2-microwave-time" then goto index 4;
   show serial_dialog "ch2-magehouse.mgs-XX";
   goto index 6;
   show serial_dialog "ch2-magehouse.mgs-XX";
   "ch2-microwave-time" = true;
}

"on_load-ch2-magehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-magehouse.mgs-XX";
   if "ch2-storyflag-round" == 0 then goto index 13;
   if "ch2-storyflag-round" == 3 then goto index 10;
   if "ch2-storyflag-round" == 4 then goto index 10;
   if "ch2-storyflag-round" == 5 then goto index 7;
   goto index 15;
   entity "Aunt Zippy" position = geometry "alt-spot2";
   entity "Uncle Zappy" position = geometry "alt-spot1";
   goto index 15;
   entity "Aunt Zippy" on_tick = "yeet";
   entity "Uncle Zappy" on_tick = "yeet";
   goto index 15;
   entity "Aunt Zippy" position = geometry "alt-spot1";
   entity "Uncle Zappy" position = geometry "alt-spot3";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 28;
   if "ch2-in-room" == 0 then goto index 28;
   if debug_mode then goto index 28;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 32;
   goto index 33;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 59;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 60;
   serial_control = false;
   if "ch2-has-map" then goto index 62;
   goto index 64;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 134;
   if "ch2-warp-granted" then goto index 67;
   goto index 208;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 208;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 209;
   if "ch2-storyflag-round" < 5 then goto index 211;
   goto index 241;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 243;
   goto index 244;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 246;
   goto index 247;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 249;
   goto index 250;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 252;
   goto index 253;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 255;
   goto index 256;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 258;
   goto index 259;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 261;
   goto index 262;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 264;
   goto index 265;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 267;
   goto index 268;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 270;
   goto index 272;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 274;
   goto index 275;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 277;
   goto index 278;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 280;
   goto index 281;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 283;
   goto index 284;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 286;
   goto index 287;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 289;
   goto index 290;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 296;
   if "debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 300;
   if !"debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 302;
   goto index 310;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 313;
   goto index 381;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 315;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 375;
   if "goosefact" == 1 then goto index 373;
   if "goosefact" == 2 then goto index 371;
   if "goosefact" == 3 then goto index 369;
   if "goosefact" == 4 then goto index 367;
   if "goosefact" == 5 then goto index 365;
   if "goosefact" == 6 then goto index 363;
   if "goosefact" == 7 then goto index 361;
   if "goosefact" == 8 then goto index 359;
   if "goosefact" == 9 then goto index 357;
   if "goosefact" == 10 then goto index 355;
   if "goosefact" == 11 then goto index 353;
   if "goosefact" == 12 then goto index 351;
   if "goosefact" == 13 then goto index 349;
   if "goosefact" == 14 then goto index 347;
   if "goosefact" == 15 then goto index 345;
   if "goosefact" == 16 then goto index 343;
   if "goosefact" == 17 then goto index 341;
   if "goosefact" == 18 then goto index 339;
   if "goosefact" == 19 then goto index 337;
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 380;
   goto index 381;
   "goosefact" = 0;
}

"on_tick-ch2-magehouse" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-magehouse";
   load map "ch2-town";
}

"interact-ch2-zappy" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 11;
   if "ch2-storyflag-round" <= 2 then goto index 9;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-magehouse.mgs-XX";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
   self direction = "north";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
}

"interact-ch2-zippy" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 11;
   if "ch2-storyflag-round" <= 2 then goto index 9;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-magehouse.mgs-XX";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
   self direction = "north";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
   goto index 12;
   show dialog "ch2-magehouse.mgs-XX";
}

"on_load-ch2-oldcouplehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-oldcouplehouse.mgs-XX";
   if !"ch2-delmar-in-house" then goto index 10;
   if !"ch2-delmar-is-man" then goto index 8;
   entity "Beatrice" direction = entity "Delmar";
   entity "Delmar" direction = entity "Beatrice";
   entity "Delmar" type = "old_man";
   goto index 11;
   entity "Beatrice" on_tick = "face-player";
   entity "Delmar" on_tick = "face-player";
   entity "Delmar" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
}

"on_tick-ch2-oldcouplehouse" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 3;
   goto "on_walk-ch2-oldcouplehouse-south";
   if "ch2-cutseen-delmar" then goto index 4;
   if entity "Delmar" type != "old_man" then goto index 6;
   goto index 8;
   entity "Delmar" on_tick = "face-player";
   "interrupt" = true;
}

"ch2-check-if-sheep" {
   if "ch2-delmar-is-man" then goto index 2;
   goto index 3;
   goto "null_script";
   if entity "Delmar" type == "old_man" then goto index 4;
   "ch2-delmar-is-man" = true;
   if !"ch2-cutseen-delmar" then goto index 7;
   goto index 8;
   goto "ch2-cutscene-delmar-reconnect";
}

"interact-ch2-delmar" {
   self direction = player;
   if "interrupt" then goto index 6;
   if entity "Delmar" type == "old_man" then goto index 4;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   show dialog "ch2-oldcouplehouse.mgs-XX";
   self direction = entity "Beatrice";
   if entity "Delmar" type == "sheep " then goto index 10;
   if entity "Delmar" type == "helga" then goto index 10;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   goto index 11;
   show dialog "ch2-oldcouplehouse.mgs-XX";
}

"interact-ch2-beatrice" {
   self direction = player;
   if "ch2-storyflag-round" < 3 then goto index 49;
   if "ch2-delmar-is-man" then goto index 46;
   if !"ch2-beatrice-backstory2" then goto index 6;
   show dialog "ch2-beatrice-plea";
   goto index 55;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 300ms;
   "ch2-delmar-in-house" = true;
   entity "Delmar" position = geometry "delmar-point";
   entity "Delmar" on_look = "look-ch2-delmar";
   entity "Delmar" on_interact = "interact-ch2-delmar";
   entity "Delmar" name = "Delmar";
   player position = geometry "cutscene";
   player direction = "north";
   entity "Beatrice" direction = entity "Delmar";
   entity "Delmar" direction = entity "Beatrice";
   wait 400ms;
   camera fade in -> #000000 over 300ms;
   wait 500ms;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = "north";
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = entity "Delmar";
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = "south";
   wait 1400ms;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = entity "Delmar";
   show dialog "ch2-oldcouplehouse.mgs-XX";
   wait 1500ms;
   entity "Delmar" direction = "east";
   wait 1200ms;
   entity "Delmar" direction = "south";
   wait 700ms;
   entity "Delmar" position -> geometry "delmar-walk" origin over 300ms;
   wait 900ms;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = player;
   show dialog "ch2-beatrice-plea";
   entity "Beatrice" on_tick = "face-player";
   entity "Delmar" on_tick = "face-player";
   "ch2-beatrice-backstory2" = true;
   player_control = true;
   goto index 55;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   entity "Beatrice" direction = entity "Delmar";
   goto index 55;
   if !"ch2-beatrice-backstory1" then goto index 51;
   goto index 53;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   "ch2-beatrice-backstory1" = true;
   self direction -= -1;
   show dialog "ch2-oldcouplehouse.mgs-XX";
}

"debug-get-items-for-round2" {
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 10;
   goto index 11;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 16;
   goto index 17;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
}

"debug-get-items-for-round3" {
   "ch2-map-ramchips" = false;
   "ch2-map-seamoss" = false;
   "ch2-carrying-ramchips" = true;
   command "look" + "ram chips" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   "ch2-map-clock" = false;
   "ch2-carrying-clock" = true;
   command "look" + "clock" = "look-clock";
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 12;
   goto index 13;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 18;
   goto index 19;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
}

"debug-jump-to-round1" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   if "ch2-storyflag-round" >= 5 then goto index 69;
   load map "ch2-castle-1";
   goto index 70;
   load map "ch2-castle-1-doorless";
}

"debug-jump-to-round2" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   if "ch2-storyflag-round" >= 5 then goto index 105;
   load map "ch2-castle-1";
   goto index 106;
   load map "ch2-castle-1-doorless";
}

"debug-jump-to-round3" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 112;
   goto index 113;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 118;
   goto index 119;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   "ch2-cutseen-bert-message" = true;
   "ch2-parts-round-3-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = true;
   "ch2-map-goldfish" = true;
   "ch2-map-abacus" = true;
   "ch2-map-ramchips" = true;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 3;
   if "ch2-storyflag-round" >= 5 then goto index 156;
   load map "ch2-castle-1";
   goto index 157;
   load map "ch2-castle-1-doorless";
}

"debug-jump-to-round4" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 112;
   goto index 113;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 118;
   goto index 119;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   "ch2-cutseen-bert-message" = true;
   "ch2-parts-round-3-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = true;
   "ch2-map-goldfish" = true;
   "ch2-map-abacus" = true;
   "ch2-map-ramchips" = true;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 3;
   "ch2-map-ramchips" = false;
   "ch2-map-seamoss" = false;
   "ch2-carrying-ramchips" = true;
   command "look" + "ram chips" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   "ch2-map-clock" = false;
   "ch2-carrying-clock" = true;
   command "look" + "clock" = "look-clock";
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 165;
   goto index 166;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 171;
   goto index 172;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
   "ch2-carrying-ramchips" = false;
   "ch2-installed-ramchips" = true;
   delete command "look" + "ram chips";
   delete command "look" + "ram";
   "ch2-carrying-clock" = false;
   "ch2-installed-clock" = true;
   delete command "look" + "clock";
   "ch2-carrying-cpu" = false;
   "ch2-installed-cpu" = true;
   delete command "look" + "cpu";
   "ch2-cutseen-last-parts-done" = true;
   "ch2-warp-granted" = true;
   "ch2-parts-round-4-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = true;
   "ch2-storyflag-round" = 4;
   if "ch2-storyflag-round" >= 5 then goto index 211;
   load map "ch2-castle-1";
   goto index 212;
   load map "ch2-castle-1-doorless";
}

"ch2-pickup-plate" {
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 4;
   goto index 5;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
}

"ch2-pickup-needle" {
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 4;
   goto index 5;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
}

"ch2-pickup-goldfish" {
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 4;
   goto index 5;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
}

"ch2-pickup-abacus" {
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 4;
   goto index 5;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
}

"interact-ch2-solderzone" {
   if !"ch2-parts-round-2-backstory" then goto index 2;
   goto index 4;
   show dialog "ch2-parts-admin.mgs-XX";
   // auto return label
   if !"ch2-solder-sight" then goto index 6;
   goto index 8;
   show dialog "ch2-parts-admin.mgs-XX";
   "ch2-solder-sight" = true;
   if "ch2-storyflag-round" == 2 then goto index 41;
   if "ch2-storyflag-round" == 3 then goto index 11;
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-installed-goldfish" then goto index 14;
   if !"ch2-installed-abacus" then goto index 14;
   show dialog "ch2-parts-admin.mgs-XX";
   if "ch2-carrying-goldfish" then goto index 29;
   if "ch2-carrying-abacus" then goto index 17;
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-carrying-goldfish" then goto index 28;
   show dialog "ch2-parts-admin.mgs-XX";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-carrying-abacus" then goto index 40;
   show dialog "ch2-parts-admin.mgs-XX";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-installed-plate" then goto index 44;
   if !"ch2-installed-needle" then goto index 44;
   show dialog "ch2-parts-admin.mgs-XX";
   if "ch2-carrying-plate" then goto index 59;
   if "ch2-carrying-needle" then goto index 47;
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-carrying-plate" then goto index 58;
   show dialog "ch2-parts-admin.mgs-XX";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   show dialog "ch2-parts-admin.mgs-XX";
   if !"ch2-carrying-needle" then goto index 71;
   show dialog "ch2-parts-admin.mgs-XX";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   goto index 72;
   show dialog "ch2-parts-admin.mgs-XX";
}

"ch2-lambda-round-2-parts1" {
   if "ch2-lambdabert-skip-spacer" then goto index 3;
   show serial_dialog "spacer";
   goto index 5;
   "ch2-lambdabert-skip-spacer" = false;
   show serial_dialog "ch2-parts-list.mgs-XX";
   show serial_dialog "ch2-parts-list.mgs-XX";
}

"ch2-lambda-round-4d" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-parts-list.mgs-XX";
   "ch2-map-mainframeos" = true;
   "ch2-lambda-paging" = false;
   "ch2-warp-granted" = true;
   "ch2-parts-round-4-backstory" = true;
   if !debug_mode then goto index 8;
   goto index 74;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   show serial_dialog "lambda-over";
}

"look-monitor" {
   show serial_dialog "spacer";
   if !"ch2-carrying-monitor" then goto index 4;
   show serial_dialog "ch2-parts-list.mgs-XX";
   goto index 5;
   show serial_dialog "ch2-parts-list.mgs-XX";
}

"look-clock" {
   show serial_dialog "spacer";
   if !"ch2-carrying-clock" then goto index 4;
   show serial_dialog "ch2-parts-list.mgs-XX";
   goto index 5;
   show serial_dialog "ch2-parts-list.mgs-XX";
}

"draw-ch2-serial-map" {
   serial_control = false;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-99" then goto index 7;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 8;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 12;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 13;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-99" then goto index 19;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 20;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 99 then goto index 25;
   if "ch2-seen-room-99" then goto index 24;
   show serial_dialog "space";
   goto index 26;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-mainframeos" then goto index 31;
   if "ch2-seen-room-99" then goto index 30;
   show serial_dialog "space";
   goto index 32;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-99" then goto index 35;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 36;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 40;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 41;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-99" then goto index 47;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 48;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 52;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 53;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 14 then goto index 58;
   if "ch2-seen-room-14" then goto index 57;
   show serial_dialog "space";
   goto index 59;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-clock" then goto index 64;
   if "ch2-seen-room-14" then goto index 63;
   show serial_dialog "space";
   goto index 65;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-14" then goto index 68;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 69;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 75;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 76;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 80;
   if "ch2-seen-room-13" then goto index 80;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 81;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-14" then goto index 84;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 85;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-13" then goto index 91;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 92;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 96;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 97;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 101;
   if "ch2-seen-room-34" then goto index 101;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 102;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-34" then goto index 105;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 106;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-23" then goto index 112;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 113;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-13" then goto index 117;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 118;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 13 then goto index 123;
   if "ch2-seen-room-13" then goto index 122;
   show serial_dialog "space";
   goto index 124;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-13" then goto index 127;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 128;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 132;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 133;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-mouse" then goto index 138;
   if "ch2-seen-room-33" then goto index 137;
   show serial_dialog "space";
   goto index 139;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-in-room" == 33 then goto index 144;
   if "ch2-seen-room-33" then goto index 143;
   show serial_dialog "space";
   goto index 145;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-33" then goto index 149;
   if "ch2-seen-room-34" then goto index 149;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 150;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 34 then goto index 155;
   if "ch2-seen-room-34" then goto index 154;
   show serial_dialog "space";
   goto index 156;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-plate" then goto index 161;
   if "ch2-seen-room-34" then goto index 160;
   show serial_dialog "space";
   goto index 162;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-34" then goto index 165;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 166;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-23" then goto index 172;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 173;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 23 then goto index 178;
   if "ch2-seen-room-23" then goto index 177;
   show serial_dialog "space";
   goto index 179;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-23" then goto index 182;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 183;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-13" then goto index 187;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 188;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-goldfish" then goto index 193;
   if "ch2-seen-room-13" then goto index 192;
   show serial_dialog "space";
   goto index 194;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-13" then goto index 197;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 198;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 202;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 203;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 207;
   if "ch2-seen-room-32" then goto index 207;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 208;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-33" then goto index 213;
   if "ch2-seen-room-32" then goto index 213;
   if "ch2-seen-room-34" then goto index 213;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 214;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-32" then goto index 218;
   if "ch2-seen-room-34" then goto index 218;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 219;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-34" then goto index 222;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 223;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-23" then goto index 229;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 230;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-heatsink" then goto index 235;
   if "ch2-seen-room-23" then goto index 234;
   show serial_dialog "space";
   goto index 236;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-23" then goto index 239;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 240;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-13" then goto index 244;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 245;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-32" then goto index 249;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 250;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 32 then goto index 255;
   if "ch2-seen-room-32" then goto index 254;
   show serial_dialog "space";
   goto index 256;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-32" then goto index 259;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 260;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-22" then goto index 267;
   if "ch2-seen-room-23" then goto index 267;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 268;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-12" then goto index 273;
   if "ch2-seen-room-13" then goto index 273;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 274;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-12" then goto index 279;
   if "ch2-seen-room-13" then goto index 279;
   if "ch2-seen-room-31" then goto index 279;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 280;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-31" then goto index 283;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 284;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-31" then goto index 288;
   if "ch2-seen-room-32" then goto index 288;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 289;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-manual" then goto index 291;
   if "ch2-map-seamoss" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-22" then goto index 299;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 300;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 22 then goto index 305;
   if "ch2-seen-room-22" then goto index 304;
   show serial_dialog "space";
   goto index 306;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-powersupply" then goto index 311;
   if "ch2-seen-room-22" then goto index 310;
   show serial_dialog "space";
   goto index 312;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-22" then goto index 315;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 316;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-12" then goto index 320;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 321;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 12 then goto index 326;
   if "ch2-seen-room-12" then goto index 325;
   show serial_dialog "space";
   goto index 327;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-needle" then goto index 332;
   if "ch2-seen-room-12" then goto index 331;
   show serial_dialog "space";
   goto index 333;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-12" then goto index 337;
   if "ch2-seen-room-31" then goto index 337;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 338;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-31" then goto index 341;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 342;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 31 then goto index 347;
   if "ch2-seen-room-31" then goto index 346;
   show serial_dialog "space";
   goto index 348;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-31" then goto index 351;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 352;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-keyboard" then goto index 357;
   if "ch2-seen-room-31" then goto index 356;
   show serial_dialog "space";
   goto index 358;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-31" then goto index 361;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 362;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-manual" then goto index 364;
   if "ch2-map-seamoss" then goto index 366;
   goto index 367;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-22" then goto index 373;
   if "ch2-seen-room-21" then goto index 373;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-21" then goto index 377;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 378;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-11" then goto index 383;
   if "ch2-seen-room-12" then goto index 383;
   if "ch2-seen-room-21" then goto index 383;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 384;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-11" then goto index 388;
   if "ch2-seen-room-12" then goto index 388;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 389;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-11" then goto index 394;
   if "ch2-seen-room-12" then goto index 394;
   if "ch2-seen-room-31" then goto index 394;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 395;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-31" then goto index 398;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 399;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-manual" then goto index 401;
   if "ch2-map-seamoss" then goto index 403;
   goto index 404;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-21" then goto index 409;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 410;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 21 then goto index 415;
   if "ch2-seen-room-21" then goto index 414;
   show serial_dialog "space";
   goto index 416;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-seen-room-21" then goto index 419;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 420;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-abacus" then goto index 427;
   if "ch2-map-ramchips" then goto index 427;
   if "ch2-map-solder" then goto index 427;
   if "ch2-seen-room-21" then goto index 426;
   show serial_dialog "space";
   goto index 428;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-21" then goto index 431;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 432;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-21" then goto index 436;
   if "ch2-seen-room-11" then goto index 436;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 437;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-11" then goto index 440;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 441;
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 11 then goto index 446;
   if "ch2-seen-room-11" then goto index 445;
   show serial_dialog "space";
   goto index 447;
   show serial_dialog "dot";
   show serial_dialog "player";
   if "ch2-map-monitor" then goto index 452;
   if "ch2-seen-room-11" then goto index 451;
   show serial_dialog "space";
   goto index 453;
   show serial_dialog "dot";
   show serial_dialog "item";
   if "ch2-seen-room-11" then goto index 456;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 457;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-seen-room-21" then goto index 463;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 464;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-cactuscooler-castle" then goto index 476;
   if "ch2-map-cactuscooler-bobaustin" then goto index 474;
   if "ch2-map-seamoss" then goto index 472;
   if "ch2-map-manual" then goto index 470;
   goto index 477;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 477;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 477;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 477;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-in-room" == 1 then goto index 484;
   if "ch2-seen-room-1" then goto index 483;
   show serial_dialog "space";
   goto index 485;
   show serial_dialog "dot";
   show serial_dialog "player";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-cactuscooler-castle" then goto index 497;
   if "ch2-map-cactuscooler-bobaustin" then goto index 495;
   if "ch2-map-seamoss" then goto index 493;
   if "ch2-map-manual" then goto index 491;
   goto index 498;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 498;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 498;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 498;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   if "ch2-map-cactuscooler-castle" then goto index 511;
   if "ch2-map-cactuscooler-bobaustin" then goto index 509;
   if "ch2-map-seamoss" then goto index 507;
   if "ch2-map-manual" then goto index 505;
   goto index 512;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 512;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 512;
   show serial_dialog "ch2-serial-map.mgs-XX";
   goto index 512;
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   show serial_dialog "ch2-serial-map.mgs-XX";
   show serial_dialog "newline";
   goto "draw-ch2-serial-map-footer";
}

"ch2-toot-check" {
   if "ch2-toot-level" == 0 then goto index 5;
   if "ch2-toot-level" == 3 then goto index 3;
   goto index 6;
   goto "ch2-toot-step3-check";
   goto index 6;
   goto "ch2-toot-intro";
   show serial_dialog "spacer";
   show serial_dialog "ch2-serial-toot.mgs-XX";
   if "ch2-toot-level" == 1 then goto index 17;
   if "ch2-toot-level" == 2 then goto index 15;
   if "ch2-toot-level" == 4 then goto index 13;
   show serial_dialog "ch2-serial-toot.mgs-XX";
   goto index 18;
   goto "ch2-toot-step4-start";
   goto index 18;
   goto "ch2-toot-step2-start";
   goto index 18;
   goto "ch2-toot-step1-start";
}

"on_load-ch2-smithfamily" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-smithfamily.mgs-XX";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 15;
   if "ch2-in-room" == 0 then goto index 15;
   if debug_mode then goto index 15;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 19;
   goto index 20;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 46;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 47;
   serial_control = false;
   if "ch2-has-map" then goto index 49;
   goto index 51;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 121;
   if "ch2-warp-granted" then goto index 54;
   goto index 195;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 195;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 196;
   if "ch2-storyflag-round" < 5 then goto index 198;
   goto index 228;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 230;
   goto index 231;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 233;
   goto index 234;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 236;
   goto index 237;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 239;
   goto index 240;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 242;
   goto index 243;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 245;
   goto index 246;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 248;
   goto index 249;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 251;
   goto index 252;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 254;
   goto index 255;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 257;
   goto index 259;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 261;
   goto index 262;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 264;
   goto index 265;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 267;
   goto index 268;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 270;
   goto index 271;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 273;
   goto index 274;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 276;
   goto index 277;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 283;
   if "debug-curr-state" then goto index 280;
   goto index 281;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 287;
   if !"debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 289;
   goto index 297;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 300;
   goto index 368;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 302;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 362;
   if "goosefact" == 1 then goto index 360;
   if "goosefact" == 2 then goto index 358;
   if "goosefact" == 3 then goto index 356;
   if "goosefact" == 4 then goto index 354;
   if "goosefact" == 5 then goto index 352;
   if "goosefact" == 6 then goto index 350;
   if "goosefact" == 7 then goto index 348;
   if "goosefact" == 8 then goto index 346;
   if "goosefact" == 9 then goto index 344;
   if "goosefact" == 10 then goto index 342;
   if "goosefact" == 11 then goto index 340;
   if "goosefact" == 12 then goto index 338;
   if "goosefact" == 13 then goto index 336;
   if "goosefact" == 14 then goto index 334;
   if "goosefact" == 15 then goto index 332;
   if "goosefact" == 16 then goto index 330;
   if "goosefact" == 17 then goto index 328;
   if "goosefact" == 18 then goto index 326;
   if "goosefact" == 19 then goto index 324;
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 367;
   goto index 368;
   "goosefact" = 0;
}

"on_tick-ch2-smithfamily" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 4;
   warp_state = "walk_from-smithfamily";
   load map "ch2-town";
}

"interact-ch2-smith" {
   if "ch2-storyflag-round" == 0 then goto index 9;
   if "ch2-storyflag-round" <= 2 then goto index 7;
   if "ch2-storyflag-round" <= 4 then goto index 5;
   show dialog "ch2-smithfamily.mgs-XX";
   goto index 10;
   show dialog "ch2-smithfamily.mgs-XX";
   goto index 10;
   show dialog "ch2-smithfamily.mgs-XX";
   goto index 10;
   show dialog "ch2-smithfamily.mgs-XX";
}

"on_load-ch2-town" {
   if warp_state == "cutscene-escort" then goto index 2;
   goto index 3;
   goto "ch2-escort-cutscene";
   show serial_dialog "spacer";
   show serial_dialog "ch2-town.mgs-XX";
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" < 5 then goto index 7;
   entity "Jackob" on_tick = "yeet";
   if "ch2-storyflag-round" == 2 then goto index 11;
   entity "Alfonso" on_tick = "yeet";
   goto index 16;
   entity "Alfonso" position = geometry "alfonso-verthandi-spot";
   entity "Alfonso" direction = "west";
   entity "Verthandi" direction = "east";
   entity "Alfonso" on_interact = "interact-ch2-alfonso-verthandi";
   entity "Verthandi" on_interact = "interact-ch2-alfonso-verthandi";
   if "ch2-storyflag-round" == 1 then goto index 23;
   if "ch2-storyflag-round" == 2 then goto index 23;
   if "ch2-storyflag-round" == 3 then goto index 21;
   if "ch2-storyflag-round" == 4 then goto index 21;
   goto index 26;
   entity "Shepherd" position = geometry "shepherd1";
   goto index 26;
   entity "Shepherd" position = geometry "shepherd2";
   entity "Shepherd" direction = "east";
   entity "Shepherd" on_tick = "null_script";
   if "ch2-storyflag-round" == 0 then goto index 33;
   if "ch2-storyflag-round" == 3 then goto index 30;
   if "ch2-storyflag-round" == 4 then goto index 30;
   goto index 35;
   entity "Verthandi" position = geometry "verthandi2";
   entity "Verthandi" direction = "north";
   goto index 35;
   entity "Verthandi" position = geometry "verthandi1";
   entity "Verthandi" direction = "west";
   if "ch2-storyflag-round" == 1 then goto index 43;
   if "ch2-storyflag-round" == 2 then goto index 43;
   if "ch2-storyflag-round" == 3 then goto index 40;
   if "ch2-storyflag-round" == 4 then goto index 40;
   goto index 45;
   entity "Marta" position = geometry "marta2";
   entity "Marta" direction = "south";
   goto index 45;
   entity "Marta" position = geometry "marta1";
   entity "Marta" direction = "west";
   if "ch2-delmar-in-house" then goto index 47;
   goto index 48;
   entity "Delmar" on_tick = "yeet";
   player_control = false;
   if warp_state == "raw_game_load-ch2" then goto index 92;
   if warp_state == "exit_from-credits" then goto index 89;
   if warp_state == "walk_from-east" then goto index 85;
   if warp_state == "walk_from-west" then goto index 81;
   if warp_state == "walk_from-bobsclub" then goto index 79;
   if warp_state == "walk_from-bakery" then goto index 77;
   if warp_state == "walk_from-lodge" then goto index 75;
   if warp_state == "walk_from-greenhouse" then goto index 73;
   if warp_state == "walk_from-magehouse" then goto index 71;
   if warp_state == "walk_from-oldcouplehouse" then goto index 69;
   if warp_state == "walk_from-smithfamily" then goto index 67;
   if warp_state == "walk_from-woprhouse" then goto index 65;
   if warp_state == "walk_from-bobsclub" then goto index 63;
   goto index 106;
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-woprhouse" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-smithfamily" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-oldcouplehouse" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-magehouse" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-greenhouse" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-lodge" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-bakery" length over 200ms;
   goto index 106;
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto index 106;
   player path = "walk_from-west";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 106;
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 106;
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   goto index 106;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 105;
   if "playersave-dir" == 1 then goto index 103;
   if "playersave-dir" == 2 then goto index 101;
   if "playersave-dir" == 3 then goto index 99;
   goto index 106;
   player direction = "west";
   goto index 106;
   player direction = "south";
   goto index 106;
   player direction = "east";
   goto index 106;
   player direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 119;
   if "ch2-in-room" == 0 then goto index 119;
   if debug_mode then goto index 119;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 123;
   goto index 124;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 150;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 151;
   serial_control = false;
   if "ch2-has-map" then goto index 153;
   goto index 155;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 225;
   if "ch2-warp-granted" then goto index 158;
   goto index 299;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 299;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 300;
   if "ch2-storyflag-round" < 5 then goto index 302;
   goto index 332;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 334;
   goto index 335;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 337;
   goto index 338;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 340;
   goto index 341;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 343;
   goto index 344;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 346;
   goto index 347;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 349;
   goto index 350;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 352;
   goto index 353;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 355;
   goto index 356;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 358;
   goto index 359;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 361;
   goto index 363;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 365;
   goto index 366;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 368;
   goto index 369;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 371;
   goto index 372;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 374;
   goto index 375;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 377;
   goto index 378;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 380;
   goto index 381;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 387;
   if "debug-curr-state" then goto index 384;
   goto index 385;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 391;
   if !"debug-curr-state" then goto index 389;
   goto index 390;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 393;
   goto index 401;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 404;
   goto index 472;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 406;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 466;
   if "goosefact" == 1 then goto index 464;
   if "goosefact" == 2 then goto index 462;
   if "goosefact" == 3 then goto index 460;
   if "goosefact" == 4 then goto index 458;
   if "goosefact" == 5 then goto index 456;
   if "goosefact" == 6 then goto index 454;
   if "goosefact" == 7 then goto index 452;
   if "goosefact" == 8 then goto index 450;
   if "goosefact" == 9 then goto index 448;
   if "goosefact" == 10 then goto index 446;
   if "goosefact" == 11 then goto index 444;
   if "goosefact" == 12 then goto index 442;
   if "goosefact" == 13 then goto index 440;
   if "goosefact" == 14 then goto index 438;
   if "goosefact" == 15 then goto index 436;
   if "goosefact" == 16 then goto index 434;
   if "goosefact" == 17 then goto index 432;
   if "goosefact" == 18 then goto index 430;
   if "goosefact" == 19 then goto index 428;
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 467;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 471;
   goto index 472;
   "goosefact" = 0;
   if debug_mode then goto index 474;
   goto index 477;
   command "cutbug" = "cutbug";
   command "cutbug" + "auto" = "cutbug-auto";
   show serial_dialog "ch2-town.mgs-XX";
   if warp_state == "raw_game_load-ch2" then goto index 479;
   goto index 482;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"on_tick-ch2-town" {
   if player intersects geometry "door-bakery" then goto index 2;
   goto index 4;
   warp_state = "ch2-town";
   load map "ch2-bakery";
   if player intersects geometry "door-smithfamily" then goto index 6;
   goto index 8;
   warp_state = "ch2-town";
   load map "ch2-smithfamily";
   if player intersects geometry "door-greenhouse" then goto index 10;
   goto index 12;
   warp_state = "ch2-town";
   load map "ch2-greenhouse";
   if player intersects geometry "door-magehouse" then goto index 14;
   goto index 16;
   warp_state = "ch2-town";
   load map "ch2-magehouse";
   if player intersects geometry "door-lodge" then goto index 18;
   goto index 20;
   warp_state = "ch2-town";
   load map "ch2-lodge";
   if player intersects geometry "door-oldcouplehouse" then goto index 22;
   goto index 24;
   warp_state = "ch2-town";
   load map "ch2-oldcouplehouse";
   if player intersects geometry "door-bobsclub" then goto index 26;
   goto index 28;
   warp_state = "ch2-town";
   load map "ch2-bobsclub";
   if player intersects geometry "door-woprhouse" then goto index 30;
   goto index 32;
   warp_state = "ch2-town";
   load map "woprhouse";
   if player intersects geometry "east-hitbox" then goto index 34;
   goto index 39;
   player path = "east-point";
   warp_state = "walk_from-west";
   player on_tick = "on_tick-ch2-town-walkfadeout";
   camera fade out -> #000000 over 500ms;
   load map "ch2-town";
   if player intersects geometry "west-hitbox" then goto index 41;
   goto index 46;
   player path = "west-point";
   warp_state = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadeout";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-outside";
}

"interact-ch2-marta" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 10;
   if "ch2-storyflag-round" <= 2 then goto index 8;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-town.mgs-XX";
   goto index 11;
   show dialog "ch2-town.mgs-XX";
   goto index 11;
   show dialog "ch2-town.mgs-XX";
   goto index 11;
   show dialog "ch2-town.mgs-XX";
   self on_interact = "interact-ch2-marta";
}

"interact-ch2-shepherd" {
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 11;
   if "ch2-storyflag-round" <= 2 then goto index 8;
   if "ch2-storyflag-round" <= 4 then goto index 6;
   show dialog "ch2-town.mgs-XX";
   goto index 12;
   show dialog "ch2-town.mgs-XX";
   goto index 12;
   show dialog "ch2-town.mgs-XX";
   self direction = "east";
   goto index 12;
   show dialog "ch2-town.mgs-XX";
   self on_interact = "interact-ch2-shepherd";
}

"interact-ch2-verthandi" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   if "ch2-storyflag-round" == 0 then goto index 31;
   if "ch2-storyflag-round" <= 2 then goto index 29;
   if "ch2-storyflag-round" <= 4 then goto index 21;
   show dialog "ch2-town.mgs-XX";
   goto index 32;
   show dialog "ch2-town.mgs-XX";
   player_control = false;
   self direction += 1;
   wait 1500ms;
   self direction -= -1;
   show dialog "ch2-town.mgs-XX";
   player_control = true;
   goto index 32;
   show dialog "ch2-town.mgs-XX";
   goto index 32;
   show dialog "ch2-town.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 45;
   if "tempvar" == 1 then goto index 43;
   if "tempvar" == 2 then goto index 41;
   if "tempvar" == 3 then goto index 39;
   goto index 46;
   self direction = "west";
   goto index 46;
   self direction = "south";
   goto index 46;
   self direction = "east";
   goto index 46;
   self direction = "north";
}

"interact-ch2-jackob-end" {
   if "ch2-storyflag-round" < 5 then goto index 2;
   goto index 3;
   goto "null_script";
   self direction = player;
   show dialog "ch2-town.mgs-XX";
   if !"ch1_finished" then goto index 6;
   if !"ch1_unfinished_backstory" then goto index 8;
   goto index 10;
   show dialog "ch2-town.mgs-XX";
   "ch1_unfinished_backstory" = true;
   show dialog "ch2-town.mgs-XX";
}

"interact-ch2-alfonso-end" {
   if "ch2-storyflag-round" < 5 then goto index 2;
   goto index 3;
   goto "null_script";
   self direction = player;
   show dialog "ch2-town.mgs-XX";
}

"interact-ch2-hamster" {
   self direction = player;
   if "ch2-hamstertalk" == 0 then goto index 11;
   if "ch2-hamstertalk" == 1 then goto index 8;
   if "ch2-hamstertalk" == 2 then goto index 5;
   goto index 13;
   show dialog "ch2-town.mgs-XX";
   "ch2-hamstertalk" = 0;
   goto index 13;
   show dialog "ch2-town.mgs-XX";
   "ch2-hamstertalk" = 2;
   goto index 13;
   show dialog "ch2-town.mgs-XX";
   "ch2-hamstertalk" = 1;
}

"cutbug-auto" {
   player_control = false;
   player y = 0;
   "j" = 0;
   if "i" < 1030 then goto index 5;
   goto index 77;
   player y = "j";
   "qty" = player y;
   show serial_dialog "spacer";
   show serial_dialog "cutbug-test.mgs-XX";
   if "qty" < 10 then goto index 17;
   if "qty" < 100 then goto index 15;
   if "qty" < 1000 then goto index 13;
   goto index 18;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 18;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 18;
   show serial_dialog "cutbug-test.mgs-XX";
   show serial_dialog "cutbug-test.mgs-XX";
   "i" = 0;
   if "i" <= "qty" then goto index 22;
   goto index 74;
   "mod" = "i";
   "mod" %= 16;
   if "mod" == 0 then goto index 71;
   if "mod" == 1 then goto index 69;
   if "mod" == 2 then goto index 67;
   if "mod" == 3 then goto index 65;
   if "mod" == 4 then goto index 63;
   if "mod" == 5 then goto index 61;
   if "mod" == 6 then goto index 59;
   if "mod" == 7 then goto index 57;
   if "mod" == 8 then goto index 55;
   if "mod" == 9 then goto index 53;
   if "mod" == 10 then goto index 51;
   if "mod" == 11 then goto index 49;
   if "mod" == 12 then goto index 47;
   if "mod" == 13 then goto index 45;
   if "mod" == 14 then goto index 43;
   if "mod" == 15 then goto index 41;
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 72;
   show serial_dialog "cutbug-test.mgs-XX";
   "i" += 1;
   goto index 20;
   wait 250ms;
   "j" += 1;
   goto index 3;
}

"cutbug" {
   "qty" = player y;
   show serial_dialog "spacer";
   show serial_dialog "cutbug-test.mgs-XX";
   if "qty" < 10 then goto index 11;
   if "qty" < 100 then goto index 9;
   if "qty" < 1000 then goto index 7;
   goto index 12;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 12;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 12;
   show serial_dialog "cutbug-test.mgs-XX";
   show serial_dialog "cutbug-test.mgs-XX";
   "i" = 0;
   if "i" <= "qty" then goto index 16;
   goto index 68;
   "mod" = "i";
   "mod" %= 16;
   if "mod" == 0 then goto index 65;
   if "mod" == 1 then goto index 63;
   if "mod" == 2 then goto index 61;
   if "mod" == 3 then goto index 59;
   if "mod" == 4 then goto index 57;
   if "mod" == 5 then goto index 55;
   if "mod" == 6 then goto index 53;
   if "mod" == 7 then goto index 51;
   if "mod" == 8 then goto index 49;
   if "mod" == 9 then goto index 47;
   if "mod" == 10 then goto index 45;
   if "mod" == 11 then goto index 43;
   if "mod" == 12 then goto index 41;
   if "mod" == 13 then goto index 39;
   if "mod" == 14 then goto index 37;
   if "mod" == 15 then goto index 35;
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   goto index 66;
   show serial_dialog "cutbug-test.mgs-XX";
   "i" += 1;
   goto index 14;
}

"man-inventory" {
   show serial_dialog "spacer";
   show serial_dialog "command-inventory.mgs-XX";
   if "ch2-parts-round-2-backstory" then goto index 4;
   goto index 5;
   show serial_dialog "command-inventory.mgs-XX";
}

"command-inventory" {
   "ch2-count-inventory" = 0;
   if !"only-count-inventory" then goto index 3;
   goto index 5;
   show serial_dialog "spacer";
   show serial_dialog "command-inventory.mgs-XX";
   if "ch2-carrying-cactuscooler" then goto index 7;
   goto index 11;
   if !"only-count-inventory" then goto index 9;
   goto index 10;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-heatsink" then goto index 13;
   goto index 17;
   if !"only-count-inventory" then goto index 15;
   goto index 16;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-powersupply" then goto index 19;
   goto index 23;
   if !"only-count-inventory" then goto index 21;
   goto index 22;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-monitor" then goto index 25;
   goto index 29;
   if !"only-count-inventory" then goto index 27;
   goto index 28;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-harddrive" then goto index 31;
   goto index 35;
   if !"only-count-inventory" then goto index 33;
   goto index 34;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-plate" then goto index 37;
   goto index 41;
   if !"only-count-inventory" then goto index 39;
   goto index 40;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-needle" then goto index 43;
   goto index 47;
   if !"only-count-inventory" then goto index 45;
   goto index 46;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-keyboard" then goto index 49;
   goto index 53;
   if !"only-count-inventory" then goto index 51;
   goto index 52;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-mouse" then goto index 55;
   goto index 59;
   if !"only-count-inventory" then goto index 57;
   goto index 58;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-ramchips" then goto index 61;
   goto index 65;
   if !"only-count-inventory" then goto index 63;
   goto index 64;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-clock" then goto index 67;
   goto index 71;
   if !"only-count-inventory" then goto index 69;
   goto index 70;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-cpu" then goto index 73;
   goto index 77;
   if !"only-count-inventory" then goto index 75;
   goto index 76;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-goldfish" then goto index 79;
   goto index 83;
   if !"only-count-inventory" then goto index 81;
   goto index 82;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-manual" then goto index 85;
   goto index 89;
   if !"only-count-inventory" then goto index 87;
   goto index 88;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-abacus" then goto index 91;
   goto index 95;
   if !"only-count-inventory" then goto index 93;
   goto index 94;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-mainframeos" then goto index 97;
   goto index 101;
   if !"only-count-inventory" then goto index 99;
   goto index 100;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-minirake-99" then goto index 103;
   goto index 107;
   if !"only-count-inventory" then goto index 105;
   goto index 106;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-count-inventory" == 0 then goto index 108;
   if !"only-count-inventory" then goto index 110;
   goto index 111;
   show serial_dialog "command-inventory.mgs-XX";
   "only-count-inventory" = false;
   "ch2-counted-inventory" = "ch2";
   "ch2-counted-inventory" -= "count";
   "ch2-counted-inventory" -= "inventory";
   "ch2-count-inventory" = 0;
}

"command-man" {
   if dialog open then goto index 1;
   if "can-interrupt-dialog" then goto index 3;
   goto index 5;
   close dialog;
   "can-interrupt-dialog" = false;
   if "ch2-in-room" == 99 then goto index 13;
   if "ch2-ring-zero-enabled-in-castle" then goto index 11;
   if "ch2-in-room" != 0 then goto index 11;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   goto index 14;
   goto "command-man-normal";
   goto index 14;
   show dialog "command-man.mgs-XX";
}

"command-man-normal" {
   if "ch2-cutseen-bert-secret" then goto index 1;
   if !"ch2-lambda-bert-backstory" then goto index 6;
   if !"ch2-parts-round-2-backstory" then goto index 4;
   goto index 7;
   goto "ch2-lambda-round-2-parts1";
   goto index 7;
   goto "ch2-bert-secret-lambda-intro";
   if "ch2-cutseen-bert-message" then goto index 8;
   if !"ch2-parts-round-3-backstory" then goto index 10;
   goto index 11;
   goto "ch2-bert-message-lambda-intro";
   if "ch2-cutseen-last-parts-done" then goto index 12;
   if !"ch2-parts-round-4-backstory" then goto index 14;
   goto index 15;
   goto "ch2-lambda-round-4";
   if "ch2-toot-done" then goto index 17;
   goto index 18;
   goto "command-man-normal-convo";
   goto "ch2-toot-check";
}

"ch2-lambda-topic-q" {
   if "ch2-storyflag-round" < 5 then goto index 3;
   goto "ch2-lambda-topic-q-end";
   goto index 4;
   goto "ch2-lambda-topic-q-midgame";
}

"ch2-lambda-mainframe-fix-1" {
   show serial_dialog "spacer";
   if "ch2-storyflag-round" < 4 then goto index 7;
   if "ch2-storyflag-round" == 4 then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 8;
   show serial_dialog "command-man.mgs-XX";
   goto index 8;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-mainframe-q";
}

"ch2-lambda-person-kuro" {
   show serial_dialog "spacer";
   if !"ch2-seen-room-11" then goto index 4;
   show serial_dialog "command-man.mgs-XX";
   goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-concierge" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-12" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-templeton" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-13" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-sebastian" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-13" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-alvin" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"band-backstory" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 7;
   show serial_dialog "command-man.mgs-XX";
   "band-backstory" = true;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-theodore" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"band-backstory" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 7;
   show serial_dialog "command-man.mgs-XX";
   "band-backstory" = true;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-simon" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"band-backstory" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 7;
   show serial_dialog "command-man.mgs-XX";
   "band-backstory" = true;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-seamoss" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-32" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-gloria" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-32" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-samson" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-32" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-gregory" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-33" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-jeanpaul" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-21" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-frankie" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-21" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-scuzzy" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-22" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-ckwatt" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-22" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-tracy" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-23" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-rocco" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-23" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-xc" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-seen-room-99" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-lambda-where" {
   show serial_dialog "spacer";
   if !"ch2-seen-room-99" then goto index 8;
   if "ch2-in-room" == 99 then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   show serial_dialog "command-man.mgs-XX";
   goto index 9;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-person-lambda-q";
}

"ch2-lambda-person-lambda-name-2c" {
   show serial_dialog "command-man.mgs-XX";
   if "ch2-storyflag-round" < 5 then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-person-lambda-name-followup";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
}

"ch2-lambda-person-alfonso" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-cutseen-secret-ending" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-jackob" {
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if !"ch2-cutseen-secret-ending" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-person-bert" {
   show serial_dialog "spacer";
   if !"ch2-cutseen-bert-secret" then goto index 5;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-bert-q";
   goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-topic-person-s";
}

"ch2-lambda-bert-mentioned" {
   "ch2-lambdabert-q2" = true;
   if !"ch2-cutseen-castle99" then goto index 6;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-bert-autocontinue-check";
   goto index 9;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-bert-autocontinue-check";
}

"ch2-lambda-bert-message" {
   "ch2-lambdabert-q4" = true;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   if "interrupt" then goto index 6;
   show serial_dialog "command-man.mgs-XX";
   goto index 7;
   show serial_dialog "command-man.mgs-XX";
   goto "ch2-lambda-bert-autocontinue-check";
}

"ch2-lambda-bert-autocontinue-check" {
   if "ch2-parts-round-2-backstory" then goto index 8;
   if !"ch2-lambdabert-q1" then goto index 8;
   if !"ch2-lambdabert-q2" then goto index 8;
   if !"ch2-lambdabert-q3" then goto index 8;
   if !"ch2-lambdabert-q4" then goto index 8;
   "ch2-lambdabert-skip-spacer" = true;
   goto "ch2-lambda-round-2-parts1";
   goto index 9;
   goto "ch2-lambda-bert-q";
}

"ch2-lambda-bert-quit" {
   if "CALLBACK" == 1 then goto index 3;
   goto "ch2-lambda-topic-person-s";
   goto index 5;
   "CALLBACK" = 0;
   goto "ch2-lambda-round-2-parts1";
}

"draw-ch2-serial-map-footer" {
   show serial_dialog "command-map.mgs-XX";
   if "ch2-in-room" == 1 then goto index 40;
   if "ch2-in-room" == 11 then goto index 38;
   if "ch2-in-room" == 12 then goto index 36;
   if "ch2-in-room" == 13 then goto index 34;
   if "ch2-in-room" == 14 then goto index 32;
   if "ch2-in-room" == 21 then goto index 30;
   if "ch2-in-room" == 22 then goto index 28;
   if "ch2-in-room" == 23 then goto index 26;
   if "ch2-in-room" == 31 then goto index 24;
   if "ch2-in-room" == 32 then goto index 22;
   if "ch2-in-room" == 33 then goto index 20;
   if "ch2-in-room" == 34 then goto index 18;
   if "ch2-in-room" == 99 then goto index 16;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   goto index 41;
   show serial_dialog "command-map.mgs-XX";
   show serial_dialog "command-map.mgs-XX";
   serial_control = true;
}

"command-parts-fail" {
   if "ch2-ring-zero-enabled-in-castle" then goto index 5;
   if "ch2-in-room" != 0 then goto index 5;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   goto index 8;
   show serial_dialog "spacer";
   show serial_dialog "command-parts.mgs-XX";
   goto "command-parts-print";
}

"command-parts" {
   if "ch2-ring-zero-enabled-in-castle" then goto index 5;
   if "ch2-in-room" != 0 then goto index 5;
   show serial_dialog "spacer";
   show serial_dialog "command-man.mgs-XX";
   goto index 8;
   show serial_dialog "spacer";
   show serial_dialog "command-parts.mgs-XX";
   goto "command-parts-print";
}

"command-parts-print" {
   if "ch2-storyflag-round" == 1 then goto index 14;
   if "ch2-storyflag-round" == 2 then goto index 10;
   if "ch2-storyflag-round" == 3 then goto index 7;
   if "ch2-storyflag-round" >= 4 then goto index 4;
   if !"ch2-parts-round-4-backstory" then goto index 6;
   goto "label four";
   goto "label three";
   if !"ch2-parts-round-3-backstory" then goto index 9;
   goto "label three";
   goto "label two";
   if !"ch2-parts-round-2-backstory" then goto index 13;
   goto "label two";
   goto index 15;
   goto "label one";
   goto "label one";
   if "ch2-installed-heatsink" then goto index 21;
   if "ch2-carrying-heatsink" then goto index 19;
   show serial_dialog "command-parts.mgs-XX";
   goto index 22;
   show serial_dialog "command-parts.mgs-XX";
   goto index 22;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-powersupply" then goto index 28;
   if "ch2-carrying-powersupply" then goto index 26;
   show serial_dialog "command-parts.mgs-XX";
   goto index 29;
   show serial_dialog "command-parts.mgs-XX";
   goto index 29;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-monitor" then goto index 35;
   if "ch2-carrying-monitor" then goto index 33;
   show serial_dialog "command-parts.mgs-XX";
   goto index 36;
   show serial_dialog "command-parts.mgs-XX";
   goto index 36;
   show serial_dialog "command-parts.mgs-XX";
   goto "label wrapup";
   if "ch2-installed-harddrive" then goto index 43;
   if "ch2-carrying-harddrive" then goto index 41;
   show serial_dialog "command-parts.mgs-XX";
   goto index 44;
   show serial_dialog "command-parts.mgs-XX";
   goto index 44;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-plate" then goto index 50;
   if "ch2-carrying-plate" then goto index 48;
   show serial_dialog "command-parts.mgs-XX";
   goto index 51;
   show serial_dialog "command-parts.mgs-XX";
   goto index 51;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-needle" then goto index 57;
   if "ch2-carrying-needle" then goto index 55;
   show serial_dialog "command-parts.mgs-XX";
   goto index 58;
   show serial_dialog "command-parts.mgs-XX";
   goto index 58;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-keyboard" then goto index 64;
   if "ch2-carrying-keyboard" then goto index 62;
   show serial_dialog "command-parts.mgs-XX";
   goto index 65;
   show serial_dialog "command-parts.mgs-XX";
   goto index 65;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-mouse" then goto index 71;
   if "ch2-carrying-mouse" then goto index 69;
   show serial_dialog "command-parts.mgs-XX";
   goto index 72;
   show serial_dialog "command-parts.mgs-XX";
   goto index 72;
   show serial_dialog "command-parts.mgs-XX";
   goto "label wrapup";
   if "ch2-installed-ramchips" then goto index 79;
   if "ch2-carrying-ramchips" then goto index 77;
   show serial_dialog "command-parts.mgs-XX";
   goto index 80;
   show serial_dialog "command-parts.mgs-XX";
   goto index 80;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-clock" then goto index 86;
   if "ch2-carrying-clock" then goto index 84;
   show serial_dialog "command-parts.mgs-XX";
   goto index 87;
   show serial_dialog "command-parts.mgs-XX";
   goto index 87;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-cpu" then goto index 93;
   if "ch2-carrying-cpu" then goto index 91;
   show serial_dialog "command-parts.mgs-XX";
   goto index 94;
   show serial_dialog "command-parts.mgs-XX";
   goto index 94;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-goldfish" then goto index 100;
   if "ch2-carrying-goldfish" then goto index 98;
   show serial_dialog "command-parts.mgs-XX";
   goto index 101;
   show serial_dialog "command-parts.mgs-XX";
   goto index 101;
   show serial_dialog "command-parts.mgs-XX";
   if "ch2-installed-abacus" then goto index 107;
   if "ch2-carrying-abacus" then goto index 105;
   show serial_dialog "command-parts.mgs-XX";
   goto index 108;
   show serial_dialog "command-parts.mgs-XX";
   goto index 108;
   show serial_dialog "command-parts.mgs-XX";
   goto "label wrapup";
   if "ch2-installed-mainframeos" then goto index 115;
   if "ch2-cutseen-castle99" then goto index 113;
   show serial_dialog "command-parts.mgs-XX";
   goto index 116;
   show serial_dialog "command-parts.mgs-XX";
   goto index 116;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
}

"command-parts-monitor" {
   show serial_dialog "spacer";
   if "ch2-installed-monitor" then goto index 7;
   if "ch2-carrying-monitor" then goto index 5;
   show serial_dialog "ch2-describe-monitor";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-heatsink" {
   show serial_dialog "spacer";
   if "ch2-installed-heatsink" then goto index 7;
   if "ch2-carrying-heatsink" then goto index 5;
   show serial_dialog "ch2-describe-heatsink";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-powersupply" {
   show serial_dialog "spacer";
   if "ch2-installed-powersupply" then goto index 7;
   if "ch2-carrying-powersupply" then goto index 5;
   show serial_dialog "ch2-describe-powersupply";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-keyboard" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-keyboard" then goto index 10;
   if "ch2-carrying-keyboard" then goto index 8;
   show serial_dialog "ch2-describe-keyboard";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-mouse" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-mouse" then goto index 10;
   if "ch2-carrying-mouse" then goto index 8;
   show serial_dialog "ch2-describe-mouse";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-harddrive" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-harddrive" then goto index 11;
   if "ch2-carrying-harddrive" then goto index 9;
   show serial_dialog "ch2-describe-harddrive";
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-plate" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-plate" then goto index 11;
   if "ch2-carrying-plate" then goto index 7;
   show serial_dialog "ch2-describe-plate";
   if !"ch2-carrying-needle" then goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-needle" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-needle" then goto index 11;
   if "ch2-carrying-needle" then goto index 7;
   show serial_dialog "ch2-describe-needle";
   if !"ch2-carrying-plate" then goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-ramchips" {
   if "ch2-storyflag-round" < 2 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-ramchips" then goto index 10;
   if "ch2-carrying-ramchips" then goto index 8;
   show serial_dialog "ch2-describe-ramchips";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-clock" {
   if "ch2-storyflag-round" < 3 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-clock" then goto index 10;
   if "ch2-carrying-clock" then goto index 8;
   show serial_dialog "ch2-describe-clock";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-cpu" {
   if "ch2-storyflag-round" < 3 then goto index 2;
   goto index 3;
   goto "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-cpu" then goto index 10;
   if "ch2-carrying-cpu" then goto index 8;
   show serial_dialog "ch2-describe-cpu";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   goto index 11;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-goldfish" {
   if "ch2-storyflag-round" < 3 then goto index 2;
   goto index 3;
   goto "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-goldfish" then goto index 11;
   if "ch2-carrying-goldfish" then goto index 7;
   show serial_dialog "ch2-describe-goldfish";
   if !"ch2-carrying-abacus" then goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-abacus" {
   if "ch2-storyflag-round" < 3 then goto index 2;
   goto index 3;
   goto "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-abacus" then goto index 11;
   if "ch2-carrying-abacus" then goto index 7;
   show serial_dialog "ch2-describe-abacus";
   if !"ch2-carrying-goldfish" then goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   goto index 12;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-os" {
   show serial_dialog "spacer";
   if "ch2-storyflag-round" < 4 then goto index 7;
   if !"ch2-cutseen-castle99" then goto index 5;
   show serial_dialog "command-parts.mgs-XX";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-warp" {
   show serial_dialog "spacer";
   show serial_dialog "command-warp.mgs-XX";
   if "wopr-backdoor-found" then goto index 4;
   goto index 5;
   show serial_dialog "command-warp.mgs-XX";
}

"warp-ch2-castle-exterior" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-outside";
}

"warp-ch2-1" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-1";
   goto index 19;
   load map "ch2-castle-1-doorless";
}

"warp-ch2-11" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-11";
   goto index 19;
   load map "ch2-castle-11-doorless";
}

"warp-ch2-12" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-12";
   goto index 19;
   load map "ch2-castle-12-doorless";
}

"warp-ch2-13" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-13";
   goto index 19;
   load map "ch2-castle-13-doorless";
}

"warp-ch2-14" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 19;
   if "ch2-king-rescued" then goto index 19;
   load map "ch2-castle-14";
   goto index 20;
   load map "ch2-castle-14-doorless";
}

"warp-ch2-21" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-21";
   goto index 19;
   load map "ch2-castle-21-doorless";
}

"warp-ch2-22" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-22";
   goto index 19;
   load map "ch2-castle-22-doorless";
}

"warp-ch2-23" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-23";
   goto index 19;
   load map "ch2-castle-23-doorless";
}

"warp-ch2-31" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-31";
   goto index 19;
   load map "ch2-castle-31-doorless";
}

"warp-ch2-32" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 18;
   load map "ch2-castle-32";
   goto index 19;
   load map "ch2-castle-32-doorless";
}

"warp-ch2-33" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-33";
}

"warp-ch2-34" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-34";
}

"warp-ch2-99" {
   if "ch2-wait-for-hat-touch" then goto index 2;
   goto index 3;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 4;
   if !debug_mode then goto index 5;
   if "ch2-in-room" == 0 then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-99";
}

"warp-ch2-town" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-town";
}

"warp-ch2-bakery" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bakery";
}

"warp-ch2-greenhouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-greenhouse";
}

"warp-ch2-wopr" {
   if "wopr-backdoor-found" then goto index 4;
   if debug_mode then goto index 4;
   goto "warp-fail";
   goto index 24;
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 10;
   goto index 11;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 12;
   if !debug_mode then goto index 13;
   if "ch2-in-room" == 0 then goto index 15;
   goto index 16;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "woprhouse";
}

"warp-ch2-library" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-lodge";
}

"warp-ch2-rtfmroom" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-lodge-rtfm";
}

"warp-ch2-magehouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-magehouse";
}

"warp-ch2-bobsclub" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bobsclub";
}

"warp-ch2-bobsclub-basement" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bobsclub-basement";
}

"warp-ch2-oldcouplehouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-oldcouplehouse";
}

"warp-ch2-smithfamily" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 1;
   if !debug_mode then goto index 3;
   goto index 4;
   goto "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto index 6;
   goto index 7;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 8;
   if !debug_mode then goto index 9;
   if "ch2-in-room" == 0 then goto index 11;
   goto index 12;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-smithfamily";
}

"show_dialog-timewarp" {
   command "rtfm" = "command-rtfm";
   if !"demo-cutseen-timewarp" then goto index 3;
   goto index 12;
   camera fade out -> #000000 over 1ms;
   wait 200ms;
   player_control = false;
   player direction = "south";
   show dialog "demo.mgs-XX";
   camera fade in -> #000000 over 2000ms;
   show dialog "demo.mgs-XX";
   player_control = true;
   "demo-cutseen-timewarp" = true;
   hex_control = true;
}

"show_dialog-bob-first-demo_map" {
   if !"demo-bob-backstory" then goto index 25;
   if "demo-bob-notimplemented" then goto index 23;
   show dialog "demo.mgs-XX";
   if player name != "Bob" then goto index 5;
   goto index 7;
   show dialog "demo.mgs-XX";
   // auto return label
   show dialog "demo.mgs-XX";
   entity "Bob" position -> geometry "%ENTITY_PATH%" origin over 666ms;
   entity "Bob" direction = "west";
   wait 666ms;
   entity "Bob" direction = "south";
   show dialog "demo.mgs-XX";
   player position -> geometry "predoor" origin over 666ms;
   player position -> geometry "door" origin over 1333ms;
   wait 666ms;
   player direction = "east";
   show dialog "demo.mgs-XX";
   entity "Bob" direction = "west";
   show dialog "demo.mgs-XX";
   entity "Bob" direction = "south";
   "demo-bob-notimplemented" = true;
   goto index 27;
   show dialog "demo.mgs-XX";
   goto index 27;
   show dialog "demo.mgs-XX";
   "demo-bob-backstory" = true;
}

"show_dialog-timmy-demo_map" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   show dialog "demo.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 30;
   if "tempvar" == 1 then goto index 28;
   if "tempvar" == 2 then goto index 26;
   if "tempvar" == 3 then goto index 24;
   goto index 31;
   self direction = "west";
   goto index 31;
   self direction = "south";
   goto index 31;
   self direction = "east";
   goto index 31;
   self direction = "north";
}

"show_dialog-kid-demo_map" {
   "captured_animation" = self current_animation;
   self current_animation = 0;
   pause self on_tick;
   if self direction == "north" then goto index 14;
   if self direction == "east" then goto index 12;
   if self direction == "south" then goto index 10;
   if self direction == "west" then goto index 8;
   goto index 15;
   "tempvar" = 3;
   goto index 15;
   "tempvar" = 2;
   goto index 15;
   "tempvar" = 1;
   goto index 15;
   "tempvar" = 0;
   self direction = player;
   show dialog "demo.mgs-XX";
   self current_animation = "captured_animation";
   unpause self on_tick;
   if "tempvar" == 0 then goto index 30;
   if "tempvar" == 1 then goto index 28;
   if "tempvar" == 2 then goto index 26;
   if "tempvar" == 3 then goto index 24;
   goto index 31;
   self direction = "west";
   goto index 31;
   self direction = "south";
   goto index 31;
   self direction = "east";
   goto index 31;
   self direction = "north";
}

"check_if_player_is_goat_high-demo_map" {
   if player intersects geometry "high" then goto index 2;
   goto index 5;
   entity "goat1" on_tick = "move_goat1_to_low-demo_map";
   entity "goat2" on_tick = "move_goat2_to_low-demo_map";
   goto "check_if_player_is_goat_low-demo_map";
}

"check_if_player_is_goat_low-demo_map" {
   if player intersects geometry "low" then goto index 2;
   goto index 5;
   entity "goat1" on_tick = "move_goat1_to_high-demo_map";
   entity "goat2" on_tick = "move_goat2_to_high-demo_map";
   goto "check_if_player_is_goat_high-demo_map";
}

"map_on_tick-doors" {
   if player intersects geometry "door-main" then goto index 2;
   goto index 3;
   goto "load_map-main";
   if player intersects geometry "door-test" then goto index 5;
   goto index 6;
   goto "load_map-test";
   if player intersects geometry "door-town" then goto index 8;
   goto index 9;
   goto "load_map-town";
   if player intersects geometry "door-episode2" then goto index 11;
   goto index 12;
   goto "load_map-chapter2-start";
   if player intersects geometry "door-action_testing_01" then goto index 14;
   goto index 15;
   goto "load_map-action_testing_01";
   if player intersects geometry "door-action_testing_02" then goto index 17;
   goto index 18;
   goto "load_map-action_testing_02";
   if player intersects geometry "door-testbig" then goto index 20;
   goto index 21;
   goto "load_map-testbig";
}

"on_load-east_west" {
   if warp_state == "enter_from-east" then goto index 2;
   goto index 3;
   goto "enter_from-east";
   if warp_state == "enter_from-west" then goto index 5;
   goto index 6;
   goto "enter_from-west";
}

"on_tick-town" {
   if player intersects geometry "door_to-main-east" then goto index 2;
   goto index 3;
   goto "load_map-main-enter_from-east";
   if player intersects geometry "door_to-main-west" then goto index 5;
   goto index 6;
   goto "load_map-main-enter_from-west";
}

"my_first_script" {
   wait 100ms;
   hex_editor = true;
   block 200ms;
   if "close" then goto label if_5188;
   hex_editor = false;
   goto index 7;
   hex_editor = true;
}

"on_load-main_menu" {
   "current-chapter" = 0;
   command "colors" = "command-colors";
   command "colors + bg" = "command-colors-bg";
   command "colors + bold" = "command-colors-bold";
   command "colors + dim" = "command-colors-dim";
   if debug_mode then goto index 7;
   goto index 97;
   command "debug" = "debug";
   command "hub" = "debug-hub";
   command "honk" = "system_bell";
   command "bob" = "debug-bob";
   command "bob2" = "debug-bob2";
   command "bob3" = "debug-bob3";
   command "simon" = "debug-menu-simon";
   command "king" = "debug-king";
   command "ch2" = "menu-chapter_select-2";
   command "rtfm" = "command-rtfm";
   command "buffer" + "test" = "debug-buffertest";
   command "boot" = "ch2-bootup";
   command "post" = "debug-post";
   command "skip" + "1" = "debug-jump-to-round1";
   command "skip" + "2" = "debug-jump-to-round2";
   command "skip" + "3" = "debug-jump-to-round3";
   command "skip" + "4" = "debug-jump-to-round4";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
}

"debug-post" {
   "ch2-wizard-backstory" = true;
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 113;
   goto index 114;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 119;
   goto index 120;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   "ch2-cutseen-bert-message" = true;
   "ch2-parts-round-3-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = true;
   "ch2-map-goldfish" = true;
   "ch2-map-abacus" = true;
   "ch2-map-ramchips" = true;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 3;
   "ch2-map-ramchips" = false;
   "ch2-map-seamoss" = false;
   "ch2-carrying-ramchips" = true;
   command "look" + "ram chips" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   "ch2-map-clock" = false;
   "ch2-carrying-clock" = true;
   command "look" + "clock" = "look-clock";
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 166;
   goto index 167;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 172;
   goto index 173;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
   "ch2-carrying-ramchips" = false;
   "ch2-installed-ramchips" = true;
   delete command "look" + "ram chips";
   delete command "look" + "ram";
   "ch2-carrying-clock" = false;
   "ch2-installed-clock" = true;
   delete command "look" + "clock";
   "ch2-carrying-cpu" = false;
   "ch2-installed-cpu" = true;
   delete command "look" + "cpu";
   "ch2-cutseen-last-parts-done" = true;
   "ch2-warp-granted" = true;
   "ch2-parts-round-4-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = true;
   "ch2-storyflag-round" = 4;
   "ch2-seen-room-99" = true;
   "ch2-map-mainframeos" = false;
   "ch2-carrying-mainframeos" = true;
   "ch2-cutseen-castle99" = true;
   "ch2-carrying-mainframeos" = false;
   "ch2-carrying-mainframeos" = false;
   "ch2-installed-mainframeos" = true;
   delete command "look" + "mainframeos";
   "ch2-ring-zero-enabled-in-castle" = true;
   "ch2-storyflag-round" = 5;
   "credits-from-menu" = false;
   warp_state = "ch2-ending";
   load map "ch2-castle-outside";
}

"debug-menu-simon" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-storyflag-round" = 2;
   if "ch2-wait-for-hat-touch" then goto index 55;
   goto index 56;
   goto "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 57;
   if !debug_mode then goto index 58;
   if "ch2-in-room" == 0 then goto index 60;
   goto index 61;
   goto "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 71;
   load map "ch2-castle-31";
   goto index 72;
   load map "ch2-castle-31-doorless";
}

"system_bell" {
   show serial_dialog "main-menu.mgs-XX";
}

"debug-king" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 112;
   goto index 113;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 118;
   goto index 119;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   "ch2-cutseen-bert-message" = true;
   "ch2-parts-round-3-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = true;
   "ch2-map-goldfish" = true;
   "ch2-map-abacus" = true;
   "ch2-map-ramchips" = true;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 3;
   "ch2-cutseen-castle13" = true;
   "ch2-cutseen-castle14" = true;
   "ch2-king-rescued" = true;
   warp_state = "Ch2 King Returns";
   load map "ch2-castle-13";
}

"debug" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   if "ch2-storyflag-round" >= 5 then goto index 8;
   load map "ch2-castle-1";
   goto index 9;
   load map "ch2-castle-1-doorless";
}

"on_tick-button-to-skip" {
   if button ANY pressed then goto index 2;
   goto index 3;
   goto "handler-skip-splash";
}

"on_tick-splash" {
   hex_control = false;
   if warp_state == "from-game" then goto index 3;
   goto index 4;
   goto "main_menu-fade_in";
   camera = geometry "dc801-center";
   camera fade in -> #000000 over 800ms;
   wait 2900ms;
   camera fade out -> #000000 over 800ms;
   player on_tick = "null_script";
   goto "main_menu-fade_in";
}

"main_menu" {
   player on_tick = "null_script";
   show dialog "main-menu.mgs-XX";
}

"menu-credits-choice" {
   show dialog "main-menu.mgs-XX";
}

"menu-bling-mode" {
   show dialog "main-menu.mgs-XX";
}

"menu-bling-dc801-showcase" {
   show dialog "main-menu.mgs-XX";
}

"menu-play_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-erase_save" {
   show dialog "main-menu.mgs-XX";
}

"menu-load_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-new_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-q" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-confirm" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-random" {
   "__TEMP_0" ?= 20;
   if "__TEMP_0" == 0 then goto label if_RNG_5267;
   if "__TEMP_0" == 1 then goto label if_RNG_5268;
   if "__TEMP_0" == 2 then goto label if_RNG_5269;
   if "__TEMP_0" == 3 then goto label if_RNG_5270;
   if "__TEMP_0" == 4 then goto label if_RNG_5271;
   if "__TEMP_0" == 5 then goto label if_RNG_5272;
   if "__TEMP_0" == 6 then goto label if_RNG_5273;
   if "__TEMP_0" == 7 then goto label if_RNG_5274;
   if "__TEMP_0" == 8 then goto label if_RNG_5275;
   if "__TEMP_0" == 9 then goto label if_RNG_5276;
   if "__TEMP_0" == 10 then goto label if_RNG_5277;
   if "__TEMP_0" == 11 then goto label if_RNG_5278;
   if "__TEMP_0" == 12 then goto label if_RNG_5279;
   if "__TEMP_0" == 13 then goto label if_RNG_5280;
   if "__TEMP_0" == 14 then goto label if_RNG_5281;
   if "__TEMP_0" == 15 then goto label if_RNG_5282;
   if "__TEMP_0" == 16 then goto label if_RNG_5283;
   if "__TEMP_0" == 17 then goto label if_RNG_5284;
   if "__TEMP_0" == 18 then goto label if_RNG_5285;
   if "__TEMP_0" == 19 then goto label if_RNG_5286;
   player name = "Bub";
   goto index 60;
   player name = "XDDCC";
   goto index 60;
   player name = "VeeVee";
   goto index 60;
   player name = "Tom Honks";
   goto index 60;
   player name = "Spy";
   goto index 60;
   player name = "Steamed Hams";
   goto index 60;
   player name = "Roxas";
   goto index 60;
   player name = "Squall";
   goto index 60;
   player name = "Cecil";
   goto index 60;
   player name = "Zidane";
   goto index 60;
   player name = "Kremit";
   goto index 60;
   player name = "Terra";
   goto index 60;
   player name = "Crono";
   goto index 60;
   player name = "Ash";
   goto index 60;
   player name = "Cloud";
   goto index 60;
   player name = "Farnsworth";
   goto index 60;
   player name = "Frisk";
   goto index 60;
   player name = "Tidus";
   goto index 60;
   player name = "Buster";
   goto index 60;
   player name = "Chara";
   show dialog "main-menu.mgs-XX";
}

"menu-chapter_select-q" {
   "ch1-storyflags-tally" = 0;
   if "storyflag-catwork" then goto index 3;
   goto index 4;
   "ch1-storyflags-tally" += 1;
   if "storyflag-shepherd" then goto index 6;
   goto index 7;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bender" then goto index 9;
   goto index 10;
   "ch1-storyflags-tally" += 1;
   if "storyflag-baker" then goto index 12;
   goto index 13;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bobmoss" then goto index 15;
   goto index 16;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea1" then goto index 18;
   goto index 19;
   "ch1-storyflags-tally" += 1;
   if "storyflag-trekkie" then goto index 21;
   goto index 22;
   "ch1-storyflags-tally" += 1;
   if "storyflag-sportskid" then goto index 24;
   goto index 25;
   "ch1-storyflags-tally" += 1;
   if "storyflag-verthandi" then goto index 27;
   goto index 28;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea2" then goto index 30;
   goto index 31;
   "ch1-storyflags-tally" += 1;
   if "storyflag-rake" then goto index 33;
   goto index 34;
   "ch1-storyflags-tally" += 1;
   "ch2-storyflags-tally" = 0;
   if "ch2-installed-heatsink" then goto index 37;
   goto index 38;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-powersupply" then goto index 40;
   goto index 41;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-monitor" then goto index 43;
   goto index 44;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-harddrive" then goto index 46;
   goto index 47;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-keyboard" then goto index 49;
   goto index 50;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mouse" then goto index 52;
   goto index 53;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-ramchips" then goto index 55;
   goto index 56;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-clock" then goto index 58;
   goto index 59;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-cpu" then goto index 61;
   goto index 62;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mainframeos" then goto index 64;
   goto index 65;
   "ch2-storyflags-tally" += 1;
   show dialog "main-menu.mgs-XX";
}

"menu-chapter_select-2-check" {
   if "ch1_finished" then goto index 5;
   if "warned_ch1_incomplete" then goto index 5;
   "warned_ch1_incomplete" = true;
   show dialog "main-menu.mgs-XX";
   goto index 6;
   goto "menu-chapter_select-2";
}

"menu-chapter_select-2" {
   "current-chapter" = 2;
   if !"ch2-cutseen-birthday" then goto index 3;
   goto index 4;
   load map "ch2-magehouse-birthday";
   warp_state = "raw_game_load-ch2";
   if "playersave-room" == 1 then goto index 8;
   load map "ch2-town";
   goto index 12;
   if "ch2-storyflag-round" >= 5 then goto index 11;
   load map "ch2-castle-1";
   goto index 12;
   load map "ch2-castle-1-doorless";
}

"menu-save_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-save_game-yes" {
   "playersave-x" = player x;
   "playersave-y" = player y;
   "playersave-room" = "ch2-in-room";
   if player direction == "north" then goto index 14;
   if player direction == "east" then goto index 12;
   if player direction == "south" then goto index 10;
   if player direction == "west" then goto index 8;
   goto index 15;
   "playersave-dir" = 3;
   goto index 15;
   "playersave-dir" = 2;
   goto index 15;
   "playersave-dir" = 1;
   goto index 15;
   "playersave-dir" = 0;
   save slot;
   self on_interact = "menu-save_game";
}

"check_if_player_is_at_log" {
   if player intersects geometry "log_ellipse" then goto index 2;
   goto index 3;
   goto "walk_self_to_path_and_loop";
}

"check_save_flag-bobs_not_on_fire" {
   if "No two Bobs are not on fire" then goto index 2;
   goto index 3;
   goto "show_dialog-thanks_for_setting_bob_on_fire";
   show dialog "test_map.mgs-XX";
}

"set_save_flag-bobs_not_on_fire" {
   if "No two Bobs are not on fire" then goto index 2;
   goto index 3;
   goto "set_save_flag-bobs_on_fire";
   "No two Bobs are not on fire" = true;
   show dialog "test_map.mgs-XX";
}

"on_load-woprhouse" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if "current-chapter" == 2 then goto index 5;
   goto index 373;
   show serial_dialog "spacer";
   show serial_dialog "woprhouse.mgs-XX";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
   if !"wopr-backdoor-found" then goto index 375;
   goto index 383;
   player_control = false;
   "wopr-backdoor-found" = true;
   if warp_state != "warped" then goto index 379;
   goto index 380;
   player position -> geometry "walk_from-north" length over 600ms;
   wait 400ms;
   show dialog "woprhouse.mgs-XX";
   player_control = true;
}

"on_tick-woprhouse" {
   if player intersects geometry "north-hitbox" then goto index 2;
   goto index 3;
   goto "on_walk-woprhouse-north";
}

"on_walk-woprhouse-north" {
   if "current-chapter" == 1 then goto index 9;
   if "current-chapter" == 2 then goto index 6;
   show serial_dialog "spacer";
   show serial_dialog "woprhouse.mgs-XX";
   load map "main_menu";
   goto index 11;
   warp_state = "walk_from-woprhouse";
   load map "ch2-town";
   goto index 11;
   warp_state = "exit_from-woprhouse";
   load map "main";
}