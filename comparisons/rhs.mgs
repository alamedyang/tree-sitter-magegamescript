"on_load-bobsclub1" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if !"storyflag-bobmoss" then goto index 5;
   goto index 9;
   entity "Bob Moss" position = geometry "bobsclub-hidingplace";
   entity "Bob Moss" name = " ";
   entity "Bob Moss" on_interact = "null_script";
   entity "Bob Moss" type = "exa";
   if !"bobsclub-entered" then goto script "show_dialog-bobsclub";
}

"show_dialog-bobsclub" {
   player_control = false;
   player position -> geometry "bob_path" origin over 500ms;
   wait 800ms;
   show dialog "ch1-bobsclub.mgs-XX";
   player position -> geometry "bob_path" length over 3500ms;
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-XX";
   wait 300ms;
   camera -> geometry "strongbad_camera" origin over 1200ms;
   wait 150ms;
   player direction = entity "Strong Bad";
   wait 200ms;
   entity "Guardian Bob" direction = entity "Strong Bad";
   wait 100ms;
   show dialog "ch1-bobsclub.mgs-XX";
   wait 200ms;
   camera -> player position over 700ms;
   wait 200ms;
   entity "Guardian Bob" direction = "south";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Strong Bad" animation -> 3 1x;
   entity "Strong Bad" current_animation = 5;
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Strong Bad" animation -> 4 1x;
   player_control = true;
   "bobsclub-entered" = true;
   if !"baker-backstory" then goto script "null_script";
   player direction = entity "Guardian Bob";
   entity "Guardian Bob" direction = player;
   show dialog "ch1-bobsclub.mgs-XX";
}

"show_dialog-bobmoss-start" {
   self direction = player;
   if self glitched then goto index 3;
   goto index 12;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   self glitched = false;
   camera fade in -> #000000 over 500ms;
   player_control = true;
   show dialog "ch1-bobsclub.mgs-XX";
   self direction = "south";
   self on_interact = "show_dialog-bobmoss-start";
   if "storyflag-bobmoss" then goto script "show_dialog-bobmoss-start-s";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Bob Moss" on_tick = "spin_self_clockwise";
   show dialog "ch1-bobsclub.mgs-XX";
   entity "Bob Moss" on_tick = "null_script";
   self direction = player;
   show dialog "ch1-bobsclub.mgs-XX";
   player_control = false;
   camera fade out -> #000000 over 500ms;
   entity "Bob Moss" position = geometry "catwalk-hide";
   "storyflag-bobmoss" = true;
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 3 then goto index 27;
   goto index 28;
   "hint-tracking" = 0;
   camera fade in -> #000000 over 500ms;
   player_control = true;
}

"show_dialog-verthandi-start" {
   self direction = player;
   if self glitched then goto script "show_dialog-verthandi-glitched";
   if "storyflag-verthandi" then goto index 73;
   "unglitch_count" = 0;
   if "goldfish-unglitched" then goto index 6;
   goto index 7;
   "unglitch_count" += 1;
   if "timmy-unglitched" then goto index 9;
   goto index 10;
   "unglitch_count" += 1;
   if "fountain-unglitched" then goto index 12;
   goto index 13;
   "unglitch_count" += 1;
   if "lodge_cat-unglitched" then goto index 15;
   goto index 16;
   "unglitch_count" += 1;
   if "billy-unglitched" then goto index 18;
   goto index 19;
   "unglitch_count" += 1;
   if "kid-unglitched" then goto index 21;
   goto index 22;
   "unglitch_count" += 1;
   if "main_hamster-unglitched" then goto index 24;
   goto index 25;
   "unglitch_count" += 1;
   "total_glitches" = 7;
   "total_glitches" -= "unglitch_count";
   if "total_glitches" == 0 then goto index 62;
   if "verthandi-backstory" then goto index 39;
   show dialog "ch1-goats.mgs-XX";
   if entity "Billy" glitched then goto index 35;
   if entity "Kid" glitched then goto index 35;
   show dialog "ch1-goats.mgs-XX";
   "goats-both-unglitched" = true;
   goto index 36;
   show dialog "ch1-goats.mgs-XX";
   "verthandi-backstory" = true;
   "hint-tracking" = 111;
   goto index 74;
   if "goats-both-unglitched" then goto index 45;
   if entity "Billy" glitched then goto index 44;
   if entity "Kid" glitched then goto index 44;
   show dialog "ch1-goats.mgs-XX";
   "goats-both-unglitched" = true;
   show dialog "ch1-goats.mgs-XX";
   if "total_glitches" == 1 then goto index 48;
   show dialog "ch1-goats.mgs-XX";
   goto index 49;
   show dialog "ch1-goats.mgs-XX";
   if !"timmy-unglitched" then goto index 59;
   if !"lodge_cat-unglitched" then goto index 59;
   if !"main_hamster-unglitched" then goto index 57;
   if !"fountain-unglitched" then goto index 57;
   if !"goldfish-unglitched" then goto index 55;
   goto index 60;
   show dialog "ch1-goats.mgs-XX";
   goto index 60;
   show dialog "ch1-goats.mgs-XX";
   goto index 60;
   show dialog "ch1-goats.mgs-XX";
   "hint-tracking" = 111;
   goto index 74;
   if !"verthandi-backstory" then goto index 65;
   show dialog "ch1-goats.mgs-XX";
   goto index 66;
   show dialog "ch1-goats.mgs-XX";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 11 then goto index 70;
   goto index 71;
   "hint-tracking" = 0;
   "storyflag-verthandi" = true;
   "goats-both-unglitched" = true;
   show dialog "ch1-goats.mgs-XX";
   goto "show_dialog-verthandi-wrapup";
}

"on_load-map-main" {
   if "tuesdayd" then goto index 2;
   goto index 3;
   command "rtfm" = "command-rtfm";
   if !"begunthegame" then goto index 5;
   goto index 9;
   "begunthegame" = true;
   hex_control = false;
   camera fade in -> #000000 over 1ms;
   load map "magehouse";
   hex_control = true;
   if "storyflag-bobmoss" then goto index 12;
   goto index 13;
   entity "Bob Moss" position = geometry "catwalk-hide";
   if "storyflag-rake" then goto index 15;
   goto index 17;
   entity "Rake" position = geometry "rake-lake-point";
   entity "Goose" on_interact = "honk-to-make-rake-float";
   if "billy-unglitched" then goto index 19;
   goto index 20;
   entity "Billy" glitched = false;
   if "kid-unglitched" then goto index 22;
   goto index 23;
   entity "Kid" glitched = false;
   if "fountain-unglitched" then goto index 25;
   goto index 26;
   entity "Fountain" glitched = false;
   if "main_hamster-unglitched" then goto index 28;
   goto index 29;
   entity "Hamster" glitched = false;
   if "storyflag-shepherd" then goto index 31;
   goto index 35;
   entity "Baa" position = geometry "baa_point";
   entity "Ram" position = geometry "ram_point";
   entity "Ewe" position = geometry "ewe_point";
   entity "Helga" position = geometry "helga_point";
   if "storyflag-bender" then goto index 37;
   goto index 38;
   entity "Bender" type = "bender";
   if !"walked-to-lodge" then goto script "walk-to-lodge";
   player_control = false;
   if !"hintman-explanation" then goto index 93;
   if warp_state == "enter_from-east" then goto index 91;
   if warp_state == "enter_from-west" then goto index 89;
   if warp_state == "exit_from-bobsclub" then goto index 87;
   if warp_state == "exit_from-bakery" then goto index 85;
   if warp_state == "exit_from-lodge" then goto index 83;
   if warp_state == "exit_from-greenhouse" then goto index 81;
   if warp_state == "exit_from-magehouse" then goto index 79;
   if warp_state == "exit_from-oldcouplehouse" then goto index 77;
   if warp_state == "exit_from-family" then goto index 75;
   if warp_state == "exit_from-woprhouse" then goto index 73;
   if warp_state == "exit_from-credits" then goto index 53;
   goto index 116;
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   player_control = true;
   if !"ch1_finished" then goto script "null_script";
   if !"storyflag-catwork" then goto script "null_script";
   if !"storyflag-shepherd" then goto script "null_script";
   if !"storyflag-bender" then goto script "null_script";
   if !"storyflag-baker" then goto script "null_script";
   if !"storyflag-bobmoss" then goto script "null_script";
   if !"storyflag-bea1" then goto script "null_script";
   if !"storyflag-trekkie" then goto script "null_script";
   if !"storyflag-sportskid" then goto script "null_script";
   if !"storyflag-bea2" then goto script "null_script";
   if !"storyflag-rake" then goto script "null_script";
   if !"storyflag-verthandi" then goto script "null_script";
   if "demobonus-jackob-informed" then goto script "null_script";
   "demobonus" = true;
   show dialog "ch1-map_main.mgs-XX";
   "demobonus-jackob-informed" = true;
   goto index 116;
   player position -> geometry "enter_from-woprhouse" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-family" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-oldcouplehouse" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-magehouse" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-greenhouse" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-lodge" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-bakery" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-bobsclub" length over 200ms;
   goto index 116;
   player position -> geometry "enter_from-west" length over 1000ms;
   goto index 116;
   player position -> geometry "enter_from-east" length over 1000ms;
   goto index 116;
   player position -> geometry "enter_from-lodge" length over 400ms;
   wait 300ms;
   entity "Alfonso" position -> geometry "alfonso-talkspot" origin over 600ms;
   entity "Alfonso" direction = player;
   wait 400ms;
   player direction = entity "Alfonso";
   show dialog "ch1-elders.mgs-XX";
   wait 100ms;
   entity "Jackob" position -> geometry "hintman-walktalk" length over 900ms;
   wait 200ms;
   player direction = entity "Jackob";
   show dialog "ch1-elders.mgs-XX";
   wait 100ms;
   entity "Bert" position -> geometry "bert-talkspot" origin over 600ms;
   player direction = entity "Bert";
   show dialog "ch1-elders.mgs-XX";
   show dialog "ch1-elders.mgs-XX";
   entity "Jackob" on_tick = "return-to-watchspot-jackob";
   wait 200ms;
   entity "Alfonso" on_tick = "return-to-watchspot-alfonso";
   wait 150ms;
   entity "Bert" on_tick = "return-to-watchspot-bert";
   "hintman-explanation" = true;
   player_control = true;
}

"show_dialog-bea-part1" {
   if !"storyflag-bea1" then goto index 7;
   if entity "Delmar" type == "old_man" then goto index 6;
   if entity "Delmar" type == "sheep " then goto index 5;
   if entity "Delmar" type == "helga" then goto index 5;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if entity "Delmar" type == "old_man" then goto index 42;
   if !"bea1-backstory" then goto index 11;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 39;
   if entity "Delmar" type == "sheep " then goto index 23;
   if entity "Delmar" type == "helga" then goto index 23;
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = player;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 37;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   player_control = false;
   wait 100ms;
   self direction = player;
   wait 500ms;
   player_control = true;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   "bea1-backstory" = true;
   self on_tick = "face-player";
   "hint-tracking" = 41;
   goto index 59;
   player_control = false;
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = entity "Delmar";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 4 then goto index 56;
   goto index 57;
   "hint-tracking" = 0;
   "bea1-backstory" = true;
   "storyflag-bea1" = true;
   entity "Beatrice" on_interact = "show_dialog-bea-start";
}

"show_dialog-bea-part2" {
   if !"storyflag-bea2" then goto index 7;
   if entity "Delmar" type == "sheep " then goto index 6;
   if entity "Delmar" type == "helga" then goto index 6;
   if entity "Delmar" type == "old_man" then goto index 5;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if entity "Delmar" type == "sheep " then goto index 32;
   if entity "Delmar" type == "helga" then goto index 32;
   if entity "Delmar" type == "old_man" then goto index 11;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   if !"bea2-backstory" then goto index 14;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 28;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "null_script";
   player_control = false;
   wait 100ms;
   self direction = entity "Delmar";
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   player_control = false;
   wait 100ms;
   self direction = player;
   wait 500ms;
   player_control = true;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self on_tick = "face-player";
   "bea2-backstory" = true;
   "hint-tracking" = 91;
   goto index 44;
   if !"bea2-backstory" then goto index 35;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   goto index 36;
   show dialog "ch1-oldcouplehouse.mgs-XX";
   self direction = entity "Delmar";
   "hint-tracking-check" = "hint-tracking";
   "hint-tracking-check" /= 10;
   if "hint-tracking-check" == 9 then goto index 41;
   goto index 42;
   "hint-tracking" = 0;
   "bea2-backstory" = true;
   "storyflag-bea2" = true;
   entity "Beatrice" on_interact = "show_dialog-bea-start";
}

"ch2-interact-mainframe" {
   if "ch2-wait-for-hat-touch" then goto index 106;
   if "ch2-carrying-mainframeos" then goto index 11;
   if "ch2-installed-mainframeos" then goto index 8;
   if !"ch2-toot-done" then goto index 5;
   goto index 110;
   show dialog "ch2-admin.mgs-XX";
   goto index 110;
   show dialog "mainframe-working";
   goto index 110;
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_tick = "null_script";
   player_control = false;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   player_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   if player intersects geometry "mainframe-watchdonut" then goto index 32;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   wait 1050ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 120ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 750ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 200ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 150ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 230ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3000ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 400ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 170ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 2300ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3800ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   serial_control = true;
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-XX";
   goto "ch2-install-wizard-resume2";
   goto index 110;
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   show dialog "ch2-admin.mgs-XX";
   "temp" = false;
   if entity "Wizard" current_animation == 0 then goto index 113;
   goto index 114;
   entity "Wizard" on_tick = "tick-ch2-wizard-ascend-and-watch";
   if !"ch2-installed-heatsink" then goto index 115;
   if "ch2-carrying-heatsink" then goto index 117;
   goto index 122;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   if !"ch2-installed-powersupply" then goto index 123;
   if "ch2-carrying-powersupply" then goto index 125;
   goto index 130;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   if !"ch2-installed-monitor" then goto index 131;
   if "ch2-carrying-monitor" then goto index 133;
   goto index 138;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   if !"ch2-installed-harddrive" then goto index 139;
   if "ch2-carrying-harddrive" then goto index 141;
   goto index 146;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   if !"ch2-installed-keyboard" then goto index 147;
   if "ch2-carrying-keyboard" then goto index 149;
   goto index 154;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   if !"ch2-installed-mouse" then goto index 155;
   if "ch2-carrying-mouse" then goto index 157;
   goto index 162;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   if !"ch2-installed-ramchips" then goto index 163;
   if "ch2-carrying-ramchips" then goto index 165;
   goto index 171;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-ramchips" = false;
   "ch2-installed-ramchips" = true;
   delete command "look" + "ram chips";
   delete command "look" + "ram";
   if !"ch2-installed-clock" then goto index 172;
   if "ch2-carrying-clock" then goto index 174;
   goto index 179;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-clock" = false;
   "ch2-installed-clock" = true;
   delete command "look" + "clock";
   if !"ch2-installed-cpu" then goto index 180;
   if "ch2-carrying-cpu" then goto index 182;
   goto index 187;
   show dialog "ch2-admin.mgs-XX";
   "temp" = true;
   "ch2-carrying-cpu" = false;
   "ch2-installed-cpu" = true;
   delete command "look" + "cpu";
   if !"temp" then goto index 294;
   "temp" = false;
   show dialog "ch2-admin.mgs-XX";
   "ch2-storyflags-tally" = 0;
   if "ch2-installed-heatsink" then goto index 193;
   goto index 194;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-powersupply" then goto index 196;
   goto index 197;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-monitor" then goto index 199;
   goto index 200;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-harddrive" then goto index 202;
   goto index 203;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-keyboard" then goto index 205;
   goto index 206;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mouse" then goto index 208;
   goto index 209;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-ramchips" then goto index 211;
   goto index 212;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-clock" then goto index 214;
   goto index 215;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-cpu" then goto index 217;
   goto index 218;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mainframeos" then goto index 220;
   goto index 221;
   "ch2-storyflags-tally" += 1;
   if "ch2-storyflags-tally" == 3 then goto index 251;
   if "ch2-storyflags-tally" == 6 then goto index 235;
   if "ch2-storyflags-tally" == 9 then goto index 225;
   goto index 295;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-cutseen-last-parts-done" = true;
   "ch2-lambda-paging" = true;
   "ch2-storyflag-round" = 4;
   wait 700ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   goto index 295;
   player_control = false;
   wait 800ms;
   player direction = entity "Wizard";
   show dialog "ch2-admin.mgs-XX";
   wait 200ms;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-cutseen-bert-message" = true;
   "ch2-lambda-paging" = true;
   "ch2-storyflag-round" = 3;
   wait 700ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   player_control = true;
   goto index 295;
   player current_animation = 0;
   player_control = false;
   wait 800ms;
   entity "Bert" position = geometry "bert-spot";
   entity "Bert" direction = "north";
   show dialog "ch2-castle-1-bert.mgs-XX";
   wait 100ms;
   player on_tick = "watch-bert";
   wait 400ms;
   entity "Wizard" on_tick = "tick-ch2-wizard-ascend-and-watch-with-check";
   entity "Bert" position -> geometry "bert-spot" length over 1200ms;
   wait 100ms;
   entity "Bert" direction = player;
   wait 900ms;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" on_tick = "spin_self_clockwise";
   wait 400ms;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" on_tick = "null_script";
   entity "Bert" direction = player;
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" direction = "east";
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" direction = "south";
   show dialog "ch2-castle-1-bert.mgs-XX";
   entity "Bert" position -> geometry "walk_from-south" origin over 800ms;
   wait 80ms;
   entity "Bert" on_tick = "yeet";
   player on_tick = "null_script";
   player_control = true;
   "interrupt" = true;
   player_control = false;
   wait 200ms;
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   "ch2-lambda-paging" = true;
   "ch2-cutseen-bert-secret" = true;
   "ch2-storyflag-round" = 2;
   wait 900ms;
   show dialog "ch2-admin.mgs-XX";
   show serial_dialog "spacer";
   show serial_dialog "ch2-admin.mgs-XX";
   player_control = true;
   show dialog "ch2-admin.mgs-XX";
}

"ch2-serial-light-manager-mouse" {
   if !"ch2-mousegame" then goto script "ch2-serial-light-manager";
}

"on_load-ch2-bakery" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bakery.mgs-XX";
   if "ch2-storyflag-round" == 3 then goto index 8;
   if "ch2-storyflag-round" == 4 then goto index 8;
   if "ch2-storyflag-round" != 2 then goto index 6;
   goto index 20;
   entity "Jackob" on_tick = "yeet";
   goto index 20;
   if "ch2-storyflag-round" == 3 then goto index 13;
   if "ch2-storyflag-round" == 4 then goto index 11;
   goto index 14;
   entity "Jackob" position = geometry "zippy-spot2";
   goto index 14;
   entity "Jackob" position = geometry "zippy-spot1";
   entity "Jackob" name = "Aunt Zippy";
   entity "Jackob" on_look = "look-ch2-zippy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zippy";
   entity "Jackob" type = "lightning_boy";
   entity "Jackob" direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 33;
   if "ch2-in-room" == 0 then goto index 33;
   if debug_mode then goto index 33;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 37;
   goto index 38;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 64;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 65;
   serial_control = false;
   if "ch2-has-map" then goto index 67;
   goto index 69;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 139;
   if "ch2-warp-granted" then goto index 72;
   goto index 213;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 213;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 214;
   if "ch2-storyflag-round" < 5 then goto index 216;
   goto index 246;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 248;
   goto index 249;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 251;
   goto index 252;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 254;
   goto index 255;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 257;
   goto index 258;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 260;
   goto index 261;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 263;
   goto index 264;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 266;
   goto index 267;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 269;
   goto index 270;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 272;
   goto index 273;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 275;
   goto index 277;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 279;
   goto index 280;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 282;
   goto index 283;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 285;
   goto index 286;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 288;
   goto index 289;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 291;
   goto index 292;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 294;
   goto index 295;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 301;
   if "debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 305;
   if !"debug-curr-state" then goto index 303;
   goto index 304;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 307;
   goto index 315;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 318;
   goto index 386;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 320;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 380;
   if "goosefact" == 1 then goto index 378;
   if "goosefact" == 2 then goto index 376;
   if "goosefact" == 3 then goto index 374;
   if "goosefact" == 4 then goto index 372;
   if "goosefact" == 5 then goto index 370;
   if "goosefact" == 6 then goto index 368;
   if "goosefact" == 7 then goto index 366;
   if "goosefact" == 8 then goto index 364;
   if "goosefact" == 9 then goto index 362;
   if "goosefact" == 10 then goto index 360;
   if "goosefact" == 11 then goto index 358;
   if "goosefact" == 12 then goto index 356;
   if "goosefact" == 13 then goto index 354;
   if "goosefact" == 14 then goto index 352;
   if "goosefact" == 15 then goto index 350;
   if "goosefact" == 16 then goto index 348;
   if "goosefact" == 17 then goto index 346;
   if "goosefact" == 18 then goto index 344;
   if "goosefact" == 19 then goto index 342;
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 385;
   goto index 386;
   "goosefact" = 0;
}

"on_load-ch2-magehouse-birthday" {
   hex_control = true;
   player_control = false;
   if debug_mode then goto index 5;
   serial_control = false;
   goto index 8;
   serial_control = true;
   command "skip" = "cutscene-ch2-birthday-exit";
   show serial_dialog "ch2-birthday.mgs-XX";
   if "close" then goto label if_1140;
   hex_editor = false;
   goto index 12;
   hex_editor = true;
   player current_animation = 0;
   camera fade out -> #000000 over 0ms;
   player direction = "east";
   camera = geometry "cake-camera-1";
   entity "Stunt Cake" current_animation = 1;
   wait 1000ms;
   camera fade in -> #000000 over 1000ms;
   wait 500ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 200ms;
   entity "Stunt Cake" animation -> 2 1x;
   entity "Stunt Cake" current_animation = 3;
   camera fade out -> #000000 over 0ms;
   camera = geometry "cake-camera-2";
   camera fade in -> #000000 over 500ms;
   show dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 500ms;
   entity "Cake" current_animation = 4;
   show dialog "ch2-birthday.mgs-XX";
   camera fade in -> #000000 over 1000ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 180ms;
   player direction = "south";
   wait 400ms;
   show dialog "ch2-birthday.mgs-XX";
   player direction = "east";
   show dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 1200ms;
   wait 200ms;
   goto "cutscene-ch2-birthday-exit";
}

"ch2-escort-cutscene" {
   if debug_mode then goto index 3;
   serial_control = false;
   goto index 6;
   serial_control = true;
   command "skip" = "cutscene-ch2-escort-exit";
   show serial_dialog "ch2-birthday.mgs-XX";
   camera fade out -> #000000 over 0ms;
   player_control = false;
   if "close" then goto label if_1147;
   hex_editor = false;
   goto index 12;
   hex_editor = true;
   entity "Alfonso" position = geometry "birthday-alfonso";
   entity "Bert" position = geometry "birthday-bert";
   entity "Jackob" position = geometry "birthday-jackob";
   entity "Alfonso" direction = "north";
   entity "Bert" direction = "north";
   entity "Jackob" direction = "north";
   camera = geometry "escort-camera";
   camera fade in -> #000000 over 1000ms;
   player direction = "south";
   wait 800ms;
   player position = geometry "walk_from-magehouse";
   player position -> geometry "walk_from-magehouse" length over 400ms;
   wait 1200ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 150ms;
   player on_tick = "look-left-and-right-fast";
   wait 300ms;
   show dialog "ch2-birthday.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-XX";
   wait 100ms;
   player on_tick = "look-left-and-right-fast";
   wait 200ms;
   show dialog "ch2-birthday.mgs-XX";
   player on_tick = "null_script";
   player direction = "south";
   show dialog "ch2-birthday.mgs-XX";
   wait 150ms;
   entity "Alfonso" direction = "south";
   wait 500ms;
   show dialog "ch2-birthday.mgs-XX";
   entity "Alfonso" direction = player;
   show dialog "ch2-birthday.mgs-XX";
   entity "Jackob" on_tick = "gossip-right-down";
   entity "Alfonso" on_tick = "gossip-left-and-right-down";
   entity "Bert" on_tick = "gossip-left-down";
   wait 200ms;
   show dialog "ch2-birthday.mgs-XX";
   wait 500ms;
   entity "Alfonso" on_tick = "null_script";
   entity "Jackob" on_tick = "null_script";
   entity "Bert" on_tick = "null_script";
   wait 100ms;
   entity "Alfonso" direction = "north";
   wait 50ms;
   entity "Bert" direction = "north";
   wait 40ms;
   entity "Jackob" direction = "north";
   show dialog "ch2-birthday.mgs-XX";
   "ch2-escort-cutscene" = true;
   wait 160ms;
   entity "Jackob" on_tick = "birthday-march-on-own-path";
   wait 180ms;
   entity "Alfonso" on_tick = "birthday-march-on-own-path";
   wait 90ms;
   entity "Bert" on_tick = "birthday-march-on-own-path";
   player on_tick = "birthday-march-on-own-path-player";
}

"on_load-ch2-bobsclub-basement" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub-basement.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 6;
   entity "Guardian Bob" position = geometry "bob-walk2";
   entity "Guardian Bob" on_tick = "loiter-slow";
   goto index 7;
   camera = geometry "gasp-spot";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
   command "look" + "bob" = "look-ch2-bob";
   if !"ch2-cutseen-bob-party" then goto index 376;
   goto index 436;
   player_control = false;
   wait 1500ms;
   player on_tick = "look-left-and-right-fast";
   wait 700ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player on_tick = "null_script";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" position -> geometry "bob-walk" length over 1200ms;
   wait 800ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   if player name == "Bob" then goto index 390;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   goto index 391;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" on_tick = "spin_self_clockwise";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" on_tick = "null_script";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 100ms;
   player strafe = 2;
   player position -> geometry "gasp-spot" origin over 200ms;
   player strafe = 0;
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = "south";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player direction = "south";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 100ms;
   player on_tick = "spin_self_clockwise";
   wait 240ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = "south";
   player on_tick = "null_script";
   player direction = entity "Guardian Bob";
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   wait 80ms;
   entity "Guardian Bob" direction = "north";
   wait 400ms;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   if "ch2-want-cactuscooler" then goto index 427;
   goto index 430;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   entity "Guardian Bob" direction = player;
   show dialog "ch2-bobsclub-basement.mgs-XX";
   "ch2-cutseen-bob-party" = true;
   wait 150ms;
   entity "Guardian Bob" position -> geometry "bob-walk2" origin over 800ms;
   entity "Guardian Bob" on_tick = "loiter-slow";
   camera = player position;
   player_control = true;
}

"on_load-ch2-bobsclub" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-bobsclub.mgs-XX";
   "ch2-rattle-count" = 0;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 16;
   if "ch2-in-room" == 0 then goto index 16;
   if debug_mode then goto index 16;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 20;
   goto index 21;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 47;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 48;
   serial_control = false;
   if "ch2-has-map" then goto index 50;
   goto index 52;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 122;
   if "ch2-warp-granted" then goto index 55;
   goto index 196;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 196;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 197;
   if "ch2-storyflag-round" < 5 then goto index 199;
   goto index 229;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 231;
   goto index 232;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 234;
   goto index 235;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 237;
   goto index 238;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 240;
   goto index 241;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 243;
   goto index 244;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 246;
   goto index 247;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 249;
   goto index 250;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 252;
   goto index 253;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 255;
   goto index 256;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 258;
   goto index 260;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 262;
   goto index 263;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 265;
   goto index 266;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 268;
   goto index 269;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 271;
   goto index 272;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 274;
   goto index 275;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 277;
   goto index 278;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 284;
   if "debug-curr-state" then goto index 281;
   goto index 282;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 288;
   if !"debug-curr-state" then goto index 286;
   goto index 287;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 290;
   goto index 298;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 301;
   goto index 369;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 303;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 363;
   if "goosefact" == 1 then goto index 361;
   if "goosefact" == 2 then goto index 359;
   if "goosefact" == 3 then goto index 357;
   if "goosefact" == 4 then goto index 355;
   if "goosefact" == 5 then goto index 353;
   if "goosefact" == 6 then goto index 351;
   if "goosefact" == 7 then goto index 349;
   if "goosefact" == 8 then goto index 347;
   if "goosefact" == 9 then goto index 345;
   if "goosefact" == 10 then goto index 343;
   if "goosefact" == 11 then goto index 341;
   if "goosefact" == 12 then goto index 339;
   if "goosefact" == 13 then goto index 337;
   if "goosefact" == 14 then goto index 335;
   if "goosefact" == 15 then goto index 333;
   if "goosefact" == 16 then goto index 331;
   if "goosefact" == 17 then goto index 329;
   if "goosefact" == 18 then goto index 327;
   if "goosefact" == 19 then goto index 325;
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 364;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 368;
   goto index 369;
   "goosefact" = 0;
   if debug_mode then goto index 371;
   goto index 383;
   command "find" + "cc" = "find-cc";
   command "unfind" + "cc" = "unfind-cc";
   command "want" + "cc" = "want-cc";
   command "unwant" + "cc" = "unwant-cc";
   command "basement" = "basement";
   command "unbasement" = "unbasement";
   command "toot" = "toot";
   command "untoot" = "untoot";
   command "carry" + "cc" = "ch2-pickup-cactuscooler";
   command "uncarry" + "cc" = "ch2-unpickup-cactuscooler";
   command "reset" = "reset";
   show serial_dialog "ch2-bobsclub.mgs-XX";
   if !"ch2-cutseen-bob-party" then goto index 388;
   if "ch2-want-cactuscooler" then goto index 385;
   if "ch1-found-cactuscooler" then goto index 387;
   show dialog "ch2-bobsclub.mgs-XX";
   show dialog "ch2-bobsclub.mgs-XX";
   player_control = false;
   if warp_state != "warped" then goto index 391;
   goto index 392;
   player position -> geometry "walk-spot" origin over 400ms;
   wait 220ms;
   if !"ch2-saw-emptybobroom" then goto index 396;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 399;
   player on_tick = "look-left-and-right-fast";
   show dialog "ch2-bobsclub.mgs-XX";
   "ch2-saw-emptybobroom" = true;
   player on_tick = "null_script";
   player direction = "south";
   if "ch2-want-cactuscooler" then goto index 403;
   show dialog "ch2-bobsclub.mgs-XX";
   if "ch1-found-cactuscooler" then goto index 406;
   show dialog "ch2-bobsclub.mgs-XX";
   goto index 407;
   show dialog "ch2-bobsclub.mgs-XX";
   player_control = true;
}

"on_load-ch2-castle-1-doorless" {
   "ch2-in-room" = 1;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   if warp_state == "raw_game_load-ch2" then goto index 13;
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   goto index 27;
   player position = geometry "walk_from-south";
   goto index 27;
   player position = geometry "walk_from-north";
   goto index 27;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 26;
   if "playersave-dir" == 1 then goto index 24;
   if "playersave-dir" == 2 then goto index 22;
   if "playersave-dir" == 3 then goto index 20;
   goto index 27;
   player direction = "west";
   goto index 27;
   player direction = "south";
   goto index 27;
   player direction = "east";
   goto index 27;
   player direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 40;
   if "ch2-in-room" == 0 then goto index 40;
   if debug_mode then goto index 40;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 44;
   goto index 45;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 71;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 72;
   serial_control = false;
   if "ch2-has-map" then goto index 74;
   goto index 76;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 146;
   if "ch2-warp-granted" then goto index 79;
   goto index 220;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 220;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 221;
   if "ch2-storyflag-round" < 5 then goto index 223;
   goto index 253;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 255;
   goto index 256;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 258;
   goto index 259;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 261;
   goto index 262;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 264;
   goto index 265;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 267;
   goto index 268;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 270;
   goto index 271;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 273;
   goto index 274;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 276;
   goto index 277;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 279;
   goto index 280;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 282;
   goto index 284;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 286;
   goto index 287;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 289;
   goto index 290;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 292;
   goto index 293;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 295;
   goto index 296;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 298;
   goto index 299;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 301;
   goto index 302;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 308;
   if "debug-curr-state" then goto index 305;
   goto index 306;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 312;
   if !"debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 314;
   goto index 322;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 325;
   goto index 393;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 327;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 387;
   if "goosefact" == 1 then goto index 385;
   if "goosefact" == 2 then goto index 383;
   if "goosefact" == 3 then goto index 381;
   if "goosefact" == 4 then goto index 379;
   if "goosefact" == 5 then goto index 377;
   if "goosefact" == 6 then goto index 375;
   if "goosefact" == 7 then goto index 373;
   if "goosefact" == 8 then goto index 371;
   if "goosefact" == 9 then goto index 369;
   if "goosefact" == 10 then goto index 367;
   if "goosefact" == 11 then goto index 365;
   if "goosefact" == 12 then goto index 363;
   if "goosefact" == 13 then goto index 361;
   if "goosefact" == 14 then goto index 359;
   if "goosefact" == 15 then goto index 357;
   if "goosefact" == 16 then goto index 355;
   if "goosefact" == 17 then goto index 353;
   if "goosefact" == 18 then goto index 351;
   if "goosefact" == 19 then goto index 349;
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 392;
   goto index 393;
   "goosefact" = 0;
   if warp_state == "raw_game_load-ch2" then goto index 395;
   goto index 398;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"on_load-ch2-castle-1" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-1-ending";
   "ch2-in-room" = 1;
   "ch2-seen-room-1" = true;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if "ch2-cutseen-bert-secret" then goto index 7;
   goto index 8;
   entity "Bert" on_tick = "yeet";
   if "ch2-ring-zero-enabled-in-castle" then goto index 10;
   goto index 12;
   entity "Wizard" on_interact = "interact-ch2-wizard-mainframedone";
   entity "Wizard" current_animation = 3;
   if "ch2-has-artifact" then goto index 14;
   goto index 15;
   entity "Artifact" on_tick = "yeet";
   if warp_state == "raw_game_load-ch2" then goto index 23;
   if warp_state == "walk_from-south" then goto index 21;
   if warp_state == "ch2-ending" then goto index 19;
   goto index 37;
   player position = geometry "mainframe-look-spot";
   goto index 37;
   player position = geometry "walk_from-south";
   goto index 37;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 36;
   if "playersave-dir" == 1 then goto index 34;
   if "playersave-dir" == 2 then goto index 32;
   if "playersave-dir" == 3 then goto index 30;
   goto index 37;
   player direction = "west";
   goto index 37;
   player direction = "south";
   goto index 37;
   player direction = "east";
   goto index 37;
   player direction = "north";
   if "ch2-carrying-mainframeos" then goto index 39;
   goto index 40;
   entity "Wizard" current_animation = 3;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 53;
   if "ch2-in-room" == 0 then goto index 53;
   if debug_mode then goto index 53;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 57;
   goto index 58;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 84;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 85;
   serial_control = false;
   if "ch2-has-map" then goto index 87;
   goto index 89;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 159;
   if "ch2-warp-granted" then goto index 92;
   goto index 233;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 233;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 234;
   if "ch2-storyflag-round" < 5 then goto index 236;
   goto index 266;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 268;
   goto index 269;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 271;
   goto index 272;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 274;
   goto index 275;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 277;
   goto index 278;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 280;
   goto index 281;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 283;
   goto index 284;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 286;
   goto index 287;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 289;
   goto index 290;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 292;
   goto index 293;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 295;
   goto index 297;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 299;
   goto index 300;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 302;
   goto index 303;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 305;
   goto index 306;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 308;
   goto index 309;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 311;
   goto index 312;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 314;
   goto index 315;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 321;
   if "debug-curr-state" then goto index 318;
   goto index 319;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 325;
   if !"debug-curr-state" then goto index 323;
   goto index 324;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 327;
   goto index 335;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 338;
   goto index 406;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 340;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 400;
   if "goosefact" == 1 then goto index 398;
   if "goosefact" == 2 then goto index 396;
   if "goosefact" == 3 then goto index 394;
   if "goosefact" == 4 then goto index 392;
   if "goosefact" == 5 then goto index 390;
   if "goosefact" == 6 then goto index 388;
   if "goosefact" == 7 then goto index 386;
   if "goosefact" == 8 then goto index 384;
   if "goosefact" == 9 then goto index 382;
   if "goosefact" == 10 then goto index 380;
   if "goosefact" == 11 then goto index 378;
   if "goosefact" == 12 then goto index 376;
   if "goosefact" == 13 then goto index 374;
   if "goosefact" == 14 then goto index 372;
   if "goosefact" == 15 then goto index 370;
   if "goosefact" == 16 then goto index 368;
   if "goosefact" == 17 then goto index 366;
   if "goosefact" == 18 then goto index 364;
   if "goosefact" == 19 then goto index 362;
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 401;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 405;
   goto index 406;
   "goosefact" = 0;
   if debug_mode then goto index 408;
   goto index 429;
   command "credits" = "debug-ch2-credits";
   command "toot" = "debug-finish-toot";
   command "walk" = "debug-walk";
   command "get" + "monitor" = "ch2-pickup-monitor";
   command "get" + "heatsink" = "ch2-pickup-heatsink";
   command "get" + "cactuscooler" = "ch2-pickup-cactuscooler";
   command "get" + "powersupply" = "ch2-pickup-powersupply";
   command "get" + "keyboard" = "ch2-pickup-keyboard";
   command "get" + "mouse" = "ch2-pickup-mouse";
   command "get" + "harddrive" = "ch2-solder-harddrive";
   command "get" + "plate" = "ch2-pickup-plate";
   command "get" + "needle" = "ch2-pickup-needle";
   command "get" + "ramchips" = "ch2-pickup-ramchips";
   command "get" + "clock" = "ch2-pickup-clock";
   command "get" + "goldfish" = "ch2-pickup-goldfish";
   command "get" + "abacus" = "ch2-pickup-abacus";
   command "get" + "cpu" = "ch2-solder-cpu";
   command "round" + "1" = "debug-get-items-for-round1";
   command "round" + "2" = "debug-get-items-for-round2";
   command "round" + "3" = "debug-get-items-for-round3";
   show serial_dialog "ch2-castle-1.mgs-XX";
   if warp_state == "raw_game_load-ch2" then goto index 431;
   goto index 434;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"ch2-artifact-walk" {
   player_control = false;
   wait 70ms;
   entity "XA" on_tick = "ch2-camera-to-artifact";
   wait 500ms;
   entity "Artifact" on_tick = "tick-artifact-open";
   wait 400ms;
   player direction = geometry "artifact-look";
   wait 1700ms;
   if player intersects geometry "artifact-watchdonut" then goto index 10;
   player position -> geometry "artifact-watchpoint" origin over 600ms;
   player position -> geometry "artifact-watchpoint" origin over 400ms;
   player direction = geometry "artifact-look";
   wait 444ms;
   show dialog "ch2-castle-1.mgs-XX";
   player position -> geometry "artifact-approach" origin over 400ms;
   player direction = "north";
   wait 1000ms;
   entity "Artifact" animation -> 1 1x;
   entity "Artifact" current_animation = 3;
   wait 550ms;
   player position -> geometry "artifact-approach" length over 350ms;
   wait 170ms;
   player direction = "east";
   wait 700ms;
   player direction = "north";
   wait 80ms;
   player position -> geometry "artifact-get" origin over 200ms;
   wait 600ms;
   entity "Artifact" on_tick = "yeet";
   wait 100ms;
   entity "XA" on_tick = "ch2-camera-from-artifact";
   wait 200ms;
   player position -> geometry "artifact-approach" origin over 600ms;
   wait 300ms;
   player direction = "west";
   camera fade out -> #5AB5F7 over 800ms;
   entity "calc1" animation_frame = 55;
   entity "calc2" animation_frame = 55;
   entity "calc1" position = geometry "calc1-spot";
   entity "calc2" position = geometry "calc2-spot";
   camera = geometry "artifact-approach";
   player position = geometry "hiding-spot";
   camera fade in -> #5AB5F7 over 800ms;
   wait 2800ms;
   camera -> geometry "calc-camera" origin over 900ms;
   wait 200ms;
   show dialog "ch2-castle-1.mgs-XX";
   camera -> geometry "artifact-approach" origin over 700ms;
   wait 300ms;
   camera fade out -> #5AB5F7 over 800ms;
   player position = geometry "artifact-approach";
   camera = player position;
   entity "calc1" on_tick = "yeet";
   entity "calc2" on_tick = "yeet";
   camera fade in -> #5AB5F7 over 800ms;
   player direction = "south";
}

"on_tick-ch2-castle-1-doorless" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 6;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   if player intersects geometry "north-hitbox" then goto index 8;
   goto index 15;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-south";
   if "ch2-storyflag-round" >= 5 then goto index 14;
   load map "ch2-castle-11";
   goto index 15;
   load map "ch2-castle-11-doorless";
}

"on_tick-ch2-castle-1" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 6;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   warp_state = "walk_from-north";
   load map "ch2-castle-outside";
   if "ch2-wait-for-hat-touch" then goto script "on_tick-ch2-castle-1-hexwait1";
   if dialog closed then goto index 8;
   if !"ch2-ring-zero-enabled-in-castle" then goto index 9;
   if button HAX pressed then goto index 11;
   goto index 22;
   if "ch2-toot-done" then goto index 20;
   if "ch2-hax-attempted" then goto index 18;
   if "ch2-door-attempted" then goto index 16;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 21;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 21;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 21;
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-hax-attempted" = true;
}

"on_tick-ch2-castle-1-hexwait1" {
   if player intersects geometry "south-hitbox" then goto index 2;
   goto index 6;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   player position -> geometry "walk_from-south" origin over 200ms;
   player_control = true;
   if button HAX pressed then goto script "on_tick-ch2-castle-1-hexwait2";
}

"on_exit-ch2-castle-1" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
}

"on_go-castle-1-north" {
   if !"ch2-toot-done" then goto index 13;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 11;
   load map "ch2-castle-11";
   goto index 12;
   load map "ch2-castle-11-doorless";
   goto index 14;
   goto "on_go_ch2-notyet";
}

"on_go-castle-1-south" {
   if !"ch2-toot-done" then goto index 10;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   "ch2-in-room" = 0;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-outside";
   goto index 11;
   goto "on_go_ch2-notyet";
}

"interact-ch2-wizard" {
   if self current_animation == 0 then goto index 9;
   if !"ch2-toot-done" then goto index 3;
   goto index 13;
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   entity "Wizard" animation -> 4 1x;
   entity "Wizard" current_animation = 0;
   player_control = true;
   player_control = false;
   entity "Wizard" animation -> 5 1x;
   entity "Wizard" current_animation = 3;
   player_control = true;
   if !"ch2-toot-done" then goto index 130;
   if "ch2-wait-for-hat-touch" then goto index 127;
   if "ch2-lambda-paging" then goto index 126;
   if "ch2-carrying-mainframeos" then goto index 33;
   if !"ch2-wizard-backstory" then goto index 30;
   if "interrupt2" then goto index 29;
   if !"interrupt3" then goto index 22;
   show dialog "ch2-castle-1.mgs-XX";
   goto index 24;
   show dialog "ch2-castle-1.mgs-XX";
   "interrupt3" = true;
   player_control = false;
   entity "Wizard" animation -> 4 1x;
   entity "Wizard" current_animation = 0;
   player_control = true;
   goto index 131;
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
   "ch2-wizard-backstory" = true;
   "interrupt2" = true;
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_tick = "null_script";
   player_control = false;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   player_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   if player intersects geometry "mainframe-watchdonut" then goto index 54;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   wait 1050ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 120ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 750ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 200ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 150ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 230ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3000ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 400ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 170ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 2300ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3800ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   serial_control = true;
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-XX";
   goto "ch2-install-wizard-resume2";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   entity "Wizard" direction = player;
   show dialog "ch2-castle-1.mgs-XX";
   show dialog "ch2-castle-1.mgs-XX";
}

"ch2-install-wizard" {
   serial_control = false;
   player_control = false;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" on_tick = "null_script";
   player_control = false;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   entity "Wizard" direction += 1;
   wait 100ms;
   player_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   player_control = false;
   if player intersects geometry "mainframe-watchdonut" then goto index 21;
   player position -> geometry "mainframe-look-spot" origin over 500ms;
   player position -> geometry "mainframe-look-spot" origin over 300ms;
   player direction = "north";
   wait 900ms;
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   show dialog "ch2-castle-1.mgs-XX";
   wait 800ms;
   serial_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "Wizard";
   show dialog "ch2-castle-1.mgs-XX";
   player direction = entity "mainframe";
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   wait 200ms;
   entity "Wizard" direction = "west";
   wait 200ms;
   entity "Wizard" direction = "east";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "south";
   show dialog "ch2-castle-1.mgs-XX";
   entity "Wizard" direction = "east";
   player on_tick = "ch2-wait-for-boot";
   wait 1050ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 120ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 750ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 200ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 150ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 50ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 100ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 230ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3000ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 400ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 170ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 700ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 2300ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   wait 3800ms;
   show serial_dialog "ch2-castle-1.mgs-XX";
   serial_control = true;
   serial_control = false;
   player_control = false;
   wait 1200ms;
   show dialog "ch2-castle-1.mgs-XX";
   goto "ch2-install-wizard-resume2";
}

"ch2-terminal-setup-nevermind" {
   if !"ch2-toot-done" then goto index 4;
   "can-interrupt-dialog" = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   show dialog "ch2-castle-1.mgs-XX";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   "can-interrupt-dialog" = true;
   serial_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   if serial_dialog closed then goto index 18;
   goto index 20;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   self on_interact = "ch2-terminal-setup-check";
}

"ch2-terminal-message-test-success" {
   if !"ch2-toot-done" then goto index 2;
   show dialog "ch2-castle-1.mgs-XX";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   "can-interrupt-dialog" = true;
   serial_control = true;
   show dialog "ch2-castle-1.mgs-XX";
   "can-interrupt-dialog" = false;
   if serial_dialog closed then goto index 15;
   goto index 17;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-1.mgs-XX";
   self on_interact = "ch2-terminal-setup-check";
}

"on_load-ch2-castle-11-doorless" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-11.mgs-XX";
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   if warp_state == "walk_from-west" then goto index 7;
   goto index 12;
   player position = geometry "walk_from-west";
   goto index 12;
   player position = geometry "walk_from-south";
   goto index 12;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_load-ch2-castle-11" {
   "ch2-in-room" = 11;
   show serial_dialog "spacer";
   if !"ch2-seen-room-11" then goto index 5;
   show serial_dialog "ch2-castle-11.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-11.mgs-XX";
   "ch2-seen-room-11" = true;
   if "ch2-installed-monitor" then goto index 10;
   if "ch2-carrying-monitor" then goto index 10;
   goto index 12;
   entity "Monitor" position = geometry "hiding-spot";
   entity "Monitor" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
   if !"ch2-cutseen-castle11" then goto index 380;
   goto index 427;
   player_control = false;
   wait 500ms;
   entity "Kuro" on_tick = "null_script";
   if !"ch2-blockage" then goto index 385;
   goto index 387;
   "ch2-blockage" = true;
   show dialog "ch2-castle-11.mgs-XX";
   show dialog "ch2-castle-11.mgs-XX";
   player on_tick = "watch-kuro";
   entity "Kuro" position -> geometry "kuro-walk" origin over 300ms;
   entity "Kuro" position -> geometry "kuro-spot" origin over 300ms;
   entity "Kuro" position -> geometry "kuro-walk" origin over 300ms;
   entity "Kuro" direction = "south";
   wait 400ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" position -> geometry "kuro-spot" origin over 250ms;
   entity "Kuro" position -> geometry "kuro-walk" origin over 250ms;
   entity "Kuro" direction = "south";
   wait 140ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 1;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" current_animation = 0;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "ch2-walk-to-monitor";
   player on_tick = "null_script";
   player position -> geometry "warp-spot" length over 1900ms;
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "null_script";
   entity "Kuro" direction = "south";
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "kuro-hop";
   show dialog "ch2-castle-11.mgs-XX";
   entity "Kuro" on_tick = "face-player";
   player_control = true;
   player on_tick = "null_script";
   "ch2-cutseen-castle11" = true;
}

"on_load-ch2-castle-12-doorless" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-12.mgs-XX";
   if warp_state == "walk_from-north" then goto index 11;
   if warp_state == "walk_from-south" then goto index 9;
   if warp_state == "walk_from-east" then goto index 7;
   goto index 12;
   player position = geometry "walk_from-east";
   goto index 12;
   player position = geometry "walk_from-south";
   goto index 12;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_load-ch2-castle-12" {
   "ch2-in-room" = 12;
   show serial_dialog "spacer";
   if !"ch2-seen-room-12" then goto index 5;
   show serial_dialog "ch2-castle-12.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-12.mgs-XX";
   "ch2-seen-room-12" = true;
   if "ch2-installed-needle" then goto index 10;
   if "ch2-carrying-needle" then goto index 10;
   goto index 11;
   entity "phonograph" secondary_id = 0;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
   if !"ch2-cutseen-castle12" then goto index 379;
   goto index 382;
   show dialog "ch2-castle-12.mgs-XX";
   "interrupt" = true;
   "ch2-cutseen-castle12" = true;
}

"on_load-ch2-castle-13-doorless" {
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-13.mgs-XX";
   if warp_state == "walk_from-north" then goto index 8;
   if warp_state == "walk_from-south" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-south";
   goto index 9;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-13" {
   if warp_state == "ch2 ending" then goto index 2;
   goto index 7;
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   goto "ch2-castle-13-ending";
   "ch2-in-room" = 13;
   show serial_dialog "spacer";
   if !"ch2-seen-room-13" then goto index 12;
   show serial_dialog "ch2-castle-13.mgs-XX";
   goto index 14;
   show serial_dialog "ch2-castle-13.mgs-XX";
   "ch2-seen-room-13" = true;
   if warp_state == "Ch2 King Returns" then goto index 26;
   if "ch2-king-rescued" then goto index 18;
   entity "King Gibson" on_tick = "yeet";
   goto index 28;
   entity "door" on_tick = "yeet";
   entity "King Gibson" position = geometry "king-examine1";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton1";
   entity "Aurelius" position = geometry "end-fish";
   entity "Templeton" on_tick = "templeton-catalog-search";
   entity "King Gibson" on_tick = "king-debris-ponder";
   goto index 28;
   entity "door" on_tick = "yeet";
   camera = geometry "camera-spot2";
   if "ch2-installed-goldfish" then goto index 31;
   if "ch2-carrying-goldfish" then goto index 31;
   goto index 32;
   entity "Aurelius" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 45;
   if "ch2-in-room" == 0 then goto index 45;
   if debug_mode then goto index 45;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 49;
   goto index 50;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 76;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 77;
   serial_control = false;
   if "ch2-has-map" then goto index 79;
   goto index 81;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 151;
   if "ch2-warp-granted" then goto index 84;
   goto index 225;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 225;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 226;
   if "ch2-storyflag-round" < 5 then goto index 228;
   goto index 258;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 260;
   goto index 261;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 263;
   goto index 264;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 266;
   goto index 267;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 269;
   goto index 270;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 272;
   goto index 273;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 275;
   goto index 276;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 278;
   goto index 279;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 281;
   goto index 282;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 284;
   goto index 285;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 287;
   goto index 289;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 291;
   goto index 292;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 294;
   goto index 295;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 297;
   goto index 298;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 300;
   goto index 301;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 303;
   goto index 304;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 306;
   goto index 307;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 313;
   if "debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 317;
   if !"debug-curr-state" then goto index 315;
   goto index 316;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 319;
   goto index 327;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 330;
   goto index 398;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 332;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 392;
   if "goosefact" == 1 then goto index 390;
   if "goosefact" == 2 then goto index 388;
   if "goosefact" == 3 then goto index 386;
   if "goosefact" == 4 then goto index 384;
   if "goosefact" == 5 then goto index 382;
   if "goosefact" == 6 then goto index 380;
   if "goosefact" == 7 then goto index 378;
   if "goosefact" == 8 then goto index 376;
   if "goosefact" == 9 then goto index 374;
   if "goosefact" == 10 then goto index 372;
   if "goosefact" == 11 then goto index 370;
   if "goosefact" == 12 then goto index 368;
   if "goosefact" == 13 then goto index 366;
   if "goosefact" == 14 then goto index 364;
   if "goosefact" == 15 then goto index 362;
   if "goosefact" == 16 then goto index 360;
   if "goosefact" == 17 then goto index 358;
   if "goosefact" == 18 then goto index 356;
   if "goosefact" == 19 then goto index 354;
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 393;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 397;
   goto index 398;
   "goosefact" = 0;
   if warp_state == "Ch2 King Returns" then goto index 467;
   if !"ch2-cutseen-castle13" then goto index 401;
   goto index 551;
   if debug_mode then goto index 403;
   goto index 405;
   command "skip" = "ch2-skip-13";
   show serial_dialog "ch2-castle-13.mgs-XX";
   player_control = false;
   wait 300ms;
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   camera = geometry "camera-spot";
   player position = geometry "mage-walk";
   camera fade in -> #000000 over 600ms;
   entity "Templeton" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-sebastian-paceonce";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-templeton-pace" = true;
   entity "Templeton" on_tick = "ch2-templeton-pace";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-templeton-pace" = false;
   entity "Templeton" direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-sebastian-stomp";
   wait 200ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "lizard1" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" direction = "south";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   camera = player position;
   player on_tick = "ch2-mage-approach";
   camera fade in -> #000000 over 600ms;
   entity "Sebastian" on_tick = "ch2-sebastian-approach";
   wait 2600ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-lizard-lurch";
   wait 150ms;
   player strafe = 2;
   player position -> geometry "mage-backup" origin over 200ms;
   player strafe = 0;
   player direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" on_tick = "ch2-lizard-withdraw";
   player direction = "east";
   show dialog "ch2-castle-13.mgs-XX";
   player direction = "north";
   show dialog "ch2-castle-13.mgs-XX";
   if !"ch2-seen-room-21" then goto index 463;
   if !"ch2-seen-room-22" then goto index 463;
   if !"ch2-seen-room-23" then goto index 463;
   if !"ch2-seen-room-31" then goto index 463;
   if !"ch2-seen-room-32" then goto index 463;
   if !"ch2-seen-room-33" then goto index 463;
   if !"ch2-seen-room-34" then goto index 463;
   if !"ch2-seen-room-11" then goto index 463;
   if !"ch2-seen-room-12" then goto index 463;
   show dialog "ch2-castle-13.mgs-XX";
   goto index 464;
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   "ch2-cutseen-castle13" = true;
   player_control = true;
   "ch2-cutseen-castle13" = true;
   camera fade out -> #000000 over 1ms;
   player_control = false;
   player direction = entity "King Gibson";
   entity "Templeton" direction = entity "King Gibson";
   entity "Sebastian" direction = entity "King Gibson";
   entity "King Gibson" on_tick = "walk-over-1500";
   wait 200ms;
   player on_tick = "walk-over-1500";
   camera fade in -> #000000 over 600ms;
   entity "Templeton" direction = entity "King Gibson";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" direction = entity "King Gibson";
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction += 1;
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Sebastian";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Aurelius";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = entity "Sebastian";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-13.mgs-XX";
   camera fade out -> #000000 over 600ms;
   player position = geometry "end-player";
   entity "King Gibson" position = geometry "end-king";
   entity "Sebastian" position = geometry "end-sebastian";
   entity "Templeton" position = geometry "end-templeton";
   entity "Aurelius" position = geometry "end-fish";
   player direction = entity "King Gibson";
   camera = geometry "camera-spot3";
   camera fade in -> #000000 over 600ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "end-sebastian2" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   show dialog "ch2-castle-13.mgs-XX";
   entity "Sebastian" position -> geometry "end-sebastian" origin over 400ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" position -> geometry "end-templeton1" origin over 200ms;
   show dialog "ch2-castle-13.mgs-XX";
   entity "Templeton" on_tick = "templeton-catalog-search";
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" on_tick = "king-walk-to-debris";
   show dialog "ch2-castle-13.mgs-XX";
   "captured_animation2" = entity "King Gibson" current_animation;
   entity "King Gibson" current_animation = 0;
   pause entity "King Gibson" on_tick;
   if entity "King Gibson" direction == "north" then goto index 529;
   if entity "King Gibson" direction == "east" then goto index 527;
   if entity "King Gibson" direction == "south" then goto index 525;
   if entity "King Gibson" direction == "west" then goto index 523;
   goto index 530;
   "tempvar2" = 3;
   goto index 530;
   "tempvar2" = 2;
   goto index 530;
   "tempvar2" = 1;
   goto index 530;
   "tempvar2" = 0;
   entity "King Gibson" direction = player;
   entity "King Gibson" direction = player;
   show dialog "ch2-castle-13.mgs-XX";
   entity "King Gibson" current_animation = "captured_animation2";
   unpause entity "King Gibson" on_tick;
   if "tempvar2" == 0 then goto index 546;
   if "tempvar2" == 1 then goto index 544;
   if "tempvar2" == 2 then goto index 542;
   if "tempvar2" == 3 then goto index 540;
   goto index 547;
   entity "King Gibson" direction = "west";
   goto index 547;
   entity "King Gibson" direction = "south";
   goto index 547;
   entity "King Gibson" direction = "east";
   goto index 547;
   entity "King Gibson" direction = "north";
   warp_state = "nothing lol";
   "ch2-king-rescued" = true;
   camera -> player position over 700ms;
   player_control = true;
}

"ch2-templeton-pace" {
   self position -> geometry "templeton1" origin over 400ms;
   self position -> geometry "templeton2" origin over 400ms;
   if !"ch2-templeton-pace" then goto script "null_script";
}

"on_load-ch2-castle-14" {
   if warp_state == "king returns teleport" then goto script "ch2-cutscene-kingreturns-bedroom";
   "ch2-in-room" = 14;
   show serial_dialog "spacer";
   if !"ch2-seen-room-14" then goto index 6;
   show serial_dialog "ch2-castle-14.mgs-XX";
   goto index 8;
   show serial_dialog "ch2-castle-14.mgs-XX";
   "ch2-seen-room-14" = true;
   if "ch2-installed-clock" then goto index 11;
   if "ch2-carrying-clock" then goto index 11;
   goto index 13;
   entity "Clock" position = geometry "hiding-spot";
   entity "Clock" name = " ";
   if "ch2-storyflag-round" >= 5 then goto index 16;
   if "ch2-king-rescued" then goto index 16;
   goto index 18;
   entity "King Gibson" on_tick = "yeet";
   entity "keypad" on_interact = "null_script";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 31;
   if "ch2-in-room" == 0 then goto index 31;
   if debug_mode then goto index 31;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 35;
   goto index 36;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 62;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 63;
   serial_control = false;
   if "ch2-has-map" then goto index 65;
   goto index 67;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 137;
   if "ch2-warp-granted" then goto index 70;
   goto index 211;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 211;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 212;
   if "ch2-storyflag-round" < 5 then goto index 214;
   goto index 244;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 246;
   goto index 247;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 249;
   goto index 250;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 252;
   goto index 253;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 255;
   goto index 256;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 258;
   goto index 259;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 261;
   goto index 262;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 264;
   goto index 265;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 267;
   goto index 268;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 270;
   goto index 271;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 273;
   goto index 275;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 277;
   goto index 278;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 280;
   goto index 281;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 283;
   goto index 284;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 286;
   goto index 287;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 289;
   goto index 290;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 292;
   goto index 293;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 299;
   if "debug-curr-state" then goto index 296;
   goto index 297;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 303;
   if !"debug-curr-state" then goto index 301;
   goto index 302;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 305;
   goto index 313;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 316;
   goto index 384;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 318;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 378;
   if "goosefact" == 1 then goto index 376;
   if "goosefact" == 2 then goto index 374;
   if "goosefact" == 3 then goto index 372;
   if "goosefact" == 4 then goto index 370;
   if "goosefact" == 5 then goto index 368;
   if "goosefact" == 6 then goto index 366;
   if "goosefact" == 7 then goto index 364;
   if "goosefact" == 8 then goto index 362;
   if "goosefact" == 9 then goto index 360;
   if "goosefact" == 10 then goto index 358;
   if "goosefact" == 11 then goto index 356;
   if "goosefact" == 12 then goto index 354;
   if "goosefact" == 13 then goto index 352;
   if "goosefact" == 14 then goto index 350;
   if "goosefact" == 15 then goto index 348;
   if "goosefact" == 16 then goto index 346;
   if "goosefact" == 17 then goto index 344;
   if "goosefact" == 18 then goto index 342;
   if "goosefact" == 19 then goto index 340;
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 379;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 383;
   goto index 384;
   "goosefact" = 0;
   if "ch2-storyflag-round" < 5 then goto index 385;
   if !"ch2-cutseen-castle14" then goto index 387;
   goto index 422;
   player_control = false;
   wait 400ms;
   entity "King Gibson" current_animation = 2;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "ch2-gibson-scramble";
   entity "King Gibson" current_animation = 3;
   show dialog "ch2-castle-14.mgs-XX";
   player direction = entity "King Gibson";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "null_script";
   entity "King Gibson" current_animation = 2;
   wait 400ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" current_animation = 0;
   wait 1100ms;
   entity "King Gibson" direction = "west";
   wait 350ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "north";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "north";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "west";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" direction = "south";
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" position -> geometry "walk-spot" origin over 800ms;
   show dialog "ch2-castle-14.mgs-XX";
   entity "King Gibson" on_tick = "face-player";
   "ch2-cutseen-castle14" = true;
   player_control = true;
}

"on_load-ch2-castle-21-doorless" {
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-21.mgs-XX";
   if warp_state == "walk_from-north" then goto index 8;
   if warp_state == "walk_from-east" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-east";
   goto index 9;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-21" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-21-ending";
   "ch2-in-room" = 21;
   show serial_dialog "spacer";
   if !"ch2-seen-room-21" then goto index 6;
   show serial_dialog "ch2-castle-21.mgs-XX";
   goto index 8;
   show serial_dialog "ch2-castle-21.mgs-XX";
   "ch2-seen-room-21" = true;
   if "ch2-installed-abacus" then goto index 11;
   if "ch2-carrying-abacus" then goto index 11;
   goto index 13;
   entity "abacus" position = geometry "hiding-spot";
   entity "abacus" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 26;
   if "ch2-in-room" == 0 then goto index 26;
   if debug_mode then goto index 26;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 30;
   goto index 31;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 57;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 58;
   serial_control = false;
   if "ch2-has-map" then goto index 60;
   goto index 62;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 132;
   if "ch2-warp-granted" then goto index 65;
   goto index 206;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 206;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 207;
   if "ch2-storyflag-round" < 5 then goto index 209;
   goto index 239;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 241;
   goto index 242;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 244;
   goto index 245;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 247;
   goto index 248;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 250;
   goto index 251;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 253;
   goto index 254;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 256;
   goto index 257;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 259;
   goto index 260;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 262;
   goto index 263;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 265;
   goto index 266;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 268;
   goto index 270;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 272;
   goto index 273;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 275;
   goto index 276;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 278;
   goto index 279;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 281;
   goto index 282;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 284;
   goto index 285;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 287;
   goto index 288;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 294;
   if "debug-curr-state" then goto index 291;
   goto index 292;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 298;
   if !"debug-curr-state" then goto index 296;
   goto index 297;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 300;
   goto index 308;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 311;
   goto index 379;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 313;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 373;
   if "goosefact" == 1 then goto index 371;
   if "goosefact" == 2 then goto index 369;
   if "goosefact" == 3 then goto index 367;
   if "goosefact" == 4 then goto index 365;
   if "goosefact" == 5 then goto index 363;
   if "goosefact" == 6 then goto index 361;
   if "goosefact" == 7 then goto index 359;
   if "goosefact" == 8 then goto index 357;
   if "goosefact" == 9 then goto index 355;
   if "goosefact" == 10 then goto index 353;
   if "goosefact" == 11 then goto index 351;
   if "goosefact" == 12 then goto index 349;
   if "goosefact" == 13 then goto index 347;
   if "goosefact" == 14 then goto index 345;
   if "goosefact" == 15 then goto index 343;
   if "goosefact" == 16 then goto index 341;
   if "goosefact" == 17 then goto index 339;
   if "goosefact" == 18 then goto index 337;
   if "goosefact" == 19 then goto index 335;
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 378;
   goto index 379;
   "goosefact" = 0;
   if !"ch2-cutseen-castle21" then goto index 381;
   goto index 410;
   player_control = false;
   wait 500ms;
   entity "Frankie" direction = player;
   wait 250ms;
   entity "Jean-Paul" direction = player;
   wait 140ms;
   entity "Jean-Paul" strafe = 2;
   entity "Jean-Paul" position -> geometry "birdstep" origin over 150ms;
   entity "Jean-Paul" strafe = 0;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   wait 300ms;
   entity "Jean-Paul" position -> geometry "birdstep2" origin over 240ms;
   wait 100ms;
   player direction = entity "Frankie";
   show dialog "ch2-castle-21.mgs-XX";
   player direction = entity "Jean-Paul";
   show dialog "ch2-castle-21.mgs-XX";
   wait 100ms;
   entity "Jean-Paul" direction = "north";
   wait 500ms;
   entity "Jean-Paul" direction = "east";
   wait 200ms;
   entity "Jean-Paul" direction = "south";
   entity "Frankie" direction = "south";
   player_control = true;
   "ch2-cutseen-castle21" = true;
}

"on_load-ch2-castle-22-doorless" {
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-22.mgs-XX";
   if warp_state == "walk_from-south" then goto index 8;
   if warp_state == "walk_from-north" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-north";
   goto index 9;
   player position = geometry "walk_from-south";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-castle-22" {
   if warp_state == "ch2 ending" then goto script "ch2-castle-22-ending";
   "ch2-in-room" = 22;
   show serial_dialog "spacer";
   if !"ch2-seen-room-22" then goto index 6;
   show serial_dialog "ch2-castle-22.mgs-XX";
   goto index 8;
   show serial_dialog "ch2-castle-22.mgs-XX";
   "ch2-seen-room-22" = true;
   if "ch2-installed-powersupply" then goto index 11;
   if "ch2-carrying-powersupply" then goto index 11;
   goto index 13;
   entity "Power Supply" position = geometry "hiding-spot";
   entity "Power Supply" name = " ";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 26;
   if "ch2-in-room" == 0 then goto index 26;
   if debug_mode then goto index 26;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 30;
   goto index 31;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 57;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 58;
   serial_control = false;
   if "ch2-has-map" then goto index 60;
   goto index 62;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 132;
   if "ch2-warp-granted" then goto index 65;
   goto index 206;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 206;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 207;
   if "ch2-storyflag-round" < 5 then goto index 209;
   goto index 239;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 241;
   goto index 242;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 244;
   goto index 245;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 247;
   goto index 248;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 250;
   goto index 251;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 253;
   goto index 254;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 256;
   goto index 257;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 259;
   goto index 260;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 262;
   goto index 263;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 265;
   goto index 266;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 268;
   goto index 270;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 272;
   goto index 273;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 275;
   goto index 276;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 278;
   goto index 279;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 281;
   goto index 282;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 284;
   goto index 285;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 287;
   goto index 288;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 294;
   if "debug-curr-state" then goto index 291;
   goto index 292;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 298;
   if !"debug-curr-state" then goto index 296;
   goto index 297;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 300;
   goto index 308;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 311;
   goto index 379;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 313;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 373;
   if "goosefact" == 1 then goto index 371;
   if "goosefact" == 2 then goto index 369;
   if "goosefact" == 3 then goto index 367;
   if "goosefact" == 4 then goto index 365;
   if "goosefact" == 5 then goto index 363;
   if "goosefact" == 6 then goto index 361;
   if "goosefact" == 7 then goto index 359;
   if "goosefact" == 8 then goto index 357;
   if "goosefact" == 9 then goto index 355;
   if "goosefact" == 10 then goto index 353;
   if "goosefact" == 11 then goto index 351;
   if "goosefact" == 12 then goto index 349;
   if "goosefact" == 13 then goto index 347;
   if "goosefact" == 14 then goto index 345;
   if "goosefact" == 15 then goto index 343;
   if "goosefact" == 16 then goto index 341;
   if "goosefact" == 17 then goto index 339;
   if "goosefact" == 18 then goto index 337;
   if "goosefact" == 19 then goto index 335;
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 378;
   goto index 379;
   "goosefact" = 0;
}

"on_load-ch2-castle-23-doorless" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-23.mgs-XX";
   if warp_state == "walk_from-south" then goto index 5;
   goto index 6;
   player position = geometry "walk_from-south";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 19;
   if "ch2-in-room" == 0 then goto index 19;
   if debug_mode then goto index 19;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 23;
   goto index 24;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 50;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 51;
   serial_control = false;
   if "ch2-has-map" then goto index 53;
   goto index 55;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 125;
   if "ch2-warp-granted" then goto index 58;
   goto index 199;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 199;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 200;
   if "ch2-storyflag-round" < 5 then goto index 202;
   goto index 232;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 234;
   goto index 235;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 237;
   goto index 238;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 240;
   goto index 241;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 243;
   goto index 244;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 246;
   goto index 247;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 249;
   goto index 250;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 252;
   goto index 253;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 255;
   goto index 256;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 258;
   goto index 259;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 261;
   goto index 263;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 265;
   goto index 266;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 268;
   goto index 269;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 271;
   goto index 272;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 274;
   goto index 275;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 277;
   goto index 278;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 280;
   goto index 281;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 287;
   if "debug-curr-state" then goto index 284;
   goto index 285;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 291;
   if !"debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 293;
   goto index 301;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 304;
   goto index 372;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 306;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 366;
   if "goosefact" == 1 then goto index 364;
   if "goosefact" == 2 then goto index 362;
   if "goosefact" == 3 then goto index 360;
   if "goosefact" == 4 then goto index 358;
   if "goosefact" == 5 then goto index 356;
   if "goosefact" == 6 then goto index 354;
   if "goosefact" == 7 then goto index 352;
   if "goosefact" == 8 then goto index 350;
   if "goosefact" == 9 then goto index 348;
   if "goosefact" == 10 then goto index 346;
   if "goosefact" == 11 then goto index 344;
   if "goosefact" == 12 then goto index 342;
   if "goosefact" == 13 then goto index 340;
   if "goosefact" == 14 then goto index 338;
   if "goosefact" == 15 then goto index 336;
   if "goosefact" == 16 then goto index 334;
   if "goosefact" == 17 then goto index 332;
   if "goosefact" == 18 then goto index 330;
   if "goosefact" == 19 then goto index 328;
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 367;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 371;
   goto index 372;
   "goosefact" = 0;
}

"on_load-ch2-castle-23" {
   "ch2-in-room" = 23;
   show serial_dialog "spacer";
   if !"ch2-seen-room-23" then goto index 5;
   show serial_dialog "ch2-castle-23.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-23.mgs-XX";
   "ch2-seen-room-23" = true;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
   if debug_mode then goto index 375;
   goto index 377;
   command "get" + "thing" = "ch2-pickup-cactuscooler";
   show serial_dialog "ch2-castle-23.mgs-XX";
}

"simon-player-turn-loop-start" {
   if "i" >= "simon-round" then goto script "simon-player-turn-end";
   if "i" == 0 then goto index 21;
   if "i" == 1 then goto index 19;
   if "i" == 2 then goto index 17;
   if "i" == 3 then goto index 15;
   if "i" == 4 then goto index 13;
   if "i" == 5 then goto index 11;
   if "i" == 6 then goto index 9;
   goto index 22;
   "simon-pos-curr" = "simon-pos7";
   goto index 22;
   "simon-pos-curr" = "simon-pos6";
   goto index 22;
   "simon-pos-curr" = "simon-pos5";
   goto index 22;
   "simon-pos-curr" = "simon-pos4";
   goto index 22;
   "simon-pos-curr" = "simon-pos3";
   goto index 22;
   "simon-pos-curr" = "simon-pos2";
   goto index 22;
   "simon-pos-curr" = "simon-pos1";
   goto "simon-player-listen";
}

"simon-player-listen" {
   player direction = "south";
   if "ch2-simon-high" then goto index 13;
   if "simon-pos-curr" != 0 then goto index 3;
   if button $button0 pressed then goto index 5;
   goto index 8;
   "simon-player-move" = 0;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 1 then goto index 9;
   if button $button1 pressed then goto index 10;
   "simon-player-move" = 1;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 4 then goto index 14;
   if button $button4 pressed then goto index 16;
   goto index 19;
   "simon-player-move" = 4;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 5 then goto index 20;
   if button $button5 pressed then goto index 22;
   goto index 25;
   "simon-player-move" = 5;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 2 then goto index 26;
   if button $button2 pressed then goto index 28;
   goto index 31;
   "simon-player-move" = 2;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "simon-pos-curr" != 3 then goto index 32;
   if button $button3 pressed then goto index 34;
   goto index 37;
   "simon-player-move" = 3;
   "ch2-simon-move-fail" = true;
   goto "simon-player-do-move";
   if "ch2-simon-high" then goto index 47;
   if "simon-pos-curr" == 0 then goto index 39;
   if button $button0 pressed then goto index 41;
   goto index 43;
   "simon-player-move" = 0;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 1 then goto index 44;
   if button $button1 pressed then goto index 45;
   "simon-player-move" = 1;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 4 then goto index 48;
   if button $button4 pressed then goto index 50;
   goto index 52;
   "simon-player-move" = 4;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 5 then goto index 53;
   if button $button5 pressed then goto index 55;
   goto index 57;
   "simon-player-move" = 5;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 2 then goto index 58;
   if button $button2 pressed then goto index 60;
   goto index 62;
   "simon-player-move" = 2;
   goto "simon-player-do-move";
   if "simon-pos-curr" == 3 then goto index 63;
   if button $button3 pressed then goto index 65;
   goto index 67;
   "simon-player-move" = 3;
   goto "simon-player-do-move";
   entity "Simon" on_tick = "simon-player-listen";
}

"simon-player-animation-pose_bottom_left-wait" {
   if button $button0 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_bottom_right-wait" {
   if button $button1 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_left-wait" {
   if button $button2 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_right-wait" {
   if button $button3 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_top_left-wait" {
   if button $button4 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-animation-pose_top_right-wait" {
   if button $button5 up then goto index 2;
   goto index 4;
   "simon-player-wait-finished" = true;
   goto "null_script";
}

"simon-player-wait" {
   if "simon-player-wait-finished" then goto script "simon-player-wait-finished";
}

"simon-player-wait-finished" {
   "simon-player-wait-finished" = false;
   player current_animation = 3;
   light ALL = false;
   "i" += 1;
   if "ch2-simon-move-fail" then goto script "simon-game-lose";
   goto "simon-player-turn-loop-start";
}

"simon-player-turn-end" {
   "simon-round" += 1;
   if "simon-round" > 7 then goto script "simon-game-win";
   goto "simon-enemy-turn-start";
}

"on_load-ch2-castle-31-doorless" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   entity "Sea Moss" direction = "west";
   if warp_state == "walk_from-north" then goto index 10;
   if warp_state == "walk_from-west" then goto index 8;
   goto index 11;
   player position = geometry "walk_from-west";
   goto index 11;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
}

"on_load-ch2-castle-31" {
   "ch2-in-room" = 31;
   show serial_dialog "spacer";
   if !"ch2-seen-room-31" then goto index 5;
   show serial_dialog "ch2-castle-31.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-31.mgs-XX";
   "ch2-seen-room-31" = true;
   if "ch2-installed-keyboard" then goto index 10;
   if "ch2-carrying-keyboard" then goto index 10;
   goto index 12;
   entity "Keyboard" position = geometry "hiding-spot";
   entity "Keyboard" name = " ";
   "ch2-simon-heard-high" = false;
   "ch2-simon-heard-low" = false;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 27;
   if "ch2-in-room" == 0 then goto index 27;
   if debug_mode then goto index 27;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 31;
   goto index 32;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 58;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 59;
   serial_control = false;
   if "ch2-has-map" then goto index 61;
   goto index 63;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 133;
   if "ch2-warp-granted" then goto index 66;
   goto index 207;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 207;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 208;
   if "ch2-storyflag-round" < 5 then goto index 210;
   goto index 240;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 242;
   goto index 243;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 245;
   goto index 246;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 248;
   goto index 249;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 251;
   goto index 252;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 254;
   goto index 255;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 257;
   goto index 258;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 260;
   goto index 261;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 263;
   goto index 264;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 266;
   goto index 267;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 269;
   goto index 271;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 273;
   goto index 274;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 276;
   goto index 277;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 279;
   goto index 280;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 282;
   goto index 283;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 285;
   goto index 286;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 288;
   goto index 289;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 295;
   if "debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 299;
   if !"debug-curr-state" then goto index 297;
   goto index 298;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 301;
   goto index 309;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 312;
   goto index 380;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 314;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 374;
   if "goosefact" == 1 then goto index 372;
   if "goosefact" == 2 then goto index 370;
   if "goosefact" == 3 then goto index 368;
   if "goosefact" == 4 then goto index 366;
   if "goosefact" == 5 then goto index 364;
   if "goosefact" == 6 then goto index 362;
   if "goosefact" == 7 then goto index 360;
   if "goosefact" == 8 then goto index 358;
   if "goosefact" == 9 then goto index 356;
   if "goosefact" == 10 then goto index 354;
   if "goosefact" == 11 then goto index 352;
   if "goosefact" == 12 then goto index 350;
   if "goosefact" == 13 then goto index 348;
   if "goosefact" == 14 then goto index 346;
   if "goosefact" == 15 then goto index 344;
   if "goosefact" == 16 then goto index 342;
   if "goosefact" == 17 then goto index 340;
   if "goosefact" == 18 then goto index 338;
   if "goosefact" == 19 then goto index 336;
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 379;
   goto index 380;
   "goosefact" = 0;
   if debug_mode then goto index 382;
   goto index 388;
   command "simon" = "debug-simon";
   command "simon" + "high" = "debug-simon-high";
   command "simon" + "low" = "debug-simon-low";
   command "simon" + "win" = "debug-simon-win";
   command "simon" + "lose" = "debug-simon-lose";
   show serial_dialog "ch2-castle-31.mgs-XX";
}

"interact-ch2-simon" {
   if "ch2-storyflag-round" < 2 then goto index 38;
   if !"ch2-simon-won-before" then goto index 22;
   if "interrupt" then goto index 18;
   entity "Simon" current_animation = 12;
   if !"ch2-simon-repeat-backstory" then goto index 7;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 9;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-repeat-backstory" = true;
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-repeat-brunhilda-backstory" = true;
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   if !"ch2-simon-backstory" then goto index 26;
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   goto index 36;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 13;
   entity "Alvin" on_tick = "camera-angry-shake";
   show dialog "ch2-castle-31.mgs-XX";
   entity "Alvin" on_tick = "null_script";
   entity "Simon" current_animation = 0;
   show dialog "ch2-castle-31.mgs-XX";
   entity "Simon" current_animation = 12;
   show dialog "ch2-castle-31.mgs-XX";
   "ch2-simon-backstory" = true;
   entity "Simon" on_tick = "simon-game-start-q";
   goto index 39;
   show dialog "ch2-castle-31.mgs-XX";
}

"on_load-ch2-castle-32-doorless" {
   "ch2-in-room" = 32;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-32.mgs-XX";
   if warp_state == "walk_from-northeast" then goto index 8;
   if warp_state == "walk_from-northwest" then goto index 6;
   goto index 9;
   player position = geometry "walk_from-northwest";
   goto index 9;
   player position = geometry "walk_from-northeast";
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 23;
   if "ch2-in-room" == 0 then goto index 23;
   if debug_mode then goto index 23;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 27;
   goto index 28;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 54;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 55;
   serial_control = false;
   if "ch2-has-map" then goto index 57;
   goto index 59;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 129;
   if "ch2-warp-granted" then goto index 62;
   goto index 203;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 203;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 204;
   if "ch2-storyflag-round" < 5 then goto index 206;
   goto index 236;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 238;
   goto index 239;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 241;
   goto index 242;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 244;
   goto index 245;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 247;
   goto index 248;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 250;
   goto index 251;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 253;
   goto index 254;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 256;
   goto index 257;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 259;
   goto index 260;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 262;
   goto index 263;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 265;
   goto index 267;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 269;
   goto index 270;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 272;
   goto index 273;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 275;
   goto index 276;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 278;
   goto index 279;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 281;
   goto index 282;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 284;
   goto index 285;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 291;
   if "debug-curr-state" then goto index 288;
   goto index 289;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 295;
   if !"debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 297;
   goto index 305;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 308;
   goto index 376;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 310;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 370;
   if "goosefact" == 1 then goto index 368;
   if "goosefact" == 2 then goto index 366;
   if "goosefact" == 3 then goto index 364;
   if "goosefact" == 4 then goto index 362;
   if "goosefact" == 5 then goto index 360;
   if "goosefact" == 6 then goto index 358;
   if "goosefact" == 7 then goto index 356;
   if "goosefact" == 8 then goto index 354;
   if "goosefact" == 9 then goto index 352;
   if "goosefact" == 10 then goto index 350;
   if "goosefact" == 11 then goto index 348;
   if "goosefact" == 12 then goto index 346;
   if "goosefact" == 13 then goto index 344;
   if "goosefact" == 14 then goto index 342;
   if "goosefact" == 15 then goto index 340;
   if "goosefact" == 16 then goto index 338;
   if "goosefact" == 17 then goto index 336;
   if "goosefact" == 18 then goto index 334;
   if "goosefact" == 19 then goto index 332;
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 371;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 375;
   goto index 376;
   "goosefact" = 0;
}

"on_load-ch2-castle-32" {
   "ch2-in-room" = 32;
   entity "Gloria" position = geometry "worry-walk2";
   entity "Gloria" direction = entity "Samson";
   show serial_dialog "spacer";
   if !"ch2-seen-room-32" then goto index 7;
   show serial_dialog "ch2-castle-32.mgs-XX";
   goto index 9;
   show serial_dialog "ch2-castle-32.mgs-XX";
   "ch2-seen-room-32" = true;
   if !"ch2-ramchips-dispensed" then goto index 11;
   goto index 13;
   entity "RAM chips" position = geometry "hiding-spot";
   entity "RAM chips" name = " ";
   if warp_state == "walk_from-northeast" then goto index 18;
   if warp_state == "walk_from-northwest" then goto index 16;
   goto index 19;
   player position = geometry "walk_from-northwest";
   goto index 19;
   player position = geometry "walk_from-northeast";
   command "look" + "vending machine" = "look-ch2-vendingmachine";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 33;
   if "ch2-in-room" == 0 then goto index 33;
   if debug_mode then goto index 33;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 37;
   goto index 38;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 64;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 65;
   serial_control = false;
   if "ch2-has-map" then goto index 67;
   goto index 69;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 139;
   if "ch2-warp-granted" then goto index 72;
   goto index 213;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 213;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 214;
   if "ch2-storyflag-round" < 5 then goto index 216;
   goto index 246;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 248;
   goto index 249;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 251;
   goto index 252;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 254;
   goto index 255;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 257;
   goto index 258;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 260;
   goto index 261;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 263;
   goto index 264;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 266;
   goto index 267;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 269;
   goto index 270;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 272;
   goto index 273;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 275;
   goto index 277;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 279;
   goto index 280;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 282;
   goto index 283;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 285;
   goto index 286;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 288;
   goto index 289;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 291;
   goto index 292;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 294;
   goto index 295;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 301;
   if "debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 305;
   if !"debug-curr-state" then goto index 303;
   goto index 304;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 307;
   goto index 315;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 318;
   goto index 386;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 320;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 380;
   if "goosefact" == 1 then goto index 378;
   if "goosefact" == 2 then goto index 376;
   if "goosefact" == 3 then goto index 374;
   if "goosefact" == 4 then goto index 372;
   if "goosefact" == 5 then goto index 370;
   if "goosefact" == 6 then goto index 368;
   if "goosefact" == 7 then goto index 366;
   if "goosefact" == 8 then goto index 364;
   if "goosefact" == 9 then goto index 362;
   if "goosefact" == 10 then goto index 360;
   if "goosefact" == 11 then goto index 358;
   if "goosefact" == 12 then goto index 356;
   if "goosefact" == 13 then goto index 354;
   if "goosefact" == 14 then goto index 352;
   if "goosefact" == 15 then goto index 350;
   if "goosefact" == 16 then goto index 348;
   if "goosefact" == 17 then goto index 346;
   if "goosefact" == 18 then goto index 344;
   if "goosefact" == 19 then goto index 342;
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 381;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 385;
   goto index 386;
   "goosefact" = 0;
   if debug_mode then goto index 388;
   goto index 390;
   command "want" + "chips" = "debug-want-chips";
   show serial_dialog "ch2-castle-32.mgs-XX";
}

"on_load-ch2-castle-33" {
   "ch2-in-room" = 33;
   show serial_dialog "spacer";
   if !"ch2-seen-room-33" then goto index 5;
   show serial_dialog "ch2-castle-33.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-33.mgs-XX";
   "ch2-seen-room-33" = true;
   if "ch2-installed-mouse" then goto index 10;
   if "ch2-carrying-mouse" then goto index 10;
   goto index 13;
   entity "Mouse" position = geometry "hiding-spot";
   entity "Mouse" name = " ";
   entity "Mouse" on_interact = "null_script";
   "ch2-mousegame" = false;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 27;
   if "ch2-in-room" == 0 then goto index 27;
   if debug_mode then goto index 27;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 31;
   goto index 32;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 58;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 59;
   serial_control = false;
   if "ch2-has-map" then goto index 61;
   goto index 63;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 133;
   if "ch2-warp-granted" then goto index 66;
   goto index 207;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 207;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 208;
   if "ch2-storyflag-round" < 5 then goto index 210;
   goto index 240;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 242;
   goto index 243;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 245;
   goto index 246;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 248;
   goto index 249;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 251;
   goto index 252;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 254;
   goto index 255;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 257;
   goto index 258;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 260;
   goto index 261;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 263;
   goto index 264;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 266;
   goto index 267;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 269;
   goto index 271;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 273;
   goto index 274;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 276;
   goto index 277;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 279;
   goto index 280;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 282;
   goto index 283;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 285;
   goto index 286;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 288;
   goto index 289;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 295;
   if "debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 299;
   if !"debug-curr-state" then goto index 297;
   goto index 298;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 301;
   goto index 309;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 312;
   goto index 380;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 314;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 374;
   if "goosefact" == 1 then goto index 372;
   if "goosefact" == 2 then goto index 370;
   if "goosefact" == 3 then goto index 368;
   if "goosefact" == 4 then goto index 366;
   if "goosefact" == 5 then goto index 364;
   if "goosefact" == 6 then goto index 362;
   if "goosefact" == 7 then goto index 360;
   if "goosefact" == 8 then goto index 358;
   if "goosefact" == 9 then goto index 356;
   if "goosefact" == 10 then goto index 354;
   if "goosefact" == 11 then goto index 352;
   if "goosefact" == 12 then goto index 350;
   if "goosefact" == 13 then goto index 348;
   if "goosefact" == 14 then goto index 346;
   if "goosefact" == 15 then goto index 344;
   if "goosefact" == 16 then goto index 342;
   if "goosefact" == 17 then goto index 340;
   if "goosefact" == 18 then goto index 338;
   if "goosefact" == 19 then goto index 336;
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 375;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 379;
   goto index 380;
   "goosefact" = 0;
   if debug_mode then goto index 382;
   goto index 384;
   command "mousegame" = "ch2-debug-mousegame";
   show serial_dialog "ch2-castle-33.mgs-XX";
   if !"ch2-cutseen-castle33" then goto index 386;
   goto index 399;
   player_control = false;
   if warp_state != "warped" then goto index 393;
   wait 200ms;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   show dialog "ch2-castle-33.mgs-XX";
   goto index 397;
   wait 600ms;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = true;
   "ch2-cutseen-castle33" = true;
}

"on_tick-ch2-castle-33" {
   if player intersects geometry "south-hitbox" then goto index 1;
   if "ch2-mousegame" then goto index 8;
   warp_state = "walk_from-northwest";
   if "ch2-storyflag-round" >= 5 then goto index 6;
   load map "ch2-castle-32";
   goto index 7;
   load map "ch2-castle-32-doorless";
   goto index 13;
   player_control = false;
   player current_animation = 0;
   show dialog "ch2-castle-33.mgs-XX";
   player position -> geometry "south-hitbox-bounce" origin over 300ms;
   player_control = true;
   if "ch2-mousegame" then goto script "ch2-mousegame-tick";
}

"ch2-interact-gregory" {
   self direction = player;
   if "ch2-mousegame" then goto index 2;
   if !"interrupt" then goto index 5;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 7;
   show dialog "ch2-castle-33.mgs-XX";
   "interrupt" = true;
   if "ch2-storyflag-round" < 2 then goto index 60;
   if "ch2-carrying-mouse" then goto index 59;
   if "ch2-installed-mouse" then goto index 59;
   if !"ch2-mousegame-backstory" then goto index 15;
   if !"interrupt" then goto index 13;
   goto index 14;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-bluetooth-mouse-rant" then goto index 19;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 20;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "face-player";
   self direction = player;
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-bluetooth-mouse-rant" then goto index 29;
   show dialog "ch2-castle-33.mgs-XX";
   goto index 30;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = false;
   entity "Gregory" on_tick = "null_script";
   entity "Gregory" direction += 1;
   wait 800ms;
   entity "Gregory" direction -= -1;
   entity "Gregory" on_tick = "face-player";
   show dialog "ch2-castle-33.mgs-XX";
   lights_control = true;
   light ALL = false;
   entity "Lights" on_tick = "screen-lights-flash-bits";
   show dialog "ch2-castle-33.mgs-XX";
   if "ch2-ring-zero-enabled-in-castle" then goto index 49;
   if "ch2-in-room" == 0 then goto index 49;
   if debug_mode then goto index 49;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 53;
   goto index 54;
   light LED_USB = false;
   entity "Lights" on_tick = "ch2-serial-light-manager";
   show dialog "ch2-castle-33.mgs-XX";
   player_control = true;
   "interrupt" = true;
   "ch2-mousegame-backstory" = true;
   show dialog "ch2-castle-33.mgs-XX";
   if !"ch2-gregory-backstory" then goto index 67;
   if !"ch2-want-cactuscooler" then goto index 65;
   if "ch2-carrying-cactuscooler" then goto index 65;
   if "ch2-cactuscooler-delivered" then goto index 65;
   show dialog "ch2-gregory-cactus-help";
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-bluetooth-mouse-rant" = true;
   show dialog "ch2-castle-33.mgs-XX";
   player direction = "south";
   show dialog "ch2-castle-33.mgs-XX";
   player direction = entity "Gregory";
   entity "Gregory" on_tick = "spin_self_clockwise";
   show dialog "ch2-castle-33.mgs-XX";
   entity "Gregory" on_tick = "face-player";
   self direction = player;
   show dialog "ch2-castle-33.mgs-XX";
   "ch2-gregory-backstory" = true;
   show dialog "ch2-castle-33.mgs-XX";
   show dialog "ch2-gregory-cactus-help";
}

"on_load-ch2-castle-34" {
   "ch2-in-room" = 34;
   show serial_dialog "spacer";
   if !"ch2-seen-room-34" then goto index 5;
   show serial_dialog "ch2-castle-34.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-34.mgs-XX";
   "ch2-seen-room-34" = true;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 20;
   if "ch2-in-room" == 0 then goto index 20;
   if debug_mode then goto index 20;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 24;
   goto index 25;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 51;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 52;
   serial_control = false;
   if "ch2-has-map" then goto index 54;
   goto index 56;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 126;
   if "ch2-warp-granted" then goto index 59;
   goto index 200;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 200;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 201;
   if "ch2-storyflag-round" < 5 then goto index 203;
   goto index 233;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 235;
   goto index 236;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 238;
   goto index 239;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 241;
   goto index 242;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 244;
   goto index 245;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 247;
   goto index 248;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 250;
   goto index 251;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 253;
   goto index 254;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 256;
   goto index 257;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 259;
   goto index 260;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 262;
   goto index 264;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 266;
   goto index 267;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 269;
   goto index 270;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 272;
   goto index 273;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 275;
   goto index 276;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 278;
   goto index 279;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 281;
   goto index 282;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 288;
   if "debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 292;
   if !"debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 294;
   goto index 302;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 305;
   goto index 373;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 307;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 367;
   if "goosefact" == 1 then goto index 365;
   if "goosefact" == 2 then goto index 363;
   if "goosefact" == 3 then goto index 361;
   if "goosefact" == 4 then goto index 359;
   if "goosefact" == 5 then goto index 357;
   if "goosefact" == 6 then goto index 355;
   if "goosefact" == 7 then goto index 353;
   if "goosefact" == 8 then goto index 351;
   if "goosefact" == 9 then goto index 349;
   if "goosefact" == 10 then goto index 347;
   if "goosefact" == 11 then goto index 345;
   if "goosefact" == 12 then goto index 343;
   if "goosefact" == 13 then goto index 341;
   if "goosefact" == 14 then goto index 339;
   if "goosefact" == 15 then goto index 337;
   if "goosefact" == 16 then goto index 335;
   if "goosefact" == 17 then goto index 333;
   if "goosefact" == 18 then goto index 331;
   if "goosefact" == 19 then goto index 329;
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 368;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 372;
   goto index 373;
   "goosefact" = 0;
}

"on_load-ch2-castle-99" {
   "ch2-in-room" = 99;
   show serial_dialog "spacer";
   if !"ch2-seen-room-99" then goto index 5;
   show serial_dialog "ch2-castle-99.mgs-XX";
   goto index 7;
   show serial_dialog "ch2-castle-99.mgs-XX";
   "ch2-seen-room-99" = true;
   camera = geometry "camera";
   if !"ch2-cutseen-castle99" then goto index 10;
   goto index 11;
   entity "Lambda" current_animation = 8;
   if "ch2-carrying-minirake-99" then goto index 13;
   goto index 16;
   entity "clothes rake" position = geometry "hiding-spot";
   entity "clothes rake" name = " ";
   entity "clothes rake" on_interact = "null_script";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 29;
   if "ch2-in-room" == 0 then goto index 29;
   if debug_mode then goto index 29;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 33;
   goto index 34;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 60;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 61;
   serial_control = false;
   if "ch2-has-map" then goto index 63;
   goto index 65;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 135;
   if "ch2-warp-granted" then goto index 68;
   goto index 209;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 209;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 210;
   if "ch2-storyflag-round" < 5 then goto index 212;
   goto index 242;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 244;
   goto index 245;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 247;
   goto index 248;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 250;
   goto index 251;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 253;
   goto index 254;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 256;
   goto index 257;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 259;
   goto index 260;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 262;
   goto index 263;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 265;
   goto index 266;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 268;
   goto index 269;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 271;
   goto index 273;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 275;
   goto index 276;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 278;
   goto index 279;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 281;
   goto index 282;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 284;
   goto index 285;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 287;
   goto index 288;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 290;
   goto index 291;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 297;
   if "debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 301;
   if !"debug-curr-state" then goto index 299;
   goto index 300;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 303;
   goto index 311;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 314;
   goto index 382;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 316;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 376;
   if "goosefact" == 1 then goto index 374;
   if "goosefact" == 2 then goto index 372;
   if "goosefact" == 3 then goto index 370;
   if "goosefact" == 4 then goto index 368;
   if "goosefact" == 5 then goto index 366;
   if "goosefact" == 6 then goto index 364;
   if "goosefact" == 7 then goto index 362;
   if "goosefact" == 8 then goto index 360;
   if "goosefact" == 9 then goto index 358;
   if "goosefact" == 10 then goto index 356;
   if "goosefact" == 11 then goto index 354;
   if "goosefact" == 12 then goto index 352;
   if "goosefact" == 13 then goto index 350;
   if "goosefact" == 14 then goto index 348;
   if "goosefact" == 15 then goto index 346;
   if "goosefact" == 16 then goto index 344;
   if "goosefact" == 17 then goto index 342;
   if "goosefact" == 18 then goto index 340;
   if "goosefact" == 19 then goto index 338;
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 377;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 381;
   goto index 382;
   "goosefact" = 0;
   if !"ch2-cutseen-castle99" then goto index 384;
   goto index 389;
   if debug_mode then goto index 386;
   goto index 388;
   command "skip" = "ch2-skip-99";
   show serial_dialog "ch2-castle-99.mgs-XX";
   goto "ch2-cutscene-castle99";
}

"on_load-ch2-castle-outside" {
   player_control = false;
   show serial_dialog "spacer";
   show serial_dialog "ch2-castle-outside.mgs-XX";
   if "ch2-storyflag-round" != 0 then goto index 5;
   goto index 6;
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" == 1 then goto index 11;
   if "ch2-storyflag-round" == 2 then goto index 11;
   if "ch2-storyflag-round" == 3 then goto index 11;
   if "ch2-storyflag-round" >= 5 then goto index 11;
   goto index 13;
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 26;
   if "ch2-in-room" == 0 then goto index 26;
   if debug_mode then goto index 26;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 30;
   goto index 31;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 57;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 58;
   serial_control = false;
   if "ch2-has-map" then goto index 60;
   goto index 62;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 132;
   if "ch2-warp-granted" then goto index 65;
   goto index 206;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 206;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 207;
   if "ch2-storyflag-round" < 5 then goto index 209;
   goto index 239;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 241;
   goto index 242;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 244;
   goto index 245;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 247;
   goto index 248;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 250;
   goto index 251;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 253;
   goto index 254;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 256;
   goto index 257;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 259;
   goto index 260;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 262;
   goto index 263;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 265;
   goto index 266;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 268;
   goto index 270;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 272;
   goto index 273;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 275;
   goto index 276;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 278;
   goto index 279;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 281;
   goto index 282;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 284;
   goto index 285;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 287;
   goto index 288;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 294;
   if "debug-curr-state" then goto index 291;
   goto index 292;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 298;
   if !"debug-curr-state" then goto index 296;
   goto index 297;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 300;
   goto index 308;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 311;
   goto index 379;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 313;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 373;
   if "goosefact" == 1 then goto index 371;
   if "goosefact" == 2 then goto index 369;
   if "goosefact" == 3 then goto index 367;
   if "goosefact" == 4 then goto index 365;
   if "goosefact" == 5 then goto index 363;
   if "goosefact" == 6 then goto index 361;
   if "goosefact" == 7 then goto index 359;
   if "goosefact" == 8 then goto index 357;
   if "goosefact" == 9 then goto index 355;
   if "goosefact" == 10 then goto index 353;
   if "goosefact" == 11 then goto index 351;
   if "goosefact" == 12 then goto index 349;
   if "goosefact" == 13 then goto index 347;
   if "goosefact" == 14 then goto index 345;
   if "goosefact" == 15 then goto index 343;
   if "goosefact" == 16 then goto index 341;
   if "goosefact" == 17 then goto index 339;
   if "goosefact" == 18 then goto index 337;
   if "goosefact" == 19 then goto index 335;
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 374;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 378;
   goto index 379;
   "goosefact" = 0;
   if warp_state == "walk_from-north" then goto index 389;
   if warp_state == "walk_from-east" then goto index 385;
   if warp_state == "ch2-ending" then goto index 383;
   goto index 390;
   goto "ch2-post-credits";
   goto index 390;
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 390;
   player position -> geometry "walk_from-north" length over 200ms;
}

"on_load-ch2-greenhouse" {
   command "look" + "ethernettles" = "look-ch2-ethernettles";
   show serial_dialog "spacer";
   show serial_dialog "ch2-greenhouse.mgs-XX";
   "ethernettle_id" = entity "EtherNettle1" primary_id;
   "EtherNettle1" = entity "EtherNettle1" primary_id;
   "EtherNettle2" = entity "EtherNettle2" primary_id;
   "EtherNettle3" = entity "EtherNettle3" primary_id;
   "EtherNettle4" = entity "EtherNettle4" primary_id;
   "EtherNettle5" = entity "EtherNettle5" primary_id;
   "EtherNettle6" = entity "EtherNettle6" primary_id;
   "EtherNettle7" = entity "EtherNettle7" primary_id;
   "EtherNettle8" = entity "EtherNettle8" primary_id;
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 25;
   if "ch2-in-room" == 0 then goto index 25;
   if debug_mode then goto index 25;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 29;
   goto index 30;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 56;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 57;
   serial_control = false;
   if "ch2-has-map" then goto index 59;
   goto index 61;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 131;
   if "ch2-warp-granted" then goto index 64;
   goto index 205;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 205;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 206;
   if "ch2-storyflag-round" < 5 then goto index 208;
   goto index 238;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 240;
   goto index 241;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 243;
   goto index 244;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 246;
   goto index 247;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 249;
   goto index 250;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 252;
   goto index 253;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 255;
   goto index 256;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 258;
   goto index 259;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 261;
   goto index 262;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 264;
   goto index 265;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 267;
   goto index 269;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 271;
   goto index 272;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 274;
   goto index 275;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 277;
   goto index 278;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 280;
   goto index 281;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 283;
   goto index 284;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 286;
   goto index 287;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 293;
   if "debug-curr-state" then goto index 290;
   goto index 291;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 297;
   if !"debug-curr-state" then goto index 295;
   goto index 296;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 299;
   goto index 307;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 310;
   goto index 378;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 312;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 372;
   if "goosefact" == 1 then goto index 370;
   if "goosefact" == 2 then goto index 368;
   if "goosefact" == 3 then goto index 366;
   if "goosefact" == 4 then goto index 364;
   if "goosefact" == 5 then goto index 362;
   if "goosefact" == 6 then goto index 360;
   if "goosefact" == 7 then goto index 358;
   if "goosefact" == 8 then goto index 356;
   if "goosefact" == 9 then goto index 354;
   if "goosefact" == 10 then goto index 352;
   if "goosefact" == 11 then goto index 350;
   if "goosefact" == 12 then goto index 348;
   if "goosefact" == 13 then goto index 346;
   if "goosefact" == 14 then goto index 344;
   if "goosefact" == 15 then goto index 342;
   if "goosefact" == 16 then goto index 340;
   if "goosefact" == 17 then goto index 338;
   if "goosefact" == 18 then goto index 336;
   if "goosefact" == 19 then goto index 334;
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 373;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 377;
   goto index 378;
   "goosefact" = 0;
}

"on_load-ch2-lodge-rtfm" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge-rtfm.mgs-XX";
   if "ch2-storyflag-round" != 1 then goto index 4;
   goto index 5;
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" != 3 then goto index 7;
   goto index 9;
   entity "Jackob" on_tick = "yeet";
   entity "Alfonso" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 22;
   if "ch2-in-room" == 0 then goto index 22;
   if debug_mode then goto index 22;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 26;
   goto index 27;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 53;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 54;
   serial_control = false;
   if "ch2-has-map" then goto index 56;
   goto index 58;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 128;
   if "ch2-warp-granted" then goto index 61;
   goto index 202;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 202;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 203;
   if "ch2-storyflag-round" < 5 then goto index 205;
   goto index 235;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 237;
   goto index 238;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 240;
   goto index 241;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 243;
   goto index 244;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 246;
   goto index 247;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 249;
   goto index 250;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 252;
   goto index 253;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 255;
   goto index 256;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 258;
   goto index 259;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 261;
   goto index 262;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 264;
   goto index 266;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 268;
   goto index 269;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 271;
   goto index 272;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 274;
   goto index 275;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 277;
   goto index 278;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 280;
   goto index 281;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 283;
   goto index 284;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 290;
   if "debug-curr-state" then goto index 287;
   goto index 288;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 294;
   if !"debug-curr-state" then goto index 292;
   goto index 293;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 296;
   goto index 304;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 307;
   goto index 375;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 309;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 369;
   if "goosefact" == 1 then goto index 367;
   if "goosefact" == 2 then goto index 365;
   if "goosefact" == 3 then goto index 363;
   if "goosefact" == 4 then goto index 361;
   if "goosefact" == 5 then goto index 359;
   if "goosefact" == 6 then goto index 357;
   if "goosefact" == 7 then goto index 355;
   if "goosefact" == 8 then goto index 353;
   if "goosefact" == 9 then goto index 351;
   if "goosefact" == 10 then goto index 349;
   if "goosefact" == 11 then goto index 347;
   if "goosefact" == 12 then goto index 345;
   if "goosefact" == 13 then goto index 343;
   if "goosefact" == 14 then goto index 341;
   if "goosefact" == 15 then goto index 339;
   if "goosefact" == 16 then goto index 337;
   if "goosefact" == 17 then goto index 335;
   if "goosefact" == 18 then goto index 333;
   if "goosefact" == 19 then goto index 331;
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 370;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 374;
   goto index 375;
   "goosefact" = 0;
}

"on_load-ch2-lodge" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-lodge.mgs-XX";
   if "ch2-storyflag-round" != 1 then goto index 4;
   goto index 5;
   entity "Alfonso" on_tick = "yeet";
   if "ch2-storyflag-round" == 3 then goto index 11;
   if "ch2-storyflag-round" == 4 then goto index 11;
   if "ch2-storyflag-round" != 1 then goto index 9;
   goto index 18;
   entity "Jackob" on_tick = "yeet";
   goto index 18;
   entity "Jackob" position = geometry "zappy-spot";
   entity "Jackob" name = "Uncle Zappy";
   entity "Jackob" on_look = "look-ch2-zappy";
   entity "Jackob" on_tick = "null_script";
   entity "Jackob" on_interact = "interact-ch2-zappy";
   entity "Jackob" type = "lightning_boy2";
   entity "Jackob" direction = "north";
   if "ch2-installed-manual" then goto index 21;
   if "ch2-carrying-manual" then goto index 21;
   goto index 23;
   entity "HP35c Man" position = geometry "hiding-spot";
   entity "HP35c Man" name = " ";
   if warp_state == "walk_from-north" then goto index 25;
   goto index 27;
   player_control = false;
   player position = geometry "walk_from-north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 40;
   if "ch2-in-room" == 0 then goto index 40;
   if debug_mode then goto index 40;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 44;
   goto index 45;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 71;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 72;
   serial_control = false;
   if "ch2-has-map" then goto index 74;
   goto index 76;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 146;
   if "ch2-warp-granted" then goto index 79;
   goto index 220;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 220;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 221;
   if "ch2-storyflag-round" < 5 then goto index 223;
   goto index 253;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 255;
   goto index 256;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 258;
   goto index 259;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 261;
   goto index 262;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 264;
   goto index 265;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 267;
   goto index 268;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 270;
   goto index 271;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 273;
   goto index 274;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 276;
   goto index 277;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 279;
   goto index 280;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 282;
   goto index 284;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 286;
   goto index 287;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 289;
   goto index 290;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 292;
   goto index 293;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 295;
   goto index 296;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 298;
   goto index 299;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 301;
   goto index 302;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 308;
   if "debug-curr-state" then goto index 305;
   goto index 306;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 312;
   if !"debug-curr-state" then goto index 310;
   goto index 311;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 314;
   goto index 322;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 325;
   goto index 393;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 327;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 387;
   if "goosefact" == 1 then goto index 385;
   if "goosefact" == 2 then goto index 383;
   if "goosefact" == 3 then goto index 381;
   if "goosefact" == 4 then goto index 379;
   if "goosefact" == 5 then goto index 377;
   if "goosefact" == 6 then goto index 375;
   if "goosefact" == 7 then goto index 373;
   if "goosefact" == 8 then goto index 371;
   if "goosefact" == 9 then goto index 369;
   if "goosefact" == 10 then goto index 367;
   if "goosefact" == 11 then goto index 365;
   if "goosefact" == 12 then goto index 363;
   if "goosefact" == 13 then goto index 361;
   if "goosefact" == 14 then goto index 359;
   if "goosefact" == 15 then goto index 357;
   if "goosefact" == 16 then goto index 355;
   if "goosefact" == 17 then goto index 353;
   if "goosefact" == 18 then goto index 351;
   if "goosefact" == 19 then goto index 349;
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 388;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 392;
   goto index 393;
   "goosefact" = 0;
}

"on_load-ch2-magehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-magehouse.mgs-XX";
   if "ch2-storyflag-round" == 0 then goto index 13;
   if "ch2-storyflag-round" == 3 then goto index 10;
   if "ch2-storyflag-round" == 4 then goto index 10;
   if "ch2-storyflag-round" == 5 then goto index 7;
   goto index 15;
   entity "Aunt Zippy" position = geometry "alt-spot2";
   entity "Uncle Zappy" position = geometry "alt-spot1";
   goto index 15;
   entity "Aunt Zippy" on_tick = "yeet";
   entity "Uncle Zappy" on_tick = "yeet";
   goto index 15;
   entity "Aunt Zippy" position = geometry "alt-spot1";
   entity "Uncle Zappy" position = geometry "alt-spot3";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 28;
   if "ch2-in-room" == 0 then goto index 28;
   if debug_mode then goto index 28;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 32;
   goto index 33;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 59;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 60;
   serial_control = false;
   if "ch2-has-map" then goto index 62;
   goto index 64;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 134;
   if "ch2-warp-granted" then goto index 67;
   goto index 208;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 208;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 209;
   if "ch2-storyflag-round" < 5 then goto index 211;
   goto index 241;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 243;
   goto index 244;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 246;
   goto index 247;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 249;
   goto index 250;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 252;
   goto index 253;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 255;
   goto index 256;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 258;
   goto index 259;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 261;
   goto index 262;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 264;
   goto index 265;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 267;
   goto index 268;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 270;
   goto index 272;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 274;
   goto index 275;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 277;
   goto index 278;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 280;
   goto index 281;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 283;
   goto index 284;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 286;
   goto index 287;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 289;
   goto index 290;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 296;
   if "debug-curr-state" then goto index 293;
   goto index 294;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 300;
   if !"debug-curr-state" then goto index 298;
   goto index 299;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 302;
   goto index 310;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 313;
   goto index 381;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 315;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 375;
   if "goosefact" == 1 then goto index 373;
   if "goosefact" == 2 then goto index 371;
   if "goosefact" == 3 then goto index 369;
   if "goosefact" == 4 then goto index 367;
   if "goosefact" == 5 then goto index 365;
   if "goosefact" == 6 then goto index 363;
   if "goosefact" == 7 then goto index 361;
   if "goosefact" == 8 then goto index 359;
   if "goosefact" == 9 then goto index 357;
   if "goosefact" == 10 then goto index 355;
   if "goosefact" == 11 then goto index 353;
   if "goosefact" == 12 then goto index 351;
   if "goosefact" == 13 then goto index 349;
   if "goosefact" == 14 then goto index 347;
   if "goosefact" == 15 then goto index 345;
   if "goosefact" == 16 then goto index 343;
   if "goosefact" == 17 then goto index 341;
   if "goosefact" == 18 then goto index 339;
   if "goosefact" == 19 then goto index 337;
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 376;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 380;
   goto index 381;
   "goosefact" = 0;
}

"on_load-ch2-oldcouplehouse" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-oldcouplehouse.mgs-XX";
   if !"ch2-delmar-in-house" then goto index 10;
   if !"ch2-delmar-is-man" then goto index 8;
   entity "Beatrice" direction = entity "Delmar";
   entity "Delmar" direction = entity "Beatrice";
   entity "Delmar" type = "old_man";
   goto index 11;
   entity "Beatrice" on_tick = "face-player";
   entity "Delmar" on_tick = "face-player";
   entity "Delmar" on_tick = "yeet";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 24;
   if "ch2-in-room" == 0 then goto index 24;
   if debug_mode then goto index 24;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 28;
   goto index 29;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 55;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 56;
   serial_control = false;
   if "ch2-has-map" then goto index 58;
   goto index 60;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 130;
   if "ch2-warp-granted" then goto index 63;
   goto index 204;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 204;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 205;
   if "ch2-storyflag-round" < 5 then goto index 207;
   goto index 237;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 239;
   goto index 240;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 242;
   goto index 243;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 245;
   goto index 246;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 248;
   goto index 249;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 251;
   goto index 252;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 254;
   goto index 255;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 257;
   goto index 258;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 260;
   goto index 261;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 263;
   goto index 264;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 266;
   goto index 268;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 270;
   goto index 271;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 273;
   goto index 274;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 276;
   goto index 277;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 279;
   goto index 280;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 282;
   goto index 283;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 285;
   goto index 286;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 292;
   if "debug-curr-state" then goto index 289;
   goto index 290;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 296;
   if !"debug-curr-state" then goto index 294;
   goto index 295;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 298;
   goto index 306;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 309;
   goto index 377;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 311;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 371;
   if "goosefact" == 1 then goto index 369;
   if "goosefact" == 2 then goto index 367;
   if "goosefact" == 3 then goto index 365;
   if "goosefact" == 4 then goto index 363;
   if "goosefact" == 5 then goto index 361;
   if "goosefact" == 6 then goto index 359;
   if "goosefact" == 7 then goto index 357;
   if "goosefact" == 8 then goto index 355;
   if "goosefact" == 9 then goto index 353;
   if "goosefact" == 10 then goto index 351;
   if "goosefact" == 11 then goto index 349;
   if "goosefact" == 12 then goto index 347;
   if "goosefact" == 13 then goto index 345;
   if "goosefact" == 14 then goto index 343;
   if "goosefact" == 15 then goto index 341;
   if "goosefact" == 16 then goto index 339;
   if "goosefact" == 17 then goto index 337;
   if "goosefact" == 18 then goto index 335;
   if "goosefact" == 19 then goto index 333;
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 372;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 376;
   goto index 377;
   "goosefact" = 0;
}

"on_tick-ch2-oldcouplehouse" {
   if player intersects geometry "south-hitbox" then goto script "on_walk-ch2-oldcouplehouse-south";
   if "ch2-cutseen-delmar" then goto index 2;
   if entity "Delmar" type != "old_man" then goto index 4;
   goto index 6;
   entity "Delmar" on_tick = "face-player";
   "interrupt" = true;
}

"ch2-check-if-sheep" {
   if "ch2-delmar-is-man" then goto script "null_script";
   if entity "Delmar" type == "old_man" then goto index 3;
   goto index 5;
   "ch2-delmar-is-man" = true;
   if !"ch2-cutseen-delmar" then goto script "ch2-cutscene-delmar-reconnect";
}

"interact-ch2-delmar" {
   self direction = player;
   if "interrupt" then goto index 6;
   if entity "Delmar" type == "old_man" then goto index 4;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   show dialog "ch2-oldcouplehouse.mgs-XX";
   self direction = entity "Beatrice";
   if entity "Delmar" type == "sheep " then goto index 10;
   if entity "Delmar" type == "helga" then goto index 10;
   show dialog "ch2-oldcouplehouse.mgs-XX";
   goto index 11;
   show dialog "ch2-oldcouplehouse.mgs-XX";
}

"on_load-ch2-smithfamily" {
   show serial_dialog "spacer";
   show serial_dialog "ch2-smithfamily.mgs-XX";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 15;
   if "ch2-in-room" == 0 then goto index 15;
   if debug_mode then goto index 15;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 19;
   goto index 20;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 46;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 47;
   serial_control = false;
   if "ch2-has-map" then goto index 49;
   goto index 51;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 121;
   if "ch2-warp-granted" then goto index 54;
   goto index 195;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 195;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 196;
   if "ch2-storyflag-round" < 5 then goto index 198;
   goto index 228;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 230;
   goto index 231;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 233;
   goto index 234;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 236;
   goto index 237;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 239;
   goto index 240;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 242;
   goto index 243;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 245;
   goto index 246;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 248;
   goto index 249;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 251;
   goto index 252;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 254;
   goto index 255;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 257;
   goto index 259;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 261;
   goto index 262;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 264;
   goto index 265;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 267;
   goto index 268;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 270;
   goto index 271;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 273;
   goto index 274;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 276;
   goto index 277;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 283;
   if "debug-curr-state" then goto index 280;
   goto index 281;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 287;
   if !"debug-curr-state" then goto index 285;
   goto index 286;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 289;
   goto index 297;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 300;
   goto index 368;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 302;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 362;
   if "goosefact" == 1 then goto index 360;
   if "goosefact" == 2 then goto index 358;
   if "goosefact" == 3 then goto index 356;
   if "goosefact" == 4 then goto index 354;
   if "goosefact" == 5 then goto index 352;
   if "goosefact" == 6 then goto index 350;
   if "goosefact" == 7 then goto index 348;
   if "goosefact" == 8 then goto index 346;
   if "goosefact" == 9 then goto index 344;
   if "goosefact" == 10 then goto index 342;
   if "goosefact" == 11 then goto index 340;
   if "goosefact" == 12 then goto index 338;
   if "goosefact" == 13 then goto index 336;
   if "goosefact" == 14 then goto index 334;
   if "goosefact" == 15 then goto index 332;
   if "goosefact" == 16 then goto index 330;
   if "goosefact" == 17 then goto index 328;
   if "goosefact" == 18 then goto index 326;
   if "goosefact" == 19 then goto index 324;
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 363;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 367;
   goto index 368;
   "goosefact" = 0;
}

"on_load-ch2-town" {
   if warp_state == "cutscene-escort" then goto script "ch2-escort-cutscene";
   show serial_dialog "spacer";
   show serial_dialog "ch2-town.mgs-XX";
   entity "Bert" on_tick = "yeet";
   if "ch2-storyflag-round" < 5 then goto index 5;
   entity "Jackob" on_tick = "yeet";
   if "ch2-storyflag-round" == 2 then goto index 9;
   entity "Alfonso" on_tick = "yeet";
   goto index 14;
   entity "Alfonso" position = geometry "alfonso-verthandi-spot";
   entity "Alfonso" direction = "west";
   entity "Verthandi" direction = "east";
   entity "Alfonso" on_interact = "interact-ch2-alfonso-verthandi";
   entity "Verthandi" on_interact = "interact-ch2-alfonso-verthandi";
   if "ch2-storyflag-round" == 1 then goto index 21;
   if "ch2-storyflag-round" == 2 then goto index 21;
   if "ch2-storyflag-round" == 3 then goto index 19;
   if "ch2-storyflag-round" == 4 then goto index 19;
   goto index 24;
   entity "Shepherd" position = geometry "shepherd1";
   goto index 24;
   entity "Shepherd" position = geometry "shepherd2";
   entity "Shepherd" direction = "east";
   entity "Shepherd" on_tick = "null_script";
   if "ch2-storyflag-round" == 0 then goto index 31;
   if "ch2-storyflag-round" == 3 then goto index 28;
   if "ch2-storyflag-round" == 4 then goto index 28;
   goto index 33;
   entity "Verthandi" position = geometry "verthandi2";
   entity "Verthandi" direction = "north";
   goto index 33;
   entity "Verthandi" position = geometry "verthandi1";
   entity "Verthandi" direction = "west";
   if "ch2-storyflag-round" == 1 then goto index 41;
   if "ch2-storyflag-round" == 2 then goto index 41;
   if "ch2-storyflag-round" == 3 then goto index 38;
   if "ch2-storyflag-round" == 4 then goto index 38;
   goto index 43;
   entity "Marta" position = geometry "marta2";
   entity "Marta" direction = "south";
   goto index 43;
   entity "Marta" position = geometry "marta1";
   entity "Marta" direction = "west";
   if "ch2-delmar-in-house" then goto index 45;
   goto index 46;
   entity "Delmar" on_tick = "yeet";
   player_control = false;
   if warp_state == "raw_game_load-ch2" then goto index 90;
   if warp_state == "exit_from-credits" then goto index 87;
   if warp_state == "walk_from-east" then goto index 83;
   if warp_state == "walk_from-west" then goto index 79;
   if warp_state == "walk_from-bobsclub" then goto index 77;
   if warp_state == "walk_from-bakery" then goto index 75;
   if warp_state == "walk_from-lodge" then goto index 73;
   if warp_state == "walk_from-greenhouse" then goto index 71;
   if warp_state == "walk_from-magehouse" then goto index 69;
   if warp_state == "walk_from-oldcouplehouse" then goto index 67;
   if warp_state == "walk_from-smithfamily" then goto index 65;
   if warp_state == "walk_from-woprhouse" then goto index 63;
   if warp_state == "walk_from-bobsclub" then goto index 61;
   goto index 104;
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-woprhouse" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-smithfamily" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-oldcouplehouse" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-magehouse" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-greenhouse" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-lodge" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-bakery" length over 200ms;
   goto index 104;
   player position -> geometry "walk_from-bobsclub" length over 200ms;
   goto index 104;
   player path = "walk_from-west";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 104;
   player path = "walk_from-east";
   player on_tick = "on_tick-ch2-town-walkfadein";
   camera fade in -> #000000 over 400ms;
   goto index 104;
   player position = geometry "from-credits-spot";
   camera fade in -> #000000 over 800ms;
   goto index 104;
   player x = "playersave-x";
   player y = "playersave-y";
   if "playersave-dir" == 0 then goto index 103;
   if "playersave-dir" == 1 then goto index 101;
   if "playersave-dir" == 2 then goto index 99;
   if "playersave-dir" == 3 then goto index 97;
   goto index 104;
   player direction = "west";
   goto index 104;
   player direction = "south";
   goto index 104;
   player direction = "east";
   goto index 104;
   player direction = "north";
   "interrupt" = false;
   "interrupt2" = false;
   "interrupt3" = false;
   "tempvar" = 0;
   "tempvar2" = 0;
   "can-interrupt-dialog" = false;
   if "ch2-ring-zero-enabled-in-castle" then goto index 117;
   if "ch2-in-room" == 0 then goto index 117;
   if debug_mode then goto index 117;
   hex_control = false;
   hex_clipboard = false;
   lights_control = true;
   light ALL = false;
   hex_control = true;
   lights_control = false;
   if "ch2-in-room" == 0 then goto index 121;
   goto index 122;
   light LED_USB = false;
   if !"ch2-has-artifact" then goto index 148;
   serial_control = true;
   command "rtfm" = "command-rtfm";
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
   command "plover" = "command-plover";
   command "xyzzy" = "command-xyzzy";
   command "plugh" = "command-plugh";
   command "fum" = "command-fum";
   hide command "plover";
   hide command "xyzzy";
   hide command "plugh";
   hide command "fum";
   alias "h" = "help";
   alias "l" = "look";
   goto index 149;
   serial_control = false;
   if "ch2-has-map" then goto index 151;
   goto index 153;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   if debug_mode then goto index 223;
   if "ch2-warp-granted" then goto index 156;
   goto index 297;
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   goto index 297;
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   serial_control = true;
   if "ch2-storyflag-round" > 0 then goto index 298;
   if "ch2-storyflag-round" < 5 then goto index 300;
   goto index 330;
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   if "ch2-carrying-monitor" then goto index 332;
   goto index 333;
   command "look" + "monitor" = "look-monitor";
   if "ch2-carrying-heatsink" then goto index 335;
   goto index 336;
   command "look" + "heat sink" = "look-heatsink";
   if "ch2-carrying-cactuscooler" then goto index 338;
   goto index 339;
   command "look" + "cactus cooler" = "look-cactuscooler";
   if "ch2-carrying-powersupply" then goto index 341;
   goto index 342;
   command "look" + "power supply" = "look-powersupply";
   if "ch2-carrying-keyboard" then goto index 344;
   goto index 345;
   command "look" + "keyboard" = "look-keyboard";
   if "ch2-carrying-mouse" then goto index 347;
   goto index 348;
   command "look" + "mouse" = "look-mouse";
   if "ch2-carrying-harddrive" then goto index 350;
   goto index 351;
   command "look" + "hard drive" = "look-harddrive";
   if "ch2-carrying-plate" then goto index 353;
   goto index 354;
   command "look" + "plate" = "look-plate";
   if "ch2-carrying-needle" then goto index 356;
   goto index 357;
   command "look" + "needle" = "look-needle";
   if "ch2-carrying-ramchips" then goto index 359;
   goto index 361;
   command "look" + "ram chip" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   if "ch2-carrying-clock" then goto index 363;
   goto index 364;
   command "look" + "clock" = "look-clock";
   if "ch2-carrying-cpu" then goto index 366;
   goto index 367;
   command "look" + "cpu" = "look-cpu";
   if "ch2-carrying-goldfish" then goto index 369;
   goto index 370;
   command "look" + "goldfish" = "look-goldfish";
   if "ch2-carrying-manual" then goto index 372;
   goto index 373;
   command "look" + "manual" = "look-manual";
   if "ch2-carrying-abacus" then goto index 375;
   goto index 376;
   command "look" + "abacus" = "look-abacus";
   if "ch2-carrying-mainframeos" then goto index 378;
   goto index 379;
   command "look" + "mainframeos" = "look-mainframeos";
   if debug_mode then goto index 385;
   if "debug-curr-state" then goto index 382;
   goto index 383;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = false;
   goto index 389;
   if !"debug-curr-state" then goto index 387;
   goto index 388;
   show serial_dialog "ch2-common.mgs-XX";
   "debug-curr-state" = true;
   if warp_state == "warping" then goto index 391;
   goto index 399;
   player position = geometry "warp-spot";
   player on_tick = "spin-quickly";
   camera fade in -> #000000 over 300ms;
   player on_tick = "null_script";
   player direction = "south";
   warp_state = "warped";
   player_control = true;
   serial_control = true;
   player_control = true;
   if "ch2-goosefacts" then goto index 402;
   goto index 470;
   command "stop" = "stop-goosefacts";
   if "ch2-goosefacts" then goto index 404;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   if "goosefact" == 0 then goto index 464;
   if "goosefact" == 1 then goto index 462;
   if "goosefact" == 2 then goto index 460;
   if "goosefact" == 3 then goto index 458;
   if "goosefact" == 4 then goto index 456;
   if "goosefact" == 5 then goto index 454;
   if "goosefact" == 6 then goto index 452;
   if "goosefact" == 7 then goto index 450;
   if "goosefact" == 8 then goto index 448;
   if "goosefact" == 9 then goto index 446;
   if "goosefact" == 10 then goto index 444;
   if "goosefact" == 11 then goto index 442;
   if "goosefact" == 12 then goto index 440;
   if "goosefact" == 13 then goto index 438;
   if "goosefact" == 14 then goto index 436;
   if "goosefact" == 15 then goto index 434;
   if "goosefact" == 16 then goto index 432;
   if "goosefact" == 17 then goto index 430;
   if "goosefact" == 18 then goto index 428;
   if "goosefact" == 19 then goto index 426;
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   goto index 465;
   show serial_dialog "ch2-goosefacts.mgs-XX";
   show serial_dialog "ch2-goosefacts.mgs-XX";
   "goosefact" += 1;
   if "goosefact" == 20 then goto index 469;
   goto index 470;
   "goosefact" = 0;
   if debug_mode then goto index 472;
   goto index 475;
   command "cutbug" = "cutbug";
   command "cutbug" + "auto" = "cutbug-auto";
   show serial_dialog "ch2-town.mgs-XX";
   if warp_state == "raw_game_load-ch2" then goto index 477;
   goto index 480;
   player_control = false;
   wait 150ms;
   player_control = true;
}

"interact-ch2-jackob-end" {
   if "ch2-storyflag-round" < 5 then goto script "null_script";
   self direction = player;
   show dialog "ch2-town.mgs-XX";
   if !"ch1_finished" then goto index 4;
   if !"ch1_unfinished_backstory" then goto index 6;
   goto index 8;
   show dialog "ch2-town.mgs-XX";
   "ch1_unfinished_backstory" = true;
   show dialog "ch2-town.mgs-XX";
}

"interact-ch2-alfonso-end" {
   if "ch2-storyflag-round" < 5 then goto script "null_script";
   self direction = player;
   show dialog "ch2-town.mgs-XX";
}

"register-colors" {
   command "colors" = "command-colors";
   command "colors + bg" = "command-colors-bg";
   command "colors + bold" = "command-colors-bold";
   command "colors + dim" = "command-colors-dim";
}

"register-commentary" {
   command "commentary" = "command-commentary-solo";
   command "commentary + on" = "command-commentary-on";
   command "commentary + off" = "command-commentary-off";
}

"register-inventory" {
   command "man + inventory" = "man-inventory";
   command "inventory" = "command-inventory";
   alias "i" = "inventory";
   alias "examine" = "look";
   alias "x" = "look";
}

"command-inventory" {
   "ch2-count-inventory" = 0;
   if !"only-count-inventory" then goto index 3;
   goto index 5;
   show serial_dialog "spacer";
   show serial_dialog "command-inventory.mgs-XX";
   if "ch2-carrying-cactuscooler" then goto index 7;
   goto index 11;
   if !"only-count-inventory" then goto index 9;
   goto index 10;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-heatsink" then goto index 13;
   goto index 17;
   if !"only-count-inventory" then goto index 15;
   goto index 16;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-powersupply" then goto index 19;
   goto index 23;
   if !"only-count-inventory" then goto index 21;
   goto index 22;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-monitor" then goto index 25;
   goto index 29;
   if !"only-count-inventory" then goto index 27;
   goto index 28;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-harddrive" then goto index 31;
   goto index 35;
   if !"only-count-inventory" then goto index 33;
   goto index 34;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-plate" then goto index 37;
   goto index 41;
   if !"only-count-inventory" then goto index 39;
   goto index 40;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-needle" then goto index 43;
   goto index 47;
   if !"only-count-inventory" then goto index 45;
   goto index 46;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-keyboard" then goto index 49;
   goto index 53;
   if !"only-count-inventory" then goto index 51;
   goto index 52;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-mouse" then goto index 55;
   goto index 59;
   if !"only-count-inventory" then goto index 57;
   goto index 58;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-ramchips" then goto index 61;
   goto index 65;
   if !"only-count-inventory" then goto index 63;
   goto index 64;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-clock" then goto index 67;
   goto index 71;
   if !"only-count-inventory" then goto index 69;
   goto index 70;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-cpu" then goto index 73;
   goto index 77;
   if !"only-count-inventory" then goto index 75;
   goto index 76;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-goldfish" then goto index 79;
   goto index 83;
   if !"only-count-inventory" then goto index 81;
   goto index 82;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-manual" then goto index 85;
   goto index 89;
   if !"only-count-inventory" then goto index 87;
   goto index 88;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-abacus" then goto index 91;
   goto index 95;
   if !"only-count-inventory" then goto index 93;
   goto index 94;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-mainframeos" then goto index 97;
   goto index 101;
   if !"only-count-inventory" then goto index 99;
   goto index 100;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-carrying-minirake-99" then goto index 103;
   goto index 107;
   if !"only-count-inventory" then goto index 105;
   goto index 106;
   show serial_dialog "command-inventory.mgs-XX";
   "ch2-count-inventory" += 1;
   if "ch2-count-inventory" == 0 then goto index 108;
   if !"only-count-inventory" then goto index 110;
   goto index 111;
   show serial_dialog "command-inventory.mgs-XX";
   "only-count-inventory" = false;
   "ch2-counted-inventory" = "ch2";
   "ch2-counted-inventory" -= "count";
   "ch2-counted-inventory" -= "inventory";
   "ch2-count-inventory" = 0;
}

"register-manual" {
   command "man" = "command-man";
   command "man + man" = "man-man";
   command "man + look" = "man-look";
   command "man + go" = "man-go";
   command "man + help" = "man-help";
   command "man + rtfm" = "man-rtfm";
   command "man" fail = "man-fail";
}

"command-man-normal" {
   if "ch2-cutseen-bert-secret" then goto index 1;
   if !"ch2-lambda-bert-backstory" then goto index 6;
   if !"ch2-parts-round-2-backstory" then goto index 4;
   goto index 7;
   goto "ch2-lambda-round-2-parts1";
   goto index 7;
   goto "ch2-bert-secret-lambda-intro";
   if "ch2-cutseen-bert-message" then goto index 9;
   goto index 10;
   if !"ch2-parts-round-3-backstory" then goto script "ch2-bert-message-lambda-intro";
   if "ch2-cutseen-last-parts-done" then goto index 12;
   goto index 13;
   if !"ch2-parts-round-4-backstory" then goto script "ch2-lambda-round-4";
   if "ch2-toot-done" then goto script "command-man-normal-convo";
   goto "ch2-toot-check";
}

"command-parts-keyboard" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-keyboard" then goto index 8;
   if "ch2-carrying-keyboard" then goto index 6;
   show serial_dialog "ch2-describe-keyboard";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-mouse" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-mouse" then goto index 8;
   if "ch2-carrying-mouse" then goto index 6;
   show serial_dialog "ch2-describe-mouse";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-harddrive" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-harddrive" then goto index 9;
   if "ch2-carrying-harddrive" then goto index 7;
   show serial_dialog "ch2-describe-harddrive";
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-plate" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-plate" then goto index 9;
   if "ch2-carrying-plate" then goto index 5;
   show serial_dialog "ch2-describe-plate";
   if !"ch2-carrying-needle" then goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-needle" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-needle" then goto index 9;
   if "ch2-carrying-needle" then goto index 5;
   show serial_dialog "ch2-describe-needle";
   if !"ch2-carrying-plate" then goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-ramchips" {
   if "ch2-storyflag-round" < 2 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-ramchips" then goto index 8;
   if "ch2-carrying-ramchips" then goto index 6;
   show serial_dialog "ch2-describe-ramchips";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-clock" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-clock" then goto index 8;
   if "ch2-carrying-clock" then goto index 6;
   show serial_dialog "ch2-describe-clock";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-cpu" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead";
   show serial_dialog "spacer";
   if "ch2-installed-cpu" then goto index 8;
   if "ch2-carrying-cpu" then goto index 6;
   show serial_dialog "ch2-describe-cpu";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   goto index 9;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-goldfish" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-goldfish" then goto index 9;
   if "ch2-carrying-goldfish" then goto index 5;
   show serial_dialog "ch2-describe-goldfish";
   if !"ch2-carrying-abacus" then goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"command-parts-abacus" {
   if "ch2-storyflag-round" < 3 then goto script "command-parts-ahead-confused";
   show serial_dialog "spacer";
   if "ch2-installed-abacus" then goto index 9;
   if "ch2-carrying-abacus" then goto index 5;
   show serial_dialog "ch2-describe-abacus";
   if !"ch2-carrying-goldfish" then goto index 8;
   show serial_dialog "command-parts.mgs-XX";
   goto index 10;
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "command-parts.mgs-XX";
   show serial_dialog "lambda-over";
}

"warp-common" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
}

"warp-ch2-castle-exterior" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-outside";
}

"warp-ch2-1" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-1";
   goto index 16;
   load map "ch2-castle-1-doorless";
}

"warp-ch2-11" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-11";
   goto index 16;
   load map "ch2-castle-11-doorless";
}

"warp-ch2-12" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-12";
   goto index 16;
   load map "ch2-castle-12-doorless";
}

"warp-ch2-13" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-13";
   goto index 16;
   load map "ch2-castle-13-doorless";
}

"warp-ch2-14" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 16;
   if "ch2-king-rescued" then goto index 16;
   load map "ch2-castle-14";
   goto index 17;
   load map "ch2-castle-14-doorless";
}

"warp-ch2-21" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-21";
   goto index 16;
   load map "ch2-castle-21-doorless";
}

"warp-ch2-22" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-22";
   goto index 16;
   load map "ch2-castle-22-doorless";
}

"warp-ch2-23" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-23";
   goto index 16;
   load map "ch2-castle-23-doorless";
}

"warp-ch2-31" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-31";
   goto index 16;
   load map "ch2-castle-31-doorless";
}

"warp-ch2-32" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 15;
   load map "ch2-castle-32";
   goto index 16;
   load map "ch2-castle-32-doorless";
}

"warp-ch2-33" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-33";
}

"warp-ch2-34" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-34";
}

"warp-ch2-99" {
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   if !debug_mode then goto index 4;
   goto index 5;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-castle-99";
}

"warp-ch2-town-destination-check" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
}

"warp-ch2-town" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-town";
}

"warp-ch2-bakery" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bakery";
}

"warp-ch2-greenhouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-greenhouse";
}

"warp-ch2-wopr" {
   if "wopr-backdoor-found" then goto index 4;
   if debug_mode then goto index 4;
   goto "warp-fail";
   goto index 20;
   if !"ch2-ring-zero-enabled-in-castle" then goto index 6;
   goto index 7;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 9;
   if !debug_mode then goto index 11;
   goto index 12;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "woprhouse";
}

"warp-ch2-library" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-lodge";
}

"warp-ch2-rtfmroom" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-lodge-rtfm";
}

"warp-ch2-magehouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-magehouse";
}

"warp-ch2-bobsclub" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bobsclub";
}

"warp-ch2-bobsclub-basement" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-bobsclub-basement";
}

"warp-ch2-oldcouplehouse" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-oldcouplehouse";
}

"warp-ch2-smithfamily" {
   if !"ch2-ring-zero-enabled-in-castle" then goto index 2;
   goto index 3;
   if !debug_mode then goto script "warp-ch2-town-check-fail-message";
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 5;
   if !debug_mode then goto index 7;
   goto index 8;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   load map "ch2-smithfamily";
}

"on_load-main_menu" {
   "current-chapter" = 0;
   command "colors" = "command-colors";
   command "colors + bg" = "command-colors-bg";
   command "colors + bold" = "command-colors-bold";
   command "colors + dim" = "command-colors-dim";
   if debug_mode then goto index 7;
   goto index 97;
   command "debug" = "debug";
   command "hub" = "debug-hub";
   command "honk" = "system_bell";
   command "bob" = "debug-bob";
   command "bob2" = "debug-bob2";
   command "bob3" = "debug-bob3";
   command "simon" = "debug-menu-simon";
   command "king" = "debug-king";
   command "ch2" = "menu-chapter_select-2";
   command "rtfm" = "command-rtfm";
   command "buffer" + "test" = "debug-buffertest";
   command "boot" = "ch2-bootup";
   command "post" = "debug-post";
   command "skip" + "1" = "debug-jump-to-round1";
   command "skip" + "2" = "debug-jump-to-round2";
   command "skip" + "3" = "debug-jump-to-round3";
   command "skip" + "4" = "debug-jump-to-round4";
   command "warp" = "command-warp";
   command "warp" fail = "warp-fail";
   command "man" + "warp" = "man-warp";
   command "warp" + "1" = "warp-ch2-1";
   command "warp" + "11" = "warp-ch2-11";
   command "warp" + "12" = "warp-ch2-12";
   command "warp" + "13" = "warp-ch2-13";
   command "warp" + "14" = "warp-ch2-14";
   command "warp" + "21" = "warp-ch2-21";
   command "warp" + "22" = "warp-ch2-22";
   command "warp" + "23" = "warp-ch2-23";
   command "warp" + "31" = "warp-ch2-31";
   command "warp" + "32" = "warp-ch2-32";
   command "warp" + "33" = "warp-ch2-33";
   command "warp" + "34" = "warp-ch2-34";
   command "warp" + "99" = "warp-ch2-99";
   command "warp" + "castle exterior" = "warp-ch2-castle-exterior";
   command "warp" + "castle entrance" = "warp-ch2-1";
   command "warp" + "castle hallway front" = "warp-ch2-11";
   command "warp" + "castle hallway back" = "warp-ch2-12";
   command "warp" + "castle throne room" = "warp-ch2-13";
   command "warp" + "throne room" = "warp-ch2-13";
   command "warp" + "castle bedroom" = "warp-ch2-14";
   command "warp" + "gibson's bedroom" = "warp-ch2-14";
   command "warp" + "gibsons bedroom" = "warp-ch2-14";
   command "warp" + "gibson bedroom" = "warp-ch2-14";
   command "warp" + "king gibson's bedroom" = "warp-ch2-14";
   command "warp" + "king gibsons bedroom" = "warp-ch2-14";
   command "warp" + "king gibson bedroom" = "warp-ch2-14";
   command "warp" + "workshop" = "warp-ch2-21";
   command "warp" + "server room" = "warp-ch2-22";
   command "warp" + "power plant" = "warp-ch2-23";
   command "warp" + "grand hall" = "warp-ch2-31";
   command "warp" + "castle hall" = "warp-ch2-31";
   command "warp" + "castle kitchen" = "warp-ch2-32";
   command "warp" + "hydroponics" = "warp-ch2-33";
   command "warp" + "castle hydroponics" = "warp-ch2-33";
   command "warp" + "hydroponics room" = "warp-ch2-33";
   command "warp" + "castle pantry" = "warp-ch2-34";
   command "warp" + "secret lab" = "warp-ch2-99";
   command "warp" + "town" = "warp-ch2-town";
   command "warp" + "bakery" = "warp-ch2-bakery";
   command "warp" + "greenhouse" = "warp-ch2-greenhouse";
   command "warp" + "wopr room" = "warp-ch2-wopr";
   command "warp" + "wopr" = "warp-ch2-wopr";
   command "warp" + "library" = "warp-ch2-library";
   command "warp" + "lodge" = "warp-ch2-library";
   command "warp" + "inner sanctum" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm room" = "warp-ch2-rtfmroom";
   command "warp" + "rtfm" = "warp-ch2-rtfmroom";
   command "warp" + "home" = "warp-ch2-magehouse";
   command "warp" + "my home" = "warp-ch2-magehouse";
   command "warp" + "my house" = "warp-ch2-magehouse";
   command "warp" + "bobsclub" = "warp-ch2-bobsclub";
   command "warp" + "bobs club" = "warp-ch2-bobsclub";
   command "warp" + "bob's club" = "warp-ch2-bobsclub";
   command "warp" + "bobs club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "bob's club basement" = "warp-ch2-bobsclub-basement";
   command "warp" + "beatrice's house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrices house" = "warp-ch2-oldcouplehouse";
   command "warp" + "beatrice house" = "warp-ch2-oldcouplehouse";
   command "warp" + "bea" = "warp-ch2-oldcouplehouse";
   command "warp" + "smith's house" = "warp-ch2-smithfamily";
   command "warp" + "smiths house" = "warp-ch2-smithfamily";
   command "warp" + "smith house" = "warp-ch2-smithfamily";
   command "warp" + "smith" = "warp-ch2-smithfamily";
   command "storyflag" = "ch2-debug-storyflag";
   command "storyflag" + "0" = "debug-map-flags-for-round0";
   command "storyflag" + "1" = "debug-map-flags-for-round1";
   command "storyflag" + "2" = "debug-map-flags-for-round2";
   command "storyflag" + "3" = "debug-map-flags-for-round3";
   command "storyflag" + "4" = "debug-map-flags-for-round4";
   command "storyflag" + "5" = "debug-map-flags-for-round5";
}

"debug-post" {
   "ch2-wizard-backstory" = true;
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-cutseen-birthday" = true;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 1;
   "ch2-map-monitor" = false;
   "ch2-carrying-monitor" = true;
   command "look" + "monitor" = "look-monitor";
   "ch2-cactuscooler-delivered" = true;
   "ch2-map-cactuscooler-castle" = false;
   "ch2-map-heatsink" = false;
   "ch2-carrying-heatsink" = true;
   command "look" + "heat sink" = "look-heatsink";
   "ch2-map-powersupply" = false;
   "ch2-carrying-powersupply" = true;
   command "look" + "power supply" = "look-powersupply";
   "ch2-carrying-heatsink" = false;
   "ch2-installed-heatsink" = true;
   delete command "look" + "heat sink";
   "ch2-carrying-powersupply" = false;
   "ch2-installed-powersupply" = true;
   delete command "look" + "power supply";
   "ch2-carrying-monitor" = false;
   "ch2-installed-monitor" = true;
   delete command "look" + "monitor";
   "ch2-cutseen-bert-secret" = true;
   "ch2-lambda-bert-backstory" = true;
   "ch2-parts-round-2-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = true;
   "ch2-map-mouse" = true;
   "ch2-map-plate" = true;
   "ch2-map-needle" = true;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 2;
   "ch2-map-keyboard" = false;
   "ch2-carrying-keyboard" = true;
   command "look" + "keyboard" = "look-keyboard";
   "ch2-map-mouse" = false;
   "ch2-carrying-mouse" = true;
   command "look" + "mouse" = "look-mouse";
   "ch2-map-needle" = false;
   "ch2-carrying-needle" = true;
   if "ch2-carrying-plate" then goto index 113;
   goto index 114;
   "ch2-map-solder" = true;
   command "look" + "needle" = "look-needle";
   "ch2-map-plate" = false;
   "ch2-carrying-plate" = true;
   if "ch2-carrying-needle" then goto index 119;
   goto index 120;
   "ch2-map-solder" = true;
   command "look" + "plate" = "look-plate";
   "ch2-carrying-plate" = false;
   "ch2-installed-plate" = true;
   delete command "look" + "plate";
   "ch2-carrying-needle" = false;
   "ch2-installed-needle" = true;
   delete command "look" + "needle";
   "ch2-map-solder" = false;
   "ch2-carrying-harddrive" = true;
   command "look" + "hard drive" = "look-harddrive";
   "ch2-carrying-harddrive" = false;
   "ch2-installed-harddrive" = true;
   delete command "look" + "hard drive";
   "ch2-carrying-keyboard" = false;
   "ch2-installed-keyboard" = true;
   delete command "look" + "keyboard";
   "ch2-carrying-mouse" = false;
   "ch2-installed-mouse" = true;
   delete command "look" + "mouse";
   "ch2-cutseen-bert-message" = true;
   "ch2-parts-round-3-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = true;
   "ch2-map-goldfish" = true;
   "ch2-map-abacus" = true;
   "ch2-map-ramchips" = true;
   "ch2-map-mainframeos" = false;
   "ch2-storyflag-round" = 3;
   "ch2-map-ramchips" = false;
   "ch2-map-seamoss" = false;
   "ch2-carrying-ramchips" = true;
   command "look" + "ram chips" = "look-ramchips";
   command "look" + "ram" = "look-ramchips";
   "ch2-map-clock" = false;
   "ch2-carrying-clock" = true;
   command "look" + "clock" = "look-clock";
   "ch2-map-goldfish" = false;
   "ch2-carrying-goldfish" = true;
   if "ch2-carrying-abacus" then goto index 166;
   goto index 167;
   "ch2-map-solder" = true;
   command "look" + "goldfish" = "look-goldfish";
   "ch2-map-abacus" = false;
   "ch2-carrying-abacus" = true;
   if "ch2-carrying-goldfish" then goto index 172;
   goto index 173;
   "ch2-map-solder" = true;
   command "look" + "abacus" = "look-abacus";
   "ch2-carrying-goldfish" = false;
   "ch2-installed-goldfish" = true;
   delete command "look" + "goldfish";
   "ch2-carrying-abacus" = false;
   "ch2-installed-abacus" = true;
   delete command "look" + "abacus";
   "ch2-map-solder" = false;
   "ch2-carrying-cpu" = true;
   command "look" + "cpu" = "look-cpu";
   "ch2-carrying-ramchips" = false;
   "ch2-installed-ramchips" = true;
   delete command "look" + "ram chips";
   delete command "look" + "ram";
   "ch2-carrying-clock" = false;
   "ch2-installed-clock" = true;
   delete command "look" + "clock";
   "ch2-carrying-cpu" = false;
   "ch2-installed-cpu" = true;
   delete command "look" + "cpu";
   "ch2-cutseen-last-parts-done" = true;
   "ch2-warp-granted" = true;
   "ch2-parts-round-4-backstory" = true;
   "ch2-map-monitor" = false;
   "ch2-map-heatsink" = false;
   "ch2-map-powersupply" = false;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = true;
   "ch2-storyflag-round" = 4;
   "ch2-seen-room-99" = true;
   "ch2-map-mainframeos" = false;
   "ch2-carrying-mainframeos" = true;
   "ch2-cutseen-castle99" = true;
   "ch2-carrying-mainframeos" = false;
   "ch2-carrying-mainframeos" = false;
   "ch2-installed-mainframeos" = true;
   delete command "look" + "mainframeos";
   "ch2-ring-zero-enabled-in-castle" = true;
   "ch2-storyflag-round" = 5;
   "credits-from-menu" = false;
   warp_state = "ch2-ending";
   load map "ch2-castle-outside";
}

"debug-menu-simon" {
   serial_control = true;
   "ch2-has-artifact" = true;
   hex_control = true;
   "current-chapter" = 2;
   "ch2-storyflag-round" = 1;
   "ch2-has-map" = true;
   "ch2-has-artifact" = true;
   command "man" + "map" = "man-map";
   command "map" = "command-map";
   command "man" + "parts" = "man-parts";
   command "parts" = "command-parts";
   command "parts" fail = "command-parts-fail";
   command "parts" + "MONITOR" = "command-parts-monitor";
   command "parts" + "HEAT SINK" = "command-parts-heatsink";
   command "parts" + "HEATSINK" = "command-parts-heatsink";
   command "parts" + "POWER SUPPLY" = "command-parts-powersupply";
   command "parts" + "POWERSUPPLY" = "command-parts-powersupply";
   command "parts" + "KEYBOARD" = "command-parts-keyboard";
   command "parts" + "MOUSE" = "command-parts-mouse";
   command "parts" + "HARD DRIVE" = "command-parts-harddrive";
   command "parts" + "HARDDRIVE" = "command-parts-harddrive";
   command "parts" + "HARD DISK" = "command-parts-harddrive";
   command "parts" + "HARDDISK" = "command-parts-harddrive";
   command "parts" + "HDD" = "command-parts-harddrive";
   command "parts" + "PLATE" = "command-parts-plate";
   command "parts" + "DINNER PLATE" = "command-parts-plate";
   command "parts" + "NEEDLE" = "command-parts-needle";
   command "parts" + "PHONOGRAPH NEEDLE" = "command-parts-needle";
   command "parts" + "RAM CHIPS" = "command-parts-ramchips";
   command "parts" + "RAMCHIPS" = "command-parts-ramchips";
   command "parts" + "RAM" = "command-parts-ramchips";
   command "parts" + "CLOCK" = "command-parts-clock";
   command "parts" + "CPU" = "command-parts-cpu";
   command "parts" + "GOLDFISH" = "command-parts-goldfish";
   command "parts" + "ABACUS" = "command-parts-abacus";
   command "parts" + "MAINFRAME OS" = "command-parts-os";
   command "parts" + "MAINFRAMEOS" = "command-parts-os";
   command "parts" + "OS" = "command-parts-os";
   command "parts" + "OPERATINGSYSTEM" = "command-parts-os";
   "ch2-map-monitor" = true;
   "ch2-map-heatsink" = true;
   "ch2-map-powersupply" = true;
   "ch2-map-keyboard" = false;
   "ch2-map-mouse" = false;
   "ch2-map-plate" = false;
   "ch2-map-needle" = false;
   "ch2-map-clock" = false;
   "ch2-map-goldfish" = false;
   "ch2-map-abacus" = false;
   "ch2-map-ramchips" = false;
   "ch2-map-mainframeos" = false;
   "ch2-toot-done" = true;
   "ch2-storyflag-round" = 2;
   if "ch2-wait-for-hat-touch" then goto script "ch2-wait-for-hat-touch-message";
   if !"ch2-ring-zero-enabled-in-castle" then goto index 55;
   if !debug_mode then goto index 57;
   goto index 58;
   if "ch2-in-room" == 0 then goto script "warp-ch2-town-check-fail-message";
   "ch2-in-room" = 0;
   "current-chapter" = 2;
   player_control = false;
   serial_control = false;
   warp_state = "warping";
   player on_tick = "spin-quickly";
   camera fade out -> #000000 over 500ms;
   if "ch2-storyflag-round" >= 5 then goto index 68;
   load map "ch2-castle-31";
   goto index 69;
   load map "ch2-castle-31-doorless";
}

"system_bell" {
   show serial_dialog "main-menu.mgs-XX";
}

"main_menu" {
   player on_tick = "null_script";
   show dialog "main-menu.mgs-XX";
}

"menu-credits-choice" {
   show dialog "main-menu.mgs-XX";
}

"menu-bling-mode" {
   show dialog "main-menu.mgs-XX";
}

"menu-bling-dc801-showcase" {
   show dialog "main-menu.mgs-XX";
}

"menu-play_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-erase_save" {
   show dialog "main-menu.mgs-XX";
}

"menu-load_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-new_game" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-q" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-confirm" {
   show dialog "main-menu.mgs-XX";
}

"menu-player-name-random" {
   "__TEMP_0" ?= 20;
   if "__TEMP_0" == 0 then goto label if_RNG_5178;
   if "__TEMP_0" == 1 then goto label if_RNG_5179;
   if "__TEMP_0" == 2 then goto label if_RNG_5180;
   if "__TEMP_0" == 3 then goto label if_RNG_5181;
   if "__TEMP_0" == 4 then goto label if_RNG_5182;
   if "__TEMP_0" == 5 then goto label if_RNG_5183;
   if "__TEMP_0" == 6 then goto label if_RNG_5184;
   if "__TEMP_0" == 7 then goto label if_RNG_5185;
   if "__TEMP_0" == 8 then goto label if_RNG_5186;
   if "__TEMP_0" == 9 then goto label if_RNG_5187;
   if "__TEMP_0" == 10 then goto label if_RNG_5188;
   if "__TEMP_0" == 11 then goto label if_RNG_5189;
   if "__TEMP_0" == 12 then goto label if_RNG_5190;
   if "__TEMP_0" == 13 then goto label if_RNG_5191;
   if "__TEMP_0" == 14 then goto label if_RNG_5192;
   if "__TEMP_0" == 15 then goto label if_RNG_5193;
   if "__TEMP_0" == 16 then goto label if_RNG_5194;
   if "__TEMP_0" == 17 then goto label if_RNG_5195;
   if "__TEMP_0" == 18 then goto label if_RNG_5196;
   if "__TEMP_0" == 19 then goto label if_RNG_5197;
   player name = "Bub";
   goto index 60;
   player name = "XDDCC";
   goto index 60;
   player name = "VeeVee";
   goto index 60;
   player name = "Tom Honks";
   goto index 60;
   player name = "Spy";
   goto index 60;
   player name = "Steamed Hams";
   goto index 60;
   player name = "Roxas";
   goto index 60;
   player name = "Squall";
   goto index 60;
   player name = "Cecil";
   goto index 60;
   player name = "Zidane";
   goto index 60;
   player name = "Kremit";
   goto index 60;
   player name = "Terra";
   goto index 60;
   player name = "Crono";
   goto index 60;
   player name = "Ash";
   goto index 60;
   player name = "Cloud";
   goto index 60;
   player name = "Farnsworth";
   goto index 60;
   player name = "Frisk";
   goto index 60;
   player name = "Tidus";
   goto index 60;
   player name = "Buster";
   goto index 60;
   player name = "Chara";
   show dialog "main-menu.mgs-XX";
}

"menu-chapter_select-q" {
   "ch1-storyflags-tally" = 0;
   if "storyflag-catwork" then goto index 3;
   goto index 4;
   "ch1-storyflags-tally" += 1;
   if "storyflag-shepherd" then goto index 6;
   goto index 7;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bender" then goto index 9;
   goto index 10;
   "ch1-storyflags-tally" += 1;
   if "storyflag-baker" then goto index 12;
   goto index 13;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bobmoss" then goto index 15;
   goto index 16;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea1" then goto index 18;
   goto index 19;
   "ch1-storyflags-tally" += 1;
   if "storyflag-trekkie" then goto index 21;
   goto index 22;
   "ch1-storyflags-tally" += 1;
   if "storyflag-sportskid" then goto index 24;
   goto index 25;
   "ch1-storyflags-tally" += 1;
   if "storyflag-verthandi" then goto index 27;
   goto index 28;
   "ch1-storyflags-tally" += 1;
   if "storyflag-bea2" then goto index 30;
   goto index 31;
   "ch1-storyflags-tally" += 1;
   if "storyflag-rake" then goto index 33;
   goto index 34;
   "ch1-storyflags-tally" += 1;
   "ch2-storyflags-tally" = 0;
   if "ch2-installed-heatsink" then goto index 37;
   goto index 38;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-powersupply" then goto index 40;
   goto index 41;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-monitor" then goto index 43;
   goto index 44;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-harddrive" then goto index 46;
   goto index 47;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-keyboard" then goto index 49;
   goto index 50;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mouse" then goto index 52;
   goto index 53;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-ramchips" then goto index 55;
   goto index 56;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-clock" then goto index 58;
   goto index 59;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-cpu" then goto index 61;
   goto index 62;
   "ch2-storyflags-tally" += 1;
   if "ch2-installed-mainframeos" then goto index 64;
   goto index 65;
   "ch2-storyflags-tally" += 1;
   show dialog "main-menu.mgs-XX";
}

"menu-chapter_select-2-check" {
   if "ch1_finished" then goto index 5;
   if "warned_ch1_incomplete" then goto index 5;
   "warned_ch1_incomplete" = true;
   show dialog "main-menu.mgs-XX";
   goto index 6;
   goto "menu-chapter_select-2";
}

"menu-save_game" {
   show dialog "main-menu.mgs-XX";
}